(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[27],{YC4Z:function(e,r,t){"use strict";t.r(r),t.d(r,"art_puzzle01",(function(){return c}));var n=t("fGyu"),o=t("eVsZ"),a=t.n(o),i=t("la2L");function s(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var c={key:"puzzle-01",title:"Puzzle 01",description:"Solve the puzzle and unlock the final art.\nDirections: Use arrow keys to move the circle towards the exit",artist:"Rick Love",getTokenDescription:function(e){return null},renderArt:function(e,r){var t=function(e){switch(e){case"up":return"down";case"down":return"up";case"left":return"right";case"right":return"left";default:return"up"}},o={board:[],boardVisits:[],moveSequence:[],player:{},moveIndex:0,gameOverTime:0},l=function(e,r){var t=Object.assign({},e);return"up"===r&&t.y--,"down"===r&&t.y++,"left"===r&&t.x--,"right"===r&&t.x++,t};return new a.a((function(e){e.setup=function(){e.createCanvas(350,350),e.background(0);var s=Object(i.a)(r).random,u=o.board,d=o.boardVisits,f={renderSeed:""+s(),item:"exit",pos:{x:Math.floor(1+14*s()),y:Math.floor(1+14*s())}};o.player={renderSeed:""+s(),item:"player",pos:Object.assign({},f.pos),renderPos:{x:0,y:0}};var v=o.player;u.push(f);for(var p=function(){return{direction:(e=s(),e>.75?"up":e>.5?"down":e>.25?"left":"right"),distance:Math.floor(0+12*s())};var e},y=4+Math.floor(12*s()),h=Object(n.a)(new Array(y)).map((function(e){return""+s()})),m=function(){return h[Math.floor(s()*y)]},b={distance:0,direction:"unknown"},g=function(e){for(var r=e.distance,n=Object.assign({},v.pos),a=e.direction,i=function(){var e=l(n,a),t=l(n,a);if(e.x<=0||e.x>=15||e.y<=0||e.y>=15)return{v:null};var o=u.find((function(r){return"player"!==r.item&&r.pos.x===e.x&&r.pos.y===e.y}));if("wall"===(null==o?void 0:o.item))return{v:null};var i=u.find((function(e){return"player"!==e.item&&e.pos.x===t.x&&e.pos.y===t.y}));if("wall"===(null==i?void 0:i.item))return{v:null};r--,n=Object.assign({},e)};r>0;){var s=i();if("object"==typeof s)return s.v}if(o.moveSequence.find((function(e){return e.endPosition.x===n.x||e.endPosition.y===n.y})))return null;var c=e.distance-r;return{direction:t(e.direction),distance:c,endPosition:Object.assign({},v.pos),startPosition:n}},x=0;x<16;x++)u.push({renderSeed:m(),item:"wall",pos:{x:x,y:0}}),u.push({renderSeed:m(),item:"wall",pos:{x:x,y:15}}),u.push({renderSeed:m(),item:"wall",pos:{x:0,y:x}}),u.push({renderSeed:m(),item:"wall",pos:{x:15,y:x}});for(var M=0;M<20;M++){for(var P=p();P.direction===b.direction||P.direction===t(b.direction);)P=p();var w=g(P);if(w&&!(w.distance<=0)){if(o.moveSequence.length>0){var S=l(v.pos,t(P.direction));u.push({item:"wall",pos:S,renderSeed:m()})}v.pos=w.startPosition,o.moveSequence.unshift(w),b=w;var O=w.startPosition;for(o.boardVisits.push({pos:Object.assign({},O)});O.x!==w.endPosition.x||O.y!==w.endPosition.y;)O=l(O,w.direction),o.boardVisits.push({pos:Object.assign({},O)});console.log("boardVisits",{actualReverseMove:w,boardVisits:Object(n.a)(o.boardVisits)})}}for(var k=function(e){for(var r=function(r){var t=!!d.find((function(t){return t.pos.x===e&&t.pos.y===r})),n=!!u.find((function(t){return t.pos.x===e&&t.pos.y===r}));if(t||n)return"continue";s()>.75&&u.push({item:"wall",pos:{x:e,y:r},renderSeed:m()})},t=0;t<16;t++)r(t)},R=0;R<16;R++)k(R);v.renderPos=a(v.pos),o.board.forEach((function(e){return c(e)}))};var a=function(e){return{x:15+20*e.x,y:15+20*e.y}},c=function(r){var t,n=Object(i.a)(r.renderSeed).random,s={a:1+Math.floor(57*n()),b:1+Math.floor(213*n()),c:1+Math.floor(115*n())},l=s.a,c=s.b,d=s.c,f={cr:Math.floor(25+230*n()),cg:Math.floor(25+230*n()),cb:Math.floor(25+230*n()),ca:Math.floor(25+125*n())},v=f.cr,p=f.cg,y=f.cb,h=f.ca,m=null!==(t=r.renderPos)&&void 0!==t?t:a(r.pos),b=m.x,g=m.y;e.fill(v,p,y,h),e.stroke(v,p,y,255),e.strokeWeight(1);var x=o.moveIndex>=o.moveSequence.length&&!o.player.targetRenderPos,M=u/100,P=Math.abs(Math.floor(350*Math.sin((u+l*d)/1e3)));if("player"!==r.item){if("exit"===r.item){if(x){e.fill(v,p,y,Math.floor(25*Math.sin((u+l*d)/100)+35)),e.stroke(0,0,0,10);for(var w=l,S=d,O=0;O<32;O++)e.translate(S,S),e.rotate(w+M),e.rect(b+5,g+5,d*b,d*g),e.rotate(-w-M),e.translate(-S,-S),w+=c,S+=d,S%=125;return}return e.fill(255,255,255),e.rect(b,g,20,20),e.fill(0,0,0),void e.rect(b+5,g+5,10,10)}if("wall-broken"!==r.item){if(!x){e.fill(v,p,y,5);for(var k=.015*(4+o.moveSequence.length-o.moveIndex),R=n(),A=0;A<4;A++)e.stroke(v,p,y,Math.floor(255*(A+1)/5)),e.rect(b+20*(0+k*Math.cos(2*Math.PI*((R+A)/4+u/100))),g+20*(0+k*Math.sin(2*Math.PI*((R+A)/4+u/100))),20,20)}}else{if(!x)return;e.fill(v,p,y,Math.floor(25*Math.sin((u+l*d)/100)+25)),e.stroke(0,0,0,10);for(var _=l,I=d%175,j=0;j<8;j++)e.translate(-I,-I),e.rotate(_+M),e.rect(b,g,20*b,20*g),e.rotate(-_-M),e.translate(I,I),_+=c}}else{if(x){e.stroke(0,0,0,10);for(var D=u,E=0;E<16;E++){e.fill(v,p,(y+E*d)%255,Math.floor(25*Math.sin((u+l*d)/100)+35));e.circle(200-l/2+0%l,200-c/2+0%c,270-5*E%d),e.translate(P,P),e.rotate(.001*(l+c+d+D)),e.translate(-P,-P),D++}return}e.fill(v,p,y,30);for(var q=.01*(4+o.moveSequence.length-o.moveIndex),L=0;L<4;L++)e.stroke(v,p,y,Math.floor(255*(L+1)/5)),e.circle(b+20*(.5+q*Math.cos(2*Math.PI*(L/4+u/100))),g+20*(.5+q*Math.sin(2*Math.PI*(L/4+u/100))),20)}},u=0;e.draw=function(){e.background(0);if(o.board.filter((function(e){return"wall-broken"===e.item})).forEach((function(e){return c(e)})),o.board.filter((function(e){return"wall-broken"!==e.item})).forEach((function(e){return c(e)})),c(o.player),o.player.activeMove&&o.player.renderPos&&o.player.targetRenderPos)for(var r=0;r<3;r++){if(o.player.renderPos=l(o.player.renderPos,o.player.activeMove.direction),Math.abs(o.player.renderPos.x-o.player.targetRenderPos.x)+Math.abs(o.player.renderPos.y-o.player.targetRenderPos.y)<1){o.player.renderPos=o.player.targetRenderPos;break}}var t=o.player.activeMove,n=o.player.renderPos,a=o.player.targetRenderPos;if(t&&n&&a&&n.x===a.x&&n.y===a.y){console.log("Reached",{activeMove:t,pPos:n,tPos:a}),o.player.targetRenderPos=void 0;for(var i,d=function(){var e=i.value,r=l(e.endPosition,e.direction),t=o.board.find((function(e){return e.pos.x===r.x&&e.pos.y===r.y}));if(!t)return"continue";t.item="wall-broken"},f=s(o.moveSequence.slice(0,o.moveIndex));!(i=f()).done;)d()}var v=Date.now()-o.gameOverTime;v<3e3&&(console.log("Game over Fade",{gameOverTime:o.gameOverTime,timeSinceGameOver:v}),e.fill(0,0,0,255*(3e3-v)/3e3),e.noStroke(),e.rect(0,0,350,350)),u++},e.keyPressed=function(){var r=e.key,t=e.keyCode,n=function(){switch(r){case"w":return"up";case"a":return"left";case"s":return"down";case"d":return"right"}switch(t){case e.UP_ARROW:return"up";case e.LEFT_ARROW:return"left";case e.DOWN_ARROW:return"down";case e.RIGHT_ARROW:return"right";default:return null}}();if(n){var i=o.moveSequence[o.moveIndex];if(i){if(i.direction!==n)return o.gameOverTime=Date.now(),o.moveIndex=0,o.player.activeMove=void 0,o.player.renderPos=void 0,o.player.targetRenderPos=void 0,void o.board.filter((function(e){return"wall-broken"===e.item})).forEach((function(e){e.item="wall"}));o.player.activeMove=i,o.player.renderPos=a(i.startPosition),o.player.targetRenderPos=a(i.endPosition),o.moveIndex++}}}}),e)}}}}]);
//# sourceMappingURL=27-46a628339871bb21a3c6.js.map