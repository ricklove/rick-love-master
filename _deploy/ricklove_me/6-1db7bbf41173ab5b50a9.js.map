{"version":3,"sources":["webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js","webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/browser/fetchFile.js","webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/index.js","webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/browser/defaultOptions.js","webpack:///D:/Projects/rick-love-master/code/art/div-host.tsx","webpack:///D:/Projects/rick-love-master/code/art/canvas-video-recording/canvas-video-recorder.tsx","webpack:///D:/Projects/rick-love-master/code/art/art-index.ts","webpack:///D:/Projects/rick-love-master/code/art/art-gallery.tsx","webpack:///D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/utils/log.js","webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/browser/index.js","webpack:///D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///D:/Projects/rick-love-master/node_modules/resolve-url/resolve-url.js","webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/createFFmpeg.js","webpack:///D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/utils/parseArgs.js","webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/config.js","webpack:///D:/Projects/rick-love-master/node_modules/@ffmpeg/ffmpeg/src/utils/parseProgress.js"],"names":["_regeneratorRuntime","_asyncToGenerator","resolveURL","log","toBlobURL","_ref","mark","_callee","url","mimeType","buf","blob","blobURL","wrap","_context","prev","next","concat","fetch","sent","arrayBuffer","byteLength","Blob","type","URL","createObjectURL","abrupt","stop","_x","_x2","apply","this","arguments","module","exports","_ref3","_callee2","_ref2","_corePath","coreRemotePath","corePath","wasmPath","workerPath","_context2","Error","replace","createFFmpegCore","Promise","resolve","script","document","createElement","src","addEventListener","eventHandler","removeEventListener","getElementsByTagName","appendChild","_x3","readFromBlobOrFile","reject","fileReader","FileReader","onload","result","onerror","code","target","error","readAsArrayBuffer","_data","data","res","Uint8Array","test","atob","split","map","c","charCodeAt","File","createFFmpeg","fetchFile","devDependencies","process","FFMPEG_ENV","substring","DivHost","props","hostElementRef","useRef","HostElement","Component","style","width","height","ref","useEffect","current","console","renderArt","innerHTML","remove","CanvasVideoRecorderControl","useState","mode","setMode","useAutoLoadingError","loading","doWork","background","onClick","stopIfObsolete","a","recorder","prepareTarget","framesPerSecond","quality","onPrepareTarget","start","getRecorder","completeToDownloadFile","artIndex","key","title","imageUrl","undefined","load","art_fluidSnakeGame","art_exampleFluidSimulator","art_flyingColors","art_gpu_01","art_gears","art_puzzle01","art_121","art_circles","art_layersOfTheOnionsSoul","art_nftAdventure_nftTextAdventure","ArtGallery","_settings","timeMsLost","timeMs","isRecording","workingCanvas","workingContext","blobs","timeProvider","requestPrepareTarget","beginIncreasingTime","completeToBlob","completeToDataUrl","addFrame","queryParts","location","search","substr","artKey","find","x","startsWith","pathname","match","newTokenId","RegExp","showCamera","includes","art","recorderRef","Date","now","isPaused","settings","body","append","getContext","timeMsPerFrame","setTimeout","ffmpeg","entries","i","buffer","FS","padStart","run","videoBlob","err","filename","delay","dataUrl","link","download","href","click","canvas","cvs","ctx","drawImage","toBlob","b","push","getSettings","getMode","setTargetReady","isWaitingForFrame","setRenderId","showNavigation","tokenId","setTokenId","isFullScreen","setIsFullScreen","customSize","setCustomSize","tokenDescription","setTokenDescription","debounce","useDebounce","artworkItem","changeTokenId","value","getTokenDescription","ArtComponent","cacheRenderArtwork","kind","hostElement","openSea","hash","ArtworkComponentRef","artRenderer","s","walletAddress","setWalletAddress","canSetSeed","View_Panel","View_Form","Fragment","paddingBottom","Button_FormAction","onPress","window","onChange","onWalletAddress","Text_FormTitle","theme","text_formTitle","whiteSpace","artist","position","left","right","top","bottom","maxWidth","maxHeight","fontFamily","fontSize","lineHeight","textAlign","color","opacity","padding","description","wordBreak","seed","marginTop","ArtWorkGenerator","tokenIdRaw","setArt","ArtInfoComponent","ReserveButton","reserve","encodeURIComponent","open","borderRadius","SeedController","display","flexDirection","flexWrap","alignItems","onInput","currentTarget","label","ConnectWalletButton","setConnected","ethereum","connect","request","method","accounts","account","obj","Object","defineProperty","enumerable","configurable","writable","logging","customLogger","setLogging","_logging","setCustomLogger","logger","message","defaultOptions","getCreateFFmpegCore","asyncGeneratorStep","gen","_next","_throw","arg","info","done","then","fn","self","args","numUrls","length","base","head","insertBefore","firstChild","resolved","index","removeChild","_toConsumableArray","_defineProperty","_objectWithoutProperties","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","source","forEach","getOwnPropertyDescriptors","defineProperties","_require","defaultArgs","baseOptions","_require2","parseProgress","parseArgs","_require3","version","NO_LOAD","_options","_baseOptions$defaultO","optProgress","progress","options","Core","runResolve","running","detectCompletion","parseMessage","_yield$getCreateFFmpe","mainScriptUrlOrBlob","printErr","print","locateFile","path","prefix","endsWith","cwrap","isLoaded","_len","_args","Array","_key","join","_len2","_key2","ret","_Core$FS","e","setProgress","_progress","setLogger","_logger","objectWithoutPropertiesLoose","excluded","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","call","argsPtr","_malloc","Uint32Array","BYTES_PER_ELEMENT","idx","writeAsciiToMemory","setValue","_slicedToArray","duration","ts2sec","ts","_ts$split","_ts$split2","h","m","parseFloat","d","_ts","ratio"],"mappings":"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","file":"6-1db7bbf41173ab5b50a9.js","sourcesContent":["var _regeneratorRuntime = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/regenerator\");\n\nrequire(\"regenerator-runtime/runtime.js\");\n\nvar _asyncToGenerator = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\n/* eslint-disable no-undef */\nvar resolveURL = require('resolve-url');\n\nvar _require = require('../utils/log'),\n    log = _require.log;\n/*\n * Fetch data from remote URL and convert to blob URL\n * to avoid CORS issue\n */\n\n\nvar toBlobURL = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url, mimeType) {\n    var buf, blob, blobURL;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            log('info', \"fetch \".concat(url));\n            _context.next = 3;\n            return fetch(url);\n\n          case 3:\n            _context.next = 5;\n            return _context.sent.arrayBuffer();\n\n          case 5:\n            buf = _context.sent;\n            log('info', \"\".concat(url, \" file size = \").concat(buf.byteLength, \" bytes\"));\n            blob = new Blob([buf], {\n              type: mimeType\n            });\n            blobURL = URL.createObjectURL(blob);\n            log('info', \"\".concat(url, \" blob URL = \").concat(blobURL));\n            return _context.abrupt(\"return\", blobURL);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function toBlobURL(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nmodule.exports = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2) {\n    var _corePath, coreRemotePath, corePath, wasmPath, workerPath;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _corePath = _ref2.corePath;\n\n            if (!(typeof _corePath !== 'string')) {\n              _context2.next = 3;\n              break;\n            }\n\n            throw Error('corePath should be a string!');\n\n          case 3:\n            coreRemotePath = resolveURL(_corePath);\n            _context2.next = 6;\n            return toBlobURL(coreRemotePath, 'application/javascript');\n\n          case 6:\n            corePath = _context2.sent;\n            _context2.next = 9;\n            return toBlobURL(coreRemotePath.replace('ffmpeg-core.js', 'ffmpeg-core.wasm'), 'application/wasm');\n\n          case 9:\n            wasmPath = _context2.sent;\n            _context2.next = 12;\n            return toBlobURL(coreRemotePath.replace('ffmpeg-core.js', 'ffmpeg-core.worker.js'), 'application/javascript');\n\n          case 12:\n            workerPath = _context2.sent;\n\n            if (!(typeof createFFmpegCore === 'undefined')) {\n              _context2.next = 15;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", new Promise(function (resolve) {\n              var script = document.createElement('script');\n\n              var eventHandler = function eventHandler() {\n                script.removeEventListener('load', eventHandler);\n                log('info', 'ffmpeg-core.js script loaded');\n                resolve({\n                  createFFmpegCore: createFFmpegCore,\n                  corePath: corePath,\n                  wasmPath: wasmPath,\n                  workerPath: workerPath\n                });\n              };\n\n              script.src = corePath;\n              script.type = 'text/javascript';\n              script.addEventListener('load', eventHandler);\n              document.getElementsByTagName('head')[0].appendChild(script);\n            }));\n\n          case 15:\n            log('info', 'ffmpeg-core.js script is loaded already');\n            return _context2.abrupt(\"return\", Promise.resolve({\n              createFFmpegCore: createFFmpegCore,\n              corePath: corePath,\n              wasmPath: wasmPath,\n              workerPath: workerPath\n            }));\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();","var _regeneratorRuntime = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/regenerator\");\n\nrequire(\"regenerator-runtime/runtime.js\");\n\nvar _asyncToGenerator = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar resolveURL = require('resolve-url');\n\nvar readFromBlobOrFile = function readFromBlobOrFile(blob) {\n  return new Promise(function (resolve, reject) {\n    var fileReader = new FileReader();\n\n    fileReader.onload = function () {\n      resolve(fileReader.result);\n    };\n\n    fileReader.onerror = function (_ref) {\n      var code = _ref.target.error.code;\n      reject(Error(\"File could not be read! Code=\".concat(code)));\n    };\n\n    fileReader.readAsArrayBuffer(blob);\n  });\n};\n\nmodule.exports = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_data) {\n    var data, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            data = _data;\n\n            if (!(typeof _data === 'undefined')) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", new Uint8Array());\n\n          case 3:\n            if (!(typeof _data === 'string')) {\n              _context.next = 16;\n              break;\n            }\n\n            if (!/data:_data\\/([a-zA-Z]*);base64,([^\"]*)/.test(_data)) {\n              _context.next = 8;\n              break;\n            }\n\n            data = atob(_data.split(',')[1]).split('').map(function (c) {\n              return c.charCodeAt(0);\n            });\n            /* From remote server/URL */\n\n            _context.next = 14;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return fetch(resolveURL(_data));\n\n          case 10:\n            res = _context.sent;\n            _context.next = 13;\n            return res.arrayBuffer();\n\n          case 13:\n            data = _context.sent;\n\n          case 14:\n            _context.next = 20;\n            break;\n\n          case 16:\n            if (!(_data instanceof File || _data instanceof Blob)) {\n              _context.next = 20;\n              break;\n            }\n\n            _context.next = 19;\n            return readFromBlobOrFile(_data);\n\n          case 19:\n            data = _context.sent;\n\n          case 20:\n            return _context.abrupt(\"return\", new Uint8Array(data));\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();","require('regenerator-runtime/runtime');\n\nvar createFFmpeg = require('./createFFmpeg');\n\nvar _require = require('./node'),\n    fetchFile = _require.fetchFile;\n\nmodule.exports = {\n  /*\n   * Create ffmpeg instance.\n   * Each ffmpeg instance owns an isolated MEMFS and works\n   * independently.\n   *\n   * For example:\n   *\n   * ```\n   * const ffmpeg = createFFmpeg({\n   *  log: true,\n   *  logger: () => {},\n   *  progress: () => {},\n   *  corePath: '',\n   * })\n   * ```\n   *\n   * For the usage of these four arguments, check config.js\n   *\n   */\n  createFFmpeg: createFFmpeg,\n\n  /*\n   * Helper function for fetching files from various resource.\n   * Sometimes the video/audio file you want to process may located\n   * in a remote URL and somewhere in your local file system.\n   *\n   * This helper function helps you to fetch to file and return an\n   * Uint8Array variable for ffmpeg.wasm to consume.\n   *\n   */\n  fetchFile: fetchFile\n};","var resolveURL = require('resolve-url');\n\nvar _require = require('../../package.json'),\n    devDependencies = _require.devDependencies;\n/*\n * Default options for browser environment\n */\n\n\nmodule.exports = {\n  corePath: typeof process !== 'undefined' && process.env.FFMPEG_ENV === 'development' ? resolveURL('/node_modules/@ffmpeg/core/dist/ffmpeg-core.js') : \"https://unpkg.com/@ffmpeg/core@\".concat(devDependencies['@ffmpeg/core'].substring(1), \"/dist/ffmpeg-core.js\")\n};","/* eslint-disable react/require-default-props */\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\n\r\n// const hasLoadedScript = false;\r\n\r\nexport const DivHost = (props: {\r\n    renderArt: (hostElement: HTMLDivElement) => { remove: () => void };\r\n    // eslint-disable-next-line react/no-unused-prop-types\r\n    openSea?: {\r\n        tokenAddress: string;\r\n        tokenId: string;\r\n    };\r\n}) => {\r\n\r\n    const hostElementRef = useRef(null as null | HTMLDivElement);\r\n    const HostElement = useRef({ Component: () => <div style={{ width: `100%`, height: `100%` }} ref={hostElementRef} /> });\r\n\r\n    useEffect(() => {\r\n        // if (!hasLoadedScript) {\r\n        //     hasLoadedScript = true;\r\n        //     const scriptElement = document.createElement(`script`);\r\n        //     scriptElement.src = `https://unpkg.com/embeddable-nfts/dist/nft-card.min.js`;\r\n        //     document.head.append(scriptElement);\r\n        // }\r\n\r\n        if (!hostElementRef.current) { return () => { }; }\r\n\r\n        console.log(`DivHost - renderArt`, { hostElementRef: hostElementRef.current, renderArt: props.renderArt });\r\n        hostElementRef.current.innerHTML = ``;\r\n        const { remove } = props.renderArt(hostElementRef.current);\r\n        return () => {\r\n            remove();\r\n        };\r\n    }, [hostElementRef.current, props.renderArt]);\r\n\r\n\r\n    return (\r\n        <>\r\n            <HostElement.current.Component />\r\n            {/* {props.openSea && (\r\n                <>\r\n                    <div>Open Sea</div>\r\n                    <nft-card\r\n                        tokenAddress={props.openSea.tokenAddress}\r\n                        tokenId={props.openSea.tokenId}\r\n                        network='mainnet'\r\n                    />\r\n                </>\r\n            )} */}\r\n        </>\r\n    );\r\n};\r\n","/* eslint-disable no-console */\r\n/* eslint-disable no-await-in-loop */\r\nimport { useAutoLoadingError } from 'utils-react/hooks';\r\nimport React, { useState } from 'react';\r\nimport { createFFmpeg } from '@ffmpeg/ffmpeg';\r\nimport { delay } from 'utils/delay';\r\nimport { TimeProvider } from '../time-provider';\r\n\r\nexport const createRecorder = () => {\r\n\r\n    let _settings: null | { framesPerSecond: number, quality?: number, width: number, height: number } = null;\r\n\r\n    let timeMsLost = 0;\r\n    let timeMs = Date.now();\r\n    let mode = `none` as 'none'\r\n    | 'targetPrepareRequested' | 'targetReady'\r\n    | `waitingForFrame` | `processingFrame` | `increasingTime`\r\n    | 'requestedCompleteVideo'\r\n    | 'readyToCompleteVideo'\r\n    | 'completingVideo'\r\n    | 'done';\r\n    const isRecording = () => mode === `waitingForFrame` || mode === `processingFrame` || mode === `increasingTime`;\r\n\r\n    let workingCanvas = null as null | HTMLCanvasElement;\r\n    let workingContext = null as null | CanvasRenderingContext2D;\r\n    let blobs = null as null | Blob[];\r\n\r\n    const timeProvider: TimeProvider = {\r\n        now: () => isRecording() ? timeMs : (Date.now() - timeMsLost),\r\n        isPaused: () => mode === `processingFrame` || mode === `completingVideo`,\r\n    };\r\n\r\n    const requestPrepareTarget = async (settings: NonNullable<typeof _settings>) => {\r\n        if (mode !== `none`) { console.error(`requestPrepareTarget: Wrong mode!`, mode); return; }\r\n\r\n        _settings = settings;\r\n\r\n        // Get canvas ready\r\n        workingCanvas = document.createElement(`canvas`);\r\n        workingCanvas.width = _settings.width;\r\n        workingCanvas.height = _settings.height;\r\n        document.body.append(workingCanvas);\r\n\r\n        workingContext = workingCanvas.getContext(`2d`);\r\n\r\n        // wait for target canvas\r\n        mode = `targetPrepareRequested`;\r\n    };\r\n\r\n    const setTargetReady = () => {\r\n        if (mode !== `targetPrepareRequested`) { console.error(`setTargetReady: Wrong mode!`, mode); return; }\r\n        mode = `targetReady`;\r\n    };\r\n\r\n    const start = async () => {\r\n        if (mode !== `targetReady`) { console.error(`start: Wrong mode!`, mode); return; }\r\n\r\n        if (!_settings) { console.error(`prepareCanvas first!`); return; }\r\n\r\n        blobs = [];\r\n        timeMs = Date.now() - timeMsLost;\r\n        mode = `waitingForFrame`;\r\n    };\r\n\r\n    const beginIncreasingTime = () => {\r\n        if (mode === `requestedCompleteVideo`) {\r\n            mode = `readyToCompleteVideo`;\r\n            return;\r\n        }\r\n\r\n        if (!_settings) { console.error(`prepareCanvas first!`); return; }\r\n        const timeMsPerFrame = 1000 / _settings.framesPerSecond;\r\n\r\n        setTimeout(() => {\r\n            // Finally update time\r\n            timeMs += timeMsPerFrame;\r\n            mode = `waitingForFrame`;\r\n        }, 0);\r\n\r\n        mode = `increasingTime`;\r\n    };\r\n\r\n    const completeToBlob = async () => {\r\n        if (!blobs || !_settings) { throw new Error(`Recorder has not started`); }\r\n        console.log(`completeToBlob.compile started`);\r\n\r\n        timeMsLost = Date.now() - timeMs;\r\n        mode = `completingVideo`;\r\n\r\n        try {\r\n            // const webMBlob = new Blob(blobs, { type: `video/webm; codecs=vp9` });\r\n            // const webMBlob = new Blob(blobs, { type: `video/webm` });\r\n\r\n            // const webMBlob = new Blob(blobs, { type: `image/webp[array]?` });\r\n            // const webMBlob = new Blob(blobs[0], { type: `image/webp` });\r\n\r\n\r\n            const ffmpeg = createFFmpeg({});\r\n            await ffmpeg.load();\r\n\r\n            // Write images to virtual file system\r\n            // https://github.com/welefen/canvas2video/blob/master/src/index.ts\r\n            for (const [i, blob] of blobs.entries()) {\r\n                const buffer = await blob.arrayBuffer();\r\n                ffmpeg.FS(`writeFile`, `image${`${i}`.padStart(3, `0`)}.webp`, new Uint8Array(buffer));\r\n            }\r\n\r\n            // Run ffmpeg as slideshow\r\n            // https://trac.ffmpeg.org/wiki/Slideshow\r\n            // ffmpeg -framerate 24 -i img%03d.png output.mp4\r\n            await ffmpeg.run(...`-framerate ${_settings.framesPerSecond} -i image%03d.webp output.mp4`.split(` `));\r\n\r\n            const data = ffmpeg.FS(`readFile`, `output.mp4`);\r\n            const videoBlob = new Blob([data.buffer], { type: `video/mp4` });\r\n\r\n            console.log(`completeToBlob.compile done`, { videoBlob });\r\n\r\n            return videoBlob;\r\n\r\n        } catch (err) {\r\n            console.error(`completeToBlob.compile ERROR`, { err });\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    const completeToDataUrl = async () => {\r\n        const videoBlob = await completeToBlob();\r\n        console.log(`completeToDownloadFile videoBlob ready`, { videoBlob });\r\n\r\n        return URL.createObjectURL(videoBlob);\r\n    };\r\n\r\n    const completeToDownloadFile = async (filename: string) => {\r\n        if (mode === `waitingForFrame` || mode === `increasingTime`) {\r\n            mode = `readyToCompleteVideo`;\r\n        }\r\n\r\n        while (mode === `processingFrame` || mode === `requestedCompleteVideo`) {\r\n            mode = `requestedCompleteVideo`;\r\n            await delay(10);\r\n        }\r\n\r\n        if (mode !== `readyToCompleteVideo`) { console.error(`completeToDownloadFile: Wrong mode!`, mode); return; }\r\n        mode = `completingVideo`;\r\n\r\n        const dataUrl = await completeToDataUrl();\r\n        console.log(`completeToDownloadFile dataUrl ready`, { dataUrl });\r\n\r\n        const link = document.createElement(`a`);\r\n        link.download = filename;\r\n        link.href = dataUrl;\r\n        document.body.append(link);\r\n        link.click();\r\n        link.remove();\r\n\r\n        console.log(`completeToDownloadFile done`, { link, dataUrl });\r\n\r\n        mode = `done`;\r\n    };\r\n\r\n\r\n    const addFrame = async (canvas: HTMLCanvasElement) => {\r\n        return await new Promise<void>((resolve, reject) => {\r\n            if (mode !== `waitingForFrame`) { console.error(`addFrame: Wrong mode!`, mode); return; }\r\n\r\n            const cvs = workingCanvas;\r\n            const ctx = workingContext;\r\n            if (!cvs || !ctx || !blobs || !_settings) { throw new Error(`Recorder has not started`); }\r\n\r\n            try {\r\n                mode = `processingFrame`;\r\n\r\n                ctx.drawImage(canvas, 0, 0, _settings.width, _settings.height);\r\n                cvs.toBlob(b => {\r\n                    if (!ctx || !blobs || !_settings) { throw new Error(`Recorder has not started`); }\r\n\r\n                    b && blobs?.push(b);\r\n\r\n                    beginIncreasingTime();\r\n\r\n                    resolve();\r\n\r\n                }, `image/webp`, _settings.quality);\r\n\r\n\r\n            } catch (err) {\r\n                console.error(`addFrame ERROR`, { err });\r\n                mode = `waitingForFrame`;\r\n                reject(err);\r\n            }\r\n        });\r\n    };\r\n\r\n    return {\r\n        prepareTarget: requestPrepareTarget,\r\n        getSettings: () => _settings,\r\n        getMode: () => mode,\r\n        setTargetReady,\r\n        start,\r\n        isRecording,\r\n        isWaitingForFrame: () => mode === `waitingForFrame`,\r\n        getRecorder: () => {\r\n            if (!isRecording()) { throw new Error(`Recorder is not recording`); }\r\n\r\n            return {\r\n                addFrame,\r\n                // completeToBlob,\r\n                // completeToDataUrl,\r\n                completeToDownloadFile,\r\n                settings: _settings,\r\n            };\r\n        },\r\n        timeProvider,\r\n    };\r\n};\r\n\r\nexport type CanvasVideoRecorder = ReturnType<typeof createRecorder>;\r\n\r\nexport const CanvasVideoRecorderControl = (props: { recorder: CanvasVideoRecorder, onPrepareTarget: () => void }) => {\r\n\r\n    const [mode, setMode] = useState(`prepare` as 'prepare' | 'ready' | 'recording' | 'stopped');\r\n\r\n    const prepareTarget = () => {\r\n        doWork(async (stopIfObsolete) => {\r\n            await props.recorder.prepareTarget({\r\n                framesPerSecond: 30,\r\n\r\n                // Square\r\n                // width: 300,\r\n                // height: 300,\r\n                width: 600,\r\n                height: 600,\r\n\r\n\r\n                // // 720p - Looks good on mobile\r\n                // width: 1280,\r\n                // height: 720,\r\n\r\n                // // Blurry on twitter\r\n                // width: 480,\r\n                // height: 270,\r\n\r\n                // // Blurry on twitter\r\n                // width: 256,\r\n                // height: 256,\r\n\r\n                // width: 507,\r\n                // height: 507,\r\n                quality: 0.95,\r\n                // quality: 0.95,\r\n                // width: 1920,\r\n                // height: 1080,\r\n            });\r\n            stopIfObsolete();\r\n            setMode(`ready`);\r\n            props.onPrepareTarget();\r\n        });\r\n    };\r\n\r\n    const startRecording = () => {\r\n        setMode(`recording`);\r\n        doWork(async (stopIfObsolete) => {\r\n            await props.recorder.start();\r\n        });\r\n    };\r\n\r\n    const { loading, error, doWork } = useAutoLoadingError();\r\n\r\n    const stopRecording = () => {\r\n        setMode(`stopped`);\r\n        doWork(async (stopIfObsolete) => {\r\n            await props.recorder.getRecorder().completeToDownloadFile(`video.mp4`);\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                {error && (\r\n                    <div style={{ background: `#88888888` }}><span>ERROR! ‼</span></div>\r\n                )}\r\n                {loading && (\r\n                    <div style={{ background: `#88888888` }}><span>Loading 🔄</span></div>\r\n                )}\r\n                {mode === `prepare` && (\r\n                    <div onClick={prepareTarget} style={{ background: `#88888888` }}><span>Prepare ⏺</span></div>\r\n                )}\r\n                {mode === `ready` && (\r\n                    <div onClick={startRecording} style={{ background: `#88888888` }}><span>Record ⏺</span></div>\r\n                )}\r\n                {mode === `recording` && (\r\n                    <div onClick={stopRecording} style={{ background: `#88888888` }}><span>Stop ⏹</span></div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n","\r\n// Note: this file needs to be importable with no dependencies to build the site index\r\nexport const artIndex = [\r\n    { key: `fluid-snake-game`, title: `Fluid Snake Game`, imageUrl: undefined, load: async () => (await import (`./artwork/example-PavelDoGreat-fluid-simulation/fluid-snake`)).art_fluidSnakeGame },\r\n    // { key: `fluid-flappy-game`, title: `Fluid Flappy Game`, imageUrl: undefined, load: async () => await import (`./artwork/example-PavelDoGreat-fluid-simulation/fluid-flappy`) },\r\n    { key: `example-fluid-simulator`, title: `Example Fluid Simulator`, imageUrl: undefined, load: async () => (await import (`./artwork/example-PavelDoGreat-fluid-simulation/example-fluid-simulator`)).art_exampleFluidSimulator },\r\n    { key: `flying-colors`, title: `Flying Colors`, imageUrl: undefined, load: async () => (await import (`./artwork/flying-colors/flying-colors`)).art_flyingColors },\r\n    { key: `gpu-01`, title: `GPU-01`, imageUrl: undefined, load: async () => (await import (`./artwork/gpu-01/gpu-01`)).art_gpu_01 },\r\n    { key: `gears`, title: `Gears`, imageUrl: undefined, load: async () => (await import (`./artwork/gears`)).art_gears },\r\n    { key: `puzzle-01`, title: `Puzzle 01`, imageUrl: undefined, load: async () => (await import (`./artwork/puzzle/art-puzzle-01`)).art_puzzle01 },\r\n    { key: `121`, title: `121`, imageUrl: undefined, load: async () => (await import (`./artwork/art-121`)).art_121 },\r\n    { key: `circles`, title: `Circles`, imageUrl: `./artwork/circles.png`, load: async () => (await import (`./artwork/circles`)).art_circles },\r\n    { key: `onions`, title: `Onions`, imageUrl: undefined, load: async () => (await import (`./artwork/layers-of-the-onions-soul`)).art_layersOfTheOnionsSoul },\r\n    { key: `nft-text-adventure`, title: `Nft Text Adventure`, imageUrl: `./artwork/nft-adventure/stories/nft-text-adventure.png`, load: async () => (await import (`./artwork/nft-adventure/art`)).art_nftAdventure_nftTextAdventure },\r\n] as const;\r\nexport type ArtKey = typeof artIndex[number]['key'];\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { C } from 'controls-react';\r\nimport { useDebounce } from 'utils-react/hooks';\r\nimport { theme } from 'themes/theme';\r\nimport { DivHost } from './div-host';\r\nimport { ArtWork } from './artwork-type';\r\nimport { CanvasVideoRecorderControl, createRecorder } from './canvas-video-recording/canvas-video-recorder';\r\nimport { artIndex, ArtKey } from './art-index';\r\n\r\nexport const ArtGallery = (props: {}) => {\r\n\r\n    const queryParts = document.location.search.substr(1).split(`&`);\r\n    const artKey = (queryParts.find(x => x.startsWith(`key`))?.split(`=`)[1]\r\n        ?? document.location.pathname.match(/art\\/([^/]+)/)?.[1]) as undefined | ArtKey;\r\n    const newTokenId = queryParts.find(x => x.startsWith(`tokenId`))?.split(`=`)[1]\r\n        ?? queryParts.find(x => x.startsWith(`seed`))?.split(`=`)[1]\r\n        ?? document.location.pathname.match(new RegExp(`art/${artKey}/([^/]+)`))?.[1];\r\n    const showCamera = document.location.search.includes(`camera=true`);\r\n\r\n    const art = useRef(null as null | ArtWork);\r\n    const recorderRef = useRef(showCamera ? createRecorder() : null as null | ReturnType<typeof createRecorder>);\r\n\r\n    const [renderId, setRenderId] = useState(0);\r\n    const [showNavigation, setShowNavigation] = useState(true);\r\n    const [tokenId, setTokenId] = useState(`0`);\r\n    const [isFullScreen, setIsFullScreen] = useState(false);\r\n    const [customSize, setCustomSize] = useState(null as null | { width: number, height: number });\r\n\r\n    type ArtRender = {\r\n        kind: 'div';\r\n        renderArt: (hostElement: HTMLDivElement) => { remove: () => void };\r\n        openSea?: ArtWork['openSea'];\r\n    } | {\r\n        kind: 'react';\r\n        ArtComponent: () => JSX.Element;\r\n        openSea?: ArtWork['openSea'];\r\n    };\r\n    const [tokenDescription, setTokenDescription] = useState(null as null | string);\r\n    const { debounce } = useDebounce(250);\r\n\r\n    useEffect(() => {\r\n\r\n        // const camera = queryParts.find(x => x.startsWith(`camera`))?.split(`=`)[1];\r\n        // if (camera) { recorderRef.current = createRecorder(); }\r\n\r\n        if (!artKey) { changeTokenId(`0`); return; }\r\n        const artworkItem = artIndex.find(x => x.key === artKey);\r\n        if (!artworkItem) { changeTokenId(`0`); return; }\r\n\r\n        (async () => {\r\n            art.current = await artworkItem.load();\r\n\r\n            // setShowNavigation(false);\r\n            setIsFullScreen(true);\r\n            changeTokenId(`${newTokenId || tokenId}`);\r\n        })();\r\n\r\n    }, [document.location.search]);\r\n\r\n    const prepareTarget = () => {\r\n        if (!recorderRef.current) { return; }\r\n\r\n        const settings = recorderRef.current.getSettings();\r\n        if (!settings) { return; }\r\n\r\n        setCustomSize({ width: settings.width, height: settings.height });\r\n        recorderRef.current.setTargetReady();\r\n    };\r\n\r\n    const changeArt = (value: ArtWork) => {\r\n        art.current = value;\r\n        window.location.pathname = `/art/${value.key}`;\r\n        // changeTokenId(tokenId);\r\n    };\r\n\r\n    const changeTokenId = (value: string) => {\r\n        console.log(`changeTokenId`, { value });\r\n\r\n        setTokenId(value);\r\n\r\n        debounce(() => {\r\n            console.log(`changeTokenId debounce`, { value });\r\n            if (!art.current){ return; }\r\n\r\n            setTokenDescription(art.current.getTokenDescription(value) ?? `Seed: ${value}`);\r\n            const { renderArt, ArtComponent } = art.current;\r\n            if (renderArt) {\r\n                cacheRenderArtwork({\r\n                    kind: `div`,\r\n                    renderArt: (hostElement) => renderArt(hostElement, value, recorderRef.current),\r\n                    openSea: art.current.openSea,\r\n                });\r\n            } else if (ArtComponent) {\r\n                cacheRenderArtwork({\r\n                    kind: `react`,\r\n                    ArtComponent: () => <ArtComponent hash={value} />,\r\n                    openSea: art.current.openSea,\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const ArtworkComponentRef = useRef(<></>);\r\n    const cacheRenderArtwork = (artRenderer: ArtRender) => {\r\n        ArtworkComponentRef.current = (\r\n            <>\r\n                {artRenderer?.kind === `div` && (\r\n                    <DivHost renderArt={artRenderer.renderArt} openSea={artRenderer.openSea} />\r\n                )}\r\n                {artRenderer?.kind === `react` && (\r\n                    <artRenderer.ArtComponent />\r\n                )}\r\n\r\n            </>\r\n        );\r\n        setRenderId(s => s + 1);\r\n    };\r\n\r\n    const [walletAddress, setWalletAddress] = useState(null as null | string);\r\n    const canSetSeed = art.current?.canSetSeed ?? true;\r\n\r\n    return (\r\n        <>\r\n            <C.View_Panel>\r\n                {showNavigation && (\r\n                    <C.View_Form>\r\n                        {artIndex.map(x => (\r\n                            <React.Fragment key={x.title}>\r\n                                <div style={{ paddingBottom: 4 }}>\r\n                                    <C.Button_FormAction onPress={() => changeArt(x)}>{x.title}</C.Button_FormAction>\r\n                                </div>\r\n                            </React.Fragment>\r\n                        ))}\r\n                        {canSetSeed && (\r\n                            <SeedController value={tokenId} onChange={changeTokenId}\r\n                                onWalletAddress={setWalletAddress}/>\r\n                        )}\r\n                    </C.View_Form>\r\n                )}\r\n\r\n                {art.current && (\r\n                    <>\r\n                        <C.Text_FormTitle style={{ ...theme.text_formTitle, whiteSpace: `pre-wrap` }}>{art.current.title}</C.Text_FormTitle>\r\n                        <C.Text_FormTitle style={{ ...theme.text_formTitle, whiteSpace: `pre-wrap` }}>{art.current.artist}</C.Text_FormTitle>\r\n                        <div style={customSize ? { position: `fixed`, left: 0, right: 0, top: 0, bottom: 0, background: `#000000` }\r\n                            : isFullScreen ? { position: `fixed`, left: 0, right: 0, top: 0, bottom: 0, background: `#000000` }\r\n                                : { maxWidth: `600px`, maxHeight: `600px` }}>\r\n                            <div style={{ position: `relative`, width: `100%`, height: `100%`, ...customSize ?? {} }} >\r\n                                {ArtworkComponentRef.current}\r\n                                <div style={{ position: `absolute`, top: 4, right: 4, width: 16, height: 16, fontFamily: `monospace`, fontSize: 14, lineHeight: `16px`, textAlign: `center`, color: `#FFFFFF`, background: `#88888888` }}\r\n                                    onClick={() => setIsFullScreen(s => !s)}>{isFullScreen ? `-` : `+`}</div>\r\n                                {isFullScreen && (\r\n                                    <>\r\n                                        <div style={{ position: `fixed`, left: 4, bottom: 4, maxWidth: `75%`, color: `white` }}>\r\n                                            <div style={{ opacity: 0.5 }}>\r\n                                                <div style={{ padding: 4, whiteSpace: `pre-wrap` }}>{art.current.title}</div>\r\n                                                <div style={{ padding: 4, whiteSpace: `pre-wrap` }}>{art.current.artist}</div>\r\n                                                <div style={{ padding: 4, whiteSpace: `pre-wrap` }}>{art.current.description}</div>\r\n                                                {!!tokenDescription && <div style={{ padding: 4, whiteSpace: `pre-wrap`, wordBreak: `break-all` }}>{tokenDescription}</div>}\r\n                                            </div>\r\n                                            {canSetSeed && (\r\n                                                <div style={{ opacity: 0.75, padding: 4 }}>\r\n                                                    <SeedController value={tokenId}\r\n                                                        onChange={changeTokenId}\r\n                                                        onWalletAddress={setWalletAddress}/>\r\n                                                </div>\r\n                                            )}\r\n                                            <div style={{ opacity: 0.75, padding: 4 }}>\r\n                                                {artKey && tokenId && (\r\n                                                    <ReserveButton\r\n                                                        artKey={artKey}\r\n                                                        seed={tokenId}\r\n                                                        walletAddress={walletAddress ?? undefined}\r\n                                                    />\r\n                                                )}\r\n                                            </div>\r\n                                            <div style={{ marginTop: 8 }}>\r\n                                                <a href='/art'>🧙‍♂️ Other Art by Rick Love</a>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                        {recorderRef.current && (\r\n                            <div style={{ position: `fixed`, right: 0, bottom: 0 }} >\r\n                                <CanvasVideoRecorderControl\r\n                                    recorder={recorderRef.current}\r\n                                    onPrepareTarget={prepareTarget} />\r\n                            </div>\r\n                        )}\r\n                        {tokenDescription && (<C.Text_FormTitle style={{ ...theme.text_formTitle, background: `#EEEEEE`, padding: 8, whiteSpace: `pre-wrap` }}>{tokenDescription}</C.Text_FormTitle>)}\r\n                        <C.Text_FormTitle style={{ ...theme.text_formTitle, whiteSpace: `pre-wrap` }}>{art.current.description}</C.Text_FormTitle>\r\n                    </>\r\n                )}\r\n            </C.View_Panel>\r\n            {!showNavigation && (\r\n                <div style={{ padding: 16, fontSize: 16 }}>\r\n                    <a href='/art'>Other Art by Rick Love</a>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport const ArtWorkGenerator = ({\r\n    artKey,\r\n    tokenId: tokenIdRaw,\r\n}: {\r\n    artKey?: string;\r\n    tokenId?: string;\r\n}) => {\r\n\r\n    const queryParts = document.location.search.substr(1).split(`&`);\r\n    const tokenId = tokenIdRaw\r\n        ?? queryParts.find(x => x.startsWith(`tokenId`))?.split(`=`)[1]\r\n        ?? queryParts.find(x => x.startsWith(`seed`))?.split(`=`)[1]\r\n        ?? document.location.pathname.match(new RegExp(`art/${artKey}/([^/]+)`))?.[1]\r\n        ?? `0`;\r\n\r\n    const [art, setArt] = useState(null as null|ArtWork);\r\n    useEffect(() => {\r\n        const artworkItem = artIndex.find(x => x.key === artKey);\r\n        if (!artworkItem) { return; }\r\n\r\n        (async () => {\r\n            const result = await artworkItem.load();\r\n            setArt(result);\r\n        })();\r\n    }, []);\r\n\r\n    const { renderArt, ArtComponent } = art ?? {};\r\n\r\n    const ArtInfoComponent = () => {\r\n        if (!art){ return <></>;}\r\n\r\n        const tokenDescription = tokenId ? art.getTokenDescription(tokenId) : undefined;\r\n\r\n        return (\r\n            <div style={{ position: `fixed`, left: 4, bottom: 4, maxWidth: `75%`, color: `white` }}>\r\n                <div style={{ opacity: 0.5 }}>\r\n                    <div style={{ padding: 4, whiteSpace: `pre-wrap` }}>{art.title}</div>\r\n                    <div style={{ padding: 4, whiteSpace: `pre-wrap` }}>{art.artist}</div>\r\n                    <div style={{ padding: 4, whiteSpace: `pre-wrap` }}>{art.description}</div>\r\n                    {!!tokenDescription && <div style={{ padding: 4, whiteSpace: `pre-wrap`, wordBreak: `break-all` }}>{tokenDescription}</div>}\r\n                </div>\r\n                <div style={{ opacity: 0.75, padding: 4 }}>\r\n                    <ReserveButton\r\n                        artKey={art.key}\r\n                        seed={tokenId}\r\n                    />\r\n                </div>\r\n                <div style={{ marginTop: 8 }}>\r\n                    <a href='/art'>🧙‍♂️ Other Art by Rick Love</a>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (renderArt) {\r\n        return (\r\n            <>\r\n                <DivHost\r\n                    renderArt={(hostElement) => renderArt(hostElement, tokenId, null)}\r\n                    openSea={art?.openSea} />\r\n                <ArtInfoComponent/>\r\n            </>\r\n        );\r\n    }\r\n\r\n    if (ArtComponent) {\r\n        return (\r\n            <>\r\n                <ArtComponent hash={tokenId} />\r\n                <ArtInfoComponent/>\r\n            </>\r\n        );\r\n    }\r\n\r\n    return <></>;\r\n\r\n    // return (\r\n    //     <div>\r\n    //         {ArtworkComponentRef.current}\r\n    //         {/* <div style={{ position: `fixed`, left: 4, bottom: 4, maxWidth: `75%`, color: `white` }}>\r\n    //             <div style={{ opacity: 0.5 }}>\r\n    //                 <div style={{ padding: 4, whiteSpace: `pre-wrap` }}>{art.title}</div>\r\n    //                 <div style={{ padding: 4, whiteSpace: `pre-wrap` }}>{art.artist}</div>\r\n    //                 <div style={{ padding: 4, whiteSpace: `pre-wrap` }}>{art.description}</div>\r\n    //                 {!!tokenDescription && <div style={{ padding: 4, whiteSpace: `pre-wrap`, wordBreak: `break-all` }}>{tokenDescription}</div>}\r\n    //             </div>\r\n    //             {canSetSeed && (\r\n    //                 <div style={{ opacity: 0.75, padding: 4 }}>\r\n    //                     <SeedController value={tokenId}\r\n    //                         onChange={changeTokenId}\r\n    //                         onWalletAddress={setWalletAddress}/>\r\n    //                 </div>\r\n    //             )}\r\n    //             <div style={{ opacity: 0.75, padding: 4 }}>\r\n    //                 {artKey && tokenId && (\r\n    //                     <ReserveButton\r\n    //                         artKey={artKey}\r\n    //                         seed={tokenId}\r\n    //                         walletAddress={walletAddress ?? undefined}\r\n    //                     />\r\n    //                 )}\r\n    //             </div>\r\n    //             <div style={{ marginTop: 8 }}>\r\n    //                 <a href='/art'>🧙‍♂️ Other Art by Rick Love</a>\r\n    //             </div>\r\n    //         </div> */}\r\n    //     </div>\r\n    // );\r\n};\r\n\r\nexport const ReserveButton = ({\r\n    artKey,\r\n    seed,\r\n    walletAddress,\r\n}: {\r\n    artKey: string;\r\n    seed?: string;\r\n    walletAddress?: string;\r\n}) => {\r\n\r\n    const reserve = async () => {\r\n        const nftUrl = `https://ricklove.me/art/${artKey}${seed ? `?seed=${seed}` : ``}`;\r\n        const reserveMessage = `@RickLoveToldMe I want to reserve this NFT: ${nftUrl}${walletAddress && walletAddress !== seed ? ` for wallet=${walletAddress}` : ``}`;\r\n\r\n        // Public message\r\n        const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(reserveMessage)}`;\r\n\r\n        // Direct message\r\n        // const url = `https://twitter.com/messages/compose?recipient_id=1001&text=${encodeURIComponent(reserveMessage)}`;\r\n\r\n        window.open(url, `_blank`);\r\n        // window.location.href = url;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                style={{\r\n                    background: `#037dd6`,\r\n                    color: `#FFFFFF`,\r\n                    borderRadius: 4,\r\n                    padding: 4,\r\n                    textAlign: `center`,\r\n                }}\r\n                onClick={reserve}>{`Reserve NFT`}</div>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\nexport const SeedController = (props: {\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    onWalletAddress: (address: string) => void;\r\n}) => {\r\n\r\n    return (\r\n        <>\r\n            <div style={{\r\n                display: `flex`, flexDirection: `row`, flexWrap: `wrap`, alignItems: `center`,\r\n                color: `white`,\r\n                // padding: 8, borderRadius: 8,\r\n                // background: `#FFFFFF`,\r\n            }}>\r\n                <div style={{ padding: 4 }}>Seed:</div>\r\n                <input type='text'\r\n                    style={{ padding: 4, borderRadius: 4 }}\r\n                    value={props.value}\r\n                    onInput={x => props.onChange(x.currentTarget.value)}\r\n                    onChange={x => props.onChange(x.currentTarget.value)}\r\n                />\r\n                {/* <C.Input_Text value={props.value} onChange={props.onChange} /> */}\r\n                <ConnectWalletButton label={`Use Wallet Address`} onWalletAddress={x => {props.onChange(x); props.onWalletAddress(x);}} />\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\ndeclare const ethereum: {\r\n    request: (args: { method: 'eth_requestAccounts' }) => Promise<string[]>;\r\n};\r\nexport const ConnectWalletButton = (props: {\r\n    label?: string;\r\n    onWalletAddress: (address: string) => void;\r\n}) => {\r\n\r\n    const [connected, setConnected] = useState(false);\r\n\r\n    if (typeof ethereum === undefined){\r\n        return <></>;\r\n    }\r\n\r\n    const connect = async () => {\r\n        const accounts = await ethereum.request({ method: `eth_requestAccounts` });\r\n        const account = accounts[0];\r\n        props.onWalletAddress(account);\r\n        setConnected(true);\r\n    };\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                background: `#037dd6`,\r\n                color: `#FFFFFF`,\r\n                borderRadius: 4,\r\n                padding: 4,\r\n                textAlign: `center`,\r\n            }}\r\n            onClick={connect}>{props.label ?? `Connect Wallet`}</div>\r\n    );\r\n};\r\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var logging = false;\n\nvar customLogger = function customLogger() {};\n\nvar setLogging = function setLogging(_logging) {\n  logging = _logging;\n};\n\nvar setCustomLogger = function setCustomLogger(logger) {\n  customLogger = logger;\n};\n\nvar log = function log(type, message) {\n  customLogger({\n    type: type,\n    message: message\n  });\n\n  if (logging) {\n    console.log(\"[\".concat(type, \"] \").concat(message));\n  }\n};\n\nmodule.exports = {\n  logging: logging,\n  setLogging: setLogging,\n  setCustomLogger: setCustomLogger,\n  log: log\n};","var defaultOptions = require('./defaultOptions');\n\nvar getCreateFFmpegCore = require('./getCreateFFmpegCore');\n\nvar fetchFile = require('./fetchFile');\n\nmodule.exports = {\n  defaultOptions: defaultOptions,\n  getCreateFFmpegCore: getCreateFFmpegCore,\n  fetchFile: fetchFile\n};","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","// Copyright 2014 Simon Lydell\n// X11 (“MIT”) Licensed. (See LICENSE.)\nvoid function (root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(factory);\n  } else if (typeof exports === \"object\") {\n    module.exports = factory();\n  } else {\n    root.resolveUrl = factory();\n  }\n}(this, function () {\n  function resolveUrl()\n  /* ...urls */\n  {\n    var numUrls = arguments.length;\n\n    if (numUrls === 0) {\n      throw new Error(\"resolveUrl requires at least one argument; got none.\");\n    }\n\n    var base = document.createElement(\"base\");\n    base.href = arguments[0];\n\n    if (numUrls === 1) {\n      return base.href;\n    }\n\n    var head = document.getElementsByTagName(\"head\")[0];\n    head.insertBefore(base, head.firstChild);\n    var a = document.createElement(\"a\");\n    var resolved;\n\n    for (var index = 1; index < numUrls; index++) {\n      a.href = arguments[index];\n      resolved = a.href;\n      base.href = resolved;\n    }\n\n    head.removeChild(base);\n    return resolved;\n  }\n\n  return resolveUrl;\n});","var _toConsumableArray = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _regeneratorRuntime = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/regenerator\");\n\nrequire(\"regenerator-runtime/runtime.js\");\n\nvar _asyncToGenerator = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _defineProperty = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _objectWithoutProperties = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/objectWithoutProperties\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar _require = require('./config'),\n    defaultArgs = _require.defaultArgs,\n    baseOptions = _require.baseOptions;\n\nvar _require2 = require('./utils/log'),\n    setLogging = _require2.setLogging,\n    setCustomLogger = _require2.setCustomLogger,\n    log = _require2.log;\n\nvar parseProgress = require('./utils/parseProgress');\n\nvar parseArgs = require('./utils/parseArgs');\n\nvar _require3 = require('./node'),\n    defaultOptions = _require3.defaultOptions,\n    getCreateFFmpegCore = _require3.getCreateFFmpegCore;\n\nvar _require4 = require('../package.json'),\n    version = _require4.version;\n\nvar NO_LOAD = Error('ffmpeg.wasm is not ready, make sure you have completed load().');\n\nmodule.exports = function () {\n  var _options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _baseOptions$defaultO = _objectSpread(_objectSpread(_objectSpread({}, baseOptions), defaultOptions), _options),\n      logging = _baseOptions$defaultO.log,\n      logger = _baseOptions$defaultO.logger,\n      optProgress = _baseOptions$defaultO.progress,\n      options = _objectWithoutProperties(_baseOptions$defaultO, [\"log\", \"logger\", \"progress\"]);\n\n  var Core = null;\n  var ffmpeg = null;\n  var runResolve = null;\n  var running = false;\n  var progress = optProgress;\n\n  var detectCompletion = function detectCompletion(message) {\n    if (message === 'FFMPEG_END' && runResolve !== null) {\n      runResolve();\n      runResolve = null;\n      running = false;\n    }\n  };\n\n  var parseMessage = function parseMessage(_ref) {\n    var type = _ref.type,\n        message = _ref.message;\n    log(type, message);\n    parseProgress(message, progress);\n    detectCompletion(message);\n  };\n  /*\n   * Load ffmpeg.wasm-core script.\n   * In browser environment, the ffmpeg.wasm-core script is fetch from\n   * CDN and can be assign to a local path by assigning `corePath`.\n   * In node environment, we use dynamic require and the default `corePath`\n   * is `$ffmpeg/core`.\n   *\n   * Typically the load() func might take few seconds to minutes to complete,\n   * better to do it as early as possible.\n   *\n   */\n\n\n  var load = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$getCreateFFmpe, createFFmpegCore, corePath, workerPath, wasmPath;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              log('info', 'load ffmpeg-core');\n\n              if (!(Core === null)) {\n                _context.next = 17;\n                break;\n              }\n\n              log('info', 'loading ffmpeg-core');\n              /*\n               * In node environment, all paths are undefined as there\n               * is no need to set them.\n               */\n\n              _context.next = 5;\n              return getCreateFFmpegCore(options);\n\n            case 5:\n              _yield$getCreateFFmpe = _context.sent;\n              createFFmpegCore = _yield$getCreateFFmpe.createFFmpegCore;\n              corePath = _yield$getCreateFFmpe.corePath;\n              workerPath = _yield$getCreateFFmpe.workerPath;\n              wasmPath = _yield$getCreateFFmpe.wasmPath;\n              _context.next = 12;\n              return createFFmpegCore({\n                /*\n                 * Assign mainScriptUrlOrBlob fixes chrome extension web worker issue\n                 * as there is no document.currentScript in the context of content_scripts\n                 */\n                mainScriptUrlOrBlob: corePath,\n                printErr: function printErr(message) {\n                  return parseMessage({\n                    type: 'fferr',\n                    message: message\n                  });\n                },\n                print: function print(message) {\n                  return parseMessage({\n                    type: 'ffout',\n                    message: message\n                  });\n                },\n\n                /*\n                 * locateFile overrides paths of files that is loaded by main script (ffmpeg-core.js).\n                 * It is critical for browser environment and we override both wasm and worker paths\n                 * as we are using blob URL instead of original URL to avoid cross origin issues.\n                 */\n                locateFile: function locateFile(path, prefix) {\n                  if (typeof window !== 'undefined') {\n                    if (typeof wasmPath !== 'undefined' && path.endsWith('ffmpeg-core.wasm')) {\n                      return wasmPath;\n                    }\n\n                    if (typeof workerPath !== 'undefined' && path.endsWith('ffmpeg-core.worker.js')) {\n                      return workerPath;\n                    }\n                  }\n\n                  return prefix + path;\n                }\n              });\n\n            case 12:\n              Core = _context.sent;\n              ffmpeg = Core.cwrap('proxy_main', 'number', ['number', 'number']);\n              log('info', 'ffmpeg-core loaded');\n              _context.next = 18;\n              break;\n\n            case 17:\n              throw Error('ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.');\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function load() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  /*\n   * Determine whether the Core is loaded.\n   */\n\n\n  var isLoaded = function isLoaded() {\n    return Core !== null;\n  };\n  /*\n   * Run ffmpeg command.\n   * This is the major function in ffmpeg.wasm, you can just imagine it\n   * as ffmpeg native cli and what you need to pass is the same.\n   *\n   * For example, you can convert native command below:\n   *\n   * ```\n   * $ ffmpeg -i video.avi -c:v libx264 video.mp4\n   * ```\n   *\n   * To\n   *\n   * ```\n   * await ffmpeg.run('-i', 'video.avi', '-c:v', 'libx264', 'video.mp4');\n   * ```\n   *\n   */\n\n\n  var run = function run() {\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    log('info', \"run ffmpeg command: \".concat(_args.join(' ')));\n\n    if (Core === null) {\n      throw NO_LOAD;\n    } else if (running) {\n      throw Error('ffmpeg.wasm can only run one command at a time');\n    } else {\n      running = true;\n      return new Promise(function (resolve) {\n        var args = [].concat(_toConsumableArray(defaultArgs), _args).filter(function (s) {\n          return s.length !== 0;\n        });\n        runResolve = resolve;\n        ffmpeg.apply(void 0, _toConsumableArray(parseArgs(Core, args)));\n      });\n    }\n  };\n  /*\n   * Run FS operations.\n   * For input/output file of ffmpeg.wasm, it is required to save them to MEMFS\n   * first so that ffmpeg.wasm is able to consume them. Here we rely on the FS\n   * methods provided by Emscripten.\n   *\n   * Common methods to use are:\n   * ffmpeg.FS('writeFile', 'video.avi', new Uint8Array(...)): writeFile writes\n   * data to MEMFS. You need to use Uint8Array for binary data.\n   * ffmpeg.FS('readFile', 'video.mp4'): readFile from MEMFS.\n   * ffmpeg.FS('unlink', 'video.map'): delete file from MEMFS.\n   *\n   * For more info, check https://emscripten.org/docs/api_reference/Filesystem-API.html\n   *\n   */\n\n\n  var FS = function FS(method) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    log('info', \"run FS.\".concat(method, \" \").concat(args.map(function (arg) {\n      return typeof arg === 'string' ? arg : \"<\".concat(arg.length, \" bytes binary file>\");\n    }).join(' ')));\n\n    if (Core === null) {\n      throw NO_LOAD;\n    } else {\n      var ret = null;\n\n      try {\n        var _Core$FS;\n\n        ret = (_Core$FS = Core.FS)[method].apply(_Core$FS, args);\n      } catch (e) {\n        if (method === 'readdir') {\n          throw Error(\"ffmpeg.FS('readdir', '\".concat(args[0], \"') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')\"));\n        } else if (method === 'readFile') {\n          throw Error(\"ffmpeg.FS('readFile', '\".concat(args[0], \"') error. Check if the path exists\"));\n        } else {\n          throw Error('Oops, something went wrong in FS operation.');\n        }\n      }\n\n      return ret;\n    }\n  };\n\n  var setProgress = function setProgress(_progress) {\n    progress = _progress;\n  };\n\n  var setLogger = function setLogger(_logger) {\n    setCustomLogger(_logger);\n  };\n\n  setLogging(logging);\n  setCustomLogger(logger);\n  log('info', \"use ffmpeg.wasm v\".concat(version));\n  return {\n    setProgress: setProgress,\n    setLogger: setLogger,\n    setLogging: setLogging,\n    load: load,\n    isLoaded: isLoaded,\n    run: run,\n    FS: FS\n  };\n};","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","module.exports = function (Core, args) {\n  var argsPtr = Core._malloc(args.length * Uint32Array.BYTES_PER_ELEMENT);\n\n  args.forEach(function (s, idx) {\n    var buf = Core._malloc(s.length + 1);\n\n    Core.writeAsciiToMemory(s, buf);\n    Core.setValue(argsPtr + Uint32Array.BYTES_PER_ELEMENT * idx, buf, 'i32');\n  });\n  return [args.length, argsPtr];\n};","module.exports = {\n  defaultArgs: [\n  /* args[0] is always the binary path */\n  './ffmpeg',\n  /* Disable interaction mode */\n  '-nostdin',\n  /* Force to override output file */\n  '-y'],\n  baseOptions: {\n    /* Flag to turn on/off log messages in console */\n    log: false,\n\n    /*\n     * Custom logger to get ffmpeg.wasm output messages.\n     * a sample logger looks like this:\n     *\n     * ```\n     * logger = ({ type, message }) => {\n     *   console.log(type, message);\n     * }\n     * ```\n     *\n     * type can be one of following:\n     *\n     * info: internal workflow debug messages\n     * fferr: ffmpeg native stderr output\n     * ffout: ffmpeg native stdout output\n     */\n    logger: function logger() {},\n\n    /*\n     * Progress handler to get current progress of ffmpeg command.\n     * a sample progress handler looks like this:\n     *\n     * ```\n     * progress = ({ ratio }) => {\n     *   console.log(ratio);\n     * }\n     * ```\n     *\n     * ratio is a float number between 0 to 1.\n     */\n    progress: function progress() {},\n\n    /*\n     * Path to find/download ffmpeg.wasm-core,\n     * this value should be overwriten by `defaultOptions` in\n     * each environment.\n     */\n    corePath: ''\n  }\n};","var _slicedToArray = require(\"D:/Projects/rick-love-master/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar duration = 0;\n\nvar ts2sec = function ts2sec(ts) {\n  var _ts$split = ts.split(':'),\n      _ts$split2 = _slicedToArray(_ts$split, 3),\n      h = _ts$split2[0],\n      m = _ts$split2[1],\n      s = _ts$split2[2];\n\n  return parseFloat(h) * 60 * 60 + parseFloat(m) * 60 + parseFloat(s);\n};\n\nmodule.exports = function (message, progress) {\n  if (typeof message === 'string') {\n    if (message.startsWith('  Duration')) {\n      var ts = message.split(', ')[0].split(': ')[1];\n      var d = ts2sec(ts);\n\n      if (duration === 0 || duration > d) {\n        duration = d;\n      }\n    } else if (message.startsWith('frame') || message.startsWith('size')) {\n      var _ts = message.split('time=')[1].split(' ')[0];\n      var t = ts2sec(_ts);\n      progress({\n        ratio: t / duration\n      });\n    } else if (message.startsWith('video:')) {\n      progress({\n        ratio: 1\n      });\n      duration = 0;\n    }\n  }\n};"],"sourceRoot":""}