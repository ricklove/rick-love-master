"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13],{1569:function(e,o,t){t.d(o,{R:function(){return l}});var r=t(1738),n=t(6135);const l=e=>{const o={saveScore:(t,r)=>{const n=o.loadScore();n.push({name:t,score:r}),n.sort(((o,t)=>e.sortKey(o.score)<e.sortKey(t.score)?-1:1)),localStorage.setItem(e.storageKey,JSON.stringify(n))},loadScore:()=>{const o=localStorage.getItem(e.storageKey);if(!o)return[];const t=JSON.parse(o);return t.sort(((o,t)=>(e.sortKey(o.score)>e.sortKey(t.score)?-1:1)*(e.sortDescending?-1:1))),t}},t={container:{flex:1,alignItems:"center",margin:16},textInput:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#0000FF"},buttonView:{margin:4,padding:4,borderColor:"#FFFF00",borderStyle:"solid",borderWidth:1,borderRadius:4},buttonText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#FFFF00"}},l=e=>{const[o,l]=(0,r.useState)("");return r.createElement(n.G7,{style:t.container},r.createElement(n.oi,{style:t.textInput,value:o,onChange:l,placeholder:"Name",keyboardType:"default",autoCompleteType:"off"}),r.createElement(n.Au,{onPress:()=>!!o&&e.onSubmit(o),style:o?{}:{opacity:.5}},r.createElement(n.G7,{style:t.buttonView},r.createElement(n.xv,{style:t.buttonText},"Save Score"))))},i={container:{marginTop:16,borderColor:"#FFFFFF",borderStyle:"solid",borderWidth:1,borderRadius:0},scoreView:{flexDirection:"row",justifyContent:"space-around",padding:4,borderColor:"#FFFFFF",borderStyle:"solid",borderWidth:1,borderRadius:0},nameText:{flex:2,fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#FFFFFF",overflow:"hidden"},scoreText:{flex:1,textAlign:"right",fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#FFFF00"}},s=o=>r.createElement(n.G7,{style:i.container},r.createElement(n.G7,{style:i.scoreView},r.createElement(n.xv,{style:i.nameText},"Leaderboard"),e.scoreColumns.map((e=>r.createElement(n.xv,{key:e.name,style:i.scoreText})))),r.createElement(n.G7,{style:i.scoreView},r.createElement(n.xv,{style:i.nameText},"Name"),e.scoreColumns.map((e=>r.createElement(n.xv,{key:e.name,style:i.scoreText},e.name)))),o.scores.map((o=>r.createElement(n.G7,{style:i.scoreView},r.createElement(n.xv,{style:i.nameText},o.name),e.scoreColumns.map((e=>r.createElement(n.xv,{key:o.name,style:i.scoreText},e.getValue(o.score))))))));return{useLeaderboard:({getScore:e})=>{const[t,n]=(0,r.useState)({scores:o.loadScore()});return{LeaderboardArea:i=>r.createElement(r.Fragment,null,!!i.gameOver&&r.createElement(l,{onSubmit:t=>{o.saveScore(t,e()),n({scores:o.loadScore()}),i.onScoreSaved()}}),r.createElement(s,{scores:t.scores}))}}}}},13:function(e,o,t){t.r(o),t.d(o,{EducationalGame_MultiplesSnake:function(){return c}});var r=t(1738),n=t(6135),l=t(5950),i=t(1569),s=t(6548);const a=(0,i.R)({storageKey:"MultiplesSnakeLeaderboard",sortKey:e=>e.score,scoreColumns:[{name:"Time",getValue:e=>`${(e.timeMs/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}`},{name:"Score",getValue:e=>`${e.score}`}]}),c=e=>{var o;const[t,l]=(0,r.useState)({key:0,startTime:Date.now(),gameOverTime:void 0,score:0}),[i,c]=(0,r.useState)(m()),[p,v]=(0,r.useState)(null),b=(0,r.useRef)(i),f=a.useLeaderboard({getScore:()=>{var e;return{score:t.score,timeMs:(null!==(e=t.gameOverTime)&&void 0!==e?e:Date.now())-t.startTime}}}),x=()=>{l((e=>Object.assign(Object.assign({},e),{gameOverTime:Date.now(),key:e.key+1})))},E=e=>{const o=Object.assign({},b.current);o.body.push({position:o.player.position});const t=o.columns[o.player.position.col].cells[o.player.position.row];l((e=>Object.assign(Object.assign({},e),{score:e.score+t.value}))),o.player.position=e;const r=o.columns[o.player.position.col].cells[o.player.position.row];return"body"===r.state?(o.isGameOver=!0,y(o),c(o),void x()):(s.ProgressGameService.onCorrect(),u(o),o.body.length+1===d*d?(o.isGameWon=!0,l((e=>Object.assign(Object.assign({},e),{score:e.score+r.value}))),y(o),c(o),void x()):(c(o),void setTimeout((()=>{S(o)}),100)))},S=e=>{const o=w(e,E);v(o)};return(0,r.useEffect)((()=>{S(i)}),[]),b.current=i,r.createElement(r.Fragment,null,r.createElement(n.G7,{style:{marginTop:50,marginBottom:150,padding:2,alignItems:"center"}},r.createElement(n.G7,{style:{width:292}},r.createElement(C,{gameScore:t}),r.createElement(g,{gameBoard:i,focus:null!==(o=i.player.position)&&void 0!==o?o:{col:0,row:0}}),p&&!t.gameOverTime&&r.createElement(F,{gameInput:p}),r.createElement(f.LeaderboardArea,{gameOver:!!t.gameOverTime,onScoreSaved:()=>{const e=m();l({key:0,startTime:Date.now(),gameOverTime:void 0,score:0}),c(e),S(e)}}))))},d=12,m=()=>{const e={key:0,isGameOver:!1,isGameWon:!1,maxTimes:d,columns:[...new Array(d)].map(((e,o)=>({col:o,cells:[...new Array(d)].map(((e,t)=>({col:o,row:t,value:(o+1)*(t+1),state:"blank",bodyIndex:0,connected:{t:!1,b:!1,l:!1,r:!1}})))}))),player:{position:{col:(0,l.m0)(d),row:(0,l.m0)(d)}},body:[]};return y(e),e};const u=e=>{y(e);y(e)},y=e=>{const o=e;o.key+=1,o.columns.forEach((e=>e.cells.forEach((e=>{const o=e;"body"===o.state&&(o.state="blank"),"player"===o.state&&(o.state="body"),o.connected={t:!1,b:!1,l:!1,r:!1}}))));const t=(e,o,t)=>({t:e.position.col===(null===o||void 0===o?void 0:o.position.col)&&e.position.row<(null===o||void 0===o?void 0:o.position.row)||e.position.col===(null===t||void 0===t?void 0:t.position.col)&&e.position.row<(null===t||void 0===t?void 0:t.position.row),b:e.position.col===(null===o||void 0===o?void 0:o.position.col)&&e.position.row>(null===o||void 0===o?void 0:o.position.row)||e.position.col===(null===t||void 0===t?void 0:t.position.col)&&e.position.row>(null===t||void 0===t?void 0:t.position.row),l:e.position.row===(null===o||void 0===o?void 0:o.position.row)&&e.position.col>(null===o||void 0===o?void 0:o.position.col)||e.position.row===(null===t||void 0===t?void 0:t.position.row)&&e.position.col>(null===t||void 0===t?void 0:t.position.col),r:e.position.row===(null===o||void 0===o?void 0:o.position.row)&&e.position.col<(null===o||void 0===o?void 0:o.position.col)||e.position.row===(null===t||void 0===t?void 0:t.position.row)&&e.position.col<(null===t||void 0===t?void 0:t.position.col)});o.body.forEach(((e,r)=>{var n;p(o,e.position,"body",o.body.length-r,t(e,o.body[r-1],null!==(n=o.body[r+1])&&void 0!==n?n:o.player))})),p(o,o.player.position,"player",0,t(o.player,o.body[o.body.length-1],void 0))},p=(e,o,t,r,n)=>{const l=e;l.columns[o.col].cells[o.row].state=t,l.columns[o.col].cells[o.row].bodyIndex=r,l.columns[o.col].cells[o.row].connected=n,l.key+=1},v={cellView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.75)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},focusCellView:{width:24,height:24,borderWidth:1,borderColor:"#66FF66",borderStyle:"solid",justifyContent:"center",alignItems:"center"},cellHeaderView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.5)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},focusCellHeaderView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.5)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},cellText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12},cellHeaderText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#333300"},focusCellHeaderText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#FFFF00"}},b=(e,o,t)=>({borderTopColor:o.connected.t?"transparent":v.focusCellView.borderColor,borderBottomColor:o.connected.b?"transparent":v.focusCellView.borderColor,borderLeftColor:o.connected.l?"transparent":v.focusCellView.borderColor,borderRightColor:o.connected.r?"transparent":v.focusCellView.borderColor,borderWidth:5*(.4+(e-o.bodyIndex)%10/10*.6)}),g=({gameBoard:e,focus:o})=>{const[t,l]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const e=setInterval((()=>{l((e=>e+1))}),500);return()=>clearInterval(e)}),[]),r.createElement(r.Fragment,null,r.createElement(n.G7,{style:{flexDirection:"row"}},r.createElement(n.G7,{style:{flexDirection:"column-reverse"}},r.createElement(n.G7,{style:v.focusCellHeaderView},r.createElement(n.xv,{style:v.focusCellHeaderText},"x")),e.columns[0].cells.map((e=>r.createElement(n.G7,{key:e.row,style:o.row===e.row?v.focusCellHeaderView:v.cellHeaderView},r.createElement(n.xv,{style:o.row===e.row?v.focusCellHeaderText:v.cellHeaderText},`${e.row+1}`))))),e.columns.map((l=>r.createElement(n.G7,{key:l.col,style:{flexDirection:"column-reverse"}},r.createElement(n.G7,{style:o.col===l.col?v.focusCellHeaderView:v.cellHeaderView},r.createElement(n.xv,{style:o.col===l.col?v.focusCellHeaderText:v.cellHeaderText},`${l.col+1}`)),l.cells.map((o=>r.createElement(n.G7,{key:o.row,style:"blank"!==o.state?[v.focusCellView,b(t,o,e.body.length)]:v.cellView},r.createElement(n.xv,{style:v.cellText},((e,o,t)=>"body"===e.state?`${e.value}`:"player"===e.state&&t?"\ud83d\ude0e":"player"===e.state&&o?"\ud83d\udc80":"player"===e.state?"\ud83d\ude00":"")(o,e.isGameOver,e.isGameWon))))))))))},w=(e,o)=>{var t,r,n,i;const{player:s}=e,a=[null===(t=e.columns[s.position.col+0])||void 0===t?void 0:t.cells[s.position.row+1],null===(r=e.columns[s.position.col+0])||void 0===r?void 0:r.cells[s.position.row-1],null===(n=e.columns[s.position.col+1])||void 0===n?void 0:n.cells[s.position.row+0],null===(i=e.columns[s.position.col-1])||void 0===i?void 0:i.cells[s.position.row+0]].filter((e=>e)),c=s.position.col===s.position.row,d=a.map((e=>({key:`${e.row} ${e.col}`,text:`${e.value}${c&&s.position.col===e.col?"\u2195":c&&s.position.row===e.row?"\u2194":""}`,onPress:()=>o(e)})));return{key:`${e.key}`,buttons:(0,l.TV)(d)}},f={outerContainer:{height:150},container:{flexDirection:"row",justifyContent:"space-around",margin:16},buttonView:{width:48,height:48,borderWidth:2,borderColor:"#6666FF",borderStyle:"solid",justifyContent:"center",alignItems:"center"},buttonText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,color:"#FFFFFF"}},F=({gameInput:e})=>{const[o,t]=(0,r.useState)(0);return(0,r.useEffect)((()=>{t(100);const e=setInterval((()=>{t((e=>Math.max(0,e-1)))}),50);return()=>clearInterval(e)}),[e.key]),console.log("GameInput",{gameInput:e}),r.createElement(r.Fragment,null,r.createElement(n.G7,{style:f.outerContainer},r.createElement(n.G7,{style:[f.container,{transform:`translate(0px,${o}px)`}]},e.buttons.map((e=>r.createElement(n.Au,{key:e.key,onPress:e.onPress},r.createElement(n.G7,{style:f.buttonView},r.createElement(n.xv,{style:f.buttonText},e.text))))))))},x={container:{flex:1,alignItems:"center",margin:16},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FFFF00"},mistakesText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FF6666"}},C=({gameScore:e})=>{const[o,t]=(0,r.useState)(""),[l,i]=(0,r.useState)("");return(0,r.useEffect)((()=>{const o=setInterval((()=>{if(i(`${e.score}`),e.gameOverTime){const o=e.gameOverTime-e.startTime;return void t((e=>`${(o/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})} seconds`))}const o=Date.now()-e.startTime;t((e=>`${(o/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})} seconds`))}),100);return()=>clearInterval(o)}),[e]),r.createElement(r.Fragment,null,r.createElement(n.G7,{style:x.container},r.createElement(n.G7,null,r.createElement(n.xv,{style:x.text},l))))}}}]);