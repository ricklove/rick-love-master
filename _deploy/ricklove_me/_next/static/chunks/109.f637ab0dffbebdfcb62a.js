"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{3782:function(e,t,r){r.d(t,{b:function(){return n}});const n=(e,t)=>{const r=(e=>({load:async()=>{var t;try{return JSON.parse(null!==(t=localStorage.getItem(e))&&void 0!==t?t:"error - NOT FOUND")}catch(r){return null}},save:async t=>{localStorage.setItem(e,JSON.stringify(t))}}))(t);return(async()=>{await e.load(r)})(),Object.assign(Object.assign({},e),{recordAnswer:(t,n)=>{e.recordAnswer(t,n),t.isLastOfSection&&(async()=>{await e.save(r)})()}})}},4535:function(e,t,r){r.d(t,{i:function(){return o}});var n=r(9504);const o=(e,{maxNewReviewCount:t=3,reviewSequencePreviousLength:r=1,reviewQuestionPrefix:o="\ud83d\udd04 ",requiredCorrectInRow:i=3})=>{const s={problemSourceHistory:[],reviewProblems:[],lastReviewProblem:null,reviewSequence:null,repeatState:"new"},a=()=>{console.log("createReviewProblemService startReview",s),s.repeatState="review"},c={load:e.load,save:e.save,getSections:e.getSections,gotoSection:e.gotoSection,getNextProblem:()=>{if(console.log("createReviewProblemService getNextProblem",s),"review"===s.repeatState){const e=(()=>{var e,t;console.log("createReviewProblemService getReviewProblem",s);const i=s.reviewSequence;if(i&&i.iNext>i.iEnd&&(console.log("createReviewProblemService getReviewProblem - End of Sequence",{rSeq:i,state:s}),s.reviewSequence=null),!s.reviewSequence){const n=s.reviewProblems.find((e=>{var t,r;return e.index>(null!==(r=null===(t=s.lastReviewProblem)||void 0===t?void 0:t.index)&&void 0!==r?r:-1)}));if(!n)return console.log("createReviewProblemService getReviewProblem - No Review Problem (with greater order than last)",{reviewProblems:s.reviewProblems,lastReviewProblem:s.lastReviewProblem,state:s}),s.lastReviewProblem=null,null;const o=null!==(t=null===(e=s.lastReviewProblem)||void 0===e?void 0:e.index)&&void 0!==t?t:-1;s.lastReviewProblem=n,console.log("createReviewProblemService getReviewProblem - Start Review Sequence",s);const i=Math.max(0,n.index-r,o+1);s.reviewSequence={iNext:i,iStart:i,iEnd:n.index}}const a=s.reviewSequence,c=s.problemSourceHistory[a.iNext];return a.iNext++,Object.assign(Object.assign({},c),{question:o+c.question,answers:(0,n.TV)(c.answers)})})();if(e)return Object.assign(Object.assign({},e),{isReview:!0});console.log("createReviewProblemService getNextProblem - No Review Problem - Change Mode to NEW",s),s.repeatState="new"}if(s.reviewProblems.filter((e=>e.correctsInRow<=1)).length>=t)return a(),c.getNextProblem();const i=e.getNextProblem();return i.question?(s.problemSourceHistory.push(i),i):(a(),c.getNextProblem())},recordAnswer:(t,r)=>{console.log("createReviewProblemService recordAnswer",s);const n=s.problemSourceHistory.findIndex((e=>e.key===t.key));if(n<0)return void e.recordAnswer(t,r);const o=s.reviewProblems.find((e=>e.index===n));if(r.isCorrect)o&&(o.correctsInRow++,s.reviewProblems=s.reviewProblems.filter((e=>e.correctsInRow<=i)));else if(o)o.correctsInRow=0;else{const e={index:n,correctsInRow:0,_debug_problemKey:t.key};s.reviewProblems.push(e),s.reviewProblems.sort(((e,t)=>e.index-t.index))}e.recordAnswer(t,r)}};return c}},2109:function(e,t,r){r.r(t),r.d(t,{EducationalGame_StarBlastSideways:function(){return y},EducationalGame_StarBlastSideways_Multiples:function(){return w}});var n=r(1738),o=r(6135),i=r(9504);const s=({min:e=1,max:t=12,maxAnswers:r=4})=>{let n={n:e-1,m:e,completedSectionKeys:[]};const o=e=>`${e}`;return{load:async e=>{const t=await e.load();t&&(n=t)},save:async e=>{await e.save(n)},getSections:()=>[...new Array(t-e+1)].map(((t,r)=>{return{key:o(r+e),name:(i=r+e,`Multiples of ${i}`),isComplete:n.completedSectionKeys.includes(o(r+e))};var i})),gotoSection:({key:t})=>{const r=Number.parseInt(t,10);n.m=r,n.n=e-1},getNextProblem:()=>{n.n++,n.n>t&&(n.n=e,n.m++,n.m>t&&(n.n=e,n.m=e));const{n:s,m:a}=n,c=s*a,l=r-1,m=(0,i.EB)([...new Array(100)].map((()=>Math.round(s+1-2*Math.random())*Math.round(a+1-2*Math.random())+Math.round(2-4*Math.random()))).filter((e=>e!==c)).filter((e=>e>0))).slice(0,l),u=(0,i.TV)([...m.map((e=>({value:`${e}`,isCorrect:!1}))),{value:`${c}`,isCorrect:!0}]).map((e=>Object.assign(Object.assign({},e),{key:e.value})));return{key:`${a} x ${s}`,question:`${a} x ${s}`,answers:u,sectionKey:o(a),isLastOfSection:s===t,isLastOfSubject:s===t&&a===t}},recordAnswer:(e,t)=>{t.isCorrect&&e.isLastOfSection&&n.completedSectionKeys.push(e.sectionKey)}}},a=e=>{const t=(0,n.useRef)({moveDirection:{x:0,y:0},buttons:e.buttons.map(((r,n)=>({isDown:!1,key:r.key,text:r.text,onPressIn:()=>{t.current.buttons[n].isDown=!0,e.onPressStateChange(t.current)},onPressOut:()=>{t.current.buttons[n].isDown=!1,e.onPressStateChange(t.current)}})))});return n.createElement(l,Object.assign({},e,{onMovePressIn:r=>{const n=t.current;t.current.moveDirection={x:r.x?r.x:n.moveDirection.x,y:r.y?r.y:n.moveDirection.y},console.log("onMovePressIn",{dir:r,s:n,moveDirection:t.current.moveDirection}),e.onPressStateChange(t.current)},onMovePressOut:r=>{const n=t.current;t.current.moveDirection={x:r.x?0:n.moveDirection.x,y:r.y?0:n.moveDirection.y},e.onPressStateChange(t.current)},buttons:t.current.buttons}))},c={container:{flex:1,alignSelf:"stretch",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:4},section:{justifyContent:"center",alignItems:"center",padding:4},moveSectionWrapper:{overflow:"hidden"},moveSectionRotation:{transform:"rotate(0.125turn)",margin:0},row:{flexDirection:"row"},cellTouch:{outline:"none"},cellView:{pointerEvents:"none",position:"relative",margin:4,width:56,height:56,justifyContent:"center",alignItems:"center",borderWidth:0,borderStyle:"solid",outline:"none"},cellText:{userSelect:"none",pointerEvents:"none"},moveCellText:{userSelect:"none",pointerEvents:"none",transform:"rotate(-0.125turn)"},cellEmptyView:{margin:2,width:56,height:56},cellTextOcclusionView:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"red",opacity:0}},l=e=>{const{onMovePressIn:t,onMovePressOut:r}=e,i=Object.assign(Object.assign({},c.cellView),e.style);(0,n.useEffect)((()=>{const n=e=>{var t;return e.preventDefault(),null===(t=e.stopPropagation)||void 0===t||t.call(e),!1};if("web"===o.t4.OS){const o=r=>{var o;return"ArrowUp"===r.key?(t({x:0,y:1}),n(r)):"ArrowDown"===r.key?(t({x:0,y:-1}),n(r)):"ArrowLeft"===r.key?(t({x:-1,y:0}),n(r)):"ArrowRight"===r.key?(t({x:1,y:0}),n(r)):" "!==r.key||(null===(o=e.buttons[0])||void 0===o||o.onPressIn(),n(r))},i=t=>{var o;return"ArrowUp"===t.key?(r({x:0,y:1}),n(t)):"ArrowDown"===t.key?(r({x:0,y:-1}),n(t)):"ArrowLeft"===t.key?(r({x:-1,y:0}),n(t)):"ArrowRight"===t.key?(r({x:1,y:0}),n(t)):" "!==t.key||(null===(o=e.buttons[0])||void 0===o||o.onPressOut(),n(t))};return window.addEventListener("keydown",o),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",i)}}return()=>{}}));const s=({text:e,direction:s})=>n.createElement(o.sh,{style:c.cellTouch,onPressIn:()=>t(s),onPressOut:()=>r(s)},n.createElement(o.G7,{style:i},n.createElement(o.xv,{style:c.moveCellText},e),n.createElement(o.G7,{style:c.cellTextOcclusionView}))),a=({text:e,onPressIn:t,onPressOut:r})=>n.createElement(o.sh,{style:c.cellTouch,onPressIn:t,onPressOut:r},n.createElement(o.G7,{style:i},n.createElement(o.xv,{style:c.cellText},e),n.createElement(o.G7,{style:c.cellTextOcclusionView})));return n.createElement(o.G7,{style:c.container},n.createElement(o.G7,{style:c.moveSectionWrapper},n.createElement(o.G7,{style:c.moveSectionRotation},n.createElement(o.G7,{style:c.section},n.createElement(o.G7,{style:c.row},n.createElement(s,{direction:{x:0,y:1},text:"\u2b06"}),n.createElement(s,{direction:{x:1,y:0},text:"\u27a1"})),n.createElement(o.G7,{style:c.row},n.createElement(s,{direction:{x:-1,y:0},text:"\u2b05"}),n.createElement(s,{direction:{x:0,y:-1},text:"\u2b07"}))))),n.createElement(o.G7,{style:c.section},n.createElement(o.G7,{style:c.row},e.buttons.map((e=>n.createElement(n.Fragment,{key:`${e.text}`},n.createElement(o.G7,{style:c.cellEmptyView}),n.createElement(a,Object.assign({},e))))))))},m=(e,t)=>{const r=e.x-t.x,n=e.y-t.y;return r*r+n*n};var u=r(4535),d=r(6548),v=r(3782),p=r(4641);const w=e=>n.createElement(y,{problemService:(0,v.b)((0,u.i)(s({min:1,max:12}),{}),"ProblemsMultiples")}),y=e=>n.createElement(x,{problemService:(0,d.createProgressGameProblemService)(e.problemService)}),x=e=>{const[t,r]=(0,n.useState)({paused:!1}),[i,s]=(0,n.useState)({moveDirection:{x:0,y:0},buttons:[]}),[c,l]=(0,n.useState)(0);return n.createElement(n.Fragment,null,n.createElement(o.G7,null,n.createElement(o.G7,{style:{alignItems:"center",alignSelf:"stretch"}},n.createElement(o.G7,{style:{overflow:"hidden",padding:10,paddingTop:4,paddingBottom:64}},n.createElement(o.G7,{style:{position:"relative"}},n.createElement(h,{pressState:i,pauseState:t,problemService:e.problemService,problemSourceKey:`${c}`}),n.createElement(o.G7,{style:{zIndex:10,flex:1,alignSelf:"stretch"}},n.createElement(a,{style:g.gamepad,onPressStateChange:e=>{s(e)},buttons:[{key:"A",text:"\ud83d\udd25"}]}))))),n.createElement(p._,{problemService:e.problemService,onOpen:()=>r({paused:!0}),onClose:()=>r({paused:!1}),onSubjectNavigation:()=>{r({paused:!1}),l((e=>e+1))}})))},g={gamepad:{backgroundColor:"#333333",borderColor:"#000033"},viewscreen:{borderColor:"#000033",backgroundColor:"#000000"}},f={directAnswerButtonContainer:{alignSelf:"flex-end",justifyContent:"space-around",height:250,padding:4},directAnswerButton:{width:40,height:40,backgroundColor:"#FFFFFF",opacity:.1},directAnswerButton_hidden:{width:40,height:40},viewscreenView:{height:300,width:300,backgroundColor:g.viewscreen.backgroundColor,borderColor:g.viewscreen.borderColor,borderWidth:1,borderStyle:"solid"},sprite:{viewSize:{width:32,height:32},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:32,textAlign:"center"}},answer:{text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,fontSize_small:14,textAlign:"center",whiteSpace:"pre-wrap"}},question:{view:{flex:1,justifyContent:"center",padding:4},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,fontSize_small:14,whiteSpace:"pre-wrap"}},gameOver:{view:{flex:1,justifyContent:"center",padding:4},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,textAlign:"center"}}},h=e=>{var t,r,i,s,a,c,l;const m=(0,n.useRef)(e.pressState);m.current=e.pressState;const u=(0,n.useRef)(e.pauseState);u.current=e.pauseState;const d=()=>({lastActualTimeMs:Date.now(),lastGameTime:0,gameSpeed:1,lives:3,score:0}),v=(0,n.useRef)(d()),p=()=>{const e=Date.now();let t=(e-v.current.lastActualTimeMs)/1e3;if(v.current.lastActualTimeMs=e,0===t)return{gameTime:v.current.lastGameTime};t>.1&&(t=.1);const r=t*v.current.gameSpeed,n=v.current.lastGameTime+r;return v.current.lastGameTime=n,{gameTime:n}},w=(0,n.useRef)({y:.5*f.viewscreenView.height,x:.15*f.viewscreenView.width,rotation:0}),y=(0,n.useRef)({lastShotActualTime:0,shots:[],debris:[]}),x=(0,n.useRef)({enemies:[]}),g=(0,n.useRef)(null),[h,O]=(0,n.useState)(0),j=()=>{x.current.enemies.forEach((e=>{e.pos.x+=.5*f.viewscreenView.width})),w.current.y=.5*f.viewscreenView.height,w.current.x=.15*f.viewscreenView.width,v.current=Object.assign(Object.assign({},d()),{lastGameTime:v.current.lastGameTime})},A=()=>{const t=e.problemService.getNextProblem();if(console.log("gotoNextProblem",{p:t}),!t.question)return;const r=f.viewscreenView.width/(t.answers.length+1),n={problemTime:p().gameTime,question:t.question,answers:t.answers.map(((e,n)=>Object.assign(Object.assign({},e),{key:`${t.question} ${e.value}`,pos:{y:r*(.5+n),x:f.viewscreenView.width-.5*f.sprite.viewSize.width,rotation:0},isAnsweredWrong:!1})))},o={enemies:n.answers.map(((n,o)=>{const i={key:`${t.question} ${n.value}`,answer:n,pos:{y:r*(.5+o),x:f.viewscreenView.width-1.5*f.sprite.viewSize.width,rotation:0},vel:{x:-5,y:0},onHit:()=>{setTimeout((()=>{console.log("onHit",{ans:n}),e.problemService.recordAnswer(t,n),n.isCorrect?(y.current.shots.forEach((e=>{e.ignore=!0})),A(),v.current=Object.assign(Object.assign({},v.current),{score:v.current.score+=1e3*Math.floor(i.pos.x),gameSpeed:Math.min(5,1*v.current.gameSpeed+.1)})):(n.isAnsweredWrong=!0,v.current=Object.assign(Object.assign({},v.current),{score:v.current.score-=1500*Math.floor(i.pos.x),gameSpeed:Math.max(.5,1*v.current.gameSpeed-.2)}))}))},destroyed:!1};return i}))};g.current=n,x.current=o,O((e=>e+1)),setTimeout((()=>{var e;null===(e=t.onQuestion)||void 0===e||e.call(t)}),250)};(0,n.useEffect)((()=>{A()}),[e.problemSourceKey]),(0,n.useEffect)((()=>{let e=p().gameTime;const t=()=>{var r;const{gameTime:n}=p(),o=n-e;if(e=n,u.current.paused||o<=0)return void requestAnimationFrame(t);const i=()=>({gameTime:n,gameDeltaTime:o,gameState:v.current,pressState:m.current,playerPosition:w.current,projectilesState:y.current,enemiesState:x.current,onLoseLife:()=>{v.current.deadTime||v.current.gameOverTime||(y.current.debris.push({key:`player${n}`,kind:"player-character",pos:Object.assign({},w.current),vel:{x:0,y:0}}),v.current.lives<=1?v.current=Object.assign(Object.assign({},v.current),{lives:0,gameOverTime:p().gameTime}):v.current=Object.assign(Object.assign({},v.current),{lives:v.current.lives-1,deadTime:n}))}}),s=S(i());if(v.current=s,v.current.gameOverTime)p().gameTime>1+v.current.gameOverTime&&(null===(r=m.current.buttons[0])||void 0===r?void 0:r.isDown)&&setTimeout((()=>{j()}),250);else{const e=b(i());w.current=e.playerPosition}const a=E(i());y.current=a;const c=k(i());x.current=c,requestAnimationFrame(t),O((e=>e+1))};requestAnimationFrame(t)}),[]);const C=p().gameTime-(null!==(r=null===(t=g.current)||void 0===t?void 0:t.problemTime)&&void 0!==r?r:0);return n.createElement(n.Fragment,null,n.createElement(o.G7,{style:f.viewscreenView},[...new Array(v.current.lives)].map(((e,t)=>n.createElement(T,{key:`life${t}`,kind:"life",position:{x:f.viewscreenView.width-f.sprite.viewSize.width*(1+t),y:f.viewscreenView.height-.5*f.sprite.viewSize.height,rotation:0}}))),y.current.debris.map((e=>n.createElement(T,{key:e.key,kind:e.hasHitGround?`${e.kind}-splat`:e.kind,position:e.pos}))),null===(i=x.current)||void 0===i?void 0:i.enemies.filter((e=>!e.destroyed)).map((e=>n.createElement(n.Fragment,{key:e.key},!e.answer.isAnsweredWrong&&n.createElement(P,{position:{y:e.pos.y,x:e.pos.x+f.sprite.viewSize.width,rotation:0},text:e.answer.value}),e.answer.isAnsweredWrong&&n.createElement(T,{kind:"answer-wrong",position:{y:e.pos.y,x:e.pos.x+f.sprite.viewSize.width,rotation:0}})))),null===(s=x.current)||void 0===s?void 0:s.enemies.filter((e=>!e.destroyed)).map((e=>{var t;return n.createElement(n.Fragment,{key:e.key},n.createElement(T,{kind:e.explodeTime?"enemy-explode":"enemy",position:e.pos}),e===(null===(t=v.current.weaponsLock)||void 0===t?void 0:t.lockedEnemy)&&n.createElement(T,{kind:"lock",position:e.pos}))})),!v.current.gameOverTime&&!v.current.deadTime&&n.createElement(T,{kind:"player",position:w.current}),y.current.shots.map((e=>n.createElement(T,{key:e.key,kind:e.explodeTime?"shot-explode":"shot",position:e.pos}))),v.current.gameOverTime&&n.createElement(o.G7,null,n.createElement(o.G7,{style:{position:"absolute",top:.5*f.viewscreenView.height,width:f.viewscreenView.width}},n.createElement(o.xv,{style:f.gameOver.text},"Game Over"),p().gameTime>1+v.current.gameOverTime&&n.createElement(o.xv,{style:f.gameOver.text},"Continue?"))),n.createElement(o.G7,{style:f.directAnswerButtonContainer},null===(a=x.current)||void 0===a?void 0:a.enemies.map((e=>n.createElement(o.Au,{key:e.key,onPress:()=>(e=>{if(v.current.gameOverTime)return void j();if(v.current.deadTime)return;if(e.destroyed||e.explodeTime)return;v.current.weaponsLock={lockedEnemy:e,lockedAtPlayerPosition:w.current};const{shots:t}=y.current;t.push({key:`${p()}${t.length}`,pos:Object.assign({},w.current),lockedEnemy:e}),v.current.playerTargetPosition={x:w.current.x,y:e.pos.y}})(e)},n.createElement(o.G7,{style:e.destroyed||e.explodeTime?f.directAnswerButton_hidden:f.directAnswerButton})))))),n.createElement(o.G7,{style:{position:"relative",height:3*f.question.text.fontSize,alignSelf:"stretch"}},n.createElement(P,{text:null!==(l=null===(c=g.current)||void 0===c?void 0:c.question)&&void 0!==l?l:"",position:{x:.25*f.viewscreenView.width,y:1*f.question.text.fontSize-Math.max(0,.5*f.viewscreenView.height-125*C),rotation:0}})))},S=({gameTime:e,gameDeltaTime:t,pressState:r,playerPosition:n,gameState:o,enemiesState:i})=>o.deadTime&&e>3+o.deadTime?(n.y=.5*f.viewscreenView.height,n.x=.15*f.viewscreenView.width,i.enemies.forEach((e=>{e.pos.x+=.5*f.viewscreenView.width})),Object.assign(Object.assign({},o),{deadTime:void 0})):o,b=({gameTime:e,gameDeltaTime:t,pressState:r,playerPosition:n,gameState:o})=>{if(o.deadTime)return{playerPosition:n};const i=r.moveDirection,s=o.playerTargetPosition,a=i.x||i.y?{x:i.x,y:-i.y}:s?{x:s.x-n.x,y:s.y-n.y}:{x:0,y:0};a.x=0===a.x?0:Math.sign(a.x),a.y=0===a.y?0:Math.sign(a.y),o.playerTargetPosition&&console.log("updatePlayer",{dirPress:i,dir:a,targetPos:s,playerPosition:n}),(i.x||i.y)&&(o.playerTargetPosition=void 0),o.playerTargetPosition&&m(n,o.playerTargetPosition)<25&&(o.playerTargetPosition=void 0);const c=.05*a.y,l={x:n.x+a.x*t*250,y:n.y+a.y*t*250,rotation:.9*n.rotation+.1*c},u=f.viewscreenView.width,d=.5*f.sprite.viewSize.width,v=f.viewscreenView.height,p=.5*f.sprite.viewSize.height;return l.x=l.x<d?d:l.x>u-d?u-d:l.x,l.y=l.y<p?p:l.y>v-p?v-p:l.y,{playerPosition:l}},E=({gameTime:e,gameDeltaTime:t,pressState:r,playerPosition:n,enemiesState:o,projectilesState:i,gameState:s,onLoseLife:a})=>{var c,l;const{shots:m,debris:u,lastShotActualTime:d}=i,v=!s.deadTime&&!s.gameOverTime&&Date.now()/1e3>.25+d&&(null===(c=r.buttons.find((e=>"A"===e.key)))||void 0===c?void 0:c.isDown);if(v){const t=null===(l=s.weaponsLock)||void 0===l?void 0:l.lockedEnemy;m.push({key:`${e}${m.length}`,pos:Object.assign({},n),lockedEnemy:t})}m.forEach((e=>{e.explodeTime||(!e.lockedEnemy||e.lockedEnemy.explodeTime||e.lockedEnemy.destoyed?e.pos.x+=250*t:(e.pos.y+=.25*(e.lockedEnemy.pos.y-e.pos.y),e.pos.x+=Math.min(250*t,.5*(e.lockedEnemy.pos.x-e.pos.x))))})),u.forEach((e=>{if(e.hasHitGround)return;e.vel.y+=100*t,e.pos.y+=e.vel.y*t,e.pos.x+=e.vel.x*t;const r=.5*f.sprite.viewSize.width,n=f.viewscreenView.width;e.pos.x<r&&(e.pos.x=r,e.vel.x=-e.vel.x),e.pos.x>n-r&&(e.pos.x=n-r,e.vel.x=-e.vel.x);const o=.8*f.sprite.viewSize.width,i=f.viewscreenView.height;e.pos.y>i-o+10*Math.random()&&(e.hasHitGround=!0,"kitten"===e.kind&&a())})),u.length>25&&u.shift();const p=m.filter((e=>e.pos.x<f.viewscreenView.width)).filter((t=>!t.explodeTime||e<1+t.explodeTime));return Object.assign(Object.assign({},i),{lastShotActualTime:v?Date.now()/1e3:d,shots:p})},k=({gameTime:e,gameDeltaTime:t,projectilesState:r,enemiesState:n,gameState:o,playerPosition:i,onLoseLife:s})=>{const{enemies:a}=n,{shots:c}=r,l=.75*f.sprite.viewSize.width,u=l*l;a.forEach((t=>c.forEach((n=>{t.explodeTime||n.explodeTime||n.ignore||n.lockedEnemy&&n.lockedEnemy!==t||m(t.pos,n.pos)<u&&(console.log("Exploded!",{e:t,s:n}),t.explodeTime=e,n.explodeTime=e,t.onHit(),t.answer.isCorrect?r.debris.push({key:`${t.key} ${e}`,kind:"alien",pos:Object.assign({},t.pos),vel:Object.assign({},t.vel)}):r.debris.push({key:`${t.key} ${e}`,kind:"kitten",pos:Object.assign({},t.pos),vel:Object.assign({},t.vel)}))}))));const d=l*l*1.5*1.5;a.forEach(((e,r)=>a.forEach(((n,o)=>{if(!(r>=o)&&!e.explodeTime&&!n.explodeTime&&m(e.pos,n.pos)<d){const r=.95,o=e.vel.y;e.vel.y=n.vel.y*r,n.vel.y=o*r;const i=e.pos.y<n.pos.y?e:n,s=e.pos.y<n.pos.y?n:e;i.pos.y-=10*t,s.pos.y+=10*t,i.vel.y-=10*t,s.vel.y+=10*t}}))));const v=l*l*.8*.8;a.forEach(((e,t)=>{e.explodeTime||o.deadTime||o.gameOverTime||m(e.pos,i)<v&&s()})),a.forEach((e=>{if(e.explodeTime)return;e.vel.y+=250*(2*Math.random()-1)*t,o.deadTime||o.gameOverTime?e.vel.x=0:e.vel.x=-25,e.pos.y>.7*f.viewscreenView.height&&(e.vel.y=-5),e.pos.x>f.viewscreenView.width-2*f.sprite.viewSize.width&&(e.pos.x=f.viewscreenView.width-2*f.sprite.viewSize.width),e.pos.x+=e.vel.x*t,e.pos.y+=e.vel.y*t;const r=.5*f.sprite.viewSize.height,n=f.viewscreenView.height;e.pos.y<r&&(e.pos.y=r,e.vel.y=5),e.pos.y>n-r&&(e.pos.y=n-r,e.vel.y=-e.vel.y);const i=.5*f.sprite.viewSize.width;e.pos.x<i&&(e.pos.x=i)}));const p=n.enemies.filter((e=>!e.explodeTime&&!e.destroyed)).sort(((e,t)=>Math.abs(e.pos.y-i.y)<Math.abs(t.pos.y-i.y)?-1:1))[0];(null===p||void 0===p?void 0:p.pos.x)<i.x+.5*f.sprite.viewSize.width?p.pos.y=i.y:(e=>{var t;(null===(t=o.weaponsLock)||void 0===t?void 0:t.lockedAtPlayerPosition.y)!==i.y&&(o.weaponsLock={lockedAtPlayerPosition:i,lockedEnemy:e})})(p);const w=a;return w.filter((t=>t.explodeTime&&e>1+t.explodeTime)).forEach((e=>{e.destroyed=!0})),{enemies:w}},T=({kind:e,position:t,text:r})=>{var i,s,a,c,l;const m=(e=>{switch(e){case"player":return{text:"\ud83d\ude80",rotation:.125,offsetX:0,offsetY:-.25};case"player-character":return{text:"\ud83d\ude2d"};case"player-character-splat":return{text:"\ud83d\ude2b",rotation:.15};case"shot":return{text:"\ud83d\udd25",rotation:-.25};case"shot-explode":return{text:"\u2728",rotation:0,scale:.5};case"lock":return{text:"\ud83d\udca2",offsetX:-.25,offsetY:-.125,scale:1.5};case"enemy":return{text:"\ud83d\udef8",offsetX:-.125,offsetY:-.125};case"enemy-explode":return{text:"\ud83d\udca5",offsetX:-.125,offsetY:-.125};case"answer-wrong":return{text:"\u274c",offsetX:-.125,offsetY:-.125};case"alien":return{text:"\ud83d\udc7d",offsetX:0,offsetY:0};case"kitten":return{text:"\ud83d\ude40",offsetX:0,offsetY:0};case"alien-splat":return{text:"\ud83d\udc80",offsetX:0,offsetY:0};case"kitten-splat":return{text:"\ud83e\udd69",offsetX:0,offsetY:0};case"super-kitten":return{text:"\ud83d\udc31\u200d\ud83c\udfcd",offsetX:0,offsetY:0};case"life":return{text:"\ud83d\ude80",scale:.5};case"text":return{text:"",offsetX:0,offsetY:-.125};default:return{text:"\ud83d\ude00"}}})(e),u=f.sprite.viewSize,{fontSize:d}=f.sprite.text,v=Object.assign(Object.assign({position:"absolute"},u),{transform:`translate(${t.x}px, ${t.y}px) rotate(${null!==(i=t.rotation)&&void 0!==i?i:0}turn)`,pointerEvents:"none"}),p=Object.assign(Object.assign({},u),{transform:`translate( ${-.5*u.width+Math.floor((null!==(s=m.offsetX)&&void 0!==s?s:0)*d)}px, ${-.5*u.height+Math.floor((null!==(a=m.offsetY)&&void 0!==a?a:0)*d)}px) rotate(${null!==(c=m.rotation)&&void 0!==c?c:0}turn) scale(${null!==(l=m.scale)&&void 0!==l?l:1})`});return n.createElement(o.G7,{style:v},n.createElement(o.G7,{style:p},n.createElement(o.xv,{style:f.sprite.text},null!==r&&void 0!==r?r:m.text)))},P=({text:e,position:t})=>{var r;const i=f.answer.text,s=e.length>10?i.fontSize_small:i.fontSize,a=.5*-s-4,c={position:"absolute",transform:`translate(${t.x}px, ${t.y+a}px) rotate(${null!==(r=t.rotation)&&void 0!==r?r:0}turn)`,pointerEvents:"none",maxWidth:.5*f.viewscreenView.width};return n.createElement(o.G7,{style:c},n.createElement(o.xv,{style:Object.assign(Object.assign({},f.answer.text),{fontSize:s})},e))}},4641:function(e,t,r){r.d(t,{_:function(){return s}});var n=r(1738),o=r(6135);const i={container:{margin:16},header:{view:{margin:4},text:{fontSize:16}},section:{view:{margin:4,flexDirection:"row"},text:{fontSize:16}}},s=e=>{const[t,r]=(0,n.useState)(!1);return n.createElement(o.G7,{style:i.container},n.createElement(o.Au,{onPress:()=>{t||e.onOpen(),t&&e.onClose(),r((e=>!e))}},n.createElement(o.G7,{style:i.header.view},n.createElement(o.xv,{style:i.header.text},"Sections"))),t&&n.createElement(o.G7,null,e.problemService.getSections().map((t=>n.createElement(o.Au,{key:t.key,onPress:()=>{console.log("SubjectNavigator onSection",{s:t}),e.problemService.gotoSection(t),e.onSubjectNavigation(),e.onClose(),r(!1),"web"===o.t4.OS&&window.scrollTo(0,0)}},n.createElement(o.G7,{style:i.section.view},n.createElement(o.xv,{style:i.section.text},t.isComplete?"\u2705":"\u2b1c"),n.createElement(o.xv,{style:i.section.text},t.name)))))))}}}]);