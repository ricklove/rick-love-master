"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{2608:function(e,t,n){n.d(t,{w_:function(){return c}});var o=n(1738),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=o.createContext&&o.createContext(r),l=function(){return(l=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n};function s(e){return e&&e.map((function(e,t){return o.createElement(e.tag,l({key:t},e.attr),s(e.child))}))}function c(e){return function(t){return o.createElement(d,l({attr:l({},e.attr)},t),s(e.child))}}function d(e){var t=function(t){var n,r=e.size||t.size||"1em";t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className);var a=e.attr,s=e.title,c=i(e,["attr","title"]);return o.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:n,style:l({color:e.color||t.color},t.style,e.style),height:r,width:r,xmlns:"http://www.w3.org/2000/svg"}),s&&o.createElement("title",null,s),e.children)};return void 0!==a?o.createElement(a.Consumer,null,(function(e){return t(e)})):t(r)}},5772:function(e,t,n){n.d(t,{kv:function(){return a},mB:function(){return o},hd:function(){return l}});const o=e=>{const t={},n=("?"===e[0]?e.substr(1):e).split("&");for(const o of n){const e=o.split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1]||"")}return t};var r=n(9504);function a(e,t,n=1e4){return Promise.race([fetch(e,t),new Promise(((e,t)=>setTimeout((()=>t(new r.MS("Fetch Timeout"))),n)))])}async function l(e,t,n){var o,l;const i=JSON.stringify(t),s={method:null!==(o=null===n||void 0===n?void 0:n.method)&&void 0!==o?o:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Content-Length":`${i.length}`},body:i},c=await a(e,s,null===n||void 0===n?void 0:n.timeoutMs).catch((n=>{throw new r.MS("Request Failure",{url:e,data:t,error:n})}));if(!c.ok)throw new r.MS("Api Error",{data:null!==(l=await c.json().catch((e=>{})))&&void 0!==l?l:{},responseStatus:c.status,request:{url:e,data:t}});return await c.json().catch((n=>{throw new r.MS("Request Parse Failure",{url:e,data:t,error:n})}))}},9232:function(e,t,n){n.d(t,{GF:function(){return s},tS:function(){return a},_s:function(){return i},O6:function(){return l}});var o=n(9504),r=n(5772);const a=e=>{async function t(t,n){const o=`${e.uploadApiUrl}/${t}`,a={endpoint:t,data:n};return(await(0,r.hd)(o,a)).data}return{createUploadUrl:e=>t("createUploadUrl",e),renewUploadUrl:e=>t("renewUploadUrl",e)}},l=async e=>{const t=await(0,r.kv)(e,{method:"GET",headers:{Accept:"application/json"}});return(await t.json()).data},i=e=>({uploadData:async t=>{const n=JSON.stringify({data:t});if(!(await(0,r.kv)(e.putUrl,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json","Content-Length":`${n.length}`},body:n})).ok)throw new o.gz("Upload Failed")},downloadData:async()=>await l(e.getUrl)}),s=e=>{const t=a(e);let n=null;const o=async()=>n||(n=await e.getUploadUrl(),n||(n=(await t.createUploadUrl({prefix:e.uploadUrlPrefix})).uploadUrl,await e.setUploadUrl(n),n));return{load:async()=>{const e=await o();try{return await l(e.getUrl)}catch(t){return null}},save:async r=>{let a=await o();try{const e=i(a);await e.uploadData(r)}catch(c){a=(await t.renewUploadUrl({uploadUrl:a})).uploadUrl,await e.setUploadUrl(a),n=a;const o=i(a);await o.uploadData(r)}const l=(await t.createUploadUrl({prefix:`backup/${a.relativePath}`})).uploadUrl,s=i(l);await s.uploadData(r)}}}},6766:function(e,t,n){n.d(t,{C:function(){return x},m:function(){return y}});var o=n(1738),r=n(6135);const a=e=>{var t,n,o,r,a,l,i,s;return{display:e.display,flexDirection:e.flexDirection,flex:e.flex,justifyContent:e.justifyContent,alignItems:e.alignItems,overflow:e.overflow,background:e.background,margin:e.margin,marginLeft:null!==(t=e.margin)&&void 0!==t?t:e.marginLeft,marginRight:null!==(n=e.margin)&&void 0!==n?n:e.marginRight,marginTop:null!==(o=e.margin)&&void 0!==o?o:e.marginTop,marginBottom:null!==(r=e.margin)&&void 0!==r?r:e.marginBottom,padding:e.padding,paddingRight:null!==(a=e.padding)&&void 0!==a?a:e.paddingRight,paddingLeft:null!==(l=e.padding)&&void 0!==l?l:e.paddingLeft,paddingTop:null!==(i=e.padding)&&void 0!==i?i:e.paddingTop,paddingBottom:null!==(s=e.padding)&&void 0!==s?s:e.paddingBottom,width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth,height:e.height,borderWidth:e.borderWidth,borderRadius:e.borderRadius,borderColor:e.borderColor,borderStyle:e.borderStyle,outlineColor:e.outlineColor}},l={text:"#333333",text_header:"#333333",text_button:"#333333",text_error:"#333333",text_errorMessage:"#ff3333",border:"#cccccc",border_minor:"#cccccc",border_input:"#cccccc",outline:"#888888",background:"#ffffff",background_field:"#dddddd",background_button:"#eeeeee",background_error:"#ffcccc",loader:"#3333ff",icon:"#3333ff"},i=e=>{var t,n,o,r;return{borderWidth:e.all,borderLeftWidth:null!==(t=e.left)&&void 0!==t?t:e.all,borderRightWidth:null!==(n=e.right)&&void 0!==n?n:e.all,borderTopWidth:null!==(o=e.top)&&void 0!==o?o:e.all,borderBottomWidth:null!==(r=e.bottom)&&void 0!==r?r:e.all}},s={textPadding:4,borderWidth:{all:1},borderWidth_minor:{all:1},borderWidth_input:{all:1},borderRadius:4,sectionGap:16,elementGap:8,rowGap:4,rowPadding:4,fontSize:14,fontSize_input:16,fontSize_button:14,fontSize_header:16,lineHeight:"18px",minWidth_label:120,minWidth_input:120,minWidth_button:120,icon:14},c={fontFamily:'"Trebuchet MS", Helvetica, Roboto, sans-serif',fontWeight_normal:"normal",fontWeight_button:"bold",fontWeight_header:"bold"},d=(e,t,n)=>{const o=Object.assign(Object.assign({},i(t.borderWidth)),{borderRadius:t.borderRadius,borderColor:e.border,borderStyle:"solid",outlineColor:e.outline}),r=Object.assign(Object.assign({},i(t.borderWidth_minor)),{borderRadius:t.borderRadius,borderColor:e.border_minor,borderStyle:"solid",outlineColor:e.outline}),a=Object.assign(Object.assign({},i(t.borderWidth_input)),{borderRadius:t.borderRadius,borderColor:e.border_input,borderStyle:"solid",outlineColor:e.outline});let l={},s={},c={},d={};return{colors:e,sizes:t,font:n,view_panel:l={background:e.background,padding:t.elementGap},view_form:l=Object.assign(Object.assign({},o),{marginBottom:t.sectionGap,padding:t.elementGap}),text_formTitle:s={padding:t.textPadding,color:e.text_header,fontSize:t.fontSize_header,fontFamily:n.fontFamily,fontWeight:n.fontWeight_header},view_formFields:l=Object.assign(Object.assign({},r),{marginBottom:t.rowGap,background:e.background_field}),view_fieldRow:l={marginLeft:t.rowPadding,display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap"},text_fieldLabel:s={padding:t.textPadding,color:e.text,fontSize:t.fontSize,fontWeight:n.fontWeight_normal,minWidth:t.minWidth_label},input_fieldEntry:s=Object.assign(Object.assign({},a),{marginBottom:t.rowGap,marginRight:t.rowGap,padding:t.textPadding,color:e.text,fontSize:t.fontSize_input,fontWeight:n.fontWeight_normal,lineHeight:t.lineHeight,minWidth:t.minWidth_input}),button_fieldInline:d=Object.assign(Object.assign({},o),{marginBottom:t.rowGap,marginRight:t.rowGap,padding:t.textPadding,background:e.background_button,color:e.text_button,fontSize:t.fontSize_button,fontWeight:n.fontWeight_button,lineHeight:t.lineHeight,display:"flex",minWidth:t.minWidth_button}),button_fieldInline_alt:d=Object.assign(Object.assign({},d),{background:e.text_button,color:e.background_button,borderColor:e.background_button}),view_formActionRow:l={display:"flex",flexDirection:"row",justifyContent:"flex-end",marginBottom:t.elementGap},button_formAction:d=Object.assign(Object.assign({},o),{marginLeft:t.elementGap,padding:t.textPadding,background:e.background_button,color:e.text_button,fontSize:t.fontSize_button,fontWeight:n.fontWeight_button,lineHeight:t.lineHeight,minWidth:t.minWidth_button}),button_formAction_alt:d=Object.assign(Object.assign({},d),{background:e.text_button,color:e.background_button,borderColor:e.background_button}),view_error:l=Object.assign(Object.assign({},o),{marginBottom:t.sectionGap,padding:t.rowPadding,background:e.background_error}),text_error:s={padding:t.textPadding,color:e.text_error,fontSize:t.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight_button},text_errorMessage:s={padding:t.textPadding,color:e.text_errorMessage,fontSize:t.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight_button},icon:c={size:t.icon,color:e.icon,outlineColor:e.outline},icon_errorMessage:c={size:t.icon,color:e.text_errorMessage,outlineColor:e.outline}}};Object.assign(Object.assign({},l),{text:"#2b2b2b",text_header:"#863d8f",text_button:"#ffffff",border:"#863d8f",border_minor:"#863d8f",border_input:"#aaaaaa",background:"#ffffff",background_field:"#dddddd",background_button:"#863d8f",loader:"#863d8f",icon:"#863d8f"}),Object.assign(Object.assign({},s),{borderWidth:{all:1,bottom:4},borderWidth_minor:{all:0,bottom:1}});let u=d(l,s,c);const m=e=>{var t;const n=null!==(t=e.style)&&void 0!==t?t:e.styleAlt?u.button_formAction_alt:u.button_formAction;return o.createElement(r.Au,{style:a(n),onPress:e.onPress},o.createElement(r.xv,{style:(l=n,{color:l.color,fontFamily:l.fontFamily,fontSize:l.fontSize,fontWeight:l.fontWeight,lineHeight:l.lineHeight,outlineColor:l.outlineColor})},e.children));var l};var p=n(9504),f=n(3737),g=n(2608);function v(e){return(0,g.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(e)}function h(e){return(0,g.w_)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"}}]})(e)}var y,E=n(7050);!function(e){e[e.menu=0]="menu",e[e.back=1]="back",e[e.error=2]="error",e[e.expanded=3]="expanded",e[e.collapsed=4]="collapsed",e[e.copy=5]="copy",e[e.retry=6]="retry",e[e.dashboard=7]="dashboard",e[e.add=8]="add",e[e.remove=9]="remove",e[e.eye=10]="eye",e[e.eyeSlash=11]="eyeSlash",e[e.checkChecked=12]="checkChecked",e[e.checkUnchecked=13]="checkUnchecked",e[e.account=14]="account",e[e.message=15]="message",e[e.subscription=16]="subscription",e[e.calendar=17]="calendar",e[e.contacts=18]="contacts",e[e.keys=19]="keys",e[e.resources=20]="resources",e[e.admin=21]="admin"}(y||(y={}));const b=e=>{var t,n,a,l,i;const s=function(e){switch(e){case y.menu:return{name:"menu",component:E.xXU};case y.back:return{name:"arrow-back",component:E.KYK};case y.error:return{name:"error-outline",component:E.wr$};case y.expanded:return{name:"chevron-down",component:v};case y.collapsed:return{name:"chevron-right",component:h};case y.copy:return{name:"content-copy",component:E.Fqs};case y.retry:return{name:"reload",component:f.WLu};case y.dashboard:return{name:"dashboard",component:E.bUq};case y.add:return{name:"plus",component:f.wEH};case y.remove:return{name:"minus",component:f.iFH};case y.eye:return{name:"eye",component:f.dSq};case y.eyeSlash:return{name:"eye-slash",component:f.tgn};case y.checkChecked:return{name:"checked",component:f.xik};case y.checkUnchecked:return{name:"unchecked",component:f.u9M};default:return{name:"unknown",component:E.hrt}}}(e.kind),c=s.component,d=null!==(a=null!==(n=null===(t=e.style)||void 0===t?void 0:t.size)&&void 0!==n?n:u.icon.size)&&void 0!==a?a:u.sizes.fontSize;return o.createElement(r.G7,{style:{width:d,height:d}},o.createElement(c,{name:s.name,size:d,color:null!==(i=null===(l=e.style)||void 0===l?void 0:l.color)&&void 0!==i?i:u.icon.color}))},w={view:u.view_error,text:u.text_error,text_errorMessage:u.text_errorMessage,icon:u.icon,icon_errorMessage:u.icon_errorMessage,button:{outlineColor:u.colors.outline}},S=e=>{var t,n;const[a,l]=(0,o.useState)(!1),i="string"===typeof e.error?`${e.error}`:null,s=null!==(n=null!==(t=e.error.message)&&void 0!==t?t:i)&&void 0!==n?n:"Unknown Error",c=e.error.data?(0,p.PO)(e.error.data,!0):void 0,d=e.error&&(0,p.PO)(e.error,!0)||void 0,u=!!c||!!d;return o.createElement(r.G7,{style:w.view},o.createElement(r.G7,{style:{flexDirection:"row"}},o.createElement(r.Au,{style:Object.assign({flex:1,flexDirection:"row",alignItems:"center"},w.button),onPress:()=>l(!a)},u&&(a?o.createElement(b,{style:w.icon,kind:y.expanded}):o.createElement(b,{style:w.icon,kind:y.collapsed})),o.createElement(r.G7,{style:{paddingRight:8}},o.createElement(b,{style:w.icon,kind:y.error})),o.createElement(r.G7,{style:{flex:1,overflow:"hidden"}},o.createElement(r.xv,{style:w.text,numberOfLines:a?void 0:1},s))),o.createElement(r.Au,{style:Object.assign({flexDirection:"row",alignItems:"center",paddingLeft:8},w.button),onPress:()=>r.TU.setString((0,p.PO)({errorMessage:s,errorDetails:c,errorObjText:d},!0))},o.createElement(b,{style:w.icon,kind:y.copy})),e.error.retryCallback&&o.createElement(r.Au,{style:Object.assign({flexDirection:"row",alignItems:"center",paddingLeft:8},w.button),onPress:e.error.retryCallback},o.createElement(b,{style:w.icon,kind:y.retry}))),u&&a&&!!c&&o.createElement(r.xv,{style:Object.assign({},w.text)},c),u&&a&&!!d&&o.createElement(r.xv,{style:Object.assign({},w.text)},d))},x={Loading:({loading:e})=>e?o.createElement(r.G7,null,o.createElement(r.P2,{size:"large",color:u.colors.loader})):o.createElement(o.Fragment,null),LoadingInline:({loading:e})=>e?o.createElement(o.Fragment,null,o.createElement(r.P2,{size:"small",color:u.colors.loader})):o.createElement(o.Fragment,null),ErrorBox:({error:e})=>e?o.createElement(S,{error:e}):o.createElement(o.Fragment,null),ErrorMessage:e=>o.createElement(r.G7,{style:{flexDirection:"row",alignItems:"center"}},o.createElement(r.G7,{style:{paddingLeft:8,paddingRight:8}},o.createElement(b,{style:w.icon_errorMessage,kind:y.error})),o.createElement(r.G7,{style:{overflow:"hidden"}},o.createElement(r.xv,{style:w.text_errorMessage,numberOfLines:1},e.children))),Icon:b,View_Panel:e=>o.createElement(r.G7,Object.assign({style:u.view_panel},e)),View_Form:e=>o.createElement(r.G7,Object.assign({style:u.view_form},e)),View_FormFields:e=>o.createElement(r.G7,Object.assign({style:u.view_formFields},e)),View_FieldRow:e=>o.createElement(r.G7,Object.assign({style:u.view_fieldRow},e)),View_FormActionRow:e=>o.createElement(r.G7,Object.assign({style:u.view_formActionRow},e)),Text_FormTitle:e=>o.createElement(r.xv,Object.assign({style:u.text_formTitle},e)),Text_FieldLabel:e=>o.createElement(r.xv,Object.assign({style:u.text_fieldLabel,numberOfLines:1},e)),Button_FieldInline:e=>o.createElement(m,Object.assign({style:e.styleAlt?u.button_fieldInline_alt:u.button_fieldInline},e)),Button_FormAction:e=>o.createElement(m,Object.assign({style:e.styleAlt?u.button_formAction_alt:u.button_formAction},e)),Input_Text:e=>{var t;return o.createElement(r.oi,{style:null!==(t=e.style)&&void 0!==t?t:u.input_fieldEntry,keyboardType:"default",autoCompleteType:"off",placeholder:e.placeholder,editable:e.editable,value:`${e.value}`,onChange:t=>e.onChange(t),onSubmitEditing:e.onSubmit,onFocus:e.onFocus,onBlur:e.onBlur})},Input_Username:e=>{var t;return o.createElement(r.oi,{style:null!==(t=e.style)&&void 0!==t?t:u.input_fieldEntry,keyboardType:"default",autoCompleteType:"username",placeholder:e.placeholder,editable:e.editable,value:`${e.value}`,onChange:t=>e.onChange(t),onSubmitEditing:e.onSubmit})},Input_Password:e=>{var t;const[n,a]=(0,o.useState)(!1),l=null!==(t=e.style)&&void 0!==t?t:u.input_fieldEntry,{marginRight:i}=l;return o.createElement(r.G7,{style:{flexDirection:"row",alignItems:"center"}},o.createElement(r.oi,{style:Object.assign(Object.assign({},l),{marginRight:0}),keyboardType:"default",autoCompleteType:"password",secureTextEntry:!n,placeholder:e.placeholder,editable:e.editable,value:`${e.value}`,onChange:t=>e.onChange(t),onSubmitEditing:e.onSubmit,onBlur:e.onBlur}),o.createElement(r.Au,{onPress:()=>a((e=>!e)),style:{outlineColor:u.icon.outlineColor}},o.createElement(r.G7,{style:{paddingLeft:4,paddingRight:4,marginRight:i}},o.createElement(b,{style:u.icon,kind:n?y.eye:y.eyeSlash}))))},Input_Phone:e=>{var t;const[n,a]=(0,o.useState)(p.jM.formatPhoneNumber_UsaCanada(e.value));return o.createElement(r.oi,{style:null!==(t=e.style)&&void 0!==t?t:u.input_fieldEntry,keyboardType:"phone-pad",autoCompleteType:"tel",placeholder:e.placeholder,editable:e.editable,value:n,onChange:t=>{a(p.jM.formatPhoneNumber_UsaCanada(t)),e.onChange(p.jM.toStandardPhoneNumber(t))},onSubmitEditing:e.onSubmit})},Input_Email:e=>{var t;const[n,a]=(0,o.useState)(p.FC.toEmailAddress(e.value));return o.createElement(r.oi,{style:null!==(t=e.style)&&void 0!==t?t:u.input_fieldEntry,keyboardType:"email-address",autoCompleteType:"email",placeholder:e.placeholder,editable:e.editable,value:n,onChange:t=>{a(p.FC.toEmailAddress(t)),e.onChange(p.FC.toEmailAddress(t))},onSubmitEditing:e.onSubmit})},Input_Currency:e=>{var t;return o.createElement(r.oi,{style:null!==(t=e.style)&&void 0!==t?t:u.input_fieldEntry,keyboardType:"numeric",autoCompleteType:"off",placeholder:e.placeholder,editable:e.editable,value:`${e.value}`,onChange:t=>e.onChange(Number.parseFloat(t)||0),onSubmitEditing:e.onSubmit})}}},6135:function(e,t,n){n.d(t,{P2:function(){return f},TU:function(){return y},t4:function(){return h},sh:function(){return p},xv:function(){return d},oi:function(){return u},Au:function(){return m},G7:function(){return c}});var o=n(1738),r=n(6637);function a(e){var t;if(Array.isArray(e)){if(1===e.length)return null!==(t=a(e[0]))&&void 0!==t?t:{};let n=Object.assign({},a(e[0]));return e.forEach((e=>{n=Object.assign(Object.assign({},n),a(null!==e&&void 0!==e?e:{}))})),null!==n&&void 0!==n?n:{}}return e}const l={display:"flex",flexDirection:"column"},i={whiteSpace:"pre"},s=e=>{const t=e;return"none"===t.userSelect&&(t.MozUserSelect="none",t.WebkitUserSelect="none"),e},c=e=>o.createElement("div",{style:a([l,e.style])},e.children),d=e=>{if(1===e.numberOfLines){const t={overflow:"hidden",whiteSpace:"nowrap",wordWrap:"break-word",textOverflow:"ellipsis"},n=a([i,e.style,t]);return o.createElement("span",{style:s(n)},e.children)}const t=a([i,e.style]);return o.createElement("span",{style:s(t)},e.children)},u=e=>{var t,n;const r="numeric"===e.keyboardType?"number":e.secureTextEntry?"password":"text",l="username"===e.autoCompleteType?"username":"password"===e.autoCompleteType?"password":void 0,s=e.onSubmitEditing&&(t=>{var n;"Enter"!==t.key||t.shiftKey||(t.preventDefault(),null===(n=e.onSubmitEditing)||void 0===n||n.call(e))})||void 0;return e.multiline?o.createElement("textarea",{name:l,id:l,style:a([i,e.style]),placeholder:e.placeholder,disabled:!(null===(t=e.editable)||void 0===t||t),value:e.value,onFocus:e.onFocus,onChange:t=>e.onChange(t.target.value),onKeyPress:s,onBlur:e.onBlur,rows:e.numberOfLines,onSelect:t=>{var n,o,r;const a=t.target,l={start:null!==(n=a.selectionStart)&&void 0!==n?n:0,end:null!==(o=a.selectionEnd)&&void 0!==o?o:0};(a.selectionStart||a.selectionEnd)&&(null===(r=e.onSelectionChange)||void 0===r||r.call(e,l))}}):o.createElement("input",{type:r,name:l,id:l,style:a([i,e.style]),placeholder:e.placeholder,disabled:!(null===(n=e.editable)||void 0===n||n),value:e.value,onFocus:e.onFocus,onChange:t=>e.onChange(t.target.value),onKeyPress:s,onBlur:e.onBlur})},m=e=>{const t=(0,o.useRef)(Date.now()),n=()=>{Date.now()<t.current+250||(t.current=Date.now(),e.onPress())},r=(0,o.useRef)(!0);return o.createElement("div",{style:a([l,e.style]),onClick:n,onKeyPress:n,onTouchStart:()=>{r.current=!0},onTouchMove:()=>{r.current=!1},onTouchEnd:()=>{r.current&&n()},role:"button",tabIndex:0},e.children)},p=e=>{const t=e=>{var t;return e.preventDefault(),null===(t=e.stopPropagation)||void 0===t||t.call(e),e.cancelBubble=!0,e.returnValue=!1,!1},n=n=>(e.onPressIn(),t(n)),r=n=>(e.onPressOut(),t(n));return o.createElement("div",{style:a([l,e.style]),onMouseDown:n,onMouseUp:r,onTouchStart:n,onTouchEnd:r,onTouchCancel:r,onTouchMove:t,onMouseLeave:r,onTouchEndCapture:r,role:"button",tabIndex:0},e.children)},f=({size:e,color:t})=>{const n="small"===e?16:32;return o.createElement(v,{size:n,thickness:n/8,color:t})},g=r.iv`
  .activity-spinner {
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    50% {
      transform: rotate(180deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  .activity-spinner-2 {
    animation: spin-2 0.7s linear infinite;
  }

  @keyframes spin-2 {
    0% {
      transform: rotate(360deg);
    }
    50% {
      transform: rotate(180deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
`,v=({size:e,thickness:t,color:n})=>{const a=.6*(2*Math.PI*(e-t)*.5);return o.createElement(o.Fragment,null,o.createElement(r.xB,{styles:g}),o.createElement("svg",{style:{maxWidth:e},viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg"},o.createElement("circle",{style:{fill:"transparent",stroke:n,strokeWidth:t,opacity:.5},cx:.5*e,cy:.5*e,r:.5*e-t}),o.createElement("circle",{className:"activity-spinner",style:{strokeDasharray:a,fill:"transparent",stroke:n,strokeWidth:t,transformOrigin:`${.5*e}px ${.5*e}px`},cx:.5*e,cy:.5*e,r:.5*e-t})))},h={OS:"web"},y={setString:async e=>{await navigator.clipboard.writeText(e)}}},6548:function(e,t,n){n.r(t),n.d(t,{ProgressGameService:function(){return X},ProgressGameView:function(){return Z},createProgressGameProblemService:function(){return Q}});var o=n(1738),r=n(6135),a=n(9232),l=n(9504);const i="_USER_DATA_SERVICE_STATE",s=e=>{const t=(0,a.tS)(e),n={getUserDataServiceState:()=>{var e;try{return JSON.parse(null!==(e=localStorage.getItem(i))&&void 0!==e?e:"NULL !{}")}catch(t){return null}},setUserDataServiceState:e=>{localStorage.setItem(i,JSON.stringify(e))},getUserData:()=>{const e=n.getUserDataServiceState(),t=e&&e.userProfiles.find((t=>t.key===e.activeUserProfileKey)),o={data:{},metadata:{name:null===t||void 0===t?void 0:t.name,emoji:null===t||void 0===t?void 0:t.emoji},timestamp:Date.now()},r=Object.keys(localStorage).filter((e=>!e.startsWith("_")));for(const n of r)o.data[n]=localStorage.getItem(n);return o},clearUserData:()=>{const e=Object.keys(localStorage).filter((e=>!e.startsWith("_")));for(const n of e)localStorage.removeItem(n);const t=n.getUserDataServiceState();t&&(t.userProfiles.forEach((e=>{e.lastUploadTimestamp=void 0})),n.setUserDataServiceState(t))},setUserData:e=>{var t,o,r,a;n.clearUserData();for(const n of Object.keys(e.data)){const t=e.data[n];if(!t)return void localStorage.removeItem(n);localStorage.setItem(n,t)}const l=n.getUserDataServiceState(),i=l&&l.userProfiles.find((e=>e.key===l.activeUserProfileKey));l&&i&&(i.emoji=null!==(o=null===(t=e.metadata)||void 0===t?void 0:t.emoji)&&void 0!==o?o:i.emoji,i.name=null!==(a=null===(r=e.metadata)||void 0===r?void 0:r.name)&&void 0!==a?a:i.name,i.lastUploadTimestamp=e.timestamp,n.setUserDataServiceState(l))}},o=()=>{const e=n.getUserDataServiceState();return(null===e||void 0===e?void 0:e.activeUserProfileKey)?e.userProfiles.find((t=>t.key===e.activeUserProfileKey)):null},r=async(e,o)=>{const r=n.getUserDataServiceState(),l=r&&r.userProfiles.find((t=>t.key===e));if(!r||!l)return;await(async(e,n)=>{const o=await t.createUploadUrl({prefix:`backup/users/${e.name}/${e.uploadUrl.relativePath}/${Date.now()}`}),r=(0,a._s)(o.uploadUrl);await r.uploadData(n)})(l,o);const i=async()=>{const e=(0,a._s)(l.uploadUrl);await e.uploadData(o)};try{console.log("uploadWithAutoRenew - Attempt 1"),await i(),console.log("uploadWithAutoRenew - UPLOADED")}catch(s){console.log("uploadWithAutoRenew - Attempt 2");const e=await t.renewUploadUrl({uploadUrl:l.uploadUrl});l.uploadUrl=e.uploadUrl,n.setUserDataServiceState(r),await i(),console.log("uploadWithAutoRenew - UPLOADED AFTER RENEW")}},s=async e=>{var t,o,r,l,i;console.log("updateUserProfile",{userProfileKey:e});const s=n.getUserDataServiceState(),c=s&&s.userProfiles.find((t=>t.key===e));if(!s||!c)return void console.log("updateUserProfile - NO USER STATE",{userProfileKey:e});const d=await(0,a.O6)(c.uploadUrl.getUrl);!d.timestamp||d.timestamp<=(null!==(t=c.lastUploadTimestamp)&&void 0!==t?t:0)?console.log("updateUserProfile - NOT NEW",{name:c.name}):(console.log("updateUserProfile - UPDATED USER PROFILE",{name:c.name}),c.emoji=null!==(r=null===(o=d.metadata)||void 0===o?void 0:o.emoji)&&void 0!==r?r:c.emoji,c.name=null!==(i=null===(l=d.metadata)||void 0===l?void 0:l.name)&&void 0!==i?i:c.name,c.lastUploadTimestamp=d.timestamp,n.setUserDataServiceState(s),c.key===s.activeUserProfileKey&&(console.log("updateUserProfile - UPDATED ACTIVE USER DATA",{name:c.name}),n.setUserData(d)))},c=async()=>{const e=n.getUserDataServiceState();if(e)for(const n of e.userProfiles)try{await s(n.key)}catch(t){console.log("updateAllProfiles - ERROR Updating user profile",{error:t})}};let d=!1,u=!1;const m={setup:async()=>{if(d){for(;!u;)await(0,l.gw)(10);return}d=!0;try{await(async()=>{if(console.log("UserDataService:setup"),o())return void(await c());const e=n.getUserDataServiceState();if(e&&e.userProfiles.length>0)return e.activeUserProfileKey=e.userProfiles[0].key,n.setUserDataServiceState(e),void(await c());const r=await t.createUploadUrl({prefix:"users"}),a=null!==e&&void 0!==e?e:{userProfiles:[{key:r.uploadUrl.relativePath,name:"Player 1",uploadUrl:r.uploadUrl}],activeUserProfileKey:r.uploadUrl.relativePath,changeTimestamp:0};n.setUserDataServiceState(a),await m.uploadUserData()})(),u=!0}catch(e){throw u=!0,e}},getActiveUser:()=>{var e;const t=o();return t?{key:t.key,name:t.name,emoji:null!==(e=t.emoji)&&void 0!==e?e:"\ud83d\udc64",isActive:!0}:null},setActiveUser:async e=>{console.log("setActiveUser",{userProfileKey:e});const t=n.getUserDataServiceState();if(t){if(!t.userProfiles.find((t=>t.key===e)))throw console.log("setActiveUser - User Profile Not Found",{userProfileKey:e}),new l.gz("User Profile not found");t.activeUserProfileKey!==e&&(console.log("setActiveUser - user changed - clearing state"),t.activeUserProfileKey=e,t.changeTimestamp=0,n.setUserDataServiceState(t),n.clearUserData()),console.log("setActiveUser - before download",{stateJson:JSON.stringify(n.getUserDataServiceState())}),await m.downloadUserDataIfNewer()}},getUserProfiles:async()=>{const e=n.getUserDataServiceState();return(null===e||void 0===e?void 0:e.activeUserProfileKey)?e.userProfiles.map((t=>{var n;return{key:t.key,name:t.name,emoji:null!==(n=t.emoji)&&void 0!==n?n:"\ud83d\udc64",isActive:e.activeUserProfileKey===t.key}})):[]},setUserProfileInfo:async(e,t)=>{var o,l;const i=n.getUserDataServiceState();if(!i)return void console.log("uploadUserData - NO STATE");const s=i.userProfiles.find((t=>t.key===e));if(!s)return void console.log("uploadUserData - NO USER STATE");s.emoji=null!==(o=t.emoji)&&void 0!==o?o:s.emoji,s.name=null!==(l=t.name)&&void 0!==l?l:s.name,n.setUserDataServiceState(i);const c=(0,a._s)(s.uploadUrl),d=await c.downloadData();d&&(d.metadata={name:s.name,emoji:s.emoji},d.timestamp=Date.now(),await r(e,d))},uploadUserData:async()=>{console.log("uploadUserData");const e=n.getUserDataServiceState();if(!e)return void console.log("uploadUserData - NO STATE");const t=e.userProfiles.find((t=>t.key===e.activeUserProfileKey));if(!t)return void console.log("uploadUserData - NO user State",{state:e});t.lastUploadTimestamp=Date.now(),n.setUserDataServiceState(e);const o=n.getUserData();await r(t.key,o),console.log("uploadUserData - UPLOADED",{userData:o})},downloadUserDataIfNewer:async()=>{var e;const t=n.getUserDataServiceState();if(!t)return;const o=t.userProfiles.find((e=>e.key===t.activeUserProfileKey));if(!o)return;console.log("downloadUserDataIfNewer");const r=(0,a._s)(o.uploadUrl),l=await r.downloadData();!l.timestamp||l.timestamp<=(null!==(e=o.lastUploadTimestamp)&&void 0!==e?e:0)?console.log("downloadUserDataIfNewer - Local data is up to date",{state:t,userData:l}):(console.log("downloadUserDataIfNewer - UPDATING",{state:t,userData:l}),n.clearUserData(),n.setUserData(l))},createShareCode:async e=>{await m.setup();const o=(e=>{const t=n.getUserDataServiceState();return t?t.userProfiles.find((t=>t.key===e)):null})(e);if(!o)throw new l.gz("user should not be null");const r=await t.createUploadUrl({shareablePath:!0}),i=(0,a._s)(r.uploadUrl);return await i.uploadData(o.uploadUrl),{shareCode:r.uploadUrl.relativePath}},addUserFromShareCode:async e=>{console.log("addUserFromShareCode",{shareCode:e});const o=await t.createUploadUrl({shareablePath:!0}),r=o.uploadUrl.getUrl.replace(o.uploadUrl.relativePath,e.toUpperCase()),i=await(0,a.O6)(r);if(!i.putUrl)throw console.log("addUserFromShareCode - FAILED TO GET PROFILE"),new l.gz("Failed to get user profile");const c=n.getUserDataServiceState();if(!c)throw console.log("addUserFromShareCode - NO STATE"),new l.gz("UserDataService is not setup");c.userProfiles.find((e=>e.key===i.relativePath))?console.log("addUserFromShareCode - ALREADY HAS USER",{userKey:i.relativePath}):(c.userProfiles.push({key:i.relativePath,name:`Player ${c.userProfiles.length+1}`,uploadUrl:i}),n.setUserDataServiceState(c),console.log("addUserFromShareCode - ADDED",{userKey:i.relativePath}),await s(i.relativePath))}};return m},c={uploadApiConfig:null,instance:null},d=()=>{if(!c.uploadApiConfig)throw new l.gz("UserDataService is not setup: Call UserDataService.setup");return c.instance||(c.instance=s(c.uploadApiConfig)),c.instance};var u=n(6766),m=n(3880);const p="\n\ud83d\udc35 \ud83d\udc36 \ud83d\udc3a \ud83d\udc31 \ud83e\udd81 \ud83d\udc2f \ud83e\udd92 \ud83e\udd8a \ud83e\udd9d \ud83d\udc2e \ud83d\udc37 \ud83d\udc17 \ud83d\udc2d \ud83d\udc39 \ud83d\udc30 \ud83d\udc3b \ud83d\udc28 \ud83d\udc3c \ud83d\udc38 \ud83e\udd93 \ud83d\udc34 \ud83e\udd84 \ud83d\udc14 \ud83d\udc32\n".split(" ").map((e=>e.trim())).filter((e=>e)),f=e=>{const{loading:t,error:n,doWork:r}=(0,m.VL)(),[a,l]=(0,o.useState)(null),i=()=>r((async e=>{await d().setup(),e();const t=await d().getUserProfiles();l(t)}));return(0,o.useEffect)((()=>{i()}),[]),o.createElement(u.C.View_Panel,null,o.createElement(u.C.Text_FormTitle,null,"Users"),o.createElement(u.C.LoadingInline,{loading:t}),o.createElement(u.C.ErrorBox,{error:n}),null===a||void 0===a?void 0:a.map((e=>o.createElement(v,{key:e.key,userProfile:e,onActiveUserChange:i,onUserProfileChange:i}))),o.createElement(u.C.Text_FormTitle,null,"Add User"),o.createElement(g,{onUserAdded:i}),!!e.onClose&&o.createElement(u.C.View_FormActionRow,null,o.createElement(u.C.Button_FormAction,{onPress:()=>{var t;return null===(t=e.onClose)||void 0===t?void 0:t.call(e)}},"Done")))},g=e=>{const{loading:t,error:n,doWork:r}=(0,m.VL)(),[a,l]=(0,o.useState)(null);return o.createElement(o.Fragment,null,o.createElement(u.C.View_Form,null,o.createElement(u.C.View_FieldRow,null,o.createElement(u.C.LoadingInline,{loading:t}),o.createElement(u.C.Input_Text,{value:null!==a&&void 0!==a?a:"",onChange:l,placeholder:"Enter Share Code"}),o.createElement(u.C.Button_FieldInline,{onPress:()=>{a&&r((async t=>{await d().addUserFromShareCode(a),t(),e.onUserAdded(),l(null)}))}},"Add User")),o.createElement(u.C.ErrorBox,{error:n})))},v=({userProfile:e,onActiveUserChange:t,onUserProfileChange:n})=>{const{loading:a,error:l,doWork:i}=(0,m.VL)(),[s,c]=(0,o.useState)(null),[f,g]=(0,o.useState)(null);return f?o.createElement(o.Fragment,null,o.createElement(u.C.View_Form,null,o.createElement(r.G7,{style:{flexDirection:"row",flexWrap:"wrap"}},f.map((t=>o.createElement(r.Au,{key:t,onPress:()=>{return o=t,i((async t=>{await d().setUserProfileInfo(e.key,{emoji:o}),t(),g(null),n()}));var o}},o.createElement(r.G7,null,o.createElement(r.xv,{style:{fontSize:32}},t)))))))):o.createElement(o.Fragment,null,o.createElement(u.C.View_Form,null,o.createElement(u.C.View_FieldRow,null,o.createElement(u.C.LoadingInline,{loading:a}),o.createElement(r.Au,{onPress:()=>i((async n=>{await d().setActiveUser(e.key),n(),t()}))},o.createElement(u.C.Icon,{style:{size:32},kind:e.isActive?u.m.checkChecked:u.m.checkUnchecked})),o.createElement(r.Au,{onPress:()=>{g(p)}},o.createElement(r.G7,null,o.createElement(r.xv,{style:{fontSize:32}},e.emoji))),o.createElement(h,{userProfile:e,onNameChange:n}),!!s&&o.createElement(u.C.Text_FieldLabel,null,s),!s&&o.createElement(u.C.Button_FieldInline,{onPress:()=>i((async t=>{const n=await d().createShareCode(e.key);t(),c(n.shareCode)}))},"Create Share Code")),o.createElement(u.C.ErrorBox,{error:l})))},h=({userProfile:e,onNameChange:t})=>{const{loading:n,error:a,doWork:l}=(0,m.VL)(),[i,s]=(0,o.useState)(e.name),[c,p]=(0,o.useState)(!1),f=()=>l((async n=>{console.log("UserProfileName changeName",{name:i}),await d().setUserProfileInfo(e.key,{name:i}),n(),p(!1),t()}));return o.createElement(o.Fragment,null,!c&&o.createElement(r.Au,{onPress:()=>p(!0)},o.createElement(u.C.Text_FieldLabel,null,e.name)),c&&o.createElement(o.Fragment,null,o.createElement(u.C.Input_Text,{value:i,onChange:s,onSubmit:f}),o.createElement(u.C.Button_FieldInline,{onPress:f},"Change")))},y={container:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around"},profileContainer:{flexDirection:"column",alignItems:"center"},profileCharacterView:{width:80,height:80,borderWidth:1,borderStyle:"solid",borderColor:"#888888"},profileCharacterText:{fontSize:48,textAlign:"center"},profileNameView:{},profileNameText:{}},E=e=>{const{loading:t,error:n,doWork:a}=(0,m.VL)(),[l,i]=(0,o.useState)(null),[s,c]=(0,o.useState)(!1),u=()=>a((async e=>{await d().setup(),e();const t=await d().getUserProfiles();i(t)}));return(0,o.useEffect)((()=>{u()}),[]),l?s?o.createElement(f,{onClose:()=>{c(!1),u()}}):o.createElement(r.G7,{style:y.container},l.map((t=>{var n;return o.createElement(r.Au,{key:t.key,onPress:()=>{return n=t.key,a((async t=>{await d().setActiveUser(n),t(),e.onUserSelected()}));var n}},o.createElement(r.G7,{style:y.profileContainer},o.createElement(r.G7,{style:y.profileCharacterView},o.createElement(r.xv,{style:y.profileCharacterText},null!==(n=t.emoji)&&void 0!==n?n:"\ud83d\udc64")),o.createElement(r.G7,{style:y.profileNameView},o.createElement(r.xv,{style:y.profileNameText},t.name))))})),o.createElement(r.Au,{onPress:()=>{c(!0)}},o.createElement(r.G7,{style:y.profileContainer},o.createElement(r.G7,{style:y.profileCharacterView},o.createElement(r.xv,{style:y.profileCharacterText}," \ud83d\udc64 ")),o.createElement(r.G7,{style:y.profileNameView},o.createElement(r.xv,{style:y.profileNameText},"Edit"))))):o.createElement(o.Fragment,null)},b=()=>{const e=`${_}\n${k}\n${F}`,t=`${P}\n${D}\n\n${U(F)}`,n=S(e,"male"),o=S(t,"female"),r={emoji:C,name:"baby",gender:"baby",pay:0,requirementEmojis:[],startEmoji:null,parent:null,children:[]},a=[r,...n,...o],l=r;a.forEach((e=>{const t=a.find((t=>e.startEmoji===t.emoji));t&&(t.children.push(e),e.parent=t)}));const i=w(O);a.forEach((e=>{const t=e.requirementEmojis.map((e=>{var t;return null!==(t=i.find((t=>t.emoji===e)))&&void 0!==t?t:{emoji:e,cost:0}})),n=t.map((e=>`${e.emoji} = ${e.cost}`)).join("\n"),o=t.reduce(((e,t)=>e+=t.cost),0);e.debug_totalRequirementsCost=`${o} =\n${n}`}));return{allNodes:a,root:l,allRequirements:i}},w=e=>e.split("\n").map((e=>e.trim())).filter((e=>e)).map((e=>{const t=e.split("=").map((e=>e.trim())).filter((e=>e));return{emoji:t[0],cost:Number.parseInt(t[1],10)}})),S=(e,t)=>e.split("\n").map((e=>e.trim())).filter((e=>e)).map((e=>x(e,t))),x=(e,t)=>{const[n,o,r]=e.split(":").map((e=>e.trim())),a=Number.parseInt(o,10),[l,i]=r.split("=").map((e=>e.trim())),[s,c]=i.split("+").map((e=>e.trim()));return{name:n,pay:a,emoji:l,startEmoji:s,requirementEmojis:c.split(" ").map((e=>e.trim())).filter((e=>e)),children:[],parent:null,gender:t}},U=e=>e.replace(new RegExp(j.male,"g"),j.female).replace(new RegExp(j.man,"g"),j.woman),j={man:String.fromCodePoint(128104),woman:String.fromCodePoint(128105),male:String.fromCodePoint(128105),female:String.fromCodePoint(128105)},C="\ud83d\udc76",_="boy               : 0 : \ud83d\udc66 = \ud83d\udc76 + \ud83c\udf7c \ud83e\uddf8 \ud83d\udc55 \ud83d\udc56 \ud83e\udde6 \ud83e\ude72 \ud83d\udc5f \ud83d\udcd6 \ud83e\ude81 \ud83d\udeb2 \ud83c\udfae",P="girl            : 0 : \ud83d\udc67 = \ud83d\udc76 + \ud83c\udf7c \ud83e\uddf8 \ud83d\udc5a \ud83d\udc57 \ud83e\ude70 \ud83e\ude71 \ud83e\udd7f \ud83d\udcd6 \ud83e\ude81 \ud83d\udeb2 \ud83c\udfae",k="  student_boy   : 0 : \ud83d\udc68\u200d\ud83c\udf93 = \ud83d\udc66 + \ud83c\udf55 \u270f\ufe0f \ud83d\udcd3 \ud83d\udcda \u23f0 \ud83d\udcf1 \ud83d\udcbb \ud83d\ude97 \ud83e\uddf3 \ud83c\udf93",D="student_girl  : 0 : \ud83d\udc69\u200d\ud83c\udf93 = \ud83d\udc67 + \ud83c\udf55 \u270f\ufe0f \ud83d\udcd3 \ud83d\udcda \u23f0 \ud83d\udcf1 \ud83d\udcbb \ud83d\ude97 \ud83e\uddf3 \ud83c\udf93",F="\nfactory_worker      :   20000 : \ud83d\udc68\u200d\ud83c\udfed = \ud83d\udc68\u200d\ud83c\udf93 + \ud83e\udde4 \ud83e\udd7e \ud83d\udd27 \u23f2 \ud83d\udccb \ud83d\ude97              \nmechanic            :   30000 : \ud83d\udc68\u200d\ud83d\udd27 = \ud83d\udc68\u200d\ud83c\udf93 + \ud83e\udde4 \ud83e\udd7e \ud83e\uddf0 \ud83d\udd27 \ud83d\udd29 \ud83d\ude9a         \nconstruction_worker :   75000 : \ud83d\udc77\u200d\u2642\ufe0f = \ud83d\udc68\u200d\ud83c\udf93 + \ud83e\uddba \ud83e\udd7e \ud83e\uddf0 \ud83d\udd27 \ud83d\udd28 \u2692 \ud83e\uddf1 \ud83e\udde8 \ud83d\ude99                    \nartist              :   35000 : \ud83d\udc68\u200d\ud83c\udfa8 = \ud83d\udc68\u200d\ud83c\udf93 + \ud83c\udfa8 \ud83d\udd8c \ud83d\udd8a \ud83d\udd8b \ud83d\udd8d \u270f\ufe0f \ud83d\udcd2 \ud83d\uddbc \ud83d\udca1 \ud83d\udcf7 \ud83d\ude97          \nsinger              :   40000 : \ud83d\udc68\u200d\ud83c\udfa4 = \ud83d\udc68\u200d\ud83c\udf93 + \ud83c\udfa4 \ud83c\udfa7 \ud83c\udfbc \ud83c\udfb9 \ud83e\udd41 \ud83c\udfbb \ud83c\udfa5 \ud83d\ude97       \nfarmer              :   50000 : \ud83d\udc68\u200d\ud83c\udf3e = \ud83d\udc68\u200d\ud83c\udf93 + \ud83e\udde2 \ud83e\udd7e \ud83e\udd5a \ud83d\udc15 \ud83d\udc08 \ud83d\udc13 \ud83d\udc04 \ud83d\udc16 \ud83d\udc11 \ud83d\udc10 \ud83d\ude9c        \ncook                :   40000 : \ud83d\udc68\u200d\ud83c\udf73 = \ud83d\udc68\u200d\ud83c\udf93 + \ud83c\udf53 \ud83e\udd51 \ud83e\udd55 \ud83e\udd69 \ud83c\udf64 \ud83e\udd5a \ud83e\udd6b \ud83e\udd44 \ud83c\udf74 \ud83e\uddc2 \u23f0 \ud83d\udd2a \ud83d\ude97      \nfirefighter         :   55000 : \ud83d\udc68\u200d\ud83d\ude92 = \ud83d\udc68\u200d\ud83c\udf93 + \u26d1\ufe0f \ud83e\uddef \ud83e\udd7e \ud83e\ude93 \ud83d\udd14 \ud83d\ude92    \npolice_officer      :   60000 : \ud83d\udc6e\u200d\u2642\ufe0f = \ud83d\udc68\u200d\ud83c\udf93 + \ud83e\udde2 \u2696\ufe0f \ud83d\udd2b \ud83e\udd4a \ud83e\udd3c \ud83d\udce2 \ud83d\ude93             \ndetective           :   70000 : \ud83d\udd75\ufe0f\u200d\u2642\ufe0f = \ud83d\udc68\u200d\ud83c\udf93 + \ud83d\udc54 \u2696\ufe0f \ud83d\udd26 \ud83d\udd0e \ud83d\udccb \ud83d\udcbc \ud83d\ude93          \nteacher             :   50000 : \ud83d\udc68\u200d\ud83c\udfeb = \ud83d\udc68\u200d\ud83c\udf93 + \ud83d\udcdd \ud83d\udcd2 \ud83d\udcd5 \ud83d\udcd7 \ud83d\udcd8 \ud83d\udcd9 \ud83d\ude90\noffice_worker       :   60000 : \ud83d\udc68\u200d\ud83d\udcbc = \ud83d\udc68\u200d\ud83c\udf93 + \ud83d\udc54 \ud83d\udcbc \ud83d\udcbb \ud83d\uddc4 \ud83e\ude91 \ud83d\udcc1 \ud83d\udcca \ud83d\ude97             \ntechnologist        :   80000 : \ud83d\udc68\u200d\ud83d\udcbb = \ud83d\udc68\u200d\ud83c\udf93 + \ud83d\udcbb \u2328\ufe0f \ud83d\udda5 \ud83d\udcf1 \ud83d\uddb1 \ud83c\udfae \ud83e\udd16 \ud83d\ude97              \nscientist           :   90000 : \ud83d\udc68\u200d\ud83d\udd2c = \ud83d\udc68\u200d\ud83c\udf93 + \ud83e\udd7c \ud83e\udd7d \ud83d\udd2c \ud83d\udcbb \ud83e\uddeb \ud83e\uddea \u2697\ufe0f \ud83d\ude97            \njudge               :  120000 : \ud83d\udc68\u200d\u2696\ufe0f = \ud83d\udc68\u200d\ud83c\udf93 + \ud83d\udc54 \u2696\ufe0f \ud83d\udcbc \ud83d\udcda \ud83d\uddc3 \ud83d\udd70 \ud83d\ude97   \nhealth_worker       :  100000 : \ud83d\udc68\u200d\u2695\ufe0f = \ud83d\udc68\u200d\ud83c\udf93 + \ud83e\udd7c \u26d1 \ud83d\udd2c \ud83e\ude79 \ud83e\ude7a \ud83d\udc8a \ud83d\udc89 \ud83e\uddeb \u26d1 \ud83d\ude91\npilot               :  110000 : \ud83d\udc68\u200d\u2708\ufe0f = \ud83d\udc68\u200d\ud83c\udf93 + \ud83e\udde5 \ud83e\udded \ud83d\udcbb \ud83d\udd79 \u2708\ufe0f       \nastronaut           :  130000 : \ud83d\udc68\u200d\ud83d\ude80 = \ud83d\udc68\u200d\ud83c\udf93 + \ud83e\udde5 \ud83d\udd2d \ud83d\udcbb \ud83d\udd79 \ud83d\ude80  \n",O="\n\ud83c\udf7c = 10\n\ud83e\uddf8 = 10\n\ud83d\udc55 = 20\n\ud83d\udc56 = 20\n\ud83e\udde6 = 10\n\ud83e\ude72 = 20\n\ud83d\udc5f = 30\n\ud83d\udcd6 = 50\n\ud83e\ude81 = 25\n\ud83d\udeb2 = 150\n\ud83c\udfae = 200\n\n\ud83d\udc5a = 20\n\ud83d\udc57 = 20\n\ud83e\ude70 = 10\n\ud83e\ude71 = 20\n\ud83e\udd7f = 30\n\n\ud83c\udf55 = 30\n\u270f\ufe0f = 10\n\ud83d\udcd3 = 20\n\ud83d\udcda = 500\n\u23f0 = 15\n\ud83d\udcf1 = 350\n\ud83d\udcbb = 1250\n\ud83d\ude97 = 7000\n\ud83e\uddf3 = 800\n\ud83c\udf93 = 10000\n\n\ud83e\udde4 = 20\n\ud83e\udd7e = 80\n\ud83d\udd27 = 110\n\u23f2 = 25\n\ud83d\udccb = 15\n\ud83e\uddf0 = 300\n\ud83d\udd29 = 700\n\ud83d\ude9a = 35000\n\ud83e\uddba = 150\n\ud83d\udd28 = 75\n\u2692 = 150\n\ud83e\uddf1 = 3000\n\ud83e\udde8 = 16000\n\ud83d\ude99 = 32000\n\ud83c\udfa8 = 100\n\ud83d\udd8c = 70\n\ud83d\udd8a = 50\n\ud83d\udd8b = 35\n\ud83d\udd8d = 15\n\ud83d\udcd2 = 15\n\ud83d\uddbc = 80\n\ud83d\udca1 = 150\n\ud83d\udcf7 = 400\n\ud83c\udfa4 = 150\n\ud83c\udfa7 = 120\n\ud83c\udfbc = 750\n\ud83c\udfb9 = 320\n\ud83e\udd41 = 450\n\ud83c\udfbb = 320\n\ud83c\udfa5 = 1450\n\ud83e\udde2 = 25\n\ud83e\udd5a = 10\n\ud83d\udc15 = 35\n\ud83d\udc08 = 25\n\ud83d\udc13 = 30\n\ud83d\udc04 = 350\n\ud83d\udc16 = 150\n\ud83d\udc11 = 120\n\ud83d\udc10 = 100\n\ud83d\ude9c = 15000\n\ud83c\udf53 = 25\n\ud83e\udd51 = 30\n\ud83e\udd55 = 20\n\ud83e\udd69 = 75\n\ud83c\udf64 = 100\n\ud83e\udd6b = 50\n\ud83e\udd44 = 120\n\ud83c\udf74 = 350\n\ud83e\uddc2 = 120\n\ud83d\udd2a = 225\n\u26d1\ufe0f = 150\n\ud83e\uddef = 250\n\ud83e\ude93 = 50\n\ud83d\udd14 = 75\n\ud83d\ude92 = 135000\n\u2696\ufe0f = 15000\n\ud83d\udd2b = 750\n\ud83e\udd4a = 500\n\ud83e\udd3c = 1250\n\ud83d\udce2 = 150\n\ud83d\ude93 = 55000\n\ud83d\udc54 = 250\n\ud83d\udd26 = 55\n\ud83d\udd0e = 85\n\ud83d\udcbc = 125\n\ud83d\udcdd = 25\n\ud83d\udcd5 = 75\n\ud83d\udcd7 = 25\n\ud83d\udcd8 = 60\n\ud83d\udcd9 = 30\n\ud83d\ude90 = 16000\n\ud83d\uddc4 = 250\n\ud83e\ude91 = 150\n\ud83d\udcc1 = 50\n\ud83d\udcca = 750\n\u2328\ufe0f = 75\n\ud83d\udda5 = 150\n\ud83d\uddb1 = 50\n\ud83e\udd16 = 1500\n\ud83e\udd7c = 150\n\ud83e\udd7d = 25\n\ud83d\udd2c = 3500\n\ud83e\uddeb = 150\n\ud83e\uddea = 300\n\u2697\ufe0f = 250\n\ud83d\uddc3 = 150\n\ud83d\udd70 = 650\n\u26d1 = 150\n\ud83e\ude79 = 100\n\ud83e\ude7a = 120\n\ud83d\udc8a = 1200\n\ud83d\udc89 = 1500\n\ud83d\ude91 = 75000\n\ud83e\udde5 = 550\n\ud83e\udded = 50\n\ud83d\udd79 = 850\n\u2708\ufe0f = 1500000\n\ud83d\udd2d = 350\n\ud83d\ude80 = 150000000\n",T="EmojiIdleState",A=e=>{localStorage.setItem(T,JSON.stringify(e))},G=()=>{var e;if(!localStorage.getItem(T))return null;try{return JSON.parse(null!==(e=localStorage.getItem(T))&&void 0!==e?e:"")}catch(t){return null}},I=()=>{var e;const t=b(),n=(0,l.qL)(t.allRequirements.map((e=>({key:e.emoji,value:e})))),o={characterEmoji:t.root.emoji,emotion:"normal",lastEmotionTimestamp:Date.now(),money:0,multiplier:1,lastMultiplierChangeTimestamp:Date.now(),lastPurchaseTimestamp:Date.now(),townState:{characters:[]}};let r=null!==(e=G())&&void 0!==e?e:o;r=Object.assign(Object.assign({},o),r);const a=(0,l.Li)(r),i=e=>{r=Object.assign(Object.assign({},r),e),a.onStateChange(r),A(r)},s=e=>{i({money:r.money+r.multiplier,multiplier:Math.min(100,r.multiplier+e),lastMultiplierChangeTimestamp:Date.now()})};return setInterval((()=>{var e,o,a,l;if(!r.targetEmoji&&!r.targetOptions){const e=t.allNodes.find((e=>e.emoji===r.characterEmoji));if(e){let n=e.children.map((e=>({emoji:e.emoji})));const o=n.filter((e=>!r.townState.characters.find((e=>e.characterEmoji))));o.length>0&&(n=o),0===n.length?i({targetOptions:[{emoji:t.root.emoji}]}):i({targetOptions:n})}}if(r.targetEmoji){const s=t.allNodes.find((e=>e.emoji===r.targetEmoji));if(s){const t=s.requirementEmojis.map((e=>n.get(e))).filter((e=>e)).map((e=>e)),a=t.filter((e=>{var t;return!(null===(t=r.requirementsPurchased)||void 0===t?void 0:t.includes(e.emoji))}));a.sort(((e,t)=>e.cost-t.cost));const l=a.filter((e=>e.cost<=r.money));l.length!==(null===(e=r.requirementsAvailable)||void 0===e?void 0:e.length)&&i({requirementsNeeded:t,requirementsAvailable:l}),a.length!==(null===(o=r.requirementsRemaining)||void 0===o?void 0:o.length)&&i({requirementsRemaining:a}),a.length<=0&&i({characterEmoji:r.targetEmoji,targetEmoji:void 0,targetOptions:void 0,requirementsAvailable:void 0,requirementsNeeded:void 0,requirementsPurchased:void 0})}if(Date.now()>(null!==(a=r.lastEmotionTimestamp)&&void 0!==a?a:0)+15e3){const e=Date.now()>(null!==(l=r.lastPurchaseTimestamp)&&void 0!==l?l:0)+3e5?"angry":"normal";r.emotion!==e&&i({emotion:e,lastEmotionTimestamp:Date.now()})}}}),1e3),{subscribePetStateChange:a.subscribe,reward:()=>s(1),reward_major:()=>s(10),reward_extreme:()=>s(100),punish:()=>{i({multiplier:Math.max(1,r.multiplier-5),lastMultiplierChangeTimestamp:Date.now()})},selectOption:e=>{var n,o,a;(null===(n=r.targetOptions)||void 0===n?void 0:n.find((t=>t.emoji===e)))&&(e===t.root.emoji&&r.townState.characters.push({characterEmoji:r.characterEmoji,finishedTimestamp:Date.now()}),i({targetEmoji:e,targetOptions:void 0,emotion:"excited",lastEmotionTimestamp:Date.now(),lastPurchaseTimestamp:Date.now(),money:0}));const l=null===(o=r.requirementsAvailable)||void 0===o?void 0:o.find((t=>t.emoji===e));l&&l.cost<=r.money&&i({requirementsPurchased:[...null!==(a=r.requirementsPurchased)&&void 0!==a?a:[],l.emoji],requirementsRemaining:void 0,money:r.money-l.cost,requirementsAvailable:void 0,emotion:"excited",lastEmotionTimestamp:Date.now(),lastPurchaseTimestamp:Date.now()})}}},L={instance:null},W=()=>{var e;return null!==(e=L.instance)&&void 0!==e?e:L.instance=I()},R=()=>{L.instance=I()},z={container:{height:40},fixed:{position:"fixed",top:0,right:0,left:0,zIndex:1e3},inner:{position:"relative",height:40},emotionEmoji:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24},characterEmoji:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24},characterEmoji_small:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16},costText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#00FF00"},costText_small:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:10,color:"#00FF00"},targetCharacterEmoji:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16},objectEmoji:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12},money:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:20,color:"#FFFF00",marginLeft:8},money_small:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#FFFF00"},multiplier:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FF00FF",marginLeft:8},foodText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#333300"}},N=e=>{var t,n,a,l;const[i,s]=(0,o.useState)(null),[c,d]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const e=W().subscribePetStateChange(s);return()=>e.unsubscribe()})),c&&i?o.createElement(B,{gameState:i,onClose:()=>d(!1)}):o.createElement(r.G7,{style:z.container},o.createElement(r.G7,{style:z.fixed},o.createElement(r.G7,{style:z.inner},o.createElement(K,{emoji:null!==(t=null===i||void 0===i?void 0:i.characterEmoji)&&void 0!==t?t:"",targetEmoji:null!==(n=null===i||void 0===i?void 0:i.targetEmoji)&&void 0!==n?n:"",emotion:null!==(a=null===i||void 0===i?void 0:i.emotion)&&void 0!==a?a:null,purchased:null!==(l=null===i||void 0===i?void 0:i.requirementsPurchased)&&void 0!==l?l:[],onPress:()=>d((e=>!e))}),i&&o.createElement(q,{gameState:i}))))},M={container:{background:"#555555"},payText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FFFFFF"},payText_disabled:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#CCCCCC"},moneyText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#FFFF00"},townMoneyText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#00FF00"}},$=b(),B=({gameState:e,onClose:t})=>{var n,a,l,i;const s=e.townState.characters.map((e=>{var t;return{character:e,skill:null!==(t=$.allNodes.find((t=>t.emoji===e.characterEmoji)))&&void 0!==t?t:$.root}})).filter((e=>e.skill.pay)).map((e=>Object.assign(Object.assign({},e),{years:(Date.now()-e.character.finishedTimestamp)/864e5,money:Math.floor((Date.now()-e.character.finishedTimestamp)/864e5*e.skill.pay)}))),c=$.allNodes.filter((t=>t.children.length<=0&&!e.townState.characters.find((e=>e.characterEmoji===t.emoji)))),d=s.reduce(((e,t)=>{var n;return e+=null!==(n=t.money)&&void 0!==n?n:0}),0);return o.createElement(r.G7,{style:M.container},o.createElement(r.G7,null,o.createElement(r.G7,{style:{background:"#333333",flexDirection:"row",alignItems:"center"}},o.createElement(r.G7,{style:{position:"relative",width:100,height:40}},o.createElement(r.G7,{style:{position:"absolute",left:0,top:0,flexDirection:"column",alignItems:"flex-end"}},o.createElement(r.Au,{onPress:()=>t()},o.createElement(r.xv,{style:z.characterEmoji}," \ud83c\udfd9 ")))),o.createElement(r.G7,{style:{flex:1}}),o.createElement(r.G7,{style:{padding:4}},o.createElement(r.xv,{style:M.townMoneyText},`$${d.toLocaleString()}`)))),o.createElement(r.G7,{style:{background:"#333333",flexDirection:"row",alignItems:"center"}},o.createElement(r.G7,{style:{position:"relative",width:100,height:40}},o.createElement(K,{emoji:null!==(n=null===e||void 0===e?void 0:e.characterEmoji)&&void 0!==n?n:"",targetEmoji:null!==(a=null===e||void 0===e?void 0:e.targetEmoji)&&void 0!==a?a:"",emotion:null!==(l=null===e||void 0===e?void 0:e.emotion)&&void 0!==l?l:null,purchased:null!==(i=null===e||void 0===e?void 0:e.requirementsPurchased)&&void 0!==i?i:[],onPress:()=>t()}))),s.map((e=>{var t,n,a,l;return o.createElement(r.G7,{style:{background:"#333333",flexDirection:"row",alignItems:"center"}},o.createElement(r.G7,{style:{position:"relative",width:100,height:40}},o.createElement(K,{emoji:e.character.characterEmoji,targetEmoji:"",emotion:"happy",purchased:null!==(n=null===(t=e.skill)||void 0===t?void 0:t.requirementEmojis)&&void 0!==n?n:[]})),o.createElement(r.G7,{style:{padding:4}},o.createElement(r.xv,{style:M.payText},`$${(null!==(l=null===(a=e.skill)||void 0===a?void 0:a.pay)&&void 0!==l?l:0).toLocaleString()}`)),o.createElement(r.G7,{style:{padding:4}},o.createElement(r.xv,{style:M.payText},`x${e.years.toFixed(1)}`)),o.createElement(r.G7,{style:{flex:1}}),o.createElement(r.G7,{style:{padding:4}},o.createElement(r.xv,{style:M.moneyText},`$${e.money.toLocaleString()}`)))})),c.map((e=>o.createElement(r.G7,{style:{background:"#555555",flexDirection:"row",alignItems:"center"}},o.createElement(r.G7,{style:{position:"relative",width:100,height:40,opacity:.5}},o.createElement(K,{emoji:e.emoji,targetEmoji:"",emotion:null,purchased:[]})),o.createElement(r.G7,{style:{padding:4}},o.createElement(r.xv,{style:M.payText_disabled},`$${e.pay.toLocaleString()}`))))))},q=({gameState:e})=>{var t;const[n,a]=(0,o.useState)(0);if((0,o.useEffect)((()=>{a(0)}),[e.targetOptions,e.requirementsAvailable]),e.targetOptions&&e.targetOptions.length>0){const t=4,l=e.targetOptions.length;return o.createElement(r.G7,{style:{position:"absolute",top:0,left:0,right:0}},o.createElement(r.G7,{style:{flexDirection:"row",justifyContent:"center"}},e.targetOptions.slice(n,n+t).map((e=>o.createElement(r.Au,{key:e.emoji,onPress:()=>W().selectOption(e.emoji)},o.createElement(r.G7,null,o.createElement(r.xv,{style:z.characterEmoji},e.emoji))))),l>t&&o.createElement(r.Au,{onPress:()=>a((e=>{const t=e+5;return t>=l?0:t}))},o.createElement(r.G7,null,o.createElement(r.xv,{style:z.characterEmoji},n+t<l?"\u23e9":"\u23ee")))))}const l=null!==(t=e.requirementsRemaining)&&void 0!==t?t:[];return o.createElement(r.G7,null,o.createElement(V,Object.assign({},null!==e&&void 0!==e?e:{money:0,multiplier:1})),o.createElement(r.G7,{style:{position:"absolute",left:90,top:0,flexDirection:"row",zIndex:10}},l.slice(0,3).map((t=>{const n=t.cost<=e.money;return o.createElement(r.Au,{key:t.emoji,onPress:()=>W().selectOption(t.emoji)},o.createElement(r.G7,{style:{flexDirection:"column",alignItems:"center",background:n?"#003300":"#553300",borderRadius:4,paddingLeft:2,paddingRight:2}},o.createElement(r.xv,{style:z.characterEmoji_small},t.emoji),o.createElement(r.xv,{style:Object.assign(Object.assign({},z.costText_small),n?{}:{color:"#FF0000"})},`$${t.cost.toLocaleString()}`)))}))))},V=({money:e,multiplier:t})=>{const[n,a]=(0,o.useState)(0),[l,i]=(0,o.useState)(0),s=(0,o.useRef)(t),[c,d]=(0,o.useState)(0);return(0,o.useEffect)((()=>{a(5);const e=()=>{a((e=>e>0?e-1:(clearInterval(t),0)))};e();const t=setInterval(e,25);return()=>clearInterval(t)}),[e]),(0,o.useEffect)((()=>{i(10),d(t-s.current),s.current=t;const e=()=>{i((e=>e>0?e-1:(clearInterval(n),0)))};e();const n=setInterval(e,25);return()=>clearInterval(n)}),[t]),o.createElement(r.G7,{style:{position:"absolute",top:0,right:4}},o.createElement(r.G7,{style:{flexDirection:"row",justifyContent:"flex-end"}},o.createElement(r.G7,{style:{transform:`translate(-${n}px,${2*n}px) scale(${.1*n+1})`}},o.createElement(r.xv,{style:z.money},`$${(null!==e&&void 0!==e?e:0).toLocaleString()}`)),o.createElement(r.G7,{style:{transform:`translate(-${l}px,${2*l}px) scale(${.1*l+1})`}},o.createElement(r.xv,{style:Object.assign(Object.assign({},z.multiplier),c<-5?{color:"#FF0000"}:c<0?{color:"#FFFF00"}:{color:"#00FF00"})},`x${(null!==t&&void 0!==t?t:1).toLocaleString()}`.padStart(4," ")))))},K=({emoji:e,targetEmoji:t,emotion:n,purchased:a,onPress:l})=>o.createElement(o.Fragment,null,o.createElement(H,{purchased:a}),o.createElement(r.G7,{style:{position:"absolute",left:20,top:0,flexDirection:"column",alignItems:"flex-end"}},o.createElement(r.Au,{onPress:()=>null===l||void 0===l?void 0:l()},o.createElement(J,{emotion:null!==n&&void 0!==n?n:null,emoji:e}))),o.createElement(r.G7,{style:{position:"absolute",left:66,top:0,flexDirection:"column",alignItems:"flex-end"}},o.createElement(r.xv,{style:z.targetCharacterEmoji},`${t}`))),H=({purchased:e})=>{const[t,n]=(0,o.useState)(0);return(0,o.useEffect)((()=>{const e=()=>{n((e=>e+1))};e();const t=setInterval(e,200);return()=>clearInterval(t)}),[e.length]),o.createElement(o.Fragment,null,e.map(((e,n)=>o.createElement(r.G7,{key:e,style:{position:"absolute",left:0,top:0,flexDirection:"column",alignItems:"flex-end"}},o.createElement(r.G7,{style:{transform:`translate(${(17*n+t)%60}px,${(5*n+t)%24}px)`}},o.createElement(r.xv,{style:z.objectEmoji},`${e}`))))))},J=({emotion:e,emoji:t})=>{const[n,a]=(0,o.useState)({text:t,isEmotion:!1});return(0,o.useEffect)((()=>{if(!e)return()=>{};let n=!1,o=0;const r=()=>{n=!n,a(n?{text:Y(e,o++),isEmotion:!0}:{text:t,isEmotion:!1})};r();const l=setInterval(r,3e3);return()=>clearInterval(l)}),[e,t]),o.createElement(r.xv,{style:n.isEmotion?z.emotionEmoji:z.characterEmoji},n.text)},Y=(e,t)=>{if(!e)return"\ud83d\ude36";if("excited"===e){const e=(0,l.TV)(["\ud83d\ude01","\ud83d\ude0d","\ud83d\ude0e","\ud83e\udd29","\ud83e\udd17","\ud83e\udd73","\ud83d\ude02"]);return e[t%e.length]}if("happy"===e){const e=["\ud83d\ude00","\ud83d\ude42","\ud83d\ude04","\ud83d\ude03","\ud83d\ude0a"];return e[t%e.length]}if("normal"===e){const e=["\ud83d\ude42","\ud83d\ude0b","\ud83d\ude2e","\ud83d\ude44"];return e[t%e.length]}if("angry"===e){const e=["\ud83d\ude33","\ud83d\ude1f","\ud83d\ude24","\ud83d\ude23","\ud83e\udd7a","\ud83d\ude2b","\ud83d\ude29"];return e[t%e.length]}if("sick"===e){const e=["\ud83e\udd22","\ud83e\udd2e","\ud83d\ude35","\ud83e\udd27","\ud83d\ude2c","\ud83d\udca9","\ud83d\ude1e"];return e[t%e.length]}if("dead"===e){const e=["\ud83d\udc80","\ud83d\udc7b","\ud83e\udddf\u200d\u2642\ufe0f"];return e[t%e.length]}return"\ud83d\udc7e"},X=((0,l.TV)(" \n        \ud83c\udf55 \ud83c\udf54 \ud83c\udf5f \ud83c\udf2d \ud83c\udf7f \ud83e\udd53 \ud83e\udd5a \ud83e\uddc7 \ud83e\udd5e \ud83e\uddc8 \ud83e\udd50 \ud83c\udf5e \ud83e\udd68 \ud83e\udd56 \ud83e\udd6f \ud83e\uddc0 \ud83e\udd57 \ud83e\udd59 \ud83e\udd6a \ud83c\udf2f \ud83c\udf2e \n        \ud83e\udd69 \ud83c\udf57 \ud83c\udf56 \ud83c\udf60 \ud83e\udd5f \ud83e\udd60 \ud83c\udf58 \ud83e\udd61 \ud83c\udf71 \ud83c\udf5a \ud83c\udf59 \ud83c\udf5b \ud83c\udf5c \ud83e\uddaa \ud83c\udf63 \ud83e\udd6e \ud83c\udf65 \ud83c\udf64 \ud83c\udf62 \ud83e\uddc6 \n        \ud83e\udd63 \ud83c\udf5d \ud83c\udf72 \ud83e\udd67 \ud83c\udf66 \ud83c\udf67 \ud83c\udf6a \ud83c\udf69 \ud83c\udf68 \ud83c\udf82 \ud83c\udf70 \ud83e\uddc1 \ud83c\udf6e \ud83c\udf6f \ud83c\udf75 ".replace("\n"," ").split(" ").map((e=>e.trim())).filter((e=>e))),{onCorrect:()=>{W().reward()},onCompleteSection:()=>{W().reward_major()},onCompleteSubject:()=>{W().reward_extreme()},onWrong:()=>{W().punish()}}),Q=(e,t)=>Object.assign(Object.assign({},e),{recordAnswer:(t,n)=>(n.isCorrect?(X.onCorrect(),!t.isReview&&t.isLastOfSubject?(X.onCompleteSubject(),setTimeout((async()=>{await d().uploadUserData()}),1e3)):!t.isReview&&t.isLastOfSection&&(X.onCompleteSection(),setTimeout((async()=>{await d().uploadUserData()}),1e3))):X.onWrong(),e.recordAnswer(t,n))}),Z=()=>{var e,t;const{loading:n,error:a,doWork:l}=(0,m.VL)(),[i,s]=(0,o.useState)(!1),[c,u]=(0,o.useState)(null);(0,o.useEffect)((()=>{var e;u(null!==(e=d().getActiveUser())&&void 0!==e?e:null),R();const t=(()=>{let e=Date.now();return W().subscribePetStateChange((t=>{console.log("ProgressGameView subscribePetStateChange",{lastPurchase:e,x:t}),e>=t.lastPurchaseTimestamp||(e=t.lastPurchaseTimestamp,setTimeout((async()=>{await d().uploadUserData()}),1e3))}))})();return()=>{t.unsubscribe()}}),[i]),(0,o.useEffect)((()=>{l((async()=>{await d().setup(),R()}))}),[]);return n?o.createElement(o.Fragment,null):i?o.createElement(o.Fragment,null,o.createElement(N,null),o.createElement(r.G7,null,o.createElement(r.Au,{onPress:()=>{"web"===r.t4.OS&&window.location.reload()}},o.createElement(r.G7,{style:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",padding:4}},o.createElement(r.xv,{style:{fontSize:32}},null!==(e=null===c||void 0===c?void 0:c.emoji)&&void 0!==e?e:"\ud83d\udc64"),o.createElement(r.xv,{style:{fontSize:14}},null!==(t=null===c||void 0===c?void 0:c.name)&&void 0!==t?t:""))))):o.createElement(E,{onUserSelected:()=>s(!0)})}}}]);