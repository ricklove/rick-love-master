
<html>
<head>
    <style>
    html, body, div, span, applet, object, iframe,
    h1, h2, h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, sup, tt, var,
    b, u, i, center,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td,
    article, aside, canvas, details, embed, 
    figure, figcaption, footer, header, hgroup, 
    menu, nav, output, ruby, section, summary,
    time, mark, audio, video {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 100%;
        font: inherit;
        vertical-align: baseline;
    }
    /* HTML5 display-role reset for older browsers */
    article, aside, details, figcaption, figure, 
    footer, header, hgroup, menu, nav, section {
        display: block;
    }
    body {
        line-height: 1;
    }
    ol, ul {
        list-style: none;
    }
    blockquote, q {
        quotes: none;  
    }
    blockquote:before, blockquote:after,
    q:before, q:after {
        content: '';
        content: none;
    }
    table {
        border-collapse: collapse;
        border-spacing: 0;
    }

    body { 
        background: #000000;
    }
    body, div {
        display: flex;
        flex: 1;
        justify-content: center;
        align-items: center;
        max-width: 100%;
        max-height: 100%;
    }
    </style>
</head>
<body>

    <div id='host'></div>
    
<script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.js"></script>

    <script>
    (function (exports, p5) {
  'use strict';

  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

  var p5__default = /*#__PURE__*/_interopDefaultLegacy(p5);

  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
    try {
      var info = gen[key](arg);
      var value = info.value;
    } catch (error) {
      reject(error);
      return;
    }

    if (info.done) {
      resolve(value);
    } else {
      Promise.resolve(value).then(_next, _throw);
    }
  }

  function _asyncToGenerator(fn) {
    return function () {
      var self = this,
          args = arguments;
      return new Promise(function (resolve, reject) {
        var gen = fn.apply(self, args);

        function _next(value) {
          asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
        }

        function _throw(err) {
          asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
        }

        _next(undefined);
      });
    };
  }

  /* eslint-disable no-return-assign */

  /* eslint-disable no-multi-assign */

  /* eslint-disable @typescript-eslint/no-unused-expressions */

  /* eslint-disable no-bitwise */
  // FROM: https://stackoverflow.com/a/47593316/567524
  function xmur3(str) {
    var h = 1779033703 ^ str.length;

    for (var i = 0; i < str.length; i++) {
      h = Math.imul(h ^ str.charCodeAt(i), 3432918353);
      h = h << 13 | h >>> 19;
    }

    return function () {
      h = Math.imul(h ^ h >>> 16, 2246822507);
      h = Math.imul(h ^ h >>> 13, 3266489909);
      return (h ^= h >>> 16) >>> 0;
    };
  }

  function mulberry32(a) {
    return function () {
      var t = a += 0x6D2B79F5;
      t = Math.imul(t ^ t >>> 15, t | 1);
      t ^= t + Math.imul(t ^ t >>> 7, t | 61);
      return ((t ^ t >>> 14) >>> 0) / 4294967296;
    };
  }

  var createRandomGenerator = function createRandomGenerator(hash) {
    var seed = xmur3(hash)();
    return {
      random: mulberry32(seed)
    };
  };

  var art_circles = {
    key: "circles",
    title: "Circles",
    description: "The circles we travel in life always bring us back home.",
    artist: "Rick Love",
    getTokenDescription: function getTokenDescription(tokenId) {
      return null;
    },
    // openSea: {
    //     tokenAddress: `0x495f947276749ce646f68ac8c248420045cb7b5e`,
    //     tokenId: `91242641486941084018191434774360347389366801368112854311223385694785434025985`,
    // },
    renderArt: function renderArt(hostElement) {
      var hash = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "This is my hash!";
      var recorder = arguments.length > 2 ? arguments[2] : undefined;

      // const { a, b, c } = { a: 57, b: 23, c: 15 };
      var _createRandomGenerato = createRandomGenerator(hash),
          random = _createRandomGenerato.random;

      var _a$b$c = {
        a: 1 + Math.floor(57 * random()),
        b: 1 + Math.floor(213 * random()),
        c: 1 + Math.floor(115 * random())
      },
          a = _a$b$c.a,
          b = _a$b$c.b,
          c = _a$b$c.c;
      var _cr$cg$cb$ca = {
        cr: Math.floor(25 + 230 * random()),
        cg: Math.floor(25 + 230 * random()),
        cb: Math.floor(25 + 230 * random()),
        ca: Math.floor(25 + 25 * random())
      },
          cr = _cr$cg$cb$ca.cr,
          cg = _cr$cg$cb$ca.cg,
          cb = _cr$cg$cb$ca.cb,
          ca = _cr$cg$cb$ca.ca;
      var TARGET_SIZE = 600;
      var SMALL_SIZE = 300;
      var size = window.innerWidth > TARGET_SIZE && window.innerHeight > TARGET_SIZE ? TARGET_SIZE : SMALL_SIZE;
      var h = 200;
      var scale = size / 400;
      var speed = 0.5;
      var tick = 0;
      var canvas = null;
      return new p5__default['default'](function (s) {
        s.setup = function () {
          var result = s.createCanvas(size, size);
          var canvasId = "".concat(Math.random());
          result.id(canvasId);
          canvas = document.getElementById(canvasId);
        };

        s.draw = function () {
          if (recorder !== null && recorder !== void 0 && recorder.isWaitingForFrame() && canvas) {
            console.log("game.update waitingForFrame - addFrame", {});

            _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
              return regeneratorRuntime.wrap(function _callee$(_context) {
                while (1) {
                  switch (_context.prev = _context.next) {
                    case 0:
                      _context.next = 2;
                      return recorder.getRecorder().addFrame(canvas);

                    case 2:
                      return _context.abrupt("return", _context.sent);

                    case 3:
                    case "end":
                      return _context.stop();
                  }
                }
              }, _callee);
            }))();

            return;
          }

          s.background(0);
          s.scale(scale);

          for (var i = 0; i < 10; i++) {
            var color = s.color(cr * i % 255, cg * i % 255, cb * i % 255, ca);
            s.noFill();
            s.stroke(color);

            for (var j = 0; j < 36; j++) {
              s.circle(h - a / 2 + j % a, h - b / 2 + j % b, h * 1.35 - i * 5 % c);
            }

            s.translate(h, h); // s.rotate((a + b + c + tick * 0.001) % 2);

            s.rotate(a + b + c + tick * 0.001);
            s.translate(-h, -h);
            tick += speed;
          }

          tick++;
        };
      }, hostElement);
    }
  };

  exports.art_circles = art_circles;

  Object.defineProperty(exports, '__esModule', { value: true });

  return exports;

}(window, window.p5));

    
var seedMatch = document.location.search.match(/seed=([^;])/) || document.location.search.match(/tokenId=([^;])/);
var seed = seedMatch && seedMatch[1] || '0';

var createP5 = function(s,host){
    return new p5(s,host);
};

window.art_circles.renderArt(
    document.getElementById('host'),
    seed,
    null,
    createP5
)
    </script>

</body>
</html>