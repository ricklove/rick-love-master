(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[22],{yGAw:function(e,t,o){"use strict";o.r(t),o.d(t,"EducationalGame_MultiplesMonster",(function(){return d}));o("yIC7"),o("p+GS"),o("dtAy"),o("4oWw"),o("nruA"),o("LnO1"),o("XjK0"),o("SCO9"),o("decI"),o("PN9k");var n=o("ERkP"),r=o.n(n),a=o("DTYs"),i=o("hsFx"),c=o("4cHy"),l=o("rTbz"),s=o("kktX");function u(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var f=Object(l.a)({storageKey:"MultiplesMonsterLeaderboard",sortKey:function(e){return e.score},scoreColumns:[{name:"Time",getValue:function(e){return""+(e.timeMs/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}},{name:"Score",getValue:function(e){return""+e.score}}]}),d=function(e){var t,o=Object(n.useState)({key:0,startTime:Date.now(),gameOverTime:void 0,score:0}),i=o[0],c=o[1],l=Object(n.useState)(p()),u=l[0],m=l[1],d=Object(n.useState)(null),w=d[0],b=d[1],g=Object(n.useRef)(u),O=f.useLeaderboard({getScore:function(){var e;return{score:i.score,timeMs:(null!==(e=i.gameOverTime)&&void 0!==e?e:Date.now())-i.startTime}}}),F=function(e){var t=Object.assign({},g.current);t.player.position=e;var o=t.columns[t.player.position.col].cells[t.player.position.row];if("blank"===o.state&&(s.a.get().feed(),c((function(e){return Object.assign(Object.assign({},e),{},{score:e.score+o.value})}))),"house"===o.state){var n=p();return m(n),void C(n)}y(t),"monster"===(o=t.columns[t.player.position.col].cells[t.player.position.row]).state&&c((function(e){return Object.assign(Object.assign({},e),{},{gameOverTime:Date.now(),key:e.key+1})})),m(t),setTimeout((function(){C(t)}),100)},C=function(e){var t=v(e,F);b(t)};return Object(n.useEffect)((function(){C(u)}),[]),g.current=u,r.a.createElement(r.a.Fragment,null,r.a.createElement(a.h,{style:{marginTop:50,marginBottom:150,padding:2,alignItems:"center"}},r.a.createElement(a.h,{style:{width:292}},r.a.createElement(j,{gameScore:i}),r.a.createElement(h,{gameBoard:u,focus:null!==(t=u.player.position)&&void 0!==t?t:{col:0,row:0}}),w&&!i.gameOverTime&&r.a.createElement(E,{gameInput:w}),r.a.createElement(O.LeaderboardArea,{gameOver:!!i.gameOverTime,onScoreSaved:function(){var e=p();c({key:0,startTime:Date.now(),gameOverTime:void 0,score:0}),m(e),C(e)}}))))},p=function(){for(var e={key:0,maxTimes:12,columns:u(new Array(12)).map((function(e,t){return{col:t,cells:u(new Array(12)).map((function(e,o){return{col:t,row:o,value:(t+1)*(o+1),state:"blank"}}))}})),player:{position:{col:Object(c.a)(12),row:Object(c.a)(12)}},house:{position:{col:Object(c.a)(12),row:Object(c.a)(12)}},monsters:u(new Array(3)).map((function(e){return{position:{col:Object(c.a)(12),row:Object(c.a)(12)}}}))};e.house.position.row===e.player.position.row;)e.house.position={col:Object(c.a)(12),row:Object(c.a)(12)};return e.monsters.forEach((function(t){for(var o=t;o.position.row===e.player.position.row;)o.position={col:Object(c.a)(12),row:Object(c.a)(12)}})),w(e),e},y=function(e){w(e);var t=e.player;if(e.monsters.forEach((function(e){var o=e,n=t.position.col-o.position.col,r=t.position.row-o.position.row;Math.abs(n)>=Math.abs(r)?o.position=Object.assign(Object.assign({},o.position),{},{col:o.position.col+Math.sign(n)}):o.position=Object.assign(Object.assign({},o.position),{},{row:o.position.row+Math.sign(r)})})),Math.random()<.25){var o={position:{col:Object(c.a)(12),row:Object(c.a)(12)}};Math.random()<.5?Math.random()<.5?o.position.col=0:o.position.col=11:Math.random()<.5?o.position.row=0:o.position.row=11,e.monsters.push(o)}var n=e,r=u(e.monsters),a=r.filter((function(t){return"answer"===e.columns[t.position.col].cells[t.position.row].state})),i=r.filter((function(t){return"answer"!==e.columns[t.position.col].cells[t.position.row].state}));a.forEach((function(e){n.columns[e.position.col].cells[e.position.row].state="blank"})),n.monsters=i,w(n)},w=function(e){e.columns.forEach((function(e){return e.cells.forEach((function(e){var t=e;"monster"===t.state&&(t.state="blank"),"player"===t.state&&(t.state="answer")}))})),b(e,e.house.position,"house"),b(e,e.player.position,"player"),e.monsters.forEach((function(t){b(e,t.position,"monster")}))},b=function(e,t,o){var n=e;n.columns[t.col].cells[t.row].state=o,n.key+=1},g={cellView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.75)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},focusCellView:{width:24,height:24,borderWidth:1,borderColor:"#66FF66",borderLeftColor:"#FF66FF",borderRightColor:"#FF66FF",borderStyle:"solid",justifyContent:"center",alignItems:"center"},cellHeaderView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.5)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},focusCellHeaderView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.5)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},cellText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12},cellHeaderText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#333300"},focusCellHeaderText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#FFFF00"}},h=function(e){var t=e.gameBoard,o=e.focus;return r.a.createElement(r.a.Fragment,null,r.a.createElement(a.h,{style:{flexDirection:"row"}},r.a.createElement(a.h,{style:{flexDirection:"column-reverse"}},r.a.createElement(a.h,{style:g.focusCellHeaderView},r.a.createElement(a.e,{style:g.focusCellHeaderText},"x")),t.columns[0].cells.map((function(e){return r.a.createElement(a.h,{key:e.row,style:o.row===e.row?g.focusCellHeaderView:g.cellHeaderView},r.a.createElement(a.e,{style:o.row===e.row?g.focusCellHeaderText:g.cellHeaderText},""+(e.row+1)))}))),t.columns.map((function(e){return r.a.createElement(a.h,{key:e.col,style:{flexDirection:"column-reverse"}},r.a.createElement(a.h,{style:o.col===e.col?g.focusCellHeaderView:g.cellHeaderView},r.a.createElement(a.e,{style:o.col===e.col?g.focusCellHeaderText:g.cellHeaderText},""+(e.col+1))),e.cells.map((function(t){return r.a.createElement(a.h,{key:t.row,style:o.row>=t.row&&o.col>=e.col?g.focusCellView:g.cellView},r.a.createElement(a.e,{style:g.cellText},function(e){return"answer"===e.state?""+e.value:"player"===e.state?"üòÄ":"monster"===e.state?"üíÄ":"house"===e.state?"üè†":""}(t)))})))}))))},v=function(e,t){var o,n,r,a,c=e.player,l=[null===(o=e.columns[c.position.col+0])||void 0===o?void 0:o.cells[c.position.row+1],null===(n=e.columns[c.position.col+0])||void 0===n?void 0:n.cells[c.position.row-1],null===(r=e.columns[c.position.col+1])||void 0===r?void 0:r.cells[c.position.row+0],null===(a=e.columns[c.position.col-1])||void 0===a?void 0:a.cells[c.position.row+0]].filter((function(e){return e})),s=c.position.col===c.position.row,u=l.map((function(e){return{key:e.row+" "+e.col,text:e.value+(s&&c.position.col===e.col?"‚Üï":s&&c.position.row===e.row?"‚Üî":""),onPress:function(){return t(e)}}}));return{key:""+e.key,buttons:Object(i.e)(u)}},O={outerContainer:{height:150},container:{flexDirection:"row",justifyContent:"space-around",margin:16},buttonView:{width:48,height:48,borderWidth:2,borderColor:"#6666FF",borderStyle:"solid",justifyContent:"center",alignItems:"center"},buttonText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,color:"#FFFFFF"}},E=function(e){var t=e.gameInput,o=Object(n.useState)(0),i=o[0],c=o[1];return Object(n.useEffect)((function(){c(100);var e=setInterval((function(){c((function(e){return Math.max(0,e-1)}))}),50);return function(){return clearInterval(e)}}),[t.key]),console.log("GameInput",{gameInput:t}),r.a.createElement(r.a.Fragment,null,r.a.createElement(a.h,{style:O.outerContainer},r.a.createElement(a.h,{style:[O.container,{transform:"translate(0px,"+i+"px)"}]},t.buttons.map((function(e){return r.a.createElement(a.g,{key:e.key,onPress:e.onPress},r.a.createElement(a.h,{style:O.buttonView},r.a.createElement(a.e,{style:O.buttonText},e.text)))})))))},F={container:{flex:1,alignItems:"center",margin:16},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FFFF00"},mistakesText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FF6666"}},j=function(e){var t=e.gameScore,o=Object(n.useState)(""),i=(o[0],o[1]),c=Object(n.useState)(""),l=c[0],s=c[1];return Object(n.useEffect)((function(){var e=setInterval((function(){if(s(""+t.score),t.gameOverTime){var e=t.gameOverTime-t.startTime;i((function(t){return(e/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})+" seconds"}))}else{var o=Date.now()-t.startTime;i((function(e){return(o/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})+" seconds"}))}}),100);return function(){return clearInterval(e)}}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(a.h,{style:F.container},r.a.createElement(a.h,null,r.a.createElement(a.e,{style:F.text},l))))}}}]);
//# sourceMappingURL=22-bf450d59cc3ef53bc5a5.js.map