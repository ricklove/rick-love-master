{"version":3,"sources":["webpack:///D:/Projects/rick-love-master/node_modules/gatsby/node_modules/core-js/modules/es.promise.finally.js","webpack:///D:/Projects/rick-love-master/code/art/rando.ts","webpack:///D:/Projects/rick-love-master/code/art/artwork/circles.tsx","webpack:///D:/Projects/rick-love-master/code/art/artwork/layers-of-the-onions-soul.tsx","webpack:///D:/Projects/rick-love-master/code/art/artwork/art-121-helpers.ts","webpack:///D:/Projects/rick-love-master/code/art/artwork/art-121.tsx","webpack:///D:/Projects/rick-love-master/code/art/p5-viewer.tsx","webpack:///D:/Projects/rick-love-master/code/art/artwork/puzzle/art-puzzle-01.ts","webpack:///D:/Projects/rick-love-master/code/art/artwork/gears.tsx","webpack:///D:/Projects/rick-love-master/code/art/art-gallery.tsx","webpack:///D:/Projects/rick-love-master/node_modules/gatsby/node_modules/core-js/modules/es.math.hypot.js"],"names":["$","IS_PURE","NativePromise","fails","getBuiltIn","speciesConstructor","promiseResolve","redefine","target","proto","real","forced","prototype","call","then","onFinally","C","this","isFunction","x","e","createRandomGenerator","hash","a","seed","str","h","length","i","Math","imul","charCodeAt","xmur3","random","t","art_circles","key","title","description","artist","getTokenDescription","tokenId","renderArt","hostElement","floor","b","c","cr","cg","cb","ca","tick","p5","s","setup","createCanvas","draw","background","color","noFill","stroke","j","circle","translate","rotate","art_layersOfTheOnionsSoul","d","fill","sin","parseTokenId_art121","tokenTimestampValue","Number","parseInt","substr","tokenCounterValue","console","log","isFinite","tokenCounter","timestampSecs","targetSecs","Date","getTime","timeDeltaSecs","abs","art_121","tokenData","drawClock","index","clockRadius","units","value","perUnit","iHalf","PI","isFront","xZeroValue","correctRatioRaw","zRotation","cos","angleOffset","y","isFrontValue","sign","colorKey","alphaShift","lowAlpha","ceil","strokeWeight","line","defaultDelta","now","tokenTimeDeltaSecs","delta","year","month","day","hour","minute","second","iTick","P5Viewer","props","hostElementRef","useRef","useEffect","current","innerHTML","remove","style","ref","art_puzzle01","oppositeDirection","dir","state","board","boardVisits","moveSequence","player","moveIndex","calculateNextPos","posRaw","pos","exit","renderSeed","item","renderPos","push","randomMove","direction","r","distance","gridSize","wallColorCount","wallColors","Array","map","getNextWallRandomSeed","lastReverseMove","calculatePlayerReverseMove","reverseMove","lastPos","nextPos","itemAtPos","find","itemAtNextPos","m","endPosition","actualDistance","startPosition","actualMove","unshift","p","actualReverseMove","isVisited","getRenderPosition","forEach","drawPuzzleItem","gameWon","targetRenderPos","aOffset","tOffset","angle","trans","rect","itemSize","spiralRadius","iOffset","mod","filter","activeMove","pPos","tPos","undefined","wallPos","wall","slice","keyPressed","keyCode","UP_ARROW","LEFT_ARROW","DOWN_ARROW","RIGHT_ARROW","getKeyDirection","nextMove","drawGear","g","options","colorMode","position","radiusInner","radiusOuter","radiusAxis","teeth","rotationAngle","randomSeed","randomConstant","round","randomSym","toothAngle","TWO_PI","radI","radO","jitterSize","angle0","angle1","noStroke","curveTightness","beginShape","curveVertex","endShape","drawFace","faceType","radSmile","ex","ey","art_gears","randomMain","speed","brightness","gearCount","lastGear","radius","canvasSize","gears","targetRadius","targetDistance","angleQuandrant","targetAngle","xDelta","yDelta","actualRadius","sqrt","entries","gear","teethPassed","pow","ArtGallery","artItems","art","useState","showNavigation","setShowNavigation","setTokenId","kind","artRenderer","setArtRenderer","tokenDescription","setTokenDescription","debounce","useDebounce","queryParts","document","location","search","split","artKey","startsWith","artworkItem","newTokenId","changeTokenId","View_Panel","View_Form","Fragment","paddingBottom","Button_FormAction","onPress","View_FieldRow","Text_FormTitle","Input_Text","onChange","theme","text_formTitle","whiteSpace","ArtComponent","padding","fontSize","href","$hypot","hypot","stat","Infinity","NaN","value1","value2","arg","div","sum","aLen","arguments","larg"],"mappings":"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","file":"8-efdec032810ccaa0dc83.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar redefine = require('../internals/redefine');\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromise && fails(function () {\n  NativePromise.prototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = typeof onFinally == 'function';\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// patch native Promise.prototype for native async functions\nif (!IS_PURE && typeof NativePromise == 'function' && !NativePromise.prototype['finally']) {\n  redefine(NativePromise.prototype, 'finally', getBuiltIn('Promise').prototype['finally']);\n}\n","/* eslint-disable no-return-assign */\r\n/* eslint-disable no-multi-assign */\r\n/* eslint-disable @typescript-eslint/no-unused-expressions */\r\n/* eslint-disable no-bitwise */\r\n\r\n// FROM: https://stackoverflow.com/a/47593316/567524\r\n\r\nfunction xmur3(str: string) {\r\n    let h = 1779033703 ^ str.length;\r\n    for (let i = 0; i < str.length; i++) {\r\n        h = Math.imul(h ^ str.charCodeAt(i), 3432918353);\r\n        h = h << 13 | h >>> 19;\r\n    }\r\n\r\n    return () => {\r\n        h = Math.imul(h ^ h >>> 16, 2246822507);\r\n        h = Math.imul(h ^ h >>> 13, 3266489909);\r\n        return (h ^= h >>> 16) >>> 0;\r\n    };\r\n}\r\n\r\nfunction mulberry32(a: number) {\r\n    return () => {\r\n        let t = a += 0x6D2B79F5;\r\n        t = Math.imul(t ^ t >>> 15, t | 1);\r\n        t ^= t + Math.imul(t ^ t >>> 7, t | 61);\r\n        return ((t ^ t >>> 14) >>> 0) / 4294967296;\r\n    };\r\n}\r\n\r\nexport const createRandomGenerator = (hash: string) => {\r\n    const seed = xmur3(hash)();\r\n    return {\r\n        random: mulberry32(seed),\r\n    };\r\n};\r\n","/* eslint-disable new-cap */\r\n/* eslint-disable no-new */\r\nimport p5 from 'p5';\r\nimport { createRandomGenerator } from '../rando';\r\n\r\nexport const art_circles = {\r\n    key: `art-circles`,\r\n    title: `Circles`,\r\n    description: `The circles we travel in life always bring us back home.`,\r\n    artist: `Rick Love`,\r\n    getTokenDescription: (tokenId: string) => {\r\n        return null;\r\n    },\r\n    renderArt: (hostElement: HTMLElement, hash = `This is my hash!`) => {\r\n        // const { a, b, c } = { a: 57, b: 23, c: 15 };\r\n\r\n        const { random } = createRandomGenerator(hash);\r\n        const { a, b, c } = { a: 1 + Math.floor(57 * random()), b: 1 + Math.floor(213 * random()), c: 1 + Math.floor(115 * random()) };\r\n        const { cr, cg, cb, ca } = { cr: Math.floor(25 + 230 * random()), cg: Math.floor(25 + 230 * random()), cb: Math.floor(25 + 230 * random()), ca: Math.floor(25 + 25 * random()) };\r\n\r\n        let tick = 0;\r\n        return new p5((s: p5) => {\r\n            s.setup = () => {\r\n                s.createCanvas(400, 400);\r\n            };\r\n            s.draw = () => {\r\n                s.background(0);\r\n                for (let i = 0; i < 10; i++) {\r\n                    const color = s.color((cr * i) % 255, (cg * i) % 255, (cb * i) % 255, ca);\r\n                    s.noFill();\r\n                    s.stroke(color);\r\n                    for (let j = 0; j < 36; j++) {\r\n                        s.circle(200 - a / 2 + j % a, 200 - b / 2 + j % b, 270 - (i * 5) % c);\r\n                    }\r\n                    s.translate(200, 200);\r\n                    // s.rotate((a + b + c + tick * 0.001) % 2);\r\n                    s.rotate((a + b + c + tick * 0.001));\r\n                    s.translate(-200, -200);\r\n                    tick++;\r\n                }\r\n\r\n                tick++;\r\n            };\r\n        }, hostElement);\r\n    },\r\n};\r\n","/* eslint-disable new-cap */\r\n/* eslint-disable no-new */\r\nimport p5 from 'p5';\r\nimport { createRandomGenerator } from '../rando';\r\n\r\nexport const art_layersOfTheOnionsSoul = {\r\n    key: `art-onions`,\r\n    title: `Layers of the Onion's Soul`,\r\n    description: `This represents the complexity of an onion's soul - which has many layers, like a human.`,\r\n    artist: `Rick Love & Lydia Love - who called me weirdo as inspiration, and mentioned a circle, some squares, a tetrahedron, Minecraft blocks, and then said she meant cubes and spheres.`,\r\n    getTokenDescription: (tokenId: string) => {\r\n        return null;\r\n    },\r\n    renderArt: (hostElement: HTMLElement, hash = `This is my hash!`) => {\r\n        // const { a, b, c } = { a: 3, b: 7, c: 15 };\r\n\r\n        const { random } = createRandomGenerator(hash);\r\n        const { a, b, c, d, e } = { a: 1 + Math.floor(17 * random()), b: 1 + Math.floor(57 * random()), c: 1 + Math.floor(35 * random()), d: 0 + Math.floor(5 * random()), e: 20 + Math.floor(255 * random()) };\r\n        // const { cr, cg, cb } = { cr: 207, cg: 175, cb: 65 };\r\n        const { cr, cg, cb } = { cr: Math.floor(25 + 230 * random()), cg: Math.floor(25 + 230 * random()), cb: Math.floor(25 + 230 * random()) };\r\n\r\n        let tick = 0;\r\n\r\n        return new p5((s: p5) => {\r\n            s.setup = () => {\r\n                s.createCanvas(400, 400);\r\n            };\r\n            s.draw = () => {\r\n                s.background(0);\r\n                for (let i = 0; i < 35; i++) {\r\n                    const color = s.color((cr + b * i) % 255, cg * (1 + i * a) % 255, (cb + i * d) % 255);\r\n                    s.fill(color);\r\n                    s.circle(150 + (i * 7) % b - a + 32 * Math.sin(tick * 0.001), 250 + i - c % 35 + b, (270 - i) % e);\r\n                    s.translate(100, 100);\r\n                    s.rotate(d + tick * 0.000007);\r\n                    s.translate(-120, -150);\r\n                    tick++;\r\n                }\r\n            };\r\n        }, hostElement);\r\n    },\r\n};\r\n","export const parseTokenId_art121 = (tokenId: string) => {\r\n    const tokenTimestampValue = Number.parseInt(tokenId.substr(0, tokenId.length - 6), 10);\r\n    const tokenCounterValue = Number.parseInt(tokenId.substr(tokenId.length - 6), 10);\r\n    console.log(`parseTokenId_art121`, { tokenId, tokenTimestampValue, tokenCounterValue });\r\n\r\n    if (!Number.isFinite(tokenTimestampValue)) { return null; }\r\n    if (!Number.isFinite(tokenCounterValue)) { return null; }\r\n\r\n    const tokenCounter = tokenCounterValue;\r\n    const timestampSecs = tokenTimestampValue;\r\n    const targetSecs = Math.floor(new Date(`2021-01-21 21:21:21Z`).getTime()) / 1000;\r\n    const timeDeltaSecs = Math.abs(targetSecs - timestampSecs);\r\n    return {\r\n        tokenId,\r\n        tokenCounter,\r\n        timestampSecs,\r\n        targetSecs,\r\n        timeDeltaSecs,\r\n    };\r\n};\r\n","/* eslint-disable new-cap */\r\n/* eslint-disable no-new */\r\nimport p5 from 'p5';\r\nimport { createRandomGenerator } from '../rando';\r\nimport { parseTokenId_art121 } from './art-121-helpers';\r\n\r\nexport const art_121 = {\r\n    key: `art-121`,\r\n    title: `1/21/21 21:21:21`,\r\n    description: `This exact time pattern will occur only once in our human timeline. This NFT crypto art will attempt to capture that time to the precise second and embed it in the distributed blockchain forever. \r\n    \r\nHowever the exact outcome cannot be controlled: \r\n\r\nThe color scheme is generated from the token hash.\r\n\r\nEven more difficult to predict - the block mining timestamp since 1/21/21 21:21:21 UTC controls the behavior of the clocks:\r\n\r\nYear\r\nMonth\r\nDay\r\nHour\r\nMinute\r\nSecond\r\n\r\nIf this is mined at the exact second, perfect stability will be achieved.\r\n\r\nThis is all up to whatever timing occurs on the blockchain when these NFTs are mined by the collectors.\r\n\r\nCan we obtain the exact precision?\r\n`,\r\n    artist: `Rick Love`,\r\n    getTokenDescription: (tokenId: string) => {\r\n        const tokenData = parseTokenId_art121(tokenId);\r\n        if (!tokenData) { return null; }\r\n\r\n        return `${tokenData.timeDeltaSecs} Seconds from 1/21/21 21:21:21 (#${tokenData.tokenCounter})`;\r\n    },\r\n    renderArt: (hostElement: HTMLElement, tokenId: string) => {\r\n        // const { a, b, c } = { a: 57, b: 23, c: 15 };\r\n\r\n\r\n        const { random } = createRandomGenerator(tokenId);\r\n        const { a, b, c } = { a: 1 + Math.floor(57 * random()), b: 1 + Math.floor(213 * random()), c: 1 + Math.floor(115 * random()) };\r\n        const { cr, cg, cb, ca } = { cr: Math.floor(25 + 230 * random()), cg: Math.floor(25 + 230 * random()), cb: Math.floor(25 + 230 * random()), ca: Math.floor(25 + 25 * random()) };\r\n\r\n        let tick = 0;\r\n\r\n        const tokenData = parseTokenId_art121(tokenId);\r\n\r\n        return new p5((s: p5) => {\r\n            s.setup = () => {\r\n                s.createCanvas(350, 350);\r\n            };\r\n            s.draw = () => {\r\n                s.background(0);\r\n\r\n                const drawClock = (index: number, clockRadius: number, units: number, value: number) => {\r\n\r\n                    const perUnit = 1 / units;\r\n                    const d = 0.8 * clockRadius * Math.sin(Math.PI * 2 * perUnit);\r\n\r\n                    for (let iHalf = 0; iHalf <= 1; iHalf++) {\r\n                        const isFront = iHalf === 1;\r\n                        let xZeroValue = 0;\r\n                        for (let i = 0; i < units; i++) {\r\n\r\n\r\n                            const errorRatio = (0.5 - Math.abs((value * perUnit) - 0.5)) * 2;\r\n                            const correctRatioRaw = 1 - errorRatio;\r\n                            // const correctRatio = correctRatioRaw * ((tick * 0.121 * correctRatioRaw) % 2 - 1);\r\n                            const zRotation = Math.cos((tick * 0.0121 * correctRatioRaw + index * 0.25));\r\n                            const angleOffset = -0.25 + value * perUnit;\r\n\r\n                            const x = zRotation * clockRadius * Math.cos(Math.PI * 2 * (angleOffset - i * perUnit));\r\n                            const y = clockRadius * Math.sin(Math.PI * 2 * (angleOffset - i * perUnit));\r\n\r\n                            if (i === 0) {\r\n                                xZeroValue = x;\r\n                            }\r\n\r\n                            const isFrontValue = (value === 0 && index % 2 === 0 ? -1 : 1) * Math.sign(xZeroValue) === Math.sign(x);\r\n                            // const isFrontValue = Math.sign(xZeroValue) === Math.sign(x);\r\n                            // const isFrontValue = Math.sign(xZeroValue) === Math.sign(x);\r\n\r\n                            if (isFront && !isFrontValue) { continue; }\r\n                            if (!isFront && isFrontValue) { continue; }\r\n\r\n                            // if (isFront && isFrontX) { continue; }\r\n                            // if (!isFront && (isFrontOnLeft && x > 0 || !isFrontOnLeft && x < 0)) { continue; }\r\n                            // if (!isFront && value !== 0) { continue; }\r\n\r\n                            const colorKey = index + 1;\r\n\r\n                            // const alphaShift = 0.5 + 0.5 * (x / clockRadius) * (isFrontOnLeft ? -1 : 1);\r\n                            // const alphaShift = 1;\r\n                            const alphaShift = isFront ? 1 : 0.25;\r\n                            const lowAlpha = Math.ceil(units < 100 ? 100 : 25);\r\n\r\n                            s.noFill();\r\n                            s.stroke(s.color((cr * colorKey) % 255, (cg * colorKey) % 255, (cb * colorKey) % 255, Math.ceil((value === 0 ? 255 : lowAlpha) * alphaShift)));\r\n                            s.strokeWeight(2);\r\n                            s.line(x * (1 - 0.05 * Math.abs(zRotation)), y * 0.95, x, y);\r\n\r\n                            if (i === 0) {\r\n                                s.stroke(s.color((cr * colorKey) % 255, (cg * colorKey) % 255, (cb * colorKey) % 255, value === 0 ? 255 : 50));\r\n                                s.line(0, 0, x, y);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                };\r\n\r\n                s.translate(175, 175);\r\n\r\n                const defaultDelta = ((new Date(`2021-01-21 21:21:21.212Z`)).getTime() - Date.now());\r\n                // const defaultDelta = ((new Date(`2022-01-21 21:21:21.212Z`)).getTime() - Date.now());\r\n                // const defaultDelta = ((new Date(`2000-01-01 00:00:00.000Z`)).getTime() - Date.now());\r\n                // const defaultDelta = 0;\r\n\r\n                const tokenTimeDeltaSecs = tokenData?.timeDeltaSecs;\r\n                const delta = tokenTimeDeltaSecs != null ? tokenTimeDeltaSecs * 1000 : defaultDelta;\r\n                // console.log(`delta`, { delta, defaultDelta, tokenId });\r\n\r\n                const e = {\r\n                    year: Math.floor(delta / (1000 * 60 * 60 * 24 * 365)),\r\n                    month: Math.floor(delta / (1000 * 60 * 60 * 24 * 31) % 12),\r\n                    day: Math.floor(delta / (1000 * 60 * 60 * 24) % 31),\r\n                    hour: Math.floor(delta / (1000 * 60 * 60) % 24),\r\n                    minute: Math.floor(delta / (1000 * 60) % 60),\r\n                    second: Math.floor(delta / (1000) % 60),\r\n                    // ms: delta % 1000,\r\n                };\r\n                const isBefore = true;\r\n\r\n                // tick = 0;\r\n                for (let iTick = 0; iTick < 10; iTick++) {\r\n                    drawClock(0, 140, 100, e.year);\r\n                    drawClock(1, 120, 12, e.month);\r\n                    drawClock(2, 100, 31, e.day);\r\n                    drawClock(3, 80, 60, e.hour);\r\n                    drawClock(4, 60, 60, e.minute);\r\n                    drawClock(5, 40, 60, e.second);\r\n                    // drawClock(6, 20, 1000, e.ms);\r\n\r\n                    s.background(s.color(0, 0, 0, 5));\r\n                    tick++;\r\n                }\r\n\r\n                s.translate(-175, -175);\r\n\r\n\r\n                const drawText = () => {\r\n                    s.textSize(20);\r\n                    s.noStroke();\r\n                    s.textFont(`monospace`);\r\n\r\n                    const pad = (value: number, digits: number) => (`${value}`).padStart(digits, `0`);\r\n\r\n                    s.fill(s.color(255, 255, 255));\r\n                    s.text(`1/21/21 21:21:21 GST`, 60, 20);\r\n\r\n                    s.fill(!isBefore ? s.color(0, 255, 0) : s.color(255, 0, 0));\r\n                    s.text(`${isBefore ? `-` : `+`} ${pad(e.year, 2)}y ${pad(e.month, 2)}m ${pad(e.day, 2)}d ${pad(e.hour, 2)}:${pad(e.minute, 2)}:${pad(e.second, 2)}`, 50, 340);\r\n                };\r\n\r\n                // drawText();\r\n\r\n                tick++;\r\n            };\r\n        }, hostElement);\r\n    },\r\n};\r\n","import React, { useEffect, useRef } from 'react';\r\n\r\nexport const P5Viewer = (props: {\r\n    renderArt: (hostElement: HTMLDivElement) => { remove: () => void };\r\n}) => {\r\n\r\n    const hostElementRef = useRef(null as null | HTMLDivElement);\r\n\r\n    useEffect(() => {\r\n        if (!hostElementRef.current) { return () => { }; }\r\n\r\n        hostElementRef.current.innerHTML = ``;\r\n        const { remove } = props.renderArt(hostElementRef.current);\r\n        return () => {\r\n            remove();\r\n        };\r\n    }, [hostElementRef.current, props.renderArt]);\r\n\r\n    return (\r\n        <>\r\n            <div style={{}} ref={hostElementRef} />\r\n        </>\r\n    );\r\n};\r\n","/* eslint-disable new-cap */\r\n/* eslint-disable no-new */\r\nimport { SSL_OP_SSLEAY_080_CLIENT_DH_BUG } from 'constants';\r\nimport p5 from 'p5';\r\nimport { createRandomGenerator } from '../../rando';\r\n\r\n\r\nconst parseTokenId_puzzle01 = (tokenId: string) => { return tokenId; };\r\n\r\nexport const art_puzzle01 = {\r\n    key: `art-puzzle-01`,\r\n    title: `Puzzle 01`,\r\n    description: `Try to puzzle it out and unlock the answer.`,\r\n    artist: `Rick Love`,\r\n    getTokenDescription: (tokenId: string) => {\r\n        const tokenData = parseTokenId_puzzle01(tokenId);\r\n        if (!tokenData) { return null; }\r\n\r\n        return `TokenId: ${tokenData}`;\r\n    },\r\n    renderArt: (hostElement: HTMLElement, tokenId: string) => {\r\n        // const { a, b, c } = { a: 57, b: 23, c: 15 };\r\n\r\n\r\n        const tokenData = parseTokenId_puzzle01(tokenId);\r\n\r\n        type Vector2 = { x: number, y: number };\r\n\r\n        type BoardItem = {\r\n            /** Seed for the render math */\r\n            renderSeed: string;\r\n            item: 'player' | 'exit' | 'entrance' | 'wall' | 'wall-broken';\r\n            pos: Vector2;\r\n\r\n            renderPos?: Vector2;\r\n            targetRenderPos?: Vector2;\r\n            activeMove?: ActualMove;\r\n        }\r\n        type MoveDirection = 'up' | 'down' | 'left' | 'right';\r\n        const oppositeDirection = (dir: MoveDirection): MoveDirection => {\r\n            switch (dir) {\r\n                case `up`: return `down`;\r\n                case `down`: return `up`;\r\n                case `left`: return `right`;\r\n                case `right`: return `left`;\r\n                default: return `up`;\r\n            }\r\n        };\r\n        type Move = {\r\n            direction: MoveDirection;\r\n            distance: number;\r\n        };\r\n        type ActualMove = {\r\n            direction: MoveDirection;\r\n            distance: number;\r\n            startPosition: Vector2;\r\n            endPosition: Vector2;\r\n        };\r\n        const state = {\r\n            board: [] as BoardItem[],\r\n            boardVisits: [] as { pos: Vector2 }[],\r\n            moveSequence: [] as ActualMove[],\r\n            player: {} as BoardItem,\r\n            moveIndex: 0,\r\n        };\r\n\r\n        const canvasSize = 350;\r\n        const gridSize = 16;\r\n        const itemSize = 20;\r\n        const gridAreaOffset = 15;\r\n        const maxMoveCount = 20;\r\n\r\n        const calculateNextPos = (posRaw: Vector2, dir: MoveDirection): Vector2 => {\r\n            const pos = { ...posRaw };\r\n            if (dir === `up`) { pos.y--; }\r\n            if (dir === `down`) { pos.y++; }\r\n            if (dir === `left`) { pos.x--; }\r\n            if (dir === `right`) { pos.x++; }\r\n            return pos;\r\n        };\r\n\r\n        return new p5((s: p5) => {\r\n            s.setup = () => {\r\n                s.createCanvas(canvasSize, canvasSize);\r\n                s.background(0);\r\n                // s.colorMode(s.HSB);\r\n\r\n                // Create board out of backwards generation of correct moves\r\n                const { random } = createRandomGenerator(tokenId);\r\n\r\n                const { board, boardVisits } = state;\r\n                const exit: BoardItem = {\r\n                    renderSeed: `${random()}`,\r\n                    item: `exit`,\r\n                    pos: {\r\n                        x: Math.floor(1 + (gridSize - 2) * random()),\r\n                        y: Math.floor(1 + (gridSize - 2) * random()),\r\n                    },\r\n                };\r\n\r\n                state.player = {\r\n                    renderSeed: `${random()}`,\r\n                    item: `player`,\r\n                    pos: { ...exit.pos },\r\n                    renderPos: { x: 0, y: 0 },\r\n                };\r\n                const { player } = state;\r\n\r\n                board.push(exit);\r\n                // board.push(player);\r\n\r\n                // // Crete outer wall\r\n                // for (let i = 0; i < gridSize; i++) {\r\n                //     board.push({ renderSeed: `${random()}`, item: `wall`, pos: { x: i, y: 0 } });\r\n                //     board.push({ renderSeed: `${random()}`, item: `wall`, pos: { x: i, y: gridSize - 1 } });\r\n                //     board.push({ renderSeed: `${random()}`, item: `wall`, pos: { x: 0, y: i } });\r\n                //     board.push({ renderSeed: `${random()}`, item: `wall`, pos: { x: gridSize - 1, y: i } });\r\n                // }\r\n\r\n                const randomMoveDirection = (): MoveDirection => {\r\n                    const r = random();\r\n                    if (r > 0.75) { return `up`; }\r\n                    if (r > 0.5) { return `down`; }\r\n                    if (r > 0.25) { return `left`; }\r\n                    return `right`;\r\n                };\r\n                const randomMove = (): Move => {\r\n                    return {\r\n                        direction: randomMoveDirection(),\r\n                        distance: Math.floor(0 + gridSize * 0.75 * random()),\r\n                    };\r\n                };\r\n\r\n                const wallColorMaxCount = 16;\r\n                const wallColorCount = 4 + Math.floor(random() * (wallColorMaxCount - 4));\r\n                const wallColors = [...new Array(wallColorCount)].map(x => `${random()}`);\r\n                const getNextWallRandomSeed = () => {\r\n                    return wallColors[Math.floor(random() * wallColorCount)];\r\n                };\r\n\r\n                // Reversed moves to generate board\r\n                let lastReverseMove = {\r\n                    distance: 0,\r\n                    direction: `unknown`,\r\n                } as unknown as Move;\r\n\r\n                const calculatePlayerReverseMove = (reverseMove: Move): null | ActualMove => {\r\n                    let d = reverseMove.distance;\r\n                    let lastPos = { ...player.pos };\r\n\r\n                    const dir = reverseMove.direction;\r\n                    while (d > 0) {\r\n                        const pos = calculateNextPos(lastPos, dir);\r\n                        const nextPos = calculateNextPos(lastPos, dir);\r\n\r\n                        // Past edge - fail\r\n                        if (pos.x <= 0 || pos.x >= gridSize - 1\r\n                            || pos.y <= 0 || pos.y >= gridSize - 1) { return null; }\r\n\r\n                        // Hit existing wall - fail\r\n                        const itemAtPos = board.find(x => x.item !== `player` && x.pos.x === pos.x && x.pos.y === pos.y);\r\n                        if (itemAtPos?.item === `wall`) { return null; }\r\n\r\n                        // Already next wall - fail\r\n                        const itemAtNextPos = board.find(x => x.item !== `player` && x.pos.x === nextPos.x && x.pos.y === nextPos.y);\r\n                        if (itemAtNextPos?.item === `wall`) { return null; }\r\n\r\n                        d--;\r\n                        lastPos = { ...pos };\r\n                    }\r\n\r\n                    // If in line with any existing endmove, reject\r\n                    const inLineWithLastPos = state.moveSequence.find(m => m.endPosition.x === lastPos.x || m.endPosition.y === lastPos.y);\r\n                    if (inLineWithLastPos) { return null; }\r\n\r\n                    const actualDistance = reverseMove.distance - d;\r\n                    return {\r\n                        direction: oppositeDirection(reverseMove.direction),\r\n                        distance: actualDistance,\r\n                        endPosition: { ...player.pos },\r\n                        startPosition: lastPos,\r\n                    };\r\n                };\r\n\r\n                // Add outer wall\r\n                for (let i = 0; i < gridSize; i++) {\r\n                    board.push({ renderSeed: getNextWallRandomSeed(), item: `wall`, pos: { x: i, y: 0 } });\r\n                    board.push({ renderSeed: getNextWallRandomSeed(), item: `wall`, pos: { x: i, y: gridSize - 1 } });\r\n                    board.push({ renderSeed: getNextWallRandomSeed(), item: `wall`, pos: { x: 0, y: i } });\r\n                    board.push({ renderSeed: getNextWallRandomSeed(), item: `wall`, pos: { x: gridSize - 1, y: i } });\r\n                }\r\n\r\n                // Add game walls\r\n                for (let i = 0; i < maxMoveCount; i++) {\r\n\r\n                    // Reverse Move player\r\n                    let reverseMove = randomMove();\r\n                    while (reverseMove.direction === lastReverseMove.direction\r\n                        || reverseMove.direction === oppositeDirection(lastReverseMove.direction)) {\r\n                        reverseMove = randomMove();\r\n                    }\r\n\r\n                    // Calculate reverse move\r\n                    const actualMove = calculatePlayerReverseMove(reverseMove);\r\n                    if (!actualMove || actualMove.distance <= 0) {\r\n                        continue;\r\n                    }\r\n\r\n                    // Add wall which would have stopped the player (having made this move forward)\r\n                    if (state.moveSequence.length > 0) {\r\n                        const nextPos = calculateNextPos(player.pos, oppositeDirection(reverseMove.direction));\r\n                        board.push({\r\n                            item: `wall`,\r\n                            pos: nextPos,\r\n                            renderSeed: getNextWallRandomSeed(),\r\n                        });\r\n                    }\r\n\r\n                    // Move player\r\n                    player.pos = actualMove.startPosition;\r\n                    state.moveSequence.unshift(actualMove);\r\n                    lastReverseMove = actualMove;\r\n\r\n                    // Add board visits\r\n                    let p = actualMove.startPosition;\r\n                    state.boardVisits.push({ pos: { ...p } });\r\n                    while (p.x !== actualMove.endPosition.x\r\n                        || p.y !== actualMove.endPosition.y) {\r\n                        p = calculateNextPos(p, actualMove.direction);\r\n                        state.boardVisits.push({ pos: { ...p } });\r\n                    }\r\n\r\n                    console.log(`boardVisits`, { actualReverseMove: actualMove, boardVisits: [...state.boardVisits] });\r\n                }\r\n\r\n                // Add random walls\r\n                for (let x = 0; x < gridSize; x++) {\r\n                    for (let y = 0; y < gridSize; y++) {\r\n                        const isVisited = !!boardVisits.find(b => b.pos.x === x && b.pos.y === y);\r\n                        const item = !!board.find(b => b.pos.x === x && b.pos.y === y);\r\n\r\n                        if (isVisited || item) { continue; }\r\n\r\n                        if (random() > 0.75) {\r\n                            board.push({\r\n                                item: `wall`,\r\n                                pos: { x, y },\r\n                                renderSeed: getNextWallRandomSeed(),\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n                player.renderPos = getRenderPosition(player.pos);\r\n                state.board.forEach(x => drawPuzzleItem(x));\r\n            };\r\n\r\n            const getRenderPosition = (p: Vector2) => {\r\n                const x = gridAreaOffset + p.x * itemSize;\r\n                const y = gridAreaOffset + p.y * itemSize;\r\n                return { x, y };\r\n            };\r\n\r\n            const drawPuzzleItem = (item: typeof state.board[0]) => {\r\n                const { random } = createRandomGenerator(item.renderSeed);\r\n                const { a, b, c } = { a: 1 + Math.floor(57 * random()), b: 1 + Math.floor(213 * random()), c: 1 + Math.floor(115 * random()) };\r\n                const { cr, cg, cb, ca } = { cr: Math.floor(25 + 230 * random()), cg: Math.floor(25 + 230 * random()), cb: Math.floor(25 + 230 * random()), ca: Math.floor(25 + 125 * random()) };\r\n\r\n                const { x, y } = item.renderPos ?? getRenderPosition(item.pos);\r\n                s.fill(cr, cg, cb, ca);\r\n                s.stroke(cr, cg, cb, 255);\r\n                s.strokeWeight(1);\r\n\r\n                const gameWon = state.moveIndex >= state.moveSequence.length && !state.player.targetRenderPos;\r\n\r\n                const aOffset = tick / 100;\r\n                const tOffset = Math.abs(Math.floor(Math.sin((tick + a * c) / 1000) * canvasSize));\r\n                const alphaCycle = 100;\r\n\r\n                if (item.item === `player`) {\r\n                    if (gameWon) {\r\n                        s.stroke(0, 0, 0, 10);\r\n\r\n                        let mod = tick;\r\n                        for (let i = 0; i < 16; i++) {\r\n                            s.fill(cr, cg, (cb + i * c) % 255, Math.floor(Math.sin((tick + a * c) / alphaCycle) * 25 + 35));\r\n\r\n                            const j = 0;\r\n                            s.circle(200 - a / 2 + j % a, 200 - b / 2 + j % b, 270 - (i * 5) % c);\r\n                            s.translate(tOffset, tOffset);\r\n                            // s.rotate((a + b + c + tick * 0.001) % 2);\r\n                            s.rotate(((a + b + c + mod) * 0.001));\r\n                            s.translate(-tOffset, -tOffset);\r\n                            mod++;\r\n                        }\r\n                        return;\r\n                    }\r\n\r\n                    s.fill(cr, cg, cb, 30);\r\n                    const circleCount = 4;\r\n                    const spiralRadius = 0.01 * (4 + state.moveSequence.length - state.moveIndex);\r\n                    // const spiralRadius = 0.1;\r\n                    for (let i = 0; i < circleCount; i++) {\r\n                        s.stroke(cr, cg, cb, Math.floor(255 * (i + 1) / (circleCount + 1)));\r\n\r\n                        s.circle(x + itemSize * (0.5 + spiralRadius * Math.cos(2 * Math.PI * (i / circleCount + tick / 100))), y + itemSize * (0.5 + spiralRadius * Math.sin(2 * Math.PI * (i / circleCount + tick / 100))), itemSize);\r\n                    }\r\n\r\n                    // s.circle(x + 0.5 * itemSize, y + 0.5 * itemSize, itemSize);\r\n                    return;\r\n                }\r\n\r\n                if (item.item === `exit`) {\r\n                    if (gameWon) {\r\n                        s.fill(cr, cg, cb, Math.floor(Math.sin((tick + a * c) / alphaCycle) * 25 + 35));\r\n                        s.stroke(0, 0, 0, 10);\r\n\r\n                        let angle = a;\r\n                        let trans = c;\r\n                        for (let i = 0; i < 32; i++) {\r\n\r\n                            // s.rect(x + itemSize * 0.25, y + itemSize * 0.25, itemSize * 0.5, itemSize * 0.5);\r\n                            s.translate(trans, trans);\r\n                            s.rotate(angle + aOffset);\r\n                            s.rect(x + itemSize * 0.25, y + itemSize * 0.25, c * x, c * y);\r\n                            s.rotate(-angle - aOffset);\r\n                            s.translate(-trans, -trans);\r\n                            angle += b;\r\n                            trans += c;\r\n                            trans %= 125;\r\n                        }\r\n                        return;\r\n                    }\r\n\r\n                    // s.fill(cr, cg, cb, 200);\r\n                    s.fill(255, 255, 255);\r\n                    s.rect(x, y, itemSize, itemSize);\r\n                    s.fill(0, 0, 0);\r\n                    s.rect(x + itemSize * 0.25, y + itemSize * 0.25, itemSize * 0.5, itemSize * 0.5);\r\n                    return;\r\n                }\r\n\r\n                if (item.item === `wall-broken`) {\r\n                    if (!gameWon) { return; }\r\n\r\n                    s.fill(cr, cg, cb, Math.floor(Math.sin((tick + a * c) / alphaCycle) * 25 + 25));\r\n                    s.stroke(0, 0, 0, 10);\r\n\r\n                    let angle = a;\r\n                    const trans = c % (canvasSize * 0.5);\r\n                    for (let i = 0; i < 8; i++) {\r\n\r\n                        s.translate(-trans, -trans);\r\n                        s.rotate(angle + aOffset);\r\n                        s.rect(x, y, itemSize * x, itemSize * y);\r\n                        s.rotate(-angle - aOffset);\r\n                        s.translate(trans, trans);\r\n                        angle += b;\r\n                        // trans += c;\r\n                        // trans %= 3;\r\n                    }\r\n                    return;\r\n\r\n                    // s.rect(x + itemSize * 0.25, y + itemSize * 0.25, itemSize * 0.5, itemSize * 0.5);\r\n                    // s.rect(x, y, itemSize * x, itemSize * y);\r\n                    // return;\r\n                }\r\n\r\n                if (gameWon) {\r\n                    return;\r\n                    // s.fill(cr, cg, cb, Math.floor(Math.sin((tick + a * c) / alphaCycle) * 25 + 25));\r\n                    // s.rect(x, y, itemSize, itemSize);\r\n                    // return;\r\n                }\r\n                // s.rect(x, y, itemSize, itemSize);\r\n\r\n                s.fill(cr, cg, cb, 5);\r\n                const circleCount = 4;\r\n                const spiralRadius = 0.015 * (4 + state.moveSequence.length - state.moveIndex);\r\n                const iOffset = random();\r\n                for (let i = 0; i < circleCount; i++) {\r\n                    s.stroke(cr, cg, cb, Math.floor(255 * (i + 1) / (circleCount + 1)));\r\n                    s.rect(x + itemSize * (0 + spiralRadius * Math.cos(2 * Math.PI * ((iOffset + i) / circleCount + tick / 100))), y + itemSize * (0 + spiralRadius * Math.sin(2 * Math.PI * ((iOffset + i) / circleCount + tick / 100))), itemSize, itemSize);\r\n                }\r\n            };\r\n\r\n            let tick = 0;\r\n            s.draw = () => {\r\n                s.background(0);\r\n                // s.background(0, 0, 0, 5);\r\n\r\n                const drawMoveHistory = (m: typeof state.moveSequence[0]) => {\r\n                    s.noFill();\r\n                    s.stroke(255, 255, 255, 100);\r\n\r\n                    const x1 = gridAreaOffset + m.startPosition.x * itemSize + itemSize * 0.5;\r\n                    const y1 = gridAreaOffset + m.startPosition.y * itemSize + itemSize * 0.5;\r\n                    const x2 = gridAreaOffset + m.endPosition.x * itemSize + itemSize * 0.5;\r\n                    const y2 = gridAreaOffset + m.endPosition.y * itemSize + itemSize * 0.5;\r\n                    s.line(x1, y1, x2, y2);\r\n                    s.line(x1 + itemSize * 0.25, y1 + itemSize * 0.25, x2, y2);\r\n\r\n                    // s.text(`${i}`, x1,y1);\r\n                };\r\n\r\n                // state.board.forEach(x => drawPuzzleItem(x));\r\n                state.board.filter(x => x.item === `wall-broken`).forEach(x => drawPuzzleItem(x));\r\n                state.board.filter(x => x.item !== `wall-broken`).forEach(x => drawPuzzleItem(x));\r\n\r\n                drawPuzzleItem(state.player);\r\n\r\n                // Animate\r\n                if (state.player.activeMove && state.player.renderPos && state.player.targetRenderPos) {\r\n                    // state.player.renderPos = {\r\n                    //     x: 0.9 * state.player.renderPos.x + 0.1 * state.player.targetRenderPos.x,\r\n                    //     y: 0.9 * state.player.renderPos.y + 0.1 * state.player.targetRenderPos.y,\r\n                    // };\r\n\r\n                    const speed = 3;\r\n                    for (let i = 0; i < speed; i++) {\r\n                        state.player.renderPos = calculateNextPos(state.player.renderPos, state.player.activeMove.direction);\r\n\r\n                        const dist = Math.abs(state.player.renderPos.x - state.player.targetRenderPos.x)\r\n                            + Math.abs(state.player.renderPos.y - state.player.targetRenderPos.y);\r\n                        if (dist < 1) {\r\n                            state.player.renderPos = state.player.targetRenderPos;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // If player is done animating destroy wall\r\n                const { activeMove } = state.player;\r\n\r\n                const pPos = state.player.renderPos;\r\n                const tPos = state.player.targetRenderPos;\r\n                if (activeMove && pPos && tPos && pPos.x === tPos.x && pPos.y === tPos.y) {\r\n                    console.log(`Reached`, { activeMove, pPos, tPos });\r\n                    state.player.targetRenderPos = undefined;\r\n\r\n                    // Break any walls that have been reached\r\n                    for (const m of state.moveSequence.slice(0, state.moveIndex)) {\r\n                        const wallPos = calculateNextPos(m.endPosition, m.direction);\r\n                        const wall = state.board.find(x => x.pos.x === wallPos.x && x.pos.y === wallPos.y);\r\n                        if (!wall) { continue; }\r\n\r\n                        wall.item = `wall-broken`;\r\n                    }\r\n                }\r\n\r\n\r\n                // Debug\r\n                //  state.moveSequence.forEach(x => drawMoveHistory(x));\r\n                tick++;\r\n            };\r\n\r\n            s.keyPressed = () => {\r\n                const { key, keyCode } = s;\r\n\r\n                const getKeyDirection = (): null | MoveDirection => {\r\n                    switch (key) {\r\n                        case `w`: return `up`;\r\n                        case `a`: return `left`;\r\n                        case `s`: return `down`;\r\n                        case `d`: return `right`;\r\n                        default: break;\r\n                    }\r\n                    switch (keyCode) {\r\n                        case s.UP_ARROW: return `up`;\r\n                        case s.LEFT_ARROW: return `left`;\r\n                        case s.DOWN_ARROW: return `down`;\r\n                        case s.RIGHT_ARROW: return `right`;\r\n                        default: return null;\r\n                    }\r\n                };\r\n\r\n                const d = getKeyDirection();\r\n                if (!d) { return; }\r\n\r\n                // Move the player\r\n                const nextMove = state.moveSequence[state.moveIndex];\r\n                if (!nextMove) { return; }\r\n\r\n                if (nextMove.direction !== d) {\r\n                    state.moveIndex = 0;\r\n                    state.player.activeMove = undefined;\r\n                    state.player.renderPos = undefined;\r\n                    state.player.targetRenderPos = undefined;\r\n                    state.board.filter(x => x.item === `wall-broken`).forEach(x => { x.item = `wall`; });\r\n                    return;\r\n                }\r\n\r\n                state.player.activeMove = nextMove;\r\n                state.player.renderPos = getRenderPosition(nextMove.startPosition);\r\n                state.player.targetRenderPos = getRenderPosition(nextMove.endPosition);\r\n                state.moveIndex++;\r\n            };\r\n        }, hostElement);\r\n    },\r\n};\r\n","/* eslint-disable new-cap */\r\n/* eslint-disable no-new */\r\nimport p5 from 'p5';\r\nimport { createRandomGenerator } from '../rando';\r\n\r\ntype Vector2 = { x: number, y: number };\r\ntype ColorHsb = {\r\n    /** 0-360 */\r\n    h: number;\r\n    /** 0-100 */\r\n    s: number;\r\n    /** 0-100 */\r\n    b: number;\r\n    /** 0-1 */\r\n    a: number;\r\n};\r\nconst drawGear = (g: p5,\r\n    options: {\r\n        position: Vector2;\r\n        radiusInner: number;\r\n        radiusOuter: number;\r\n        radiusAxis: number;\r\n        teeth: number;\r\n        rotationAngle: number;\r\n        color: ColorHsb;\r\n        randomSeed: string;\r\n    }) => {\r\n    g.colorMode(`hsl`);\r\n\r\n    const { position: { x, y }, radiusInner, radiusOuter, radiusAxis, teeth, rotationAngle, color, randomSeed } = options;\r\n\r\n    const angleRandomKs = 16;\r\n    // const angleRandomKs = 8;\r\n    const { random: randomConstant } = createRandomGenerator(`${randomSeed}`);\r\n    const { random } = createRandomGenerator(`${randomSeed}${Math.round(rotationAngle * angleRandomKs)}`);\r\n    const randomSym = () => 1 - 2 * random();\r\n\r\n    // g.fill(color.h, color.s, color.b, color.a);\r\n    // g.stroke(0, 0, 0, 1);\r\n    // g.stroke(0, 0, 0, color.a);\r\n    // g.stroke(0, 0, 0, 0);\r\n    // g.circle(x, y, radiusOuter * 2);\r\n    // g.circle(x, y, radius * 2);\r\n\r\n    g.stroke(color.h, color.s, color.b, color.a);\r\n    g.noFill();\r\n\r\n    // g.circle(x, y, radiusOuter * 2);\r\n\r\n    const toothAngle = g.TWO_PI / teeth;\r\n    const radI = radiusInner;\r\n    const radO = radiusOuter;\r\n    let jitterSize = 2.5;\r\n    const angle0 = rotationAngle;\r\n    const angle1 = angle0 + Math.PI * 2 * randomConstant();\r\n\r\n    jitterSize = radiusOuter * 0.1;\r\n    for (let j = 0; j < 4; j++) {\r\n\r\n        g.noStroke();\r\n        g.fill(color.h, color.s, color.b * 0.25, 0.4);\r\n        // g.fill(color.h, color.s, color.b, 0.25);\r\n        // g.fill(0, 0, 0);\r\n        g.curveTightness(0.9);\r\n        g.beginShape();\r\n        for (let i = 0; i <= teeth; i++) {\r\n            // g.curveVertex(x + diaI * g.cos((i + 0) * toothAngle), y + diaI * g.sin((i + 0) * toothAngle));\r\n            if (i !== 0) {\r\n                g.curveVertex(x + radI * g.cos((i + 0.2) * toothAngle + angle0) + jitterSize * randomSym(), y + radI * g.sin((i + 0.2) * toothAngle + angle0) + jitterSize * randomSym());\r\n            }\r\n\r\n            g.curveVertex(x + radO * g.cos((i + 0.3) * toothAngle + angle0) + jitterSize * randomSym(), y + radO * g.sin((i + 0.3) * toothAngle + angle0) + jitterSize * randomSym());\r\n            g.curveVertex(x + radO * g.cos((i + 0.7) * toothAngle + angle0) + jitterSize * randomSym(), y + radO * g.sin((i + 0.7) * toothAngle + angle0) + jitterSize * randomSym());\r\n            g.curveVertex(x + radI * g.cos((i + 0.8) * toothAngle + angle0) + jitterSize * randomSym(), y + radI * g.sin((i + 0.8) * toothAngle + angle0) + jitterSize * randomSym());\r\n            // g.curveVertex(x + diaI * g.cos((i + 1) * toothAngle), y + diaI * g.sin((i + 1) * toothAngle));\r\n            // g.arc(x, y, diaI, diaI, (i + 0) * toothAngle, (i + 0.5) * toothAngle);\r\n            // g.arc(x, y, diaO, diaO, (i + 0.5) * toothAngle, (i + 1) * toothAngle);\r\n        }\r\n        g.endShape();\r\n    }\r\n\r\n    jitterSize = 2.5;\r\n    g.noFill();\r\n    g.stroke(color.h, color.s, color.b, color.a);\r\n\r\n    // Draw face\r\n    const drawFace = randomConstant() > 0.5;\r\n    const faceType = random() > 0.5 ? `happy` : `creepy`;\r\n    if (drawFace) {\r\n        const radSmile = 0.5 * radI;\r\n        for (let j = 0; j < 4; j++) {\r\n\r\n            // Smile\r\n            if (faceType === `creepy`) {\r\n                jitterSize = 12;\r\n            }\r\n            g.noFill();\r\n            g.curveTightness(0.9);\r\n            g.beginShape();\r\n            for (let i = 0; i <= teeth / 3; i++) {\r\n                g.curveVertex(x + radSmile * g.cos((i + 0.2) * toothAngle + angle1) + jitterSize * randomSym(), y + radSmile * g.sin((i + 0.2) * toothAngle + angle1) + jitterSize * randomSym());\r\n            }\r\n            g.endShape();\r\n\r\n            // jitterSize = 2.5;\r\n\r\n            // Left Eye\r\n            for (let e = 0; e <= 1; e++) {\r\n                const r = e === 0 ? 1.1 : 1.6;\r\n                const ex = radSmile * Math.cos(r * Math.PI + angle1);\r\n                const ey = radSmile * Math.sin(r * Math.PI + angle1);\r\n                g.fill(0, 0, 0);\r\n                g.beginShape();\r\n                for (let i = 0; i <= teeth + 2; i++) {\r\n                    g.curveVertex(ex + x + radiusAxis * g.cos((i + 0.3) * toothAngle + angle1) + jitterSize * randomSym(), ey + y + radiusAxis * g.sin((i + 0.3) * toothAngle + angle1) + jitterSize * randomSym());\r\n                }\r\n                g.endShape();\r\n            }\r\n        }\r\n    }\r\n\r\n    jitterSize = 2.5;\r\n    for (let j = 0; j < 4; j++) {\r\n\r\n        g.noFill();\r\n        // g.fill(0, 0, 0, 0.1);\r\n        // g.fill(color.h, color.s, color.b, 0.05);\r\n        g.curveTightness(0.9);\r\n        g.beginShape();\r\n        for (let i = 0; i <= teeth; i++) {\r\n            // g.curveVertex(x + diaI * g.cos((i + 0) * toothAngle), y + diaI * g.sin((i + 0) * toothAngle));\r\n            if (i !== 0) {\r\n                g.curveVertex(x + radI * g.cos((i + 0.2) * toothAngle + angle0) + jitterSize * randomSym(), y + radI * g.sin((i + 0.2) * toothAngle + angle0) + jitterSize * randomSym());\r\n            }\r\n\r\n            g.curveVertex(x + radO * g.cos((i + 0.3) * toothAngle + angle0) + jitterSize * randomSym(), y + radO * g.sin((i + 0.3) * toothAngle + angle0) + jitterSize * randomSym());\r\n            g.curveVertex(x + radO * g.cos((i + 0.7) * toothAngle + angle0) + jitterSize * randomSym(), y + radO * g.sin((i + 0.7) * toothAngle + angle0) + jitterSize * randomSym());\r\n            g.curveVertex(x + radI * g.cos((i + 0.8) * toothAngle + angle0) + jitterSize * randomSym(), y + radI * g.sin((i + 0.8) * toothAngle + angle0) + jitterSize * randomSym());\r\n            // g.curveVertex(x + diaI * g.cos((i + 1) * toothAngle), y + diaI * g.sin((i + 1) * toothAngle));\r\n            // g.arc(x, y, diaI, diaI, (i + 0) * toothAngle, (i + 0.5) * toothAngle);\r\n            // g.arc(x, y, diaO, diaO, (i + 0.5) * toothAngle, (i + 1) * toothAngle);\r\n        }\r\n        g.endShape();\r\n\r\n        // Inner circle\r\n        g.fill(0, 0, 0);\r\n        g.beginShape();\r\n        for (let i = 0; i <= teeth + 2; i++) {\r\n            g.curveVertex(x + radiusAxis * g.cos((i + 0.3) * toothAngle + angle0) + jitterSize * randomSym(), y + radiusAxis * g.sin((i + 0.3) * toothAngle + angle0) + jitterSize * randomSym());\r\n        }\r\n        g.endShape();\r\n    }\r\n\r\n};\r\n\r\nexport const art_gears = {\r\n    key: `art-gears`,\r\n    title: `Gears`,\r\n    description: `Are the gears of conflict twisting our perceptions of others?`,\r\n    artist: `Rick Love`,\r\n    getTokenDescription: (tokenId: string) => {\r\n        return null;\r\n    },\r\n    renderArt: (hostElement: HTMLElement, hash = `This is my hash!`) => {\r\n        const { random: randomMain } = createRandomGenerator(hash);\r\n\r\n        let tick = 0;\r\n        // const speed = 1 / (200 - 100 * randomMain());\r\n        const speed = 1 / (100 - 70 * randomMain());\r\n        // const sat = 65 - 10 * Math.random();\r\n        const sat = 100;\r\n        const brightness = 60 - 20 * Math.random();\r\n\r\n        const canvasSize = 600;\r\n        const halfSize = canvasSize * 0.5;\r\n        const minGearRadius = canvasSize / 16;\r\n        const maxGearRadius = canvasSize / 3;\r\n        const minGearCount = 3;\r\n        const maxGearCount = 8;\r\n        const gearCount = Math.floor(minGearCount + (maxGearCount - minGearCount) * randomMain());\r\n\r\n        let lastGear = {\r\n            position: { x: canvasSize * randomMain(), y: canvasSize * randomMain() },\r\n            radius: minGearRadius,\r\n            // position: { x: canvasSize * randomMain(), y: canvasSize * randomMain() },\r\n            // size: minGearSize + (maxGearSize - minGearSize) * randomMain(),\r\n            randomSeed: `${randomMain()}`,\r\n            color: { h: 360 * randomMain(), s: 50, b: 50, a: 0.5 },\r\n        };\r\n        const gears = [...new Array(gearCount)].map(() => {\r\n\r\n            const targetRadius = minGearRadius + (maxGearRadius - minGearRadius) * randomMain();\r\n            const targetDistance = lastGear.radius + targetRadius;\r\n            const lastPos = lastGear.position;\r\n\r\n            // Try to bring back to center\r\n            const angleQuandrant = (lastPos.x > halfSize && lastPos.y > halfSize) ? (Math.PI * 1)\r\n                : (lastPos.x < halfSize && lastPos.y > halfSize) ? (Math.PI * 1.5)\r\n                    : (lastPos.x > halfSize && lastPos.y < halfSize) ? (Math.PI * 0.5)\r\n                        : 0;\r\n            // console.log(`angleQuandrant`, { angleQuandrant, lastPos, halfSize });\r\n            const targetAngle = Math.PI / 2 * randomMain() + angleQuandrant;\r\n\r\n            const posRaw = {\r\n                x: lastPos.x + targetDistance * Math.cos(targetAngle),\r\n                y: lastPos.y + targetDistance * Math.sin(targetAngle),\r\n            };\r\n            const pos = posRaw;\r\n            // const pos = {\r\n            //     x: 0.8 * posRaw.x + 0.2 * halfSize,\r\n            //     y: 0.8 * posRaw.y + 0.2 * halfSize,\r\n            // };\r\n\r\n            const xDelta = pos.x - lastPos.x;\r\n            const yDelta = pos.y - lastPos.y;\r\n            const actualRadius = Math.sqrt(xDelta * xDelta + yDelta * yDelta) - lastGear.radius;\r\n\r\n            // eslint-disable-next-line no-return-assign\r\n            return lastGear = {\r\n                position: pos,\r\n                radius: actualRadius,\r\n                randomSeed: `${randomMain()}`,\r\n                color: { h: 360 * randomMain(), s: sat, b: brightness, a: 0.5 },\r\n            };\r\n        });\r\n\r\n\r\n        return new p5((s: p5) => {\r\n            s.setup = () => {\r\n                s.createCanvas(canvasSize, canvasSize);\r\n            };\r\n            s.draw = () => {\r\n                s.background(0);\r\n                // s.background(10, 10, 10);\r\n                const g = s;\r\n                // const g = s.createGraphics(canvasSize * 2, canvasSize * 2);\r\n                // g.translate(canvasSize, canvasSize);\r\n                // g.scale(0.25);\r\n\r\n                for (const [i, gear] of gears.entries()) {\r\n                    const direction = i % 2 === 0 ? 1 : -1;\r\n                    const teethDepth = 5;\r\n                    const teeth = Math.ceil(gear.radius * Math.PI * 2 / (4 * teethDepth));\r\n                    const teethPassed = tick * speed * Math.pow(1.25, i + 1);\r\n                    const rotationAngle = s.TWO_PI * teethPassed / teeth;\r\n\r\n                    drawGear(g, {\r\n                        position: gear.position,\r\n                        // radiusInner: gear.size * 0.93,\r\n                        // radiusOuter: gear.size * 1.07,\r\n                        radiusInner: gear.radius - teethDepth,\r\n                        radiusOuter: gear.radius + teethDepth,\r\n                        // radiusAxis: gear.radius * 0.15,\r\n                        radiusAxis: gear.radius * 0.1,\r\n                        // radiusAxis: teethDepth,\r\n                        teeth,\r\n                        color: gear.color,\r\n                        rotationAngle: direction * rotationAngle,\r\n                        randomSeed: gear.randomSeed,\r\n                    });\r\n\r\n                    // Rotate slightly\r\n                    g.translate(gear.position.x, gear.position.y);\r\n                    g.rotate(s.TWO_PI * teethPassed / (teeth * 4));\r\n                    g.translate(-gear.position.x, -gear.position.y);\r\n                }\r\n                // s.image(g, 0, 0, canvasSize, canvasSize);\r\n\r\n\r\n                // for (let i = 0; i < 10; i++) {\r\n                //     const color = s.color((cr * i) % 255, (cg * i) % 255, (cb * i) % 255, ca);\r\n                //     s.noFill();\r\n                //     s.stroke(color);\r\n                //     for (let j = 0; j < 36; j++) {\r\n                //         s.circle(200 - a / 2 + j % a, 200 - b / 2 + j % b, 270 - (i * 5) % c);\r\n                //     }\r\n                //     s.translate(200, 200);\r\n                //     // s.rotate((a + b + c + tick * 0.001) % 2);\r\n                //     s.rotate((a + b + c + tick * 0.001));\r\n                //     s.translate(-200, -200);\r\n                //     tick++;\r\n                // }\r\n\r\n                tick++;\r\n            };\r\n        }, hostElement);\r\n    },\r\n};\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { C } from 'controls-react';\r\nimport { useDebounce } from 'utils-react/hooks';\r\nimport { theme } from 'themes/theme';\r\nimport { art_circles } from './artwork/circles';\r\nimport { art_layersOfTheOnionsSoul } from './artwork/layers-of-the-onions-soul';\r\nimport { art_121 } from './artwork/art-121';\r\nimport { P5Viewer } from './p5-viewer';\r\nimport { art_puzzle01 } from './artwork/puzzle/art-puzzle-01';\r\nimport { art_gears } from './artwork/gears';\r\n\r\nexport const ArtGallery = (props: {}) => {\r\n    const artItems = [\r\n        art_gears,\r\n        art_puzzle01,\r\n        art_121,\r\n        art_circles,\r\n        art_layersOfTheOnionsSoul,\r\n    ];\r\n\r\n    const art = useRef(artItems[0]);\r\n    const [showNavigation, setShowNavigation] = useState(true);\r\n    const [tokenId, setTokenId] = useState(`0`);\r\n\r\n    type ArtRender = {\r\n        kind: 'p5';\r\n        renderArt: (hostElement: HTMLDivElement) => { remove: () => void };\r\n    } | {\r\n        kind: 'react';\r\n        ArtComponent: () => JSX.Element;\r\n    };\r\n    const [artRenderer, setArtRenderer] = useState({\r\n        kind: `p5`,\r\n        renderArt: () => { return { remove: () => { } }; },\r\n    } as ArtRender);\r\n    const [tokenDescription, setTokenDescription] = useState(null as null | string);\r\n\r\n    const { debounce } = useDebounce(50);\r\n\r\n    useEffect(() => {\r\n        const queryParts = document.location.search.substr(1).split(`&`);\r\n        const artKey = queryParts.find(x => x.startsWith(`key`))?.split(`=`)[1];\r\n        if (!artKey) { changeTokenId(`0`); return; }\r\n        const artworkItem = artItems.find(x => x.key === artKey);\r\n        if (!artworkItem) { changeTokenId(`0`); return; }\r\n\r\n        art.current = artworkItem;\r\n        const newTokenId = queryParts.find(x => x.startsWith(`tokenId`))?.split(`=`)[1];\r\n\r\n        setShowNavigation(false);\r\n        changeTokenId(`${newTokenId || tokenId}`);\r\n    }, [document.location.search]);\r\n\r\n    const changeArt = (value: typeof artItems[0]) => {\r\n        art.current = value;\r\n        changeTokenId(tokenId);\r\n    };\r\n\r\n    const changeTokenId = (value: string) => {\r\n        setTokenId(value);\r\n\r\n        debounce(() => {\r\n            setArtRenderer({\r\n                kind: `p5`,\r\n                renderArt: (hostElement) => art.current.renderArt(hostElement, value),\r\n            });\r\n            setTokenDescription(art.current.getTokenDescription(value));\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <C.View_Panel>\r\n                {showNavigation && (\r\n                    <C.View_Form>\r\n                        {artItems.map(x => (\r\n                            <React.Fragment key={x.title}>\r\n                                <div style={{ paddingBottom: 4 }}>\r\n                                    <C.Button_FormAction onPress={() => changeArt(x)}>{x.title}</C.Button_FormAction>\r\n                                </div>\r\n                            </React.Fragment>\r\n                        ))}\r\n                        <C.View_FieldRow>\r\n                            <C.Text_FormTitle>Enter a preview tokenId:</C.Text_FormTitle>\r\n                            <C.Input_Text value={tokenId} onChange={changeTokenId} />\r\n                        </C.View_FieldRow>\r\n                    </C.View_Form>\r\n                )}\r\n\r\n\r\n                <C.Text_FormTitle style={{ ...theme.text_formTitle, whiteSpace: `pre-wrap` }}>{art.current.title}</C.Text_FormTitle>\r\n                <C.Text_FormTitle style={{ ...theme.text_formTitle, whiteSpace: `pre-wrap` }}>{art.current.artist}</C.Text_FormTitle>\r\n                {artRenderer.kind === `p5` && (\r\n                    <P5Viewer renderArt={artRenderer.renderArt} />\r\n                )}\r\n                {artRenderer.kind === `react` && (\r\n                    <artRenderer.ArtComponent />\r\n                )}\r\n                {tokenDescription && (<C.Text_FormTitle style={{ ...theme.text_formTitle, background: `#EEEEEE`, padding: 8, whiteSpace: `pre-wrap` }}>{tokenDescription}</C.Text_FormTitle>)}\r\n                <C.Text_FormTitle style={{ ...theme.text_formTitle, whiteSpace: `pre-wrap` }}>{art.current.description}</C.Text_FormTitle>\r\n            </C.View_Panel>\r\n            {!showNavigation && (\r\n                <div style={{ padding: 16, fontSize: 16 }}>\r\n                    <a href='/art'>Other Art by Rick Love</a>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","var $ = require('../internals/export');\n\nvar $hypot = Math.hypot;\nvar abs = Math.abs;\nvar sqrt = Math.sqrt;\n\n// Chrome 77 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=9546\nvar BUGGY = !!$hypot && $hypot(Infinity, NaN) !== Infinity;\n\n// `Math.hypot` method\n// https://tc39.es/ecma262/#sec-math.hypot\n$({ target: 'Math', stat: true, forced: BUGGY }, {\n  hypot: function hypot(value1, value2) { // eslint-disable-line no-unused-vars\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * sqrt(sum);\n  }\n});\n"],"sourceRoot":""}