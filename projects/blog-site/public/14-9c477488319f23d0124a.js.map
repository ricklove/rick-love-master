{"version":3,"sources":["webpack:///D:/Projects/rick-love-master/code/games/dork/components/count-down-timer.tsx","webpack:///D:/Projects/rick-love-master/code/games/dork/art.ts","webpack:///D:/Projects/rick-love-master/code/games/dork/components/ascii-art-viewer.tsx","webpack:///D:/Projects/rick-love-master/code/games/dork/components/achievement.tsx","webpack:///D:/Projects/rick-love-master/code/games/dork/core.tsx","webpack:///D:/Projects/rick-love-master/code/games/dork/scenes/01-mailbox.tsx","webpack:///D:/Projects/rick-love-master/code/games/dork/main.tsx","webpack:///D:/Projects/rick-love-master/code/games/console-simulator/game-dork.ts","webpack:///D:/Projects/rick-love-master/code/games/console-simulator/game-zork.ts","webpack:///D:/Projects/rick-love-master/code/games/console-simulator/commands.ts"],"names":["CountDownTimer","props","useState","time","setTime","useEffect","timeStart","Date","now","id","setInterval","timeRemaining","s","clearInterval","onTimeElapsed","timeStr","toISOString","slice","style","display","backgroundColor","borderRadius","padding","color","messageAfterTime","triggerTimedMessage","onMessage","immediateResult","getResultAfterTime","a","colorActual","Promise","resolve","output","Component","addDivider","art","LINEWIDTH","rain","strength","isIncreasing","artMan","autoAnimate","fps","replacements","split","map","x","find","replace","ratio","artYouDead","trim","length","animate","draw","unshift","Array","Math","random","splice","chars","i","join","AsciiArtViewer","artwork","setArt","animateRaw","t","v","RegExp","timeStartMs","fontFamily","whiteSpace","AchievementViewer","className","flex","fontSize","name","createGameState","onMessageInit","_achievements","getAchievements","addAchievement","includes","setTimeout","push","gameOver","triggerGameOver","lastMessage","delay","isGameOver","inventory","allGameObjectTitles","allWords","commonWords","filter","ignoreWords","getTitleWithA","title","l","toLowerCase","createGameObjectTitle","g","titleWithA","matches","lower","achievementGameObject","description","utils","randomItem","randomIndex","getValuesAsItems","moveItem","achievements","loadAchievements","value","triggerQuit","destroyedObjects","allGameObjects","removeFromInventory","item","indexOf","createGameObject","options","isMatch","target","components","createScene_01mailbox","gameState","mailObjects","litterBox","towelHooks","squishyToy","strandLights","squirrel","execute","command","tickingPackage","limeCoconut","yardObjects","snake","mailbox","isOpen","package","dog","yard","contents","pickupTruck","hasCrashed","isDelivering","deliveryCount","placeRandomItemInMailbox","p","deliverMail","input","closeMailbox","introduction","wasOpen","f","getLookItems","getFullYear","createDorkGame","badCommandInsults","scenes","scene","loadScene","inputRaw","commandRaw","onMessageRaw","Error","sceneItems","result","start","onQuit","onQuitNot","setValue","getValue","loadGameStorage","localStorage","getItem","JSON","parse","saveGameStorage","setItem","stringify","dorkFile","session","path","content","randomBinary","dorkGame","onMessageGame","message","conQuery","prompt","respond","query","startsWith","gameInput","undefined","zork","mainZork","createConsoleCommands","initialMachineName","sessions","user","machineName","admin","state","parent","directory","activeAction","files","shouldResolveAction","enterSession","standardPrompt","processAction","action","onCommand","commandLower","iSpace","raw","quit","dirFiles","file"],"mappings":"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","file":"14-9c477488319f23d0124a.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { GameAction } from '../types';\r\n\r\nexport const CountDownTimer = (props: { time: number, color?: string, messageAfterTime?: string, onTimeElapsed: () => void }) => {\r\n    const [time, setTime] = useState(10);\r\n    useEffect(() => {\r\n        const timeStart = Date.now();\r\n        const id = setInterval(() => {\r\n            const timeRemaining = ((props.time * 1000) - (Date.now() - timeStart)) / 1000;\r\n            setTime(s => timeRemaining);\r\n            if (timeRemaining <= 0) {\r\n                setTime(s => 0);\r\n                clearInterval(id);\r\n                props.onTimeElapsed();\r\n            }\r\n        }, 10);\r\n        return () => clearInterval(id);\r\n    },\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        []);\r\n\r\n    const timeStr = new Date(time * 1000).toISOString().slice(14, 23);\r\n    return (\r\n        <>\r\n            <div>\r\n                <div style={{ display: `inline-block`, backgroundColor: `#555555`, borderRadius: 4, padding: 8 }}>\r\n                    <div style={{ display: `inline-block`, backgroundColor: `#111111`, padding: 4 }}>\r\n                        <span style={{ color: props.color ?? `#FF0000` }}>{time > 0 ? timeStr : props.messageAfterTime ?? timeStr}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport const triggerTimedMessage = async (\r\n    onMessage: (message: GameAction) => void,\r\n    immediateResult: GameAction,\r\n    time: number, color: 'danger' | 'warning' | 'normal',\r\n    getResultAfterTime: () => Promise<GameAction>,\r\n): Promise<GameAction> => {\r\n\r\n    const colorActual = color === `danger` ? `#FF0000`\r\n        : (color === `warning` ? `#FFFF00`\r\n            : `#7777FF`);\r\n\r\n    return await new Promise(resolve => {\r\n        const Component = () => (<CountDownTimer time={time} color={colorActual} onTimeElapsed={async () => {\r\n            resolve({ output: ``, ...await getResultAfterTime(), addDivider: true });\r\n        }} />);\r\n        onMessage({\r\n            output: ``,\r\n            ...immediateResult,\r\n            Component,\r\n        });\r\n    });\r\n};\r\n","export type Artwork = {\r\n    art: string;\r\n    animate?: { fps: number, draw: (timeMs: number) => string };\r\n    autoAnimate?: { fps: number, replacements: { find: string, replace: string, ratio: number }[] };\r\n};\r\n\r\nexport const artMan = {\r\n    art: `\r\n|--------------------------------------|\r\n|                       @@@@@@@        |\r\n|                     @@@@@@@@@@@@     |\r\n|------,-|          @@@@@@@@@@@@@@@    |\r\n|    ,','|           |C>   @@ )@@@@@   |\r\n|--,','  |          /    @@ ,'@@@@@@   |\r\n|  ||##  |         (,    @@   @@@@@    |\r\n|  ||##  |          O'  @@@@@@@'''|    |\r\n|  ||##  |______     @@@@@@@     _|    |\r\n|  ||##  |     ,|     @@@@@|____/ |    |\r\n|  ||# ,'    ,' |         _/_____/ |   |\r\n|  ||,'    ,'   |        /          |  |\r\n|__|/    ,'  *  |       |         |  | |\r\n|______,'  *   ,',_    /           | | |\r\n|      | *   ,',' FFF--|      |    | | |\r\n|      |   ,','    ____|_____/    /  | |\r\n|      | ,','  __/ |             /   | |\r\n|______|','   FFF_/-------------/    ; |\r\n|       |===========,'  '=||=====||=/  |\r\n|--------------------------------------|\r\n`, autoAnimate: {\r\n        fps: 5,\r\n        replacements: [\r\n            // Screen\r\n            ...`,.;:'\"[]{}()<>!@~&|`.split(``).map(x => ({ find: `#`, replace: x, ratio: 0.01 })),\r\n            { find: `#`, replace: ` `, ratio: 1 },\r\n            // Activity Lights\r\n            { find: `\\\\*`, replace: `.`, ratio: 0.5 },\r\n            { find: `\\\\*`, replace: ` `, ratio: 1 },\r\n            // Fingers\r\n            { find: `F`, replace: `|`, ratio: 0.3 },\r\n            { find: `F`, replace: `/`, ratio: 1 },\r\n\r\n            // Eyes\r\n            { find: `C`, replace: `-`, ratio: 0.2 },\r\n            // Mouth\r\n            { find: `O`, replace: `>`, ratio: 0.2 },\r\n            { find: `O`, replace: `}`, ratio: 1 },\r\n\r\n            // Hair\r\n            // { find: `@`, replace: `/`, ratio: 0.01 },\r\n            // { find: `@`, replace: `|`, ratio: 1 },\r\n        ],\r\n    },\r\n};\r\n\r\n\r\nexport const artMap = `\r\n|--------------------------------------|\r\n|      ,_  . ._ _                      |\r\n|    , -|,'|~~       ;-'  _-'   ;_  ~  |\r\n|/-|'~'-'|~~|',  ,  /  /~|_|_~/   -~~-_|\r\n|~'~     '-,|'| ' ,|/'~         /  _ / |\r\n|~  |      ''|~|  _|    ,_ ,       /   |\r\n|   '|      /~    |_~||,,~ |      ,    |\r\n|     |  _-|        _ ~|| |_     /     |\r\n|.     | , ~_    '/      |_' | /|~     |\r\n|      ~_'       |       -,  |'/       |\r\n|       '|_,'|    | ,    /'     ~ ,.   |\r\n|         /  |_    ~|   /       , ~| ' |\r\n|        |    ,      | |'|/     |   |  |\r\n|        ,   ,/      | /         --/   |\r\n|         | ,'        '                |\r\n|         /,'                          |\r\n|         '| ~                         |\r\n|          ~'                          |\r\n|                                      |\r\n|--------------------------------------|\r\n`;\r\n\r\nexport const artYouDead = (() => {\r\n    const art = `\r\n|--------------------------------------|\r\n|^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^|\r\n|^^^^^^^.----------------.^^^^^^^^^^^^^|\r\n|^^^^^^^|  You have died |^^^^^^^^^^^^^|\r\n|^^^^^^^'----------------'^^^^^^^^^^^^^|\r\n|^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^|\r\n|^^^^^^^^^^^^__----__^^^^^^^^^^^^^^^^^^|\r\n|^^^^^^^^_--''******''--_^^^^^^^^^^^^^^|\r\n|^^^^^^^|****************|^^^^^^^^^^^^^|\r\n|^^^^^^^|****************|^^^^^_---_^^^|\r\n|^^^^^^^|****  DORK  ****|^^^^'^^|{)'^^|\r\n|^^^^^^^|****************|^^^^^^^|/|^^^|\r\n|^^^^^^^|****************|^^^^^^^^^|^^^|\r\n|_______|****************|_________|___|\r\n|.......|****************|......../|...|\r\n|.......|****************|.............|\r\n|.......|****************|.............|\r\n|.......|----------------|.............|\r\n|......................................|\r\n|--------------------------------------|\r\n`;\r\n\r\n    const RAINDROP = `'`;\r\n    const LINEWIDTH = art.trim().split(`\\n`)[0].length + 1;\r\n\r\n    const rain = [] as string[];\r\n    let strength = 0.01;\r\n    let isIncreasing = true;\r\n\r\n    return {\r\n        art,\r\n        animate: {\r\n            fps: 5,\r\n            draw: () => {\r\n\r\n                if (isIncreasing) {\r\n                    strength *= 1.05;\r\n                } else {\r\n                    strength /= 1.1;\r\n                }\r\n\r\n                if (strength < 0.01) {\r\n                    isIncreasing = true;\r\n                } else if (strength > 0.5) {\r\n                    isIncreasing = false;\r\n                }\r\n\r\n                rain.unshift(...[...new Array(LINEWIDTH)].map(x => Math.random() < strength ? RAINDROP : ` `));\r\n                if (rain.length > art.length * 10) { rain.splice(art.length); }\r\n\r\n                const chars = artYouDead.art.split(``);\r\n\r\n                for (let i = 0; i < chars.length; i++) {\r\n                    if (chars[i] === `^`) {\r\n                        chars[i] = rain[i] === RAINDROP ? `'` : ` `;\r\n                    }\r\n                    if (chars[i] === `_`) {\r\n                        chars[i] = rain[i] === RAINDROP ? `v` : `_`;\r\n                    }\r\n                }\r\n\r\n                return chars.join(``);\r\n            },\r\n        },\r\n    };\r\n})();\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Artwork } from '../art';\r\n\r\nexport const AsciiArtViewer = (props: { artwork: Artwork }) => {\r\n    const [art, setArt] = useState(props.artwork.art);\r\n\r\n    const { animate: animateRaw, autoAnimate } = props.artwork;\r\n\r\n    useEffect(() => {\r\n        const animate = animateRaw ?? (autoAnimate ? {\r\n            fps: autoAnimate.fps ?? 100,\r\n            draw: (t: number): string => {\r\n\r\n                let v = props.artwork.art;\r\n                for (const a of autoAnimate.replacements) {\r\n                    v = v.replace(new RegExp(a.find, `g`), (x) => Math.random() < a.ratio ? a.replace : x);\r\n                }\r\n\r\n                return v;\r\n            },\r\n        } : null);\r\n\r\n        if (!animate) { return; }\r\n\r\n        const timeStartMs = Date.now();\r\n        const draw = () => {\r\n            setArt(animate.draw(Date.now() - timeStartMs));\r\n        };\r\n        const id = setInterval(draw, 1000 / animate.fps);\r\n        draw();\r\n\r\n        // eslint-disable-next-line consistent-return\r\n        return () => clearInterval(id);\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <span style={{ fontFamily: `monospace`, whiteSpace: `pre` }} >{art}</span>\r\n        </div>\r\n    );\r\n};\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport './achievement.css';\r\nimport React from 'react';\r\n\r\nexport const AchievementViewer = (props: { name: string }) => {\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className='achievement' style={{ display: `flex` }}>\r\n                <div style={{ flex: 1 }} />\r\n                <div className='achievement-label' style={{ fontFamily: `monospace`, color: `#CCCC style={{flex:1}}CC`, fontSize: `0.8rem` }} >New Achievement! </div>\r\n                <div className='achievement-name' style={{ fontFamily: `monospace` }} >{props.name}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","/* eslint-disable unicorn/consistent-function-scoping */\r\nimport React from 'react';\r\nimport { GameItem, GameAction, GameItemTitle } from './types';\r\nimport { randomItem, randomIndex, getValuesAsItems, moveItem, delay } from './utils';\r\nimport { triggerTimedMessage, CountDownTimer } from './components/count-down-timer';\r\nimport { artYouDead } from './art';\r\nimport { AsciiArtViewer } from './components/ascii-art-viewer';\r\nimport { AchievementViewer } from './components/achievement';\r\n\r\nexport const createGameState = (onMessageInit: (message: GameAction) => void) => {\r\n    const _achievements = [] as string[];\r\n    const loadAchievements = (value: string[]) => { _achievements.splice(0, _achievements.length, ...value); };\r\n    const getAchievements = () => { return _achievements; };\r\n    const addAchievement = (name: string) => {\r\n        if (!_achievements.includes(name)) {\r\n            setTimeout(() => {\r\n                onMessageInit({ output: ``, Component: () => (<AchievementViewer name={name} />) });\r\n            }, 1000);\r\n            _achievements.push(name);\r\n        }\r\n    };\r\n\r\n    let gameOver = false;\r\n    const triggerGameOver = async (onMessage: (message: GameAction) => void, lastMessage: string): Promise<GameAction> => {\r\n\r\n        onMessage({ output: lastMessage });\r\n        gameOver = true;\r\n        addAchievement(`‚ö∞Ô∏è You Dead!`);\r\n\r\n        await delay(3000);\r\n        return {\r\n            isGameOver: true,\r\n            output: ``,\r\n            Component: () => (<AsciiArtViewer artwork={artYouDead} />),\r\n        };\r\n    };\r\n    const triggerQuit = (): GameAction => {\r\n        gameOver = true;\r\n        addAchievement(`üî• You're Fired!`);\r\n        return { output: `****  You can't quit you're fired!  ****`, isGameOver: true };\r\n    };\r\n\r\n    const inventory = [] as GameItem[];\r\n    const destroyedObjects = [] as GameItem[];\r\n    const allGameObjectTitles = [] as GameItemTitle[];\r\n    const allWords = [] as string[];\r\n    const commonWords = `the a an at in of by`.split(` `).filter(x => x);\r\n    const ignoreWords = [...commonWords] as string[];\r\n\r\n    const removeFromInventory = (item: GameItem) => {\r\n        const i = inventory.indexOf(item);\r\n        if (i < 0) { return false; }\r\n        inventory.splice(i, 1);\r\n        return true;\r\n    };\r\n\r\n    const getTitleWithA = (title: string): string => {\r\n        const l = title.toLowerCase()[0];\r\n        if (l === `a`\r\n            || l === `e`\r\n            || l === `i`\r\n            || l === `o`\r\n            || l === `u`\r\n        ) { return `an ${title}`; }\r\n\r\n        return `a ${title}`;\r\n    };\r\n\r\n    const createGameObject = (title: string, description: string, options: Partial<GameItem>): GameItem => {\r\n        const g = { title, titleWithA: getTitleWithA(title), description, matches: title.toLowerCase().split(` `), lower: title.toLowerCase(), ...options };\r\n        allGameObjectTitles.push(g);\r\n\r\n        // Ignore duplicate words\r\n        ignoreWords.push(...g.matches.filter(x => allWords.includes(x)));\r\n        allWords.push(...g.matches);\r\n\r\n        return g;\r\n    };\r\n\r\n    const createGameObjectTitle = (title: string): GameItemTitle => {\r\n        const g = { title, titleWithA: getTitleWithA(title), matches: title.toLowerCase().split(` `), lower: title.toLowerCase() };\r\n        allGameObjectTitles.push(g);\r\n\r\n        // Ignore duplicate words\r\n        ignoreWords.push(...g.matches.filter(x => allWords.includes(x)));\r\n        allWords.push(...g.matches);\r\n\r\n        return g;\r\n    };\r\n\r\n\r\n    const isMatch = (item: GameItemTitle | null | undefined, target: string) => {\r\n        if (!target) { return false; }\r\n        const t = target.split(` `).map(x => x.trim()).filter(x => x).filter(x => !ignoreWords.includes(x));\r\n        return !!t.find(x => item?.matches.includes(x));\r\n    };\r\n\r\n    const achievementGameObject: GameItem = {\r\n        ...createGameObjectTitle(`Achievements`),\r\n        matches: [`achieve`, `ach`, `achievements`],\r\n        description: () => getAchievements().join(`\\n`),\r\n        lower: ``,\r\n    };\r\n    inventory.push(achievementGameObject);\r\n\r\n    const utils = { randomItem, randomIndex, getValuesAsItems, moveItem };\r\n    const components = { triggerTimedMessage, CountDownTimer };\r\n\r\n    const gameState = {\r\n        achievements: {\r\n            loadAchievements,\r\n            getAchievements,\r\n            addAchievement,\r\n        },\r\n        isGameOver: () => gameOver,\r\n        triggerGameOver,\r\n        triggerQuit,\r\n        inventory,\r\n        destroyedObjects,\r\n        allGameObjects: allGameObjectTitles,\r\n        allWords,\r\n        commonWords,\r\n        ignoreWords,\r\n        removeFromInventory,\r\n        createGameObject,\r\n        createGameObjectTitle,\r\n        isMatch,\r\n        utils,\r\n        components,\r\n    };\r\n\r\n    return gameState;\r\n};\r\n\r\nexport type GameState = ReturnType<typeof createGameState>;\r\n","/* eslint-disable no-return-await */\r\n/* eslint-disable no-plusplus */\r\n/* eslint-disable no-use-before-define */\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\nimport React from 'react';\r\nimport { GameScene, GameItem, GameAction, GameInput } from '../types';\r\nimport { GameState } from '../core';\r\n\r\nexport const createScene_01mailbox = (gameState: GameState) => {\r\n    const {\r\n        triggerGameOver,\r\n        inventory,\r\n        removeFromInventory,\r\n        createGameObject,\r\n        createGameObjectTitle,\r\n        isMatch,\r\n        utils,\r\n        components,\r\n    } = gameState;\r\n\r\n    const { randomItem, randomIndex, getValuesAsItems, moveItem } = utils;\r\n    const { triggerTimedMessage, CountDownTimer } = components;\r\n\r\n    // These don't indicate state, just creation containers\r\n    const mailObjects = {\r\n        litterBox: createGameObject(`Self Cleaning Litter Box`, `Cause 18 years is great even if you have to deal with a little crap sometimes. Keep it clean and happy!`, {}),\r\n        towelHooks: createGameObject(`Set of Bathroom Towel Hooks`, `Stop dripping all over the floor!`, {}),\r\n        squishyToy: createGameObject(`Pink Flamingo Squishy Toy`, `It's head is tearing off. Maybe if can be sewn.`, {}),\r\n        strandLights: createGameObject(`Strand of Fairy Lights - 66ft`, `Make the room look cool. Girls only though!`, {}),\r\n        squirrel: createGameObject(`Squirrel Stuffed Animal with Nuts`, `It looks like you should be careful not to touch it's nuts!`, {\r\n            execute: async ({ command, target, onMessage }) => {\r\n                if (command === `touch` && target.includes(`nuts`)) {\r\n                    gameState.achievements.addAchievement(`üêøÔ∏è Don't Be Touchin My Nutz!`);\r\n\r\n                    return await triggerTimedMessage(onMessage, {\r\n                        output: randomItem([\r\n                            `The squirrel goes nuts and begins to chew off your arm.`,\r\n                            `The squirel had more than just nuts with him.`,\r\n                            `Despite the warnings, you decide to touch the squirrel's nuts anyway.`,\r\n                            `Everyone told you to keep your hands to yourself.`,\r\n                        ]),\r\n                    }, 5, `danger`, async () => await triggerGameOver(onMessage, `Don't be touchin my nutz!`));\r\n                }\r\n                return null;\r\n            },\r\n        }),\r\n        tickingPackage: createGameObject(`Ticking Package`, `Ummmm... it's ticking`, {\r\n            execute: async ({ command, onMessage }) => {\r\n                if (command === `open`) {\r\n                    gameState.achievements.addAchievement(`üí£ Your Head Explode!`);\r\n\r\n                    return await triggerGameOver(onMessage, randomItem([`You have Exploded!`, `You're head acksplod!`, `You no longer hear ticking... probably because your head is gone.`]));\r\n                }\r\n                return null;\r\n            },\r\n        }),\r\n        limeCoconut: createGameObject(`Lime & Coconut`, `It seems like I have heard about this before.`, {\r\n            execute: async ({ command, target, onMessage }) => {\r\n                if (command === `put` && target.includes(`lime`) && target.includes(`coco`)) {\r\n                    gameState.achievements.addAchievement(`ü•• Put the Lime in the Coconut!`);\r\n\r\n                    return await triggerGameOver(onMessage, `\r\n                    You put the lime in the coconut, you drank 'em bot' up\r\n                    Put the lime in the coconut, you drank 'em bot' up\r\n                    Put the lime in the coconut, you drank 'em bot'up\r\n                    Put the lime in the coconut, you call your doctor, woke 'I'm up\r\n                    Said \"doctor, ain't there nothing' I can take?\"\r\n                    I said, \"doctor, to relieve this belly ache\"\r\n                    I said \"doctor, ain't there nothin' I can take?'\r\n                    I said, \"doctor, to relieve this belly ache\"`);\r\n                }\r\n                return null;\r\n            },\r\n        }),\r\n    };\r\n\r\n    // These don't indicate state, just creation containers for self reference\r\n    const yardObjects = {\r\n        snake: createGameObject(`Snake`, `It's a brown snake. Let's keep it! I have a small aquarium in my room.`, {\r\n            execute: async ({ command, target }) => {\r\n                if (command === `put` && target.includes(`mailbox`)) {\r\n                    // if (!mailbox.isOpen) {\r\n                    //     return {\r\n                    //         output: `The mailbox is not open.`,\r\n                    //     };\r\n                    // }\r\n                    mailbox.isOpen = true;\r\n                    if (mailbox.package) {\r\n\r\n                        return {\r\n                            output: `The mailbox has something in it already.`,\r\n                        };\r\n                    }\r\n\r\n                    removeFromInventory(yardObjects.snake);\r\n                    mailbox.package = yardObjects.snake;\r\n                    return {\r\n                        output: `You put the snake in the mailbox. He looks at you with his sad little snake eyes...`,\r\n                    };\r\n                }\r\n                return null;\r\n            },\r\n        }),\r\n        dog: createGameObject(`Dog`, `It's a white dog. It was trying to bite you... not anymore...`, {\r\n            execute: async ({ command, target }) => {\r\n                // if (command === `put` && target.includes(`mailbox`)) {\r\n                //     // if (!mailbox.isOpen) {\r\n                //     //     return {\r\n                //     //         output: `The mailbox is not open.`,\r\n                //     //     };\r\n                //     // }\r\n                //     mailbox.isOpen = true;\r\n                //     if (mailbox.package) {\r\n\r\n                //         return {\r\n                //             output: `The mailbox has something in it already.`,\r\n                //         };\r\n                //     }\r\n\r\n                //     removeFromInventory(yardObjects.snake);\r\n                //     mailbox.package = yardObjects.snake;\r\n                //     return {\r\n                //         output: `You put the snake in the mailbox. He looks at you with his sad little snake eyes...`,\r\n                //     };\r\n                // }\r\n                return null;\r\n            },\r\n        }),\r\n    };\r\n\r\n    const yard = {\r\n        ...createGameObjectTitle(`Grass Yard`),\r\n        description: () => {\r\n            if (yard.contents.includes(yardObjects.snake)) {\r\n                return `This is a large yard. A snake is sunning itself on a rock in the grass.`;\r\n            }\r\n            if (yard.contents.includes(yardObjects.dog)) {\r\n                return `You look at the large yard and can't help but notice a small white dog that looks like it wants to rip your face off.`;\r\n            }\r\n            return `This is a large grass yard in front of a house. \r\n            Only the center of the yard is mowed and it looks like it might be in the shape of a heart.`;\r\n        },\r\n        contents: getValuesAsItems(yardObjects),\r\n    };\r\n\r\n    const pickupTruck = {\r\n        ...createGameObjectTitle(`Crashed Pickup Truck`),\r\n        description: () => `The crashed pickup truck is smoking. \r\n        The front end looks like it is hugging that tree. Clearly it is not familiar with social distancing.\r\n        As you get near, you wonder if the driver had his own personal accident when he wrecked.\r\n\r\n        In the bed of the truck are ${[\r\n                `some spent shotgun shells`,\r\n                `a few full trash bags`,\r\n                ...pickupTruck.contents.map(x => x.titleWithA)].join(`, `)}, and... ${randomItem([\r\n                    `a bunch of beer cans`,\r\n                    `some empty cigarette packages`,\r\n                    `an old tire`,\r\n                ])}.\r\n        `,\r\n        hasCrashed: false,\r\n        contents: getValuesAsItems(mailObjects),\r\n    };\r\n\r\n    const mailbox = {\r\n        ...createGameObjectTitle(`Mailbox`),\r\n        description: () => `There is ${mailbox.isOpen ? `an open` : `a small closed`} mailbox nearby. \r\n            ${mailbox.isOpen && mailbox.package ? `There is a ${mailbox.package.title} inside.` : ``}`,\r\n        isOpen: false,\r\n        isDelivering: false,\r\n        deliveryCount: 0,\r\n        package: null as GameItem | null,\r\n    };\r\n\r\n    const placeRandomItemInMailbox = () => {\r\n        let i = randomIndex(pickupTruck.contents.length);\r\n\r\n        if (mailbox.deliveryCount >= 1 && pickupTruck.contents.find(x => x === mailObjects.tickingPackage)) {\r\n            i = pickupTruck.contents.indexOf(mailObjects.tickingPackage);\r\n        }\r\n        mailbox.deliveryCount++;\r\n\r\n        const p = pickupTruck.contents[i];\r\n        pickupTruck.contents.splice(i, 1);\r\n        mailbox.package = p;\r\n        mailbox.isOpen = false;\r\n    };\r\n\r\n    // Testing\r\n    // inventory.push(...mailPackages);\r\n\r\n    // Setup Scene\r\n    placeRandomItemInMailbox();\r\n\r\n    const { tickingPackage } = mailObjects;\r\n    const { snake, dog } = yardObjects;\r\n\r\n    const deliverMail = async (input: GameInput): Promise<GameAction> => {\r\n        mailbox.isDelivering = false;\r\n\r\n        if (mailbox.package === snake) {\r\n\r\n            gameState.achievements.addAchievement(`üò° He's Got Angry Eyes`);\r\n            return await triggerGameOver(input.onMessage, `\r\n                You see ${randomItem([`a UPS truck`, `an Amazon truck`, `an ambulance`, `a cop car`, `the van from down by the river`, `the ice cream truck`])} drive up.\r\n                The driver waves at you while carrying a package to the mailbox.\r\n\r\n                As he opens the mailbox, your little pal jumps out and bites him in the face.\r\n                At first you think this is funny, but then the driver rips the snake off and throws him into the trees.\r\n\r\n                The driver looks up and sees you laughing.\r\n                You see a look of rage in his eyes as he gets back in, revs the engine, and speeds towards you...\r\n                `);\r\n        }\r\n\r\n        if (mailbox.package) {\r\n            const item = mailbox.package;\r\n            pickupTruck.contents.push(item);\r\n            mailbox.isOpen = true;\r\n\r\n            if (item === tickingPackage) {\r\n                mailbox.package = null;\r\n                gameState.destroyedObjects.push(tickingPackage);\r\n\r\n                pickupTruck.hasCrashed = true;\r\n                pickupTruck.contents.splice(pickupTruck.contents.indexOf(tickingPackage), 1);\r\n\r\n                gameState.achievements.addAchievement(`üè¥‚Äç‚ò†Ô∏è Take That, Porch Pirates!!`);\r\n                return {\r\n                    output: `\r\n                    You see a package-thief drive up in an old beat up pickup truck.\r\n                    He drives right up to the mailbox, grabs the package, and starts off.\r\n\r\n                    Immediately, you hear a loud pop and see colored smoke fill the cab.\r\n                    \r\n                    The truck swerves wildly and crashes into a large oak tree.\r\n\r\n                    After a minute, the driver jumps out, covered in glitter. \r\n                    \r\n                    He runs into the trees screaming about a horrible smell...\r\n                    `,\r\n                };\r\n            }\r\n\r\n            placeRandomItemInMailbox();\r\n\r\n            gameState.achievements.addAchievement(`üìÆ Return to Sender`);\r\n            return {\r\n                output: `\r\n                You see ${randomItem([`a UPS truck`, `an Amazon truck`, `the ice cream truck`])} drive up and a driver wearing a trench coat get out.\r\n                \r\n                He carries a package to the mail box, but when he opens it, he looks suprised.\r\n\r\n                He looks around suspiciously... and then puts the ${item.title} under his trenchcoat as he slips the new package into the mailbox.\r\n\r\n                He nervously looks around again, then rushes back to the truck and quickly drives off.`,\r\n            };\r\n        }\r\n\r\n        placeRandomItemInMailbox();\r\n        gameState.achievements.addAchievement(`üöö Same Day Delivery!`);\r\n        return {\r\n            output: `\r\n            You see ${randomItem([`a UPS truck`, `an Amazon truck`, `an ambulance`, `a cop car`, `the van from down by the river`, `the ice cream truck`])} drive up, and the driver puts a package in the mailbox.\r\n            He is wearing a ${randomItem([`football helmet`, `Santa hat`, `bow tie`, `hazmat suit`, `clown uniform`, `bearskin rug`])}.\r\n            As he drives away, he shouts, \"${randomItem([`Watch out for the monkeys!`, `Merry Christmas!`, `Ducks... ducks... ducks everywhere...`, `That squirrel is nuts!`])}\"`,\r\n        };\r\n    };\r\n\r\n    const closeMailbox = async (input: GameInput): Promise<GameAction> => {\r\n        if (mailbox.package === snake) {\r\n            if (mailbox.isDelivering) {\r\n                return { output: `You close the mailbox with your little friend inside...` };\r\n            }\r\n            mailbox.isDelivering = true;\r\n\r\n            return await triggerTimedMessage(input.onMessage, {\r\n                output: `\r\n                You close the mailbox with your little friend inside...\r\n                Deep down, you feel like you are making bad life choices...\r\n                We'll give you some time to think about it...`,\r\n            }, 20, `warning`, () => deliverMail(input));\r\n        }\r\n\r\n        if (pickupTruck.contents.length <= 0 || mailbox.package) {\r\n            return {\r\n                output: `You close the mailbox. ${mailbox.package ? `There is still something inside it though.` : `Thanks!`}`,\r\n            };\r\n        }\r\n\r\n        if (mailbox.isDelivering) {\r\n            return { output: `You close the mailbox.` };\r\n        }\r\n        mailbox.isDelivering = true;\r\n\r\n        gameState.achievements.addAchievement(`üì™ These Kids Keep Stealing My Mail!`);\r\n        return triggerTimedMessage(input.onMessage, { output: `You close the mailbox.` }, 10, `normal`, () => deliverMail(input));\r\n    };\r\n\r\n    const execute = async (input: GameInput): Promise<GameAction> => {\r\n        const { command, target, onMessage } = input;\r\n\r\n        if (command === `open` && target === `mailbox`) {\r\n            if (mailbox.isOpen) {\r\n\r\n                return {\r\n                    output: `Really? The mailbox is already open!`,\r\n                };\r\n            }\r\n\r\n            mailbox.isOpen = true;\r\n            gameState.achievements.addAchievement(`üì≠ You've Got Mail!`);\r\n            return {\r\n                output: mailbox.package ? `You see a ${mailbox.package.title} in the mailbox.` : `There is nothing in the mailbox.`,\r\n            };\r\n        }\r\n\r\n        if (command === `close` && target === `mailbox`) {\r\n            if (!mailbox.isOpen) {\r\n                return {\r\n                    output: `It's already closed.`,\r\n                };\r\n            }\r\n\r\n            mailbox.isOpen = false;\r\n            return await closeMailbox(input);\r\n        }\r\n\r\n        if (command === `take` && mailbox.package && isMatch(mailbox.package, target)) {\r\n            const p = mailbox.package;\r\n            inventory.push(p);\r\n            mailbox.package = null;\r\n            const wasOpen = mailbox.isOpen;\r\n            mailbox.isOpen = true;\r\n\r\n\r\n            if (p === tickingPackage) {\r\n                gameState.achievements.addAchievement(`üì¶ Umm... It's ticking`);\r\n\r\n                return {\r\n                    Component: () => (inventory.includes(tickingPackage) && <CountDownTimer time={180} color='#FF0000' onTimeElapsed={async () => {\r\n                        if (!inventory.includes(tickingPackage)) { return; }\r\n\r\n                        gameState.achievements.addAchievement(`‚è∞ Is it Bad that It's Ticking?`);\r\n                        onMessage(await triggerGameOver(onMessage, `You obviously need to watch more TV. A ticking package is generally bad news.`));\r\n                    }} /> || <span />),\r\n                    output: `${!wasOpen ? `You open the mailbox and` : `You`} take the ${p.title}. As you place it carefully in your backpack, you notice the ticking is getting louder.`,\r\n                };\r\n            }\r\n\r\n            return {\r\n                output: `${!wasOpen ? `You open the mailbox and` : `You`} take the ${p.title} and put it in your backpack.`,\r\n            };\r\n        }\r\n\r\n        if (command === `take` && yard.contents.includes(snake) && isMatch(snake, target)) {\r\n            const p = snake;\r\n            moveItem(p, yard.contents, inventory);\r\n\r\n            gameState.achievements.addAchievement(`üêç You Would do Well in Slitherin`);\r\n            return {\r\n                output: `You take the ${p.title} and put it in your backpack. \r\n                \r\n                Just then a little white dog starts chasing you and tries to bite you. You run back to the mailbox and the dog goes back to it's own yard, but it keeps barking.`,\r\n            };\r\n        }\r\n\r\n        if (command === `throw` && inventory.includes(snake) && yard.contents.includes(dog) && isMatch(dog, target) && isMatch(snake, target)) {\r\n            const p = dog;\r\n            moveItem(p, yard.contents, inventory);\r\n\r\n            gameState.achievements.addAchievement(`ü¶¥ Throw the dog a bone... or snake.`);\r\n            return {\r\n                output: `You throw the snake at the dog and it latches onto his face.\r\n                \r\n                The dog shakes violently until the snake goes flying into the trees. \r\n                \r\n                Then the dog runs around the yard three times, yipping the whole way. On the third lap, the dog seems to remember you and starts running directly at you.\r\n\r\n                Right before the dog reaches you, it leaps at your face barring its jagged teeth.\r\n\r\n                As you look into his vicious eyes, they suddenly go blank. The dog hits you limply and falls to the ground. \r\n                \r\n                It's not moving anymore now. You decide to put it in your backpack before the neighbors see you standing above their dead dog.`,\r\n            };\r\n        }\r\n\r\n        if (command === `take` && pickupTruck.hasCrashed) {\r\n            const f = pickupTruck.contents.find(x => isMatch(x, target));\r\n            if (f) {\r\n                moveItem(f, pickupTruck.contents, inventory);\r\n\r\n                gameState.achievements.addAchievement(`‚ôªÔ∏è Another Man's Trash`);\r\n                return {\r\n                    output: `You take the ${f.title} from the back of the truck.`,\r\n                };\r\n            }\r\n        }\r\n\r\n        if (command === `put`) {\r\n            if (target.includes(`mailbox`)) {\r\n                // if (!mailbox.isOpen) {\r\n                //     return {\r\n                //         output: `The mailbox is not open.`,\r\n                //     };\r\n                // }\r\n                mailbox.isOpen = true;\r\n                if (mailbox.package) {\r\n                    return {\r\n                        output: `There is already something in the mailbox.`,\r\n                    };\r\n                }\r\n\r\n                const f = inventory.find(x => isMatch(x, target));\r\n                if (f) {\r\n                    removeFromInventory(f);\r\n                    mailbox.package = f;\r\n                    const wasOpen = mailbox.isOpen;\r\n                    mailbox.isOpen = false;\r\n                    return await triggerTimedMessage(input.onMessage, {\r\n                        output: `${!wasOpen ? `You open the mailbox and` : `You`} put the ${f.title} in the mailbox ${!wasOpen ? `and close it again.` : `and close it.`}`,\r\n                    }, 10, `normal`, () => deliverMail(input));\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    // const look = async (input: GameInput): Promise<GameAction> => {\r\n    //     // if (target.includes(`house`)) {\r\n    //     //     return {\r\n    //     //         output: `You are standing in a large grass yard of a biege house, with a broken front door.\r\n    //     //         There is ${mailbox.isOpen ? `an open` : `a small`} mailbox nearby.`,\r\n    //     //     };\r\n    //     // }\r\n\r\n    //     // if (target.includes(`grass`) || target.includes(`yard`)) {\r\n    //     //     if (yard.snake) {\r\n    //     //         return {\r\n    //     //             output: `You see a snake crawling in the grass.`,\r\n    //     //         };\r\n    //     //     }\r\n\r\n    //     //     return {\r\n    //     //         output: `You are standing in a large grass yard.`,\r\n    //     //     };\r\n    //     // }\r\n\r\n    //     // if (target.includes(`mailbox`)) {\r\n    //     //     return {\r\n    //     //         output: `There is ${mailbox.isOpen ? `an open` : `a small`} mailbox nearby. ${mailbox.isOpen && mailbox.package ? `There is a ${mailbox.package.title} inside.` : ``}`,\r\n    //     //     };\r\n    //     // }\r\n\r\n    //     const lookItems = [\r\n    //         mailbox,\r\n    //         yard,\r\n    //         mailTruck.hasCrashed ? mailTruck : null,\r\n    //     ];\r\n    // };\r\n\r\n    const gameScene: GameScene = {\r\n        introduction: `# The Mailbox\r\n        You are standing in a large grass yard near a small mailbox.\r\n        `,\r\n        execute,\r\n        getLookItems: () => [\r\n            mailbox,\r\n            yard,\r\n            pickupTruck.hasCrashed ? pickupTruck : null,\r\n        ],\r\n    };\r\n\r\n    // Type Check\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    //    const _gameScene: GameScene = gameScene;\r\n    return gameScene;\r\n};\r\n\r\nexport type Scene01Mailbox = ReturnType<typeof createScene_01mailbox>;\r\n","import React from 'react';\r\nimport { createGameState } from './core';\r\nimport { createScene_01mailbox } from './scenes/01-mailbox';\r\nimport { GameAction, GameInput, GameExecute, Game, GameScene } from './types';\r\nimport { randomItem, delay } from './utils';\r\nimport { artMap, artMan } from './art';\r\nimport { AsciiArtViewer } from './components/ascii-art-viewer';\r\n\r\n\r\nexport const dorkVersion = `v1.4.2`;\r\nexport const title = `*** DORK! *** ${dorkVersion} - Copyright ${new Date().getFullYear()} Rick Love`;\r\n\r\nexport const createDorkGame = (onMessageInit: (message: GameAction) => void): Game => {\r\n    const gameState = createGameState(onMessageInit);\r\n    const {\r\n        isGameOver,\r\n        inventory,\r\n        isMatch,\r\n    } = gameState;\r\n\r\n\r\n    const badCommandInsults = [\r\n        `What are you talking about?`,\r\n        `That doesn't make any sense.`,\r\n        // Saved for Redneck Game\r\n        // `Ain't never heard no nonsense like that before.`,\r\n        `I've seen butter knives sharper than you!`,\r\n        `You are playing the correct game!`,\r\n        `What exactly do you think that would accomplish?`,\r\n        `This is a family game!`,\r\n    ];\r\n\r\n\r\n    const scenes = [\r\n        createScene_01mailbox(gameState),\r\n    ];\r\n    let scene = null as null | GameScene;\r\n\r\n    const loadScene = async (value: GameScene): Promise<GameAction> => {\r\n        scene = value;\r\n        return { output: scene.introduction };\r\n    };\r\n    // const containers = ;\r\n\r\n    const execute: GameExecute = async (inputRaw: GameInput): Promise<GameAction> => {\r\n        const { command: commandRaw, target, onMessage: onMessageRaw } = inputRaw;\r\n\r\n        // Prevent Messages if game over already\r\n        const onMessage: typeof onMessageRaw = (x) => {\r\n            // Ensure Game Over Interrupts Execute\r\n            if (isGameOver()) { return; }\r\n            onMessageRaw(x);\r\n        };\r\n        // const haveTarget = (match: string) => target.includes(match) && inventory.find(x => x.lower.includes(target));\r\n\r\n        // Standardize Commands\r\n        let command = commandRaw;\r\n        command = command === `look` || command === `see` || command === `view` || command === `observer` ? `look` : command;\r\n        command = command === `take` || command === `get` || command === `obtain` ? `take` : command;\r\n\r\n        const input = { ...inputRaw, command, onMessage };\r\n\r\n        // Ensure Game Over Interrupts Execute\r\n        if (gameState.isGameOver()) {\r\n            return { output: ``, isGameOver: true };\r\n        }\r\n\r\n        if (!scene) {\r\n            throw new Error(`Scene not loaded - Start Game First`);\r\n        }\r\n\r\n        gameState.achievements.addAchievement(`‚å® I Can Type!`);\r\n\r\n        if (command === `look`) {\r\n            gameState.achievements.addAchievement(`üëÄ Looking Good!`);\r\n\r\n            // Look Inventory\r\n            const f = inventory.find(x => isMatch(x, target));\r\n            if (f) {\r\n                return {\r\n                    output: typeof f.description === `function` ? f.description() : f.description,\r\n                };\r\n            }\r\n\r\n            // Look Scene\r\n            const sceneItems = scene.getLookItems();\r\n            const s = sceneItems.find(x => x && isMatch(x, target));\r\n            if (s) {\r\n                return {\r\n                    output: typeof s.description === `function` ? s.description() : s.description,\r\n                };\r\n            }\r\n            // const result = await scene.look(input);\r\n            // if (result) { return result; }\r\n\r\n            // return {\r\n            //     output: randomItem([`What do you want to look at?`, `Yes, you look nice!`]),\r\n            // };\r\n\r\n            return {\r\n                output: `You see ${sceneItems.filter(x => x).map(x => x?.titleWithA).join(`, `)}, and ${randomItem([\r\n                    `a dork... oh that's you.`,\r\n                    `... your reflection off of the screen.`,\r\n                    `a heard of zombies... Wait nevermind.`,\r\n                    `... so many ducks.`,\r\n                    `... a tech support scammer.`,\r\n                ])}`,\r\n            };\r\n        }\r\n\r\n\r\n        // Execute Inventory\r\n        for (const x of inventory) {\r\n            if (!x.execute) { continue; }\r\n            if (!isMatch(x, target)) { continue; }\r\n\r\n            // eslint-disable-next-line no-await-in-loop\r\n            const result = await x.execute(input);\r\n            if (result) { return result; }\r\n        }\r\n\r\n        // Execute Scene\r\n        const result = await scene.execute(input);\r\n        if (result) { return result; }\r\n\r\n        // List Inventory\r\n        if (command === `inv` || command === `inventory` || command === `bag` || command === `backpack` || command === `pack`) {\r\n            gameState.achievements.addAchievement(`üéí Checkin on My Stuff`);\r\n\r\n            return { output: inventory.map(x => x.title).join(`\\n`) };\r\n        }\r\n\r\n        // Help\r\n        if (command === `help`) {\r\n            gameState.achievements.addAchievement(`ü¶Æ Hold My Hand Please`);\r\n\r\n            return {\r\n                output: `\r\n                    Example Commands: \r\n                    help\r\n                    inventory\r\n                    look at mirror\r\n                    take frog\r\n                    open box\r\n                    close trunk\r\n                    put cat in submarine\r\n                    go to house\r\n                    throw snake at lady\r\n                    send gif to grandma\r\n                    post status on dorkbook\r\n                    wear mask\r\n                    ` };\r\n        }\r\n\r\n        // Map\r\n        if (command === `map`) {\r\n            gameState.achievements.addAchievement(`üó∫Ô∏è I'm a map!`);\r\n\r\n            return { output: artMap };\r\n        }\r\n\r\n        if (command === `die`) {\r\n            gameState.achievements.addAchievement(`üíÄ You Asked for It!`);\r\n\r\n            return gameState.triggerGameOver(onMessage, `You asked for it!`);\r\n        }\r\n\r\n        // Silly Commands\r\n        if (command === `dork`) {\r\n            gameState.achievements.addAchievement(`ü§ì Actually... I'm a Nerd`);\r\n            return { output: randomItem([`Yes, you must be!`, `I prefer the term nerd.`]) };\r\n        }\r\n        if (command === `jump`) {\r\n            gameState.achievements.addAchievement(`ü¶ò Jump! Jump!`);\r\n            return { output: randomItem([`How high?`, `Good job!`, `Maybe if you type harder!`]) };\r\n        }\r\n\r\n        return { output: randomItem(badCommandInsults) };\r\n\r\n        // return {\r\n        //     output: `${randomBinary(512)}\r\n        //     ****  You have died  ****\r\n        // ` };\r\n    };\r\n\r\n    const start = async (onMessage: (message: GameAction) => void): Promise<void> => {\r\n        // Load First Scene\r\n        onMessage({ output: `Reading Floppy Disk...` });\r\n        await delay(1000);\r\n        onMessage({ output: title });\r\n        onMessage({ output: ``, Component: () => (<AsciiArtViewer artwork={artMan} />) });\r\n        await delay(3000);\r\n        onMessage({\r\n            output: ``,\r\n            addDivider: true,\r\n        });\r\n        onMessage({\r\n            output: `Type simple commands\r\n                Examples:` });\r\n        await delay(1000);\r\n        onMessage({\r\n            output: `\r\n                - inventory\r\n                - look at mirror\r\n                - take frog\r\n                - open box\r\n                - close trunk\r\n                - put cat in submarine\r\n                - help\r\n                - look at achievements \r\n                `,\r\n        });\r\n        await delay(3000);\r\n        onMessage({\r\n            output: ``,\r\n            addDivider: true,\r\n        });\r\n        onMessage(await loadScene(scenes[0]));\r\n    };\r\n\r\n    const game: Game = {\r\n        title,\r\n        start,\r\n        execute,\r\n        onQuit: () => gameState.triggerQuit(),\r\n        onQuitNot: () => {\r\n            gameState.achievements.addAchievement(`üßª Never gonna give you up!`);\r\n            return { output: `That was close` };\r\n        },\r\n        achievements: {\r\n            setValue: (achievements: string[]) => { gameState.achievements.loadAchievements(achievements); },\r\n            getValue: () => { return gameState.achievements.getAchievements(); },\r\n        },\r\n    };\r\n\r\n    return game;\r\n};\r\n","/* eslint-disable no-use-before-define */\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\n/* eslint-disable unicorn/consistent-function-scoping */\r\n/* eslint-disable no-param-reassign */\r\nimport { createDorkGame, title } from 'dork/main';\r\nimport { GameInput, GameAction } from 'dork/types';\r\nimport { ConFile, ConActionQuery } from './types';\r\nimport { randomBinary } from './utils';\r\n\r\n// localStorage\r\ntype DorkGameStorage = {\r\n    achievements: string[];\r\n};\r\nconst loadGameStorage = () => {\r\n    const v = localStorage.getItem(`DorkGameStorage`);\r\n    if (!v) { return null; }\r\n    try { return JSON.parse(v) as DorkGameStorage | null; } catch{ return null; }\r\n};\r\nconst saveGameStorage = (value: DorkGameStorage) => { localStorage.setItem(`DorkGameStorage`, JSON.stringify(value)); };\r\n\r\nexport const dorkFile: ConFile = {\r\n    session: `user`, path: `/`, name: `dork`,\r\n    content: `${randomBinary(256)}${title}${randomBinary(512)}`,\r\n    execute: async (onMessage) => {\r\n\r\n        const onMessageGame = (message: GameAction) => {\r\n            onMessage({\r\n                output: message?.output,\r\n                Component: message?.Component,\r\n                addDivider: message?.addDivider,\r\n            });\r\n        };\r\n\r\n        const dorkGame = createDorkGame(onMessageGame);\r\n\r\n        const conQuery: ConActionQuery = {\r\n            prompt: `>`,\r\n            respond: async (input) => {\r\n                // Quit Game\r\n                if (input.command === `quit`) {\r\n                    return {\r\n                        query: {\r\n                            prompt: `Are you sure you want to quit?`,\r\n                            respond: async (x) => {\r\n                                if (x.command.startsWith(`y`)) {\r\n                                    const result = dorkGame.onQuit();\r\n                                    saveGameStorage({ achievements: dorkGame.achievements.getValue() });\r\n                                    return result;\r\n                                }\r\n                                return {\r\n                                    ...dorkGame.onQuitNot(),\r\n                                    query: conQuery,\r\n                                };\r\n                            },\r\n                        },\r\n                    };\r\n                }\r\n\r\n                const gameInput: GameInput = {\r\n                    ...input,\r\n                    onMessage: onMessageGame,\r\n                };\r\n                const result = await dorkGame.execute(gameInput);\r\n                saveGameStorage({ achievements: dorkGame.achievements.getValue() });\r\n                return {\r\n                    ...result,\r\n                    query: result?.isGameOver ? undefined : conQuery,\r\n                };\r\n            },\r\n        };\r\n\r\n        const s = loadGameStorage();\r\n        if (s) {\r\n            dorkGame.achievements.setValue(s.achievements);\r\n        }\r\n\r\n        await dorkGame.start(onMessageGame);\r\n\r\n        return {\r\n            output: ``,\r\n            query: conQuery,\r\n        };\r\n    },\r\n};\r\n","/* eslint-disable no-param-reassign */\r\nimport { ConFile, ConActionQuery } from './types';\r\nimport { randomBinary } from './utils';\r\n\r\nexport const zork: ConFile = {\r\n    session: `user`, path: `/`, name: `zork`,\r\n    content: `${randomBinary(256)}West of House\r\nYou are standing in an open field west of a white house, with a boarded front door.\r\nThere is a small mailbox here.${randomBinary(512)}`,\r\n    execute: async () => {\r\n\r\n        const mainZork: ConActionQuery = {\r\n            prompt: `>`,\r\n            respond: async ({ command, target }) => {\r\n                if (command === `zork`) { return { output: `At your service`, query: mainZork }; }\r\n                if (command === `jump`) { return { output: Math.random() < 0.5 ? `Are you enjoying yourself?` : `Very good! Now you can go to the second grade.`, query: mainZork }; }\r\n                if (command === `scream`) { return { output: `Aaaarrrrgggghhhh!`, query: mainZork }; }\r\n\r\n                if (command === `look`) {\r\n                    if (target === `house`) {\r\n                        return {\r\n                            output: `You are standing in an open field west of a white house, with a boarded front door.`,\r\n                            query: mainZork,\r\n                        };\r\n                    }\r\n                }\r\n\r\n                if (command === `open`) {\r\n                    if (target === `mailbox`) {\r\n                        return {\r\n                            output: `Opening the small mailbox reveals a leaflet`,\r\n                            query: mainZork,\r\n                        };\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    output: `${randomBinary(512)}\r\n                    ****  You have died  ****\r\n                    ...bzzz...\r\n                    The magnetic tape drive is smoking...\r\n                    Maybe I should play >>> DORK <<<\r\n                ` };\r\n            },\r\n        };\r\n\r\n        return {\r\n            output: `West of House\r\n        You are standing in an open field west of a white house, with a boarded front door.\r\n        There is a small mailbox here.`,\r\n            query: mainZork,\r\n        };\r\n    },\r\n};\r\n","/* eslint-disable no-param-reassign */\r\n/* eslint-disable unicorn/consistent-function-scoping */\r\nimport { ConSessionName, ConSession, ConState, ConFile, ConAction, ConInput, ConCommandResult } from './types';\r\nimport { randomBinary } from './utils';\r\nimport { dorkFile } from './game-dork';\r\nimport { zork } from './game-zork';\r\n\r\nexport const createConsoleCommands = (initialMachineName: string) => {\r\n\r\n    const sessions: { [session in ConSessionName]: ConSession } = {\r\n        user: { machineName: `${initialMachineName}` },\r\n        admin: { machineName: `admin@vm` },\r\n    };\r\n\r\n    let state: ConState = {\r\n        parent: undefined,\r\n        session: `user`,\r\n        directory: `/`,\r\n        activeAction: undefined,\r\n    };\r\n\r\n    const enterSession = (session: ConSessionName, shouldResolveAction = true) => {\r\n        state = {\r\n            parent: { ...state, activeAction: shouldResolveAction ? null : state.activeAction },\r\n            session,\r\n            directory: `/`,\r\n            activeAction: null,\r\n        };\r\n    };\r\n    const exitSession = () => {\r\n        if (!state.parent) { return null; }\r\n        state = state.parent;\r\n        return state;\r\n    };\r\n\r\n\r\n    const files: ConFile[] = [\r\n        {\r\n            session: `user`, path: `/`, name: `Readme.md`,\r\n            content: `\r\n                Yes, this is cool!\r\n                Look, I created my own blog!\r\n                ## Hidden Stuff\r\n                I'm going to store some things here so I don't forget.`,\r\n        }, {\r\n            session: `user`, path: `/`, name: `passwords.txt`,\r\n            content: `\r\n                test1\r\n                password\r\n                12345678\r\n                asdf\r\n                qwerty\r\n                1234567890\r\n                admin\r\n                friend\r\n                test1234\r\n                1234567\r\n                Aa123456.\r\n                p@55w0rd`,\r\n        }, {\r\n            session: `user`, path: `/`, name: `admin.sh`,\r\n            content: `ssh admin@192.168.0.1`,\r\n            execute: async () => ({\r\n                output: `Please Enter Password`,\r\n                query: {\r\n                    prompt: `doors@durin>`,\r\n                    respond: async ({ command }) => {\r\n                        if (command === `friend`) {\r\n                            enterSession(`admin`);\r\n                            return {\r\n                                output: `Logging into ${sessions.admin.machineName}`,\r\n                            };\r\n                        }\r\n                        return {\r\n                            output: `Incorrect Password`,\r\n                        };\r\n                    },\r\n                },\r\n            }),\r\n        }, {\r\n            session: `admin`, path: `/`, name: `bitcoin_wallet_backup.dat`,\r\n            content: `E9873D79C6D87DC0FB6A57786389F4453213303DA61F20BD67FC233AA33262`,\r\n        }, {\r\n            session: `admin`, path: `/`, name: `keepass.kdb`,\r\n            content: `${randomBinary(1024)}`,\r\n        },// \r\n\r\n        zork,\r\n        dorkFile,\r\n    ];\r\n\r\n    const standardPrompt = (): ConCommandResult => {\r\n        return { prompt: `${sessions[state.session].machineName}${state.directory.replace(/\\/$/g, ``)}>` };\r\n    };\r\n\r\n    const processAction = async (action: ConAction): Promise<ConCommandResult> => {\r\n        if (!action) {\r\n            state = { ...state, activeAction: null };\r\n            return standardPrompt();\r\n        }\r\n        if (action.query) {\r\n            state = { ...state, activeAction: action };\r\n            return { ...action, prompt: action.query.prompt };\r\n        }\r\n\r\n        state = { ...state, activeAction: null };\r\n        return {\r\n            ...standardPrompt(),\r\n            ...action,\r\n        };\r\n    };\r\n\r\n    const onCommand = async (commandRaw: string, onMessage: (message: ConCommandResult) => void): Promise<ConCommandResult> => {\r\n        const commandLower = commandRaw.toLowerCase().trim();\r\n        const iSpace = commandLower.indexOf(` `);\r\n        const command = iSpace >= 0 ? commandLower.slice(0, iSpace).trim() : commandLower.trim();\r\n        const target = iSpace >= 0 ? commandLower.slice(iSpace).trim() : ``;\r\n        const input: ConInput = { raw: commandRaw, lower: commandLower, command, target, onMessage };\r\n\r\n        // Process any active actions\r\n        if (state.activeAction) {\r\n            const a = state.activeAction;\r\n            if (a.query) {\r\n                const action = await a.query.respond(input);\r\n                return await processAction(action);\r\n            }\r\n        }\r\n\r\n        // Process OS level commands\r\n        if (command === `exit`) {\r\n            if (exitSession()) {\r\n                return standardPrompt();\r\n            }\r\n            return { quit: true };\r\n        }\r\n\r\n        const dirFiles = files.filter(x => x.session === state.session && x.path === state.directory);\r\n\r\n        if (command === `dir` || command === `ls`) {\r\n            return {\r\n                ...standardPrompt(),\r\n                output: dirFiles.map(x => x.name).join(`\\n`),\r\n            };\r\n        }\r\n\r\n        if (command.startsWith(`open`)\r\n            || command.startsWith(`read`)\r\n            || command.startsWith(`cat`)\r\n            || command.startsWith(`echo`)\r\n        ) {\r\n            const file = target && dirFiles.find(x => x.name.toLowerCase().startsWith(target));\r\n            if (file) {\r\n                return {\r\n                    ...standardPrompt(),\r\n                    output: file.content,\r\n                };\r\n            }\r\n\r\n            return {\r\n                ...standardPrompt(),\r\n                output: `${command}: ${target}: No such file or directory`,\r\n            };\r\n        }\r\n\r\n        const file = dirFiles.find(x => x.name.toLowerCase() === command);\r\n        if (file && file.execute) {\r\n            const action = await file.execute(onMessage);\r\n            return processAction(action);\r\n        }\r\n\r\n        return {\r\n            ...standardPrompt(),\r\n            output: `${command}: command not found`,\r\n        };\r\n    };\r\n\r\n    return {\r\n        onCommand,\r\n    };\r\n\r\n};\r\n"],"sourceRoot":""}