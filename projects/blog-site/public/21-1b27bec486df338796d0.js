(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[21],{"9GY0":function(e,t,n){"use strict";n.r(t),n.d(t,"EducationalGame_Doodle_Spelling",(function(){return k}));var r=n("ERkP"),a=n.n(r),o=n("DTYs"),i=(n("yKDW"),n("dtAy"),n("a1TR")),c=n.n(i),u=(n("3yYM"),n("KI7T"),n("PN9k"),n("pAyS")),l=n("MWkW"),s=n("njmQ"),f=n("yxiS");function p(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,a)}var m={container:{alignItems:"center"},drawing:{width:312,height:312,color:"#FFFFFF",backgroundColor:"#000000"},drawingChoicesView:{maxWidth:332,flexDirection:"row",flexWrap:"wrap"},drawingChoiceWrapper:{padding:4},drawingChoice:{width:78,height:78,color:"#FFFFFF",backgroundColor:"#000000"},promptView:{justifyContent:"center",alignItems:"center"},promptText:{fontSize:20},buttonView:{padding:8,backgroundColor:"#111111"},buttonText:{fontSize:20,color:"#FFFF00"}},d=function(e){var t=Object(r.useState)(0),n=t[0],o=t[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(g,Object.assign({},e,{problemSourceKey:n})),a.a.createElement(f.a,{problemService:e.problemService,onOpen:function(){},onClose:function(){},onSubjectNavigation:function(){o((function(e){return e+1}))}}))},g=function(e){var t,n,o=Object(r.useState)(null),i=o[0],u=o[1],l=Object(r.useState)("drawPrompt"),f=l[0],m=l[1],d=Object(r.useState)(null),g=d[0],v=d[1],b=null!==(t=null==i||null===(n=i.answers.find((function(e){return e.isCorrect})))||void 0===n?void 0:n.value)&&void 0!==t?t:"",y=function(){var t,n=e.problemService.getNextProblem();n.question&&(u(n),m("drawPrompt"),null===(t=n.onQuestion)||void 0===t||t.call(n))};Object(r.useEffect)((function(){y()}),[e.problemSourceKey]);var S=Object(s.a)(),E=(S.loading,S.error,S.doWork);return i?"chooseBest"===f&&g?a.a.createElement(a.a.Fragment,null,a.a.createElement(h,{prompt:b,drawings:g,onChooseBest:function(e){y()}})):a.a.createElement(a.a.Fragment,null,a.a.createElement(w,{prompt:b,onDone:function(t){E(function(){var n,r=(n=c.a.mark((function n(r){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.segments.length>0)){n.next=3;break}return n.next=3,e.drawingStorage.saveDrawing(t,b);case 3:return r(),n.next=6,e.drawingStorage.getDrawings(b);case 6:if(!((a=n.sent).drawings.length<=1)){n.next=10;break}return y(),n.abrupt("return");case 10:v(a.drawings),m("chooseBest");case 12:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){p(o,r,a,i,c,"next",e)}function c(e){p(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}())}})):a.a.createElement(a.a.Fragment,null)},w=function(e){var t=Object(r.useState)(Object(l.a)()),n=t[0],i=t[1];return Object(r.useEffect)((function(){i(Object(l.a)())}),[e.prompt]),a.a.createElement(o.h,{style:m.container},a.a.createElement(u.DoodleDrawerView,{style:m.drawing,drawing:n,onChange:function(e){i(e)}}),a.a.createElement(o.h,{style:m.promptView},a.a.createElement(o.e,{style:m.promptText},e.prompt)),a.a.createElement(o.g,{onPress:function(){e.onDone(n)}},a.a.createElement(o.h,{style:m.buttonView},a.a.createElement(o.e,{style:m.buttonText},"Done"))))},h=function(e){return a.a.createElement(o.h,{style:m.container},a.a.createElement(o.h,{style:m.promptView},a.a.createElement(o.e,{style:m.promptText},e.prompt)),a.a.createElement(o.h,{style:m.drawingChoicesView},e.drawings.map((function(t){return a.a.createElement(o.g,{onPress:function(){return e.onChooseBest(t)}},a.a.createElement(o.h,{style:m.drawingChoiceWrapper},a.a.createElement(u.DoodleDisplayView,{style:m.drawingChoice,drawing:t.drawing})))}))))},v=n("aLR2"),b=n("9u8u"),y=n("oo7O"),S=n("DZ/V"),E=n("yyXn"),O=(n("yIC7"),n("p+GS"),n("4oWw"),n("nruA"),n("LnO1"),n("XjK0"),n("SCO9"),n("4cHy")),j=n("hsFx");function D(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,a)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){x(o,r,a,i,c,"next",e)}function c(e){x(o,r,a,i,c,"throw",e)}i(void 0)}))}}var A=function(){try{var e;return JSON.parse(null!==(e=localStorage.getItem("_doodleDrawings"))&&void 0!==e?e:"NULL!{}")}catch(t){return[]}},_=function(e){localStorage.setItem("_doodleDrawings",JSON.stringify(e))},k=function(e){var t,n,i,u=Object(r.useRef)(Object(v.a)()),l=Object(r.useState)("web"!==o.c.OS),s=l[0],f=l[1];if(!s){return a.a.createElement(o.h,null,a.a.createElement(S.a,{languange:"en",speechService:u.current}),a.a.createElement("div",{onClick:function(){return u.current.speak("Start"),void f(!0)}},a.a.createElement(o.h,{style:{height:300,alignSelf:"center",alignItems:"center",justifyContent:"center"}},a.a.createElement(o.e,{style:{fontSize:36}},"Start"))))}return a.a.createElement(d,{problemService:Object(E.a)(Object(b.a)(Object(y.a)({speechService:u.current}),{}),"ProblemsSpelling"),drawingStorage:(i={drawings:[]},i.drawings=A(),{saveDrawing:(n=F(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.drawings.push({drawing:t,prompt:n}),_(i.drawings);case 2:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),getDrawings:(t=F(c.a.mark((function e(t,n){var r,a,o,u,l,s,f,p,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(r=null!=n?n:{}).includeOtherPrompts,o=void 0!==a&&a,u=r.maxCount,l=void 0===u?4:u,s=i.drawings.filter((function(e){return e.prompt===t})),f=o?i.drawings.filter((function(e){return e.prompt!==t})):[],p=o?[Object(O.b)(s)].concat(D(Object(j.e)(f).slice(0,l-1))):s,m=Object(j.e)(p).slice(0,l),e.abrupt("return",{drawings:m});case 6:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})})})}}}]);
//# sourceMappingURL=21-1b27bec486df338796d0.js.map