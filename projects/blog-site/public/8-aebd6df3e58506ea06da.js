(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[8],{"3bTa":function(e,r,t){"use strict";var n=t("nGXB"),o=t("hVlx"),i=t("k5FF"),a=t("T/ei"),u=t("mWUp"),l=t("Lmbf"),c=t("fwbQ"),s=t("HBB8");n({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var r=l(this,u("Promise")),t="function"==typeof e;return this.then(t?function(t){return c(r,e()).then((function(){return t}))}:e,t?function(t){return c(r,e()).then((function(){throw t}))}:e)}}),o||"function"!=typeof i||i.prototype.finally||s(i.prototype,"finally",u("Promise").prototype.finally)},FFvK:function(e,r,t){"use strict";t.r(r),t.d(r,"ArtGallery",(function(){return H}));var n=t("ERkP"),o=t.n(n),i=t("bQih"),a=t("njmQ"),u=t("gptL"),l=t("eVsZ"),c=t.n(l);var s=function(e){var r,t=function(e){for(var r=1779033703^e.length,t=0;t<e.length;t++)r=(r=Math.imul(r^e.charCodeAt(t),3432918353))<<13|r>>>19;return function(){return r=Math.imul(r^r>>>16,2246822507),r=Math.imul(r^r>>>13,3266489909),(r^=r>>>16)>>>0}}(e)();return{random:(r=t,function(){var e=r+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296})}},f={key:"art-circles",title:"Circles",description:"The circles we travel in life always bring us back home.",artist:"Rick Love",getTokenDescription:function(e){return null},renderArt:function(e,r){void 0===r&&(r="This is my hash!");var t=s(r).random,n={a:1+Math.floor(57*t()),b:1+Math.floor(213*t()),c:1+Math.floor(115*t())},o=n.a,i=n.b,a=n.c,u={cr:Math.floor(25+230*t()),cg:Math.floor(25+230*t()),cb:Math.floor(25+230*t()),ca:Math.floor(25+25*t())},l=u.cr,f=u.cg,d=u.cb,v=u.ca,m=200,h=0;return new c.a((function(e){e.setup=function(){e.createCanvas(600,600)},e.draw=function(){e.background(0),e.scale(1.5);for(var r=0;r<10;r++){var t=e.color(l*r%255,f*r%255,d*r%255,v);e.noFill(),e.stroke(t);for(var n=0;n<36;n++)e.circle(m-o/2+n%o,m-i/2+n%i,270-5*r%a);e.translate(m,m),e.rotate(o+i+a+.001*h),e.translate(-m,-m),h+=.5}h++}}),e)}},d={key:"art-onions",title:"Layers of the Onion's Soul",description:"This represents the complexity of an onion's soul - which has many layers, like a human.",artist:"Rick Love & Lydia Love - who called me weirdo as inspiration, and mentioned a circle, some squares, a tetrahedron, Minecraft blocks, and then said she meant cubes and spheres.",getTokenDescription:function(e){return null},renderArt:function(e,r){void 0===r&&(r="This is my hash!");var t=s(r).random,n={a:1+Math.floor(17*t()),b:1+Math.floor(57*t()),c:1+Math.floor(35*t()),d:0+Math.floor(5*t()),e:20+Math.floor(255*t())},o=n.a,i=n.b,a=n.c,u=n.d,l=n.e,f={cr:Math.floor(25+230*t()),cg:Math.floor(25+230*t()),cb:Math.floor(25+230*t())},d=f.cr,v=f.cg,m=f.cb,h=0;return new c.a((function(e){e.setup=function(){e.createCanvas(400,400)},e.draw=function(){e.background(0);for(var r=0;r<35;r++){var t=e.color((d+i*r)%255,v*(1+r*o)%255,(m+r*u)%255);e.fill(t),e.circle(150+7*r%i-o+32*Math.sin(.001*h),250+r-a%35+i,(270-r)%l),e.translate(100,100),e.rotate(u+7e-6*h),e.translate(-120,-150),h++}}}),e)}},v=function(e){var r=Number.parseInt(e.substr(0,e.length-6),10),t=Number.parseInt(e.substr(e.length-6),10);if(console.log("parseTokenId_art121",{tokenId:e,tokenTimestampValue:r,tokenCounterValue:t}),!Number.isFinite(r))return null;if(!Number.isFinite(t))return null;var n=t,o=r,i=Math.floor(new Date("2021-01-21 21:21:21Z").getTime())/1e3;return{tokenId:e,tokenCounter:n,timestampSecs:o,targetSecs:i,timeDeltaSecs:Math.abs(i-o)}},m={key:"art-121",title:"1/21/21 21:21:21",description:"This exact time pattern will occur only once in our human timeline. This NFT crypto art will attempt to capture that time to the precise second and embed it in the distributed blockchain forever. \n    \nHowever the exact outcome cannot be controlled: \n\nThe color scheme is generated from the token hash.\n\nEven more difficult to predict - the block mining timestamp since 1/21/21 21:21:21 UTC controls the behavior of the clocks:\n\nYear\nMonth\nDay\nHour\nMinute\nSecond\n\nIf this is mined at the exact second, perfect stability will be achieved.\n\nThis is all up to whatever timing occurs on the blockchain when these NFTs are mined by the collectors.\n\nCan we obtain the exact precision?\n",artist:"Rick Love",getTokenDescription:function(e){var r=v(e);return r?r.timeDeltaSecs+" Seconds from 1/21/21 21:21:21 (#"+r.tokenCounter+")":null},renderArt:function(e,r){var t=s(r).random,n=(Math.floor(57*t()),Math.floor(213*t()),Math.floor(115*t()),{cr:Math.floor(25+230*t()),cg:Math.floor(25+230*t()),cb:Math.floor(25+230*t()),ca:Math.floor(25+25*t())}),o=n.cr,i=n.cg,a=n.cb,u=0,l=v(r);return new c.a((function(e){e.setup=function(){e.createCanvas(350,350)},e.draw=function(){e.background(0);var r=function(r,t,n,l){for(var c=1/n,s=(Math.sin(2*Math.PI*c),0);s<=1;s++)for(var f=1===s,d=0,v=0;v<n;v++){var m=1-2*(.5-Math.abs(l*c-.5)),h=Math.cos(.0121*u*m+.25*r),p=l*c-.25,g=h*t*Math.cos(2*Math.PI*(p-v*c)),x=t*Math.sin(2*Math.PI*(p-v*c));0===v&&(d=g);var S=(0===l&&r%2==0?-1:1)*Math.sign(d)===Math.sign(g);if((!f||S)&&(f||!S)){var T=r+1,y=f?1:.25,E=Math.ceil(n<100?100:25);e.noFill(),e.stroke(e.color(o*T%255,i*T%255,a*T%255,Math.ceil((0===l?255:E)*y))),e.strokeWeight(2),e.line(g*(1-.05*Math.abs(h)),.95*x,g,x),0===v&&(e.stroke(e.color(o*T%255,i*T%255,a*T%255,0===l?255:50)),e.line(0,0,g,x))}}};e.translate(175,175);for(var t=new Date("2021-01-21 21:21:21.212Z").getTime()-Date.now(),n=null==l?void 0:l.timeDeltaSecs,c=null!=n?1e3*n:t,s={year:Math.floor(c/31536e6),month:Math.floor(c/26784e5%12),day:Math.floor(c/864e5%31),hour:Math.floor(c/36e5%24),minute:Math.floor(c/6e4%60),second:Math.floor(c/1e3%60)},f=0;f<10;f++)r(0,140,100,s.year),r(1,120,12,s.month),r(2,100,31,s.day),r(3,80,60,s.hour),r(4,60,60,s.minute),r(5,40,60,s.second),e.background(e.color(0,0,0,5)),u++;e.translate(-175,-175);u++}}),e)}},h=function(e){var r=Object(n.useRef)(null),t=Object(n.useRef)({Component:function(){return o.a.createElement("div",{style:{},ref:r})}});return Object(n.useEffect)((function(){if(!r.current)return function(){};console.log("DivHost - renderArt",{hostElementRef:r.current,renderArt:e.renderArt}),r.current.innerHTML="";var t=e.renderArt(r.current).remove;return function(){t()}}),[r.current,e.renderArt]),o.a.createElement(o.a.Fragment,null,o.a.createElement(t.current.Component,null))},p=t("fGyu");function g(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return x(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var S={key:"art-puzzle-01",title:"Puzzle 01",description:"Try to puzzle it out and unlock the answer.",artist:"Rick Love",getTokenDescription:function(e){return e?"TokenId: "+e:null},renderArt:function(e,r){var t=function(e){switch(e){case"up":return"down";case"down":return"up";case"left":return"right";case"right":return"left";default:return"up"}},n={board:[],boardVisits:[],moveSequence:[],player:{},moveIndex:0},o=function(e,r){var t=Object.assign({},e);return"up"===r&&t.y--,"down"===r&&t.y++,"left"===r&&t.x--,"right"===r&&t.x++,t};return new c.a((function(e){e.setup=function(){e.createCanvas(350,350),e.background(0);var u=s(r).random,l=n.board,c=n.boardVisits,f={renderSeed:""+u(),item:"exit",pos:{x:Math.floor(1+14*u()),y:Math.floor(1+14*u())}};n.player={renderSeed:""+u(),item:"player",pos:Object.assign({},f.pos),renderPos:{x:0,y:0}};var d=n.player;l.push(f);for(var v=function(){return{direction:(e=u(),e>.75?"up":e>.5?"down":e>.25?"left":"right"),distance:Math.floor(0+12*u())};var e},m=4+Math.floor(12*u()),h=Object(p.a)(new Array(m)).map((function(e){return""+u()})),g=function(){return h[Math.floor(u()*m)]},x={distance:0,direction:"unknown"},S=function(e){for(var r=e.distance,i=Object.assign({},d.pos),a=e.direction,u=function(){var e=o(i,a),t=o(i,a);if(e.x<=0||e.x>=15||e.y<=0||e.y>=15)return{v:null};var n=l.find((function(r){return"player"!==r.item&&r.pos.x===e.x&&r.pos.y===e.y}));if("wall"===(null==n?void 0:n.item))return{v:null};var u=l.find((function(e){return"player"!==e.item&&e.pos.x===t.x&&e.pos.y===t.y}));if("wall"===(null==u?void 0:u.item))return{v:null};r--,i=Object.assign({},e)};r>0;){var c=u();if("object"==typeof c)return c.v}if(n.moveSequence.find((function(e){return e.endPosition.x===i.x||e.endPosition.y===i.y})))return null;var s=e.distance-r;return{direction:t(e.direction),distance:s,endPosition:Object.assign({},d.pos),startPosition:i}},T=0;T<16;T++)l.push({renderSeed:g(),item:"wall",pos:{x:T,y:0}}),l.push({renderSeed:g(),item:"wall",pos:{x:T,y:15}}),l.push({renderSeed:g(),item:"wall",pos:{x:0,y:T}}),l.push({renderSeed:g(),item:"wall",pos:{x:15,y:T}});for(var y=0;y<20;y++){for(var E=v();E.direction===x.direction||E.direction===t(x.direction);)E=v();var b=S(E);if(b&&!(b.distance<=0)){if(n.moveSequence.length>0){var R=o(d.pos,t(E.direction));l.push({item:"wall",pos:R,renderSeed:g()})}d.pos=b.startPosition,n.moveSequence.unshift(b),x=b;var D=b.startPosition;for(n.boardVisits.push({pos:Object.assign({},D)});D.x!==b.endPosition.x||D.y!==b.endPosition.y;)D=o(D,b.direction),n.boardVisits.push({pos:Object.assign({},D)});console.log("boardVisits",{actualReverseMove:b,boardVisits:Object(p.a)(n.boardVisits)})}}for(var w=function(e){for(var r=function(r){var t=!!c.find((function(t){return t.pos.x===e&&t.pos.y===r})),n=!!l.find((function(t){return t.pos.x===e&&t.pos.y===r}));if(t||n)return"continue";u()>.75&&l.push({item:"wall",pos:{x:e,y:r},renderSeed:g()})},t=0;t<16;t++)r(t)},A=0;A<16;A++)w(A);d.renderPos=i(d.pos),n.board.forEach((function(e){return a(e)}))};var i=function(e){return{x:15+20*e.x,y:15+20*e.y}},a=function(r){var t,o=s(r.renderSeed).random,a={a:1+Math.floor(57*o()),b:1+Math.floor(213*o()),c:1+Math.floor(115*o())},l=a.a,c=a.b,f=a.c,d={cr:Math.floor(25+230*o()),cg:Math.floor(25+230*o()),cb:Math.floor(25+230*o()),ca:Math.floor(25+125*o())},v=d.cr,m=d.cg,h=d.cb,p=d.ca,g=null!==(t=r.renderPos)&&void 0!==t?t:i(r.pos),x=g.x,S=g.y;e.fill(v,m,h,p),e.stroke(v,m,h,255),e.strokeWeight(1);var T=n.moveIndex>=n.moveSequence.length&&!n.player.targetRenderPos,y=u/100,E=Math.abs(Math.floor(350*Math.sin((u+l*f)/1e3)));if("player"!==r.item){if("exit"===r.item){if(T){e.fill(v,m,h,Math.floor(25*Math.sin((u+l*f)/100)+35)),e.stroke(0,0,0,10);for(var b=l,R=f,D=0;D<32;D++)e.translate(R,R),e.rotate(b+y),e.rect(x+5,S+5,f*x,f*S),e.rotate(-b-y),e.translate(-R,-R),b+=c,R+=f,R%=125;return}return e.fill(255,255,255),e.rect(x,S,20,20),e.fill(0,0,0),void e.rect(x+5,S+5,10,10)}if("wall-broken"!==r.item){if(!T){e.fill(v,m,h,5);for(var w=.015*(4+n.moveSequence.length-n.moveIndex),A=o(),_=0;_<4;_++)e.stroke(v,m,h,Math.floor(255*(_+1)/5)),e.rect(x+20*(0+w*Math.cos(2*Math.PI*((A+_)/4+u/100))),S+20*(0+w*Math.sin(2*Math.PI*((A+_)/4+u/100))),20,20)}}else{if(!T)return;e.fill(v,m,h,Math.floor(25*Math.sin((u+l*f)/100)+25)),e.stroke(0,0,0,10);for(var F=l,M=f%175,L=0;L<8;L++)e.translate(-M,-M),e.rotate(F+y),e.rect(x,S,20*x,20*S),e.rotate(-F-y),e.translate(M,M),F+=c}}else{if(T){e.stroke(0,0,0,10);for(var O=u,U=0;U<16;U++){e.fill(v,m,(h+U*f)%255,Math.floor(25*Math.sin((u+l*f)/100)+35));e.circle(200-l/2+0%l,200-c/2+0%c,270-5*U%f),e.translate(E,E),e.rotate(.001*(l+c+f+O)),e.translate(-E,-E),O++}return}e.fill(v,m,h,30);for(var P=.01*(4+n.moveSequence.length-n.moveIndex),I=0;I<4;I++)e.stroke(v,m,h,Math.floor(255*(I+1)/5)),e.circle(x+20*(.5+P*Math.cos(2*Math.PI*(I/4+u/100))),S+20*(.5+P*Math.sin(2*Math.PI*(I/4+u/100))),20)}},u=0;e.draw=function(){e.background(0);if(n.board.filter((function(e){return"wall-broken"===e.item})).forEach((function(e){return a(e)})),n.board.filter((function(e){return"wall-broken"!==e.item})).forEach((function(e){return a(e)})),a(n.player),n.player.activeMove&&n.player.renderPos&&n.player.targetRenderPos)for(var r=0;r<3;r++){if(n.player.renderPos=o(n.player.renderPos,n.player.activeMove.direction),Math.abs(n.player.renderPos.x-n.player.targetRenderPos.x)+Math.abs(n.player.renderPos.y-n.player.targetRenderPos.y)<1){n.player.renderPos=n.player.targetRenderPos;break}}var t=n.player.activeMove,i=n.player.renderPos,l=n.player.targetRenderPos;if(t&&i&&l&&i.x===l.x&&i.y===l.y){console.log("Reached",{activeMove:t,pPos:i,tPos:l}),n.player.targetRenderPos=void 0;for(var c,s=function(){var e=c.value,r=o(e.endPosition,e.direction),t=n.board.find((function(e){return e.pos.x===r.x&&e.pos.y===r.y}));if(!t)return"continue";t.item="wall-broken"},f=g(n.moveSequence.slice(0,n.moveIndex));!(c=f()).done;)s()}u++},e.keyPressed=function(){var r=e.key,t=e.keyCode,o=function(){switch(r){case"w":return"up";case"a":return"left";case"s":return"down";case"d":return"right"}switch(t){case e.UP_ARROW:return"up";case e.LEFT_ARROW:return"left";case e.DOWN_ARROW:return"down";case e.RIGHT_ARROW:return"right";default:return null}}();if(o){var a=n.moveSequence[n.moveIndex];if(a){if(a.direction!==o)return n.moveIndex=0,n.player.activeMove=void 0,n.player.renderPos=void 0,n.player.targetRenderPos=void 0,void n.board.filter((function(e){return"wall-broken"===e.item})).forEach((function(e){e.item="wall"}));n.player.activeMove=a,n.player.renderPos=i(a.startPosition),n.player.targetRenderPos=i(a.endPosition),n.moveIndex++}}}}),e)}},T=t("VtSi"),y=t.n(T),E=(t("3yYM"),t("QsI/"));function b(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return R(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function R(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var D=function(e,r){e.colorMode("hsl");var t=r.position,n=t.x,o=t.y,i=r.radiusInner,a=r.radiusOuter,u=r.radiusAxis,l=r.teeth,c=r.rotationAngle,f=r.color,d=r.randomSeed,v=s(""+d).random,m=s(""+d+Math.round(16*c)).random,h=function(){return 1-2*m()};e.stroke(f.h,f.s,f.b,f.a),e.noFill();var p=e.TWO_PI/l,g=i,x=a,S=2.5,T=c,y=T+2*Math.PI*v();S=.5*a;for(var E=0;E<4;E++){e.noStroke(),e.fill(f.h,f.s,.25*f.b,.4),e.curveTightness(.9),e.beginShape();for(var b=0;b<=l;b++)0!==b&&e.curveVertex(n+(g-S*m())*e.cos((b+.2)*p+T),o+(g-S*m())*e.sin((b+.2)*p+T)),e.curveVertex(n+(x-S*m())*e.cos((b+.3)*p+T),o+(x-S*m())*e.sin((b+.3)*p+T)),e.curveVertex(n+(x-S*m())*e.cos((b+.7)*p+T),o+(x-S*m())*e.sin((b+.7)*p+T)),e.curveVertex(n+(g-S*m())*e.cos((b+.8)*p+T),o+(g-S*m())*e.sin((b+.8)*p+T));e.endShape()}S=2.5,e.noFill(),e.stroke(f.h,f.s,f.b,f.a);var R=v()>.5,D=m()>.5?"happy":"creepy";if(R)for(var w=.5*g,A=0;A<4;A++){"creepy"===D&&(S=12),e.noFill(),e.curveTightness(.9),e.beginShape();for(var _=0;_<=l/3;_++)e.curveVertex(n+w*e.cos((_+.2)*p+y)+S*h(),o+w*e.sin((_+.2)*p+y)+S*h());e.endShape();for(var F=0;F<=1;F++){var M=0===F?1.1:1.6,L=w*Math.cos(M*Math.PI+y),O=w*Math.sin(M*Math.PI+y);e.fill(0,0,0),e.beginShape();for(var U=0;U<=l+2;U++)e.curveVertex(L+n+u*e.cos((U+.3)*p+y)+S*h(),O+o+u*e.sin((U+.3)*p+y)+S*h());e.endShape()}}R&&"creepy"===D&&(S=5);for(var P=0;P<4;P++){e.noFill(),e.curveTightness(.9),e.beginShape();for(var I=0;I<=l;I++)0!==I&&e.curveVertex(n+g*e.cos((I+.2)*p+T)+S*h(),o+g*e.sin((I+.2)*p+T)+S*h()),e.curveVertex(n+x*e.cos((I+.3)*p+T)+S*h(),o+x*e.sin((I+.3)*p+T)+S*h()),e.curveVertex(n+x*e.cos((I+.7)*p+T)+S*h(),o+x*e.sin((I+.7)*p+T)+S*h()),e.curveVertex(n+g*e.cos((I+.8)*p+T)+S*h(),o+g*e.sin((I+.8)*p+T)+S*h());e.endShape(),e.fill(0,0,0),e.beginShape();for(var N=0;N<=l+2;N++)e.curveVertex(n+u*e.cos((N+.3)*p+T)+S*h(),o+u*e.sin((N+.3)*p+T)+S*h());e.endShape()}return{faceType:R?D:null}},w={key:"art-gears",title:"Gears",description:"Are the gears of conflict twisting our perceptions of others? (Press image to toggle sound)",artist:"Rick Love",getTokenDescription:function(e){return null},renderArt:function(e,r){void 0===r&&(r="This is my hash!"),Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(17).then(t.t.bind(null,"4zN+",7));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))();var n=s(r).random,o=0,i=60-20*Math.random(),a=1/(100-70*n()),u=Math.floor(3+5*n()),l={position:{x:600*n(),y:600*n()},radius:37.5,randomSeed:""+n(),color:{h:360*n(),s:50,b:50,a:.5}},f=Object(p.a)(new Array(u)).map((function(){var e=37.5+162.5*n(),r=l.radius+e,t=l.position,o=t.x>300&&t.y>300?1*Math.PI:t.x<300&&t.y>300?1.5*Math.PI:t.x>300&&t.y<300?.5*Math.PI:0,a=Math.PI/2*n()+o,u={x:t.x+r*Math.cos(a),y:t.y+r*Math.sin(a)},c=u.x-t.x,s=u.y-t.y,f=Math.sqrt(c*c+s*s)-l.radius;return l={position:u,radius:f,randomSeed:""+n(),color:{h:360*n(),s:100,b:i,a:.5}}})),d=null,v=Date.now(),m=function(){if(!(Date.now()<v+500)){if(v=Date.now(),d)return d.disconnect(),void(d=null);(d=new c.a.Noise("white")).amp(0),d.start()}};return new c.a((function(e){e.setup=function(){e.createCanvas(600,600)},e.mousePressed=function(){e.mouseX<0||e.mouseX>600||e.mouseY<0||e.mouseY>600||m()},e.touchStarted=function(){var r=e.touches[0];r.x<0||r.x>600||r.y<0||r.y>600||m()},e.draw=function(){var r;e.background(0);for(var t,n=e,i=0,u=0,l=b(f.entries());!(t=l()).done;){var c=t.value,s=c[0],v=c[1],m=s%2==0?1:-1,h=Math.ceil(v.radius*Math.PI*2/20),p=o*a*Math.pow(1.25,s+1),g=e.TWO_PI*p/h,x=D(n,{position:v.position,radiusInner:v.radius-5,radiusOuter:v.radius+5,radiusAxis:.1*v.radius,teeth:h,color:v.color,rotationAngle:m*g,randomSeed:v.randomSeed});x.faceType&&i++,"creepy"===x.faceType&&u++,n.translate(v.position.x,v.position.y),n.rotate(e.TWO_PI*p/(4*h)),n.translate(-v.position.x,-v.position.y)}null===(r=d)||void 0===r||r.amp(i>0?u/i:0),o++}}),e)}},A="/content/art/artwork/gpu-01/gpu-01",_={key:"art-gpu-01",title:"Gpu Example 01",description:"2015 - http://patriciogonzalezvivo.com\n\nThis is included as a great example of a gpu shader.\n    \nFrom: https://thebookofshaders.com/13/",artist:"@patriciogv",getTokenDescription:function(e){return null},renderArt:function(e,r){void 0===r&&(r="This is my hash!");s(r).random;var t=null;return new c.a((function(e){e.preload=function(){t=e.loadShader(A+".vert",A+".frag")},e.setup=function(){e.createCanvas(600,600,e.WEBGL),e.noStroke()},e.draw=function(){t&&(t.setUniform("u_resolution",[600,600]),t.setUniform("u_time",e.millis()/1e3),t.setUniform("u_mouse",[e.mouseX,e.map(e.mouseY,0,600,600,0)]),e.shader(t),e.rect(0,0,600,600))}}),e)}},F={key:"art-flying-colors",title:"Flying Colors",description:"Mmmm, bright",artist:"Rick Love",getTokenDescription:function(e){return null},renderArt:function(e,r){void 0===r&&(r="This is my hash!");var t=(0,s(r).random)(),n=0,o=null;return new c.a((function(e){e.preload=function(){o=e.loadShader("/content/art/artwork/flying-colors/flying-colors.vert","/content/art/artwork/flying-colors/flying-colors.frag")},e.setup=function(){e.createCanvas(600,600,e.WEBGL),e.noStroke()},e.draw=function(){if(o){e.millis();n=e.millis(),o.setUniform("u_resolution",[600,600]),o.setUniform("u_time",n/1e3),o.setUniform("u_mouse",[e.mouseX,e.map(e.mouseY,0,600,600,0)]),o.setUniform("u_seed",t),e.shader(o),e.rect(0,0,600,600)}}}),e)}};function M(e,r,t,n){if(!function(e,r,t,n){var o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,r,4,4,0,t,n,null);var i=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE}(e,r,t,n)){var o=e;switch(r){case o.R16F:return M(e,o.RG16F,o.RG,n);case o.RG16F:return M(e,o.RGBA16F,o.RGBA,n);default:throw new Error("Unknown Render Format")}}return{internalFormat:r,format:t}}var L=t("Gcfp");function O(){return/mobi|android/i.test(navigator.userAgent)}function U(e){return Math.min(Math.max(e,0),1)}function P(){var e=function(e,r,t){var n=Math.floor(6*e),o=6*e-n,i=t*(1-r),a=t*(1-o*r),u=t*(1-(1-o)*r);switch(n%6){case 0:return{r:t,g:u,b:i};case 1:return{r:a,g:t,b:i};case 2:return{r:i,g:t,b:u};case 3:return{r:i,g:a,b:t};case 4:return{r:u,g:i,b:t};case 5:default:return{r:t,g:i,b:a}}}(Math.random(),1,1);return e.r*=.15,e.g*=.15,e.b*=.15,e}function I(e){var r=window.devicePixelRatio||1;return Math.floor(e*r)}function N(e){if(!e)return 0;for(var r=0,t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r}var B=function(e,r){return e+(r-e+1)*Math.random()|0};var C=function(e,r){var t=e.gl,n=e.ext,o=r.createFrameBufferObject;function i(e){var r=t.drawingBufferWidth/t.drawingBufferHeight;r<1&&(r=1/r);var n=Math.round(e),o=Math.round(e*r);return t.drawingBufferWidth>t.drawingBufferHeight?{width:o,height:n}:{width:n,height:o}}return{captureScreenshot:function(e,r){var a=i(r.resolution),u=o(a.width,a.height,n.formatRGBA.internalFormat,n.formatRGBA.format,n.halfFloatTexType,t.NEAREST);e(u);var l,c,s,f=function(e,r,t){var n=document.createElement("canvas"),o=n.getContext("2d");if(!o)throw new Error("Could not get canvas 2d context");n.width=r,n.height=t;var i=o.createImageData(r,t);return i.data.set(e),o.putImageData(i,0,0),n}(function(e,r,t){for(var n=new Uint8Array(e.length),o=0,i=t-1;i>=0;i--)for(var a=0;a<r;a++){var u=i*r*4+4*a;n[u+0]=255*U(e[o+0]),n[u+1]=255*U(e[o+1]),n[u+2]=255*U(e[o+2]),n[u+3]=255*U(e[o+3]),o+=4}return n}(function(e){t.bindFramebuffer(t.FRAMEBUFFER,e.frameBuffer);var r=e.width*e.height*4,n=new Float32Array(r);return t.readPixels(0,0,e.width,e.height,t.RGBA,t.FLOAT,n),n}(u),u.width,u.height),u.width,u.height).toDataURL();l="fluid.png",c=f,(s=document.createElement("a")).download=l,s.href=c,document.body.append(s),s.click(),s.remove(),URL.revokeObjectURL(f)},getResolution:i}},k=function(){function e(e,r,t){this.factory=e,this.vertexShader=r,this.fragmentShaderSource=t,this.programs=[],this.activeProgram=null,this.uniforms={}}var r=e.prototype;return r.setKeywords=function(e){for(var r=0,t=0;t<e.length;t++)r+=N(e[t]);var n=this.programs[r];if(null==n){var o=this.factory.compileShader(this.factory.gl.FRAGMENT_SHADER,this.fragmentShaderSource,e);n=this.factory.createProgram(this.vertexShader,o),this.programs[r]=n}n!==this.activeProgram&&(this.uniforms=this.factory.getUniforms(n),this.activeProgram=n)},r.bind=function(){this.factory.gl.useProgram(this.activeProgram)},e}(),G=function(){function e(e,r,t){this.factory=e,this.uniforms={},this.program=this.factory.createProgram(r,t),this.uniforms=this.factory.getUniforms(this.program)}return e.prototype.bind=function(){this.factory.gl.useProgram(this.program)},e}();function X(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return z(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return z(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function z(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var V=function(e,r,t){var n=document.createElement("canvas");n.style.width=t.width,n.style.height=t.height,e.append(n),le();var o=function(){this.id=-1,this.texcoordX=0,this.texcoordY=0,this.prevTexcoordX=0,this.prevTexcoordY=0,this.deltaX=0,this.deltaY=0,this.down=!1,this.moved=!1,this.color={r:30,g:0,b:300},this.p={r:0,g:0,b:0}},i=[],a=[];i.push(new o),console.log("runFluidSimulator - 01 getWebGLSystem",{});var u=function(e){var r={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1},t=e.getContext("webgl2",r);if(t){var n=t;n.getExtension("EXT_color_buffer_float");var o=n.getExtension("OES_texture_float_linear"),i=n.HALF_FLOAT;return n.clearColor(0,0,0,1),{gl:n,ext:{formatRGBA:M(n,n.RGBA16F,n.RGBA,i),formatRG:M(n,n.RG16F,n.RG,i),formatR:M(n,n.R16F,n.RED,i),halfFloatTexType:i,supportLinearFiltering:o}}}var a=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);if(!a)return null;var u=a,l=u.getExtension("OES_texture_half_float"),c=u.getExtension("OES_texture_half_float_linear");u.clearColor(0,0,0,1);var s=l.HALF_FLOAT_OES;return{gl:u,ext:{formatRGBA:M(u,u.RGBA,u.RGBA,s),formatRG:M(u,u.RGBA,u.RGBA,s),formatR:M(u,u.RGBA,u.RGBA,s),halfFloatTexType:s,supportLinearFiltering:c}}}(n);if(!u)return null;var l=u.gl,c=u.ext;console.log("runFluidSimulator - 01B getWebGLSystem",{gl:l,ext:c});var s=function(e){var r=e.gl;function t(e,t,n,o,i,a){r.activeTexture(r.TEXTURE0);var u=r.createTexture();if(!u)throw new Error("texture not created");r.bindTexture(r.TEXTURE_2D,u),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,n,e,t,0,o,i,null);var l=r.createFramebuffer();if(!l)throw new Error("frame buffer not created");return r.bindFramebuffer(r.FRAMEBUFFER,l),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,u,0),r.viewport(0,0,e,t),r.clear(r.COLOR_BUFFER_BIT),{texture:u,frameBuffer:l,width:e,height:t,texelSizeX:1/e,texelSizeY:1/t,attach:function(e){return r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,u),e}}}return{createFrameBufferObject:t,createDoubleFrameBufferObject:function(e,r,n,o,i,a){var u=t(e,r,n,o,i,a),l=t(e,r,n,o,i,a);return{width:e,height:r,texelSizeX:u.texelSizeX,texelSizeY:u.texelSizeY,get read(){return u},set read(e){u=e},get write(){return l},set write(e){l=e},swap:function(){var e=u;u=l,l=e}}}}}(u),f=s.createFrameBufferObject,d=s.createDoubleFrameBufferObject,v=C(u,s),m=v.captureScreenshot,h=v.getResolution,p=function(e){var r=e.gl,t=e.ext;return{gl:r,ext:t,compileShader:function(e,t,n){t=function(e,r){if(!r)return e;var t="";return r.forEach((function(e){t+="#define "+e+"\n"})),t+e}(t,n);var o=r.createShader(e);if(!o)throw new Error("shader could not be created");return r.shaderSource(o,t),r.compileShader(o),r.getShaderParameter(o,r.COMPILE_STATUS)||console.trace(r.getShaderInfoLog(o)),o},createProgram:function(e,t){var n=r.createProgram();if(!n)throw new Error("program could not be created");return r.attachShader(n,e),r.attachShader(n,t),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||console.trace(r.getProgramInfoLog(n)),n},getUniforms:function(e){for(var t={},n=r.getProgramParameter(e,r.ACTIVE_UNIFORMS),o=0;o<n;o++){var i,a=null===(i=r.getActiveUniform(e,o))||void 0===i?void 0:i.name;t[a]=r.getUniformLocation(e,a)}return t}}}(u),g={SIM_RESOLUTION:128,DYE_RESOLUTION:1024,CAPTURE_RESOLUTION:512,DENSITY_DISSIPATION:1,VELOCITY_DISSIPATION:.2,PRESSURE:.8,PRESSURE_ITERATIONS:20,CURL:30,SPLAT_RADIUS:.25,SPLAT_FORCE:6e3,SHADING:!0,COLORFUL:!0,COLOR_UPDATE_SPEED:10,PAUSED:!1,BACK_COLOR:{r:0,g:0,b:0},TRANSPARENT:!1,BLOOM:!0,BLOOM_ITERATIONS:8,BLOOM_RESOLUTION:256,BLOOM_INTENSITY:.8,BLOOM_THRESHOLD:.6,BLOOM_SOFT_KNEE:.7,SUNRAYS:!0,SUNRAYS_RESOLUTION:196,SUNRAYS_WEIGHT:1};O()&&(g.DYE_RESOLUTION=512),c.supportLinearFiltering||(g.DYE_RESOLUTION=512,g.SHADING=!1,g.BLOOM=!1,g.SUNRAYS=!1),console.log("runFluidSimulator - 02 startGUI",{}),function(e){var r,t,n,o,i=e.config,a=e.splatStack,u=e.initFramebuffers,l=e.updateKeywords,c=e.captureScreenshot;if("undefined"!=typeof dat){var s=new dat.GUI({width:300});s.add(i,"DYE_RESOLUTION",{high:1024,medium:512,low:256,"very low":128}).name("quality").onFinishChange(u),s.add(i,"SIM_RESOLUTION",{32:32,64:64,128:128,256:256}).name("sim resolution").onFinishChange(u),s.add(i,"DENSITY_DISSIPATION",0,4).name("density diffusion"),s.add(i,"VELOCITY_DISSIPATION",0,4).name("velocity diffusion"),s.add(i,"PRESSURE",0,1).name("pressure"),s.add(i,"CURL",0,50).name("vorticity").step(1),s.add(i,"SPLAT_RADIUS",.01,1).name("splat radius"),s.add(i,"SHADING").name("shading").onFinishChange(l),s.add(i,"COLORFUL").name("colorful"),s.add(i,"PAUSED").name("paused").listen(),s.add({fun:function(){a.push(B(5,25))}},"fun").name("Random splats");var f=s.addFolder("Bloom");f.add(i,"BLOOM").name("enabled").onFinishChange(l),f.add(i,"BLOOM_INTENSITY",.1,2).name("intensity"),f.add(i,"BLOOM_THRESHOLD",0,1).name("threshold");var d=s.addFolder("Sunrays");d.add(i,"SUNRAYS").name("enabled").onFinishChange(l),d.add(i,"SUNRAYS_WEIGHT",.3,1).name("weight");var v=s.addFolder("Capture");v.addColor(i,"BACK_COLOR").name("background color"),v.add(i,"TRANSPARENT").name("transparent"),v.add({fun:c},"fun").name("take screenshot");var m=s.add({fun:function(){window.open("https://github.com/PavelDoGreat/WebGL-Fluid-Simulation"),Object(L.ga)("send","event","link button","github")}},"fun").name("Github");m.__li.className="cr function bigFont",m.__li.style.borderLeft="3px solid #8C8C8C";var h=document.createElement("span");null===(r=m.domElement.parentElement)||void 0===r||r.append(h),h.className="icon github";var p=s.add({fun:function(){Object(L.ga)("send","event","link button","twitter"),window.open("https://twitter.com/PavelDoGreat")}},"fun").name("Twitter");p.__li.className="cr function bigFont",p.__li.style.borderLeft="3px solid #8C8C8C";var g=document.createElement("span");null===(t=p.domElement.parentElement)||void 0===t||t.append(g),g.className="icon twitter";var x=s.add({fun:function(){Object(L.ga)("send","event","link button","discord"),window.open("https://discordapp.com/invite/CeqZDDE")}},"fun").name("Discord");x.__li.className="cr function bigFont",x.__li.style.borderLeft="3px solid #8C8C8C";var S=document.createElement("span");null===(n=x.domElement.parentElement)||void 0===n||n.append(S),S.className="icon discord";var T=s.add({fun:function(){Object(L.ga)("send","event","link button","app"),window.open("http://onelink.to/5b58bn")}},"fun").name("Check out mobile app");T.__li.className="cr function appBigFont",T.__li.style.borderLeft="3px solid #00FF7F";var y=document.createElement("span");null===(o=T.domElement.parentElement)||void 0===o||o.append(y),y.className="icon app",O()&&s.close()}}({config:g,splatStack:a,initFramebuffers:ie,updateKeywords:ae,captureScreenshot:function(){return m(se,{resolution:g.CAPTURE_RESOLUTION})}}),console.log("runFluidSimulator - 03 ditheringTexture",{url:r+"/LDR_LLL1_0.png"});var x=function(e){var r=l.createTexture();l.bindTexture(l.TEXTURE_2D,r),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texImage2D(l.TEXTURE_2D,0,l.RGB,1,1,0,l.RGB,l.UNSIGNED_BYTE,new Uint8Array([255,255,255]));var t={texture:r,width:1,height:1,attach:function(e){return l.activeTexture(l.TEXTURE0+e),l.bindTexture(l.TEXTURE_2D,r),e}},n=new Image;return n.addEventListener("load",(function(){t.width=n.width,t.height=n.height,l.bindTexture(l.TEXTURE_2D,r),l.texImage2D(l.TEXTURE_2D,0,l.RGB,l.RGB,l.UNSIGNED_BYTE,n)})),n.src=e,t}(r+"/LDR_LLL1_0.png");console.log("runFluidSimulator - 04 createShaders",{});var S,T,y,E,b,R,D,w,A=function(e){var r=e.gl,t=e.ext,n=e.compileShader;return{baseVertexShader:n(r.VERTEX_SHADER,"\n    precision highp float;\n\n    attribute vec2 aPosition;\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform vec2 texelSize;\n\n    void main () {\n        vUv = aPosition * 0.5 + 0.5;\n        vL = vUv - vec2(texelSize.x, 0.0);\n        vR = vUv + vec2(texelSize.x, 0.0);\n        vT = vUv + vec2(0.0, texelSize.y);\n        vB = vUv - vec2(0.0, texelSize.y);\n        gl_Position = vec4(aPosition, 0.0, 1.0);\n    }\n"),blurVertexShader:n(r.VERTEX_SHADER,"\n    precision highp float;\n\n    attribute vec2 aPosition;\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    uniform vec2 texelSize;\n\n    void main () {\n        vUv = aPosition * 0.5 + 0.5;\n        float offset = 1.33333333;\n        vL = vUv - texelSize * offset;\n        vR = vUv + texelSize * offset;\n        gl_Position = vec4(aPosition, 0.0, 1.0);\n    }\n"),blurShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    uniform sampler2D uTexture;\n\n    void main () {\n        vec4 sum = texture2D(uTexture, vUv) * 0.29411764;\n        sum += texture2D(uTexture, vL) * 0.35294117;\n        sum += texture2D(uTexture, vR) * 0.35294117;\n        gl_FragColor = sum;\n    }\n"),copyShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    uniform sampler2D uTexture;\n\n    void main () {\n        gl_FragColor = texture2D(uTexture, vUv);\n    }\n"),clearShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float value;\n\n    void main () {\n        gl_FragColor = value * texture2D(uTexture, vUv);\n    }\n"),colorShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n\n    uniform vec4 color;\n\n    void main () {\n        gl_FragColor = color;\n    }\n"),checkerboardShader:n(r.FRAGMENT_SHADER,"\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float aspectRatio;\n\n    #define SCALE 25.0\n\n    void main () {\n        vec2 uv = floor(vUv * SCALE * vec2(aspectRatio, 1.0));\n        float v = mod(uv.x + uv.y, 2.0);\n        v = v * 0.1 + 0.8;\n        gl_FragColor = vec4(vec3(v), 1.0);\n    }\n"),displayShaderSource:"\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uTexture;\n    uniform sampler2D uBloom;\n    uniform sampler2D uSunrays;\n    uniform sampler2D uDithering;\n    uniform vec2 ditherScale;\n    uniform vec2 texelSize;\n\n    vec3 linearToGamma (vec3 color) {\n        color = max(color, vec3(0));\n        return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));\n    }\n\n    void main () {\n        vec3 c = texture2D(uTexture, vUv).rgb;\n\n    #ifdef SHADING\n        vec3 lc = texture2D(uTexture, vL).rgb;\n        vec3 rc = texture2D(uTexture, vR).rgb;\n        vec3 tc = texture2D(uTexture, vT).rgb;\n        vec3 bc = texture2D(uTexture, vB).rgb;\n\n        float dx = length(rc) - length(lc);\n        float dy = length(tc) - length(bc);\n\n        vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n        vec3 l = vec3(0.0, 0.0, 1.0);\n\n        float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n        c *= diffuse;\n    #endif\n\n    #ifdef BLOOM\n        vec3 bloom = texture2D(uBloom, vUv).rgb;\n    #endif\n\n    #ifdef SUNRAYS\n        float sunrays = texture2D(uSunrays, vUv).r;\n        c *= sunrays;\n    #ifdef BLOOM\n        bloom *= sunrays;\n    #endif\n    #endif\n\n    #ifdef BLOOM\n        float noise = texture2D(uDithering, vUv * ditherScale).r;\n        noise = noise * 2.0 - 1.0;\n        bloom += noise / 255.0;\n        bloom = linearToGamma(bloom);\n        c += bloom;\n    #endif\n\n        float a = max(c.r, max(c.g, c.b));\n        gl_FragColor = vec4(c, a);\n    }\n",bloomPrefilterShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform vec3 curve;\n    uniform float threshold;\n\n    void main () {\n        vec3 c = texture2D(uTexture, vUv).rgb;\n        float br = max(c.r, max(c.g, c.b));\n        float rq = clamp(br - curve.x, 0.0, curve.y);\n        rq = curve.z * rq * rq;\n        c *= max(rq, br - threshold) / max(br, 0.0001);\n        gl_FragColor = vec4(c, 0.0);\n    }\n"),bloomBlurShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uTexture;\n\n    void main () {\n        vec4 sum = vec4(0.0);\n        sum += texture2D(uTexture, vL);\n        sum += texture2D(uTexture, vR);\n        sum += texture2D(uTexture, vT);\n        sum += texture2D(uTexture, vB);\n        sum *= 0.25;\n        gl_FragColor = sum;\n    }\n"),bloomFinalShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uTexture;\n    uniform float intensity;\n\n    void main () {\n        vec4 sum = vec4(0.0);\n        sum += texture2D(uTexture, vL);\n        sum += texture2D(uTexture, vR);\n        sum += texture2D(uTexture, vT);\n        sum += texture2D(uTexture, vB);\n        sum *= 0.25;\n        gl_FragColor = sum * intensity;\n    }\n"),sunraysMaskShader:n(r.FRAGMENT_SHADER,"\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n\n    void main () {\n        vec4 c = texture2D(uTexture, vUv);\n        float br = max(c.r, max(c.g, c.b));\n        c.a = 1.0 - min(max(br * 20.0, 0.0), 0.8);\n        gl_FragColor = c;\n    }\n"),sunraysShader:n(r.FRAGMENT_SHADER,"\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float weight;\n\n    #define ITERATIONS 16\n\n    void main () {\n        float Density = 0.3;\n        float Decay = 0.95;\n        float Exposure = 0.7;\n\n        vec2 coord = vUv;\n        vec2 dir = vUv - 0.5;\n\n        dir *= 1.0 / float(ITERATIONS) * Density;\n        float illuminationDecay = 1.0;\n\n        float color = texture2D(uTexture, vUv).a;\n\n        for (int i = 0; i < ITERATIONS; i++)\n        {\n            coord -= dir;\n            float col = texture2D(uTexture, coord).a;\n            color += col * illuminationDecay * weight;\n            illuminationDecay *= Decay;\n        }\n\n        gl_FragColor = vec4(color * Exposure, 0.0, 0.0, 1.0);\n    }\n"),splatShader:n(r.FRAGMENT_SHADER,"\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTarget;\n    uniform float aspectRatio;\n    uniform vec3 color;\n    uniform vec2 point;\n    uniform float radius;\n\n    void main () {\n        vec2 p = vUv - point.xy;\n        p.x *= aspectRatio;\n        vec3 splat = exp(-dot(p, p) / radius) * color;\n        vec3 base = texture2D(uTarget, vUv).xyz;\n        gl_FragColor = vec4(base + splat, 1.0);\n    }\n"),advectionShader:n(r.FRAGMENT_SHADER,"\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uSource;\n    uniform vec2 texelSize;\n    uniform vec2 dyeTexelSize;\n    uniform float dt;\n    uniform float dissipation;\n\n    vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n        vec2 st = uv / tsize - 0.5;\n\n        vec2 iuv = floor(st);\n        vec2 fuv = fract(st);\n\n        vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n        vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n        vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n        vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n\n        return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    }\n\n    void main () {\n    #ifdef MANUAL_FILTERING\n        vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n        vec4 result = bilerp(uSource, coord, dyeTexelSize);\n    #else\n        vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n        vec4 result = texture2D(uSource, coord);\n    #endif\n        float decay = 1.0 + dissipation * dt;\n        gl_FragColor = result / decay;\n    }",t.supportLinearFiltering?null:["MANUAL_FILTERING"]),divergenceShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uVelocity, vL).x;\n        float R = texture2D(uVelocity, vR).x;\n        float T = texture2D(uVelocity, vT).y;\n        float B = texture2D(uVelocity, vB).y;\n\n        vec2 C = texture2D(uVelocity, vUv).xy;\n        if (vL.x < 0.0) { L = -C.x; }\n        if (vR.x > 1.0) { R = -C.x; }\n        if (vT.y > 1.0) { T = -C.y; }\n        if (vB.y < 0.0) { B = -C.y; }\n\n        float div = 0.5 * (R - L + T - B);\n        gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n    }\n"),curlShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uVelocity, vL).y;\n        float R = texture2D(uVelocity, vR).y;\n        float T = texture2D(uVelocity, vT).x;\n        float B = texture2D(uVelocity, vB).x;\n        float vorticity = R - L - T + B;\n        gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n    }\n"),vorticityShader:n(r.FRAGMENT_SHADER,"\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uCurl;\n    uniform float curl;\n    uniform float dt;\n\n    void main () {\n        float L = texture2D(uCurl, vL).x;\n        float R = texture2D(uCurl, vR).x;\n        float T = texture2D(uCurl, vT).x;\n        float B = texture2D(uCurl, vB).x;\n        float C = texture2D(uCurl, vUv).x;\n\n        vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n        force /= length(force) + 0.0001;\n        force *= curl * C;\n        force.y *= -1.0;\n\n        vec2 velocity = texture2D(uVelocity, vUv).xy;\n        velocity += force * dt;\n        velocity = min(max(velocity, -1000.0), 1000.0);\n        gl_FragColor = vec4(velocity, 0.0, 1.0);\n    }\n"),pressureShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uPressure;\n    uniform sampler2D uDivergence;\n\n    void main () {\n        float L = texture2D(uPressure, vL).x;\n        float R = texture2D(uPressure, vR).x;\n        float T = texture2D(uPressure, vT).x;\n        float B = texture2D(uPressure, vB).x;\n        float C = texture2D(uPressure, vUv).x;\n        float divergence = texture2D(uDivergence, vUv).x;\n        float pressure = (L + R + B + T - divergence) * 0.25;\n        gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n    }\n"),gradientSubtractShader:n(r.FRAGMENT_SHADER,"\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uPressure;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uPressure, vL).x;\n        float R = texture2D(uPressure, vR).x;\n        float T = texture2D(uPressure, vT).x;\n        float B = texture2D(uPressure, vB).x;\n        vec2 velocity = texture2D(uVelocity, vUv).xy;\n        velocity.xy -= vec2(R - L, T - B);\n        gl_FragColor = vec4(velocity, 0.0, 1.0);\n    }\n")}}(p),_=new G(p,A.blurVertexShader,A.blurShader),F=new G(p,A.baseVertexShader,A.copyShader),U=new G(p,A.baseVertexShader,A.clearShader),N=new G(p,A.baseVertexShader,A.colorShader),z=new G(p,A.baseVertexShader,A.checkerboardShader),V=new G(p,A.baseVertexShader,A.bloomPrefilterShader),Y=new G(p,A.baseVertexShader,A.bloomBlurShader),H=new G(p,A.baseVertexShader,A.bloomFinalShader),j=new G(p,A.baseVertexShader,A.sunraysMaskShader),W=new G(p,A.baseVertexShader,A.sunraysShader),q=new G(p,A.baseVertexShader,A.splatShader),K=new G(p,A.baseVertexShader,A.advectionShader),Q=new G(p,A.baseVertexShader,A.divergenceShader),Z=new G(p,A.baseVertexShader,A.curlShader),$=new G(p,A.baseVertexShader,A.vorticityShader),J=new G(p,A.baseVertexShader,A.pressureShader),ee=new G(p,A.baseVertexShader,A.gradientSubtractShader),re=new k(p,A.baseVertexShader,A.displayShaderSource),te=function(e){var r=e.gl;return{blit:(r.bindBuffer(r.ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),r.STATIC_DRAW),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(0),function(e,t){void 0===t&&(t=!1),null==e?(r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindFramebuffer(r.FRAMEBUFFER,null)):(r.viewport(0,0,e.width,e.height),r.bindFramebuffer(r.FRAMEBUFFER,e.frameBuffer)),t&&(r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT)),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)})}}(u).blit,ne=[];function oe(e,r,t,n,o,i,a){return e.width===r&&e.height===t||(e.read=function(e,r,t,n,o,i,a){var u=f(r,t,n,o,i,a);return F.bind(),l.uniform1i(F.uniforms.uTexture,e.attach(0)),te(u),u}(e.read,r,t,n,o,i,a),e.write=f(r,t,n,o,i,a),e.width=r,e.height=t,e.texelSizeX=1/r,e.texelSizeY=1/t),e}function ie(){var e=h(g.SIM_RESOLUTION),r=h(g.DYE_RESOLUTION),t=c.halfFloatTexType,n=c.formatRGBA,o=c.formatRG,i=c.formatR,a=c.supportLinearFiltering?l.LINEAR:l.NEAREST;l.disable(l.BLEND),S=null==S?d(r.width,r.height,n.internalFormat,n.format,t,a):oe(S,r.width,r.height,n.internalFormat,n.format,t,a),T=null==T?d(e.width,e.height,o.internalFormat,o.format,t,a):oe(T,e.width,e.height,o.internalFormat,o.format,t,a),y=f(e.width,e.height,i.internalFormat,i.format,t,l.NEAREST),E=f(e.width,e.height,i.internalFormat,i.format,t,l.NEAREST),b=d(e.width,e.height,i.internalFormat,i.format,t,l.NEAREST),function(){var e=h(g.BLOOM_RESOLUTION),r=c.halfFloatTexType,t=c.formatRGBA,n=c.supportLinearFiltering?l.LINEAR:l.NEAREST;R=f(e.width,e.height,t.internalFormat,t.format,r,n),ne.length=0;for(var o=0;o<g.BLOOM_ITERATIONS;o++){var i=e.width>>o+1,a=e.height>>o+1;if(i<2||a<2)break;var u=f(i,a,t.internalFormat,t.format,r,n);ne.push(u)}}(),function(){var e=h(g.SUNRAYS_RESOLUTION),r=c.halfFloatTexType,t=c.formatR,n=c.supportLinearFiltering?l.LINEAR:l.NEAREST;D=f(e.width,e.height,t.internalFormat,t.format,r,n),w=f(e.width,e.height,t.internalFormat,t.format,r,n)}()}function ae(){var e=[];g.SHADING&&e.push("SHADING"),g.BLOOM&&e.push("BLOOM"),g.SUNRAYS&&e.push("SUNRAYS"),re.setKeywords(e)}console.log("runFluidSimulator - 05 updateKeywords",{}),ae(),console.log("runFluidSimulator - 06 initFramebuffers",{}),ie(),console.log("runFluidSimulator - 07 multipleSplats",{}),fe(B(5,25));var ue=Date.now();function le(){var e=I(n.clientWidth),r=I(n.clientHeight);return(n.width!==e||n.height!==r)&&(n.width=e,n.height=r,!0)}var ce=0;function se(e){var r,t,o,i;g.BLOOM&&function(e,r){if(ne.length<2)return;var t=r;l.disable(l.BLEND),V.bind();var n=g.BLOOM_THRESHOLD*g.BLOOM_SOFT_KNEE+1e-4,o=g.BLOOM_THRESHOLD-n,i=2*n,a=.25/n;l.uniform3f(V.uniforms.curve,o,i,a),l.uniform1f(V.uniforms.threshold,g.BLOOM_THRESHOLD),l.uniform1i(V.uniforms.uTexture,e.attach(0)),te(t),Y.bind();for(var u,c=X(ne);!(u=c()).done;){var s=u.value;l.uniform2f(Y.uniforms.texelSize,t.texelSizeX,t.texelSizeY),l.uniform1i(Y.uniforms.uTexture,t.attach(0)),te(s),t=s}l.blendFunc(l.ONE,l.ONE),l.enable(l.BLEND);for(var f=ne.length-2;f>=0;f--){var d=ne[f];l.uniform2f(Y.uniforms.texelSize,t.texelSizeX,t.texelSizeY),l.uniform1i(Y.uniforms.uTexture,t.attach(0)),l.viewport(0,0,d.width,d.height),te(d),t=d}l.disable(l.BLEND),H.bind(),l.uniform2f(H.uniforms.texelSize,t.texelSizeX,t.texelSizeY),l.uniform1i(H.uniforms.uTexture,t.attach(0)),l.uniform1f(H.uniforms.intensity,g.BLOOM_INTENSITY),te(r)}(S.read,R),g.SUNRAYS&&(r=S.read,t=S.write,o=D,l.disable(l.BLEND),j.bind(),l.uniform1i(j.uniforms.uTexture,r.attach(0)),te(t),W.bind(),l.uniform1f(W.uniforms.weight,g.SUNRAYS_WEIGHT),l.uniform1i(W.uniforms.uTexture,t.attach(0)),te(o),function(e,r,t){_.bind();for(var n=0;n<t;n++)l.uniform2f(_.uniforms.texelSize,e.texelSizeX,0),l.uniform1i(_.uniforms.uTexture,e.attach(0)),te(r),l.uniform2f(_.uniforms.texelSize,0,e.texelSizeY),l.uniform1i(_.uniforms.uTexture,r.attach(0)),te(e)}(D,w,1)),null!=e&&g.TRANSPARENT?l.disable(l.BLEND):(l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),l.enable(l.BLEND)),g.TRANSPARENT||function(e,r){N.bind(),l.uniform4f(N.uniforms.color,r.r,r.g,r.b,1),te(e)}(e,{r:(i=g.BACK_COLOR).r/255,g:i.g/255,b:i.b/255}),null==e&&g.TRANSPARENT&&function(e){z.bind(),l.uniform1f(z.uniforms.aspectRatio,n.width/n.height),te(e)}(e),function(e){var r=null==e?l.drawingBufferWidth:e.width,t=null==e?l.drawingBufferHeight:e.height;re.bind(),g.SHADING&&l.uniform2f(re.uniforms.texelSize,1/r,1/t);if(l.uniform1i(re.uniforms.uTexture,S.read.attach(0)),g.BLOOM){l.uniform1i(re.uniforms.uBloom,R.attach(1)),l.uniform1i(re.uniforms.uDithering,x.attach(2));var n=function(e,r,t){return{x:r/e.width,y:t/e.height}}(x,r,t);l.uniform2f(re.uniforms.ditherScale,n.x,n.y)}g.SUNRAYS&&l.uniform1i(re.uniforms.uSunrays,D.attach(3));te(e)}(e)}function fe(e){for(var r=0;r<e;r++){var t=P();t.r*=10,t.g*=10,t.b*=10,de(Math.random(),Math.random(),1e3*(Math.random()-.5),1e3*(Math.random()-.5),t)}}function de(e,r,t,o,i){console.log("splat",{x:e,y:r,dx:t,dy:o,color:i}),q.bind(),l.uniform1i(q.uniforms.uTarget,T.read.attach(0)),l.uniform1f(q.uniforms.aspectRatio,n.width/n.height),l.uniform2f(q.uniforms.point,e,r),l.uniform3f(q.uniforms.color,t,o,0),l.uniform1f(q.uniforms.radius,function(e){var r=n.width/n.height;r>1&&(e*=r);return e}(g.SPLAT_RADIUS/100)),te(T.write),T.swap(),l.uniform1i(q.uniforms.uTarget,S.read.attach(0)),l.uniform3f(q.uniforms.color,i.r,i.g,i.b),te(S.write),S.swap()}function ve(e,r,t,o){e.id=r,e.down=!0,e.moved=!1,e.texcoordX=t/n.width,e.texcoordY=1-o/n.height,e.prevTexcoordX=e.texcoordX,e.prevTexcoordY=e.texcoordY,e.deltaX=0,e.deltaY=0,e.color=P()}function me(e,r,t){e.prevTexcoordX=e.texcoordX,e.prevTexcoordY=e.texcoordY,e.texcoordX=r/n.width,e.texcoordY=1-t/n.height,e.deltaX=function(e,r){var t=r.width/r.height;return t<1&&(e*=t),e}(e.texcoordX-e.prevTexcoordX,n),e.deltaY=function(e,r){var t=r.width/r.height;return t>1&&(e/=t),e}(e.texcoordY-e.prevTexcoordY,n),e.moved=Math.abs(e.deltaX)>0||Math.abs(e.deltaY)>0}function he(e){e.down=!1}return console.log("runFluidSimulator - 08 addEventListeners",{}),n.addEventListener("mousedown",(function(e){var r=I(e.offsetX),t=I(e.offsetY),n=i.find((function(e){return-1===e.id}));null==n&&(n=new o),ve(n,-1,r,t)})),n.addEventListener("mousemove",(function(e){var r=i[0];r.down&&me(r,I(e.offsetX),I(e.offsetY))})),window.addEventListener("mouseup",(function(){he(i[0])})),n.addEventListener("touchstart",(function(e){e.preventDefault();for(var r=e.targetTouches;r.length>=i.length;)i.push(new o);for(var t,n=X(r.entries());!(t=n()).done;){var a=t.value,u=a[0],l=a[1],c=I(l.pageX),s=I(l.pageY);ve(i[u+1],l.identifier,c,s)}})),n.addEventListener("touchmove",(function(e){e.preventDefault();for(var r,t=X(e.targetTouches.entries());!(r=t()).done;){var n=r.value,o=n[0],a=n[1],u=i[o+1];if(u.down)me(u,I(a.pageX),I(a.pageY))}}),!1),window.addEventListener("touchend",(function(e){for(var r,t=function(){var e=r.value,t=i.find((function(r){return r.id===e.identifier}));if(null==t)return"continue";he(t)},n=X(e.changedTouches);!(r=n()).done;)t()})),window.addEventListener("keydown",(function(e){"KeyP"===e.code&&(g.PAUSED=!g.PAUSED)," "===e.key&&a.push(B(5,25))})),console.log("runFluidSimulator - 09 update Start Loop",{}),function e(){var r=function(){var e=Date.now(),r=(e-ue)/1e3;return r=Math.min(r,.016666),ue=e,r}();le()&&ie(),function(e){if(!g.COLORFUL)return;(ce+=e*g.COLOR_UPDATE_SPEED)>=1&&(r=ce,ce=0===(n=1-(t=0))?t:(r-t)%n+t,i.forEach((function(e){e.color=P()})));var r,t,n}(r),function(){var e=a.pop();null!=e&&(console.log("applyInputs: lastSplat",{lastSplat:e,splatStack:a,pointers:i}),fe(e));i.forEach((function(e){var r,t,n;e.moved&&(e.moved=!1,t=(r=e).deltaX*g.SPLAT_FORCE,n=r.deltaY*g.SPLAT_FORCE,de(r.texcoordX,r.texcoordY,t,n,r.color))}))}(),g.PAUSED||function(e){l.disable(l.BLEND),Z.bind(),l.uniform2f(Z.uniforms.texelSize,T.texelSizeX,T.texelSizeY),l.uniform1i(Z.uniforms.uVelocity,T.read.attach(0)),te(E),$.bind(),l.uniform2f($.uniforms.texelSize,T.texelSizeX,T.texelSizeY),l.uniform1i($.uniforms.uVelocity,T.read.attach(0)),l.uniform1i($.uniforms.uCurl,E.attach(1)),l.uniform1f($.uniforms.curl,g.CURL),l.uniform1f($.uniforms.dt,e),te(T.write),T.swap(),Q.bind(),l.uniform2f(Q.uniforms.texelSize,T.texelSizeX,T.texelSizeY),l.uniform1i(Q.uniforms.uVelocity,T.read.attach(0)),te(y),U.bind(),l.uniform1i(U.uniforms.uTexture,b.read.attach(0)),l.uniform1f(U.uniforms.value,g.PRESSURE),te(b.write),b.swap(),J.bind(),l.uniform2f(J.uniforms.texelSize,T.texelSizeX,T.texelSizeY),l.uniform1i(J.uniforms.uDivergence,y.attach(0));for(var r=0;r<g.PRESSURE_ITERATIONS;r++)l.uniform1i(J.uniforms.uPressure,b.read.attach(1)),te(b.write),b.swap();ee.bind(),l.uniform2f(ee.uniforms.texelSize,T.texelSizeX,T.texelSizeY),l.uniform1i(ee.uniforms.uPressure,b.read.attach(0)),l.uniform1i(ee.uniforms.uVelocity,T.read.attach(1)),te(T.write),T.swap(),K.bind(),l.uniform2f(K.uniforms.texelSize,T.texelSizeX,T.texelSizeY),c.supportLinearFiltering||l.uniform2f(K.uniforms.dyeTexelSize,T.texelSizeX,T.texelSizeY);var t=T.read.attach(0);l.uniform1i(K.uniforms.uVelocity,t),l.uniform1i(K.uniforms.uSource,t),l.uniform1f(K.uniforms.dt,e),l.uniform1f(K.uniforms.dissipation,g.VELOCITY_DISSIPATION),te(T.write),T.swap(),c.supportLinearFiltering||l.uniform2f(K.uniforms.dyeTexelSize,S.texelSizeX,S.texelSizeY);l.uniform1i(K.uniforms.uVelocity,T.read.attach(0)),l.uniform1i(K.uniforms.uSource,S.read.attach(1)),l.uniform1f(K.uniforms.dissipation,g.DENSITY_DISSIPATION),te(S.write),S.swap()}(r),se(null),requestAnimationFrame(e)}(),console.log("runFluidSimulator - 10 DONE",{}),{close:function(){console.warn("Refresh the browser - for real")}}},Y={key:"art-exampleFluidSimulator",title:"Fluid Simulator",description:"2017 \n\nThis is included as an amazing gpu shader.\n    \nFrom: https://paveldogreat.github.io/WebGL-Fluid-Simulation/",artist:"Pavel Dobryakov",getTokenDescription:function(e){return null},renderArt:function(e,r){var t=V(e,"/content/art/artwork/example-PavelDoGreat-fluid-simulation/src",{width:"600px",height:"600px"});return{remove:function(){return null==t?void 0:t.close()}}}},H=function(e){var r=[Y,F,_,w,S,m,f,d],t=Object(n.useRef)(r[0]),l=Object(n.useState)(!0),c=l[0],s=l[1],v=Object(n.useState)("0"),p=v[0],g=v[1],x=Object(n.useState)(null),T=x[0],y=x[1],E=Object(n.useState)(null),b=E[0],R=E[1],D=Object(a.b)(250).debounce;Object(n.useEffect)((function(){var e,n,o=document.location.search.substr(1).split("&"),i=null===(e=o.find((function(e){return e.startsWith("key")})))||void 0===e?void 0:e.split("=")[1];if(i){var a=r.find((function(e){return e.key===i}));if(a){t.current=a;var u=null===(n=o.find((function(e){return e.startsWith("tokenId")})))||void 0===n?void 0:n.split("=")[1];s(!1),A(""+(u||p))}else A("0")}else A("0")}),[document.location.search]);var A=function(e){console.log("changeTokenId",{value:e}),g(e),D((function(){console.log("changeTokenId debounce",{value:e}),R(t.current.getTokenDescription(e));var r=t.current,n=r.renderArt,i=r.ArtComponent;n?y({kind:"div",renderArt:function(r){return n(r,e)},openSea:t.current.openSea}):i&&y({kind:"react",ArtComponent:function(){return o.a.createElement(i,{hash:e})},openSea:t.current.openSea})}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a.View_Panel,null,c&&o.a.createElement(i.a.View_Form,null,r.map((function(e){return o.a.createElement(o.a.Fragment,{key:e.title},o.a.createElement("div",{style:{paddingBottom:4}},o.a.createElement(i.a.Button_FormAction,{onPress:function(){return r=e,t.current=r,void A(p);var r}},e.title)))})),o.a.createElement(i.a.View_FieldRow,null,o.a.createElement(i.a.Text_FormTitle,null,"Enter a preview tokenId:"),o.a.createElement(i.a.Input_Text,{value:p,onChange:A}))),o.a.createElement(i.a.Text_FormTitle,{style:Object.assign({},u.c.text_formTitle,{whiteSpace:"pre-wrap"})},t.current.title),o.a.createElement(i.a.Text_FormTitle,{style:Object.assign({},u.c.text_formTitle,{whiteSpace:"pre-wrap"})},t.current.artist),"div"===(null==T?void 0:T.kind)&&o.a.createElement(h,{renderArt:T.renderArt,openSea:T.openSea}),"react"===(null==T?void 0:T.kind)&&o.a.createElement(T.ArtComponent,null),b&&o.a.createElement(i.a.Text_FormTitle,{style:Object.assign({},u.c.text_formTitle,{background:"#EEEEEE",padding:8,whiteSpace:"pre-wrap"})},b),o.a.createElement(i.a.Text_FormTitle,{style:Object.assign({},u.c.text_formTitle,{whiteSpace:"pre-wrap"})},t.current.description)),!c&&o.a.createElement("div",{style:{padding:16,fontSize:16}},o.a.createElement("a",{href:"/art"},"Other Art by Rick Love")))}},Gcfp:function(e,r){"undefined"==typeof ga&&(ga=function(){})},ugeJ:function(e,r,t){var n=t("nGXB"),o=Math.hypot,i=Math.abs,a=Math.sqrt;n({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(e,r){for(var t,n,o=0,u=0,l=arguments.length,c=0;u<l;)c<(t=i(arguments[u++]))?(o=o*(n=c/t)*n+1,c=t):o+=t>0?(n=t/c)*n:t;return c===1/0?1/0:c*a(o)}})}}]);
//# sourceMappingURL=8-aebd6df3e58506ea06da.js.map