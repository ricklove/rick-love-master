(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[0],{"+tC1":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i}));var r=function(e){return Object.keys(e).map((function(e){return e})).map((function(t){return e[t]})).filter((function(e){return e}))},a=function(e){var t={};return e.forEach((function(e){t[e.key]=e.value})),t},o=function(e){return new Map(e.map((function(e){return[e.key,e.value]})))},i=function(e){return Object.keys(e).map((function(e){return e})).map((function(t){return{key:t,value:e[t]}}))}},"2wDJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("t8gp"),a=n("LOFj");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=n("EsTT"),u=n("9DGK"),s=n("xWie"),l=n("hsFx");function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e){var t,n=e.channelKey,i=e.initialState,d=e.reduceState,m=e.reduceClientsState,p=null!==(t=localStorage.getItem("_webMeshClientKey"))&&void 0!==t?t:Date.now()+"-"+Math.floor(999999*Math.random());localStorage.setItem("_webMeshClientKey",p);var h,v,y,g,b,w,x,S,E,k,j,O=Object(c.a)(),T={meshState:i,meshMetaData:{clients:[],firstMessageTimestamp:0,lastMessageTimestamp:0}},P=[],D=setTimeout((function(){}),0),C=(h={websocketsApiUrl:s.a.websocketsApiUrl,channelKey:"wm_"+n},v=function(e){if("close"===e.kind)return clearTimeout(D),T.meshMetaData.clients=T.meshMetaData.clients.filter((function(t){return t.key!==e.c})),T.meshState=m(T.meshState,T.meshMetaData.clients),void O.onStateChange(T.meshState);var t,n,a;if(function(e){var t=Object(r.a)(T.meshMetaData.clients);T.meshMetaData.clients=T.meshMetaData.clients.filter((function(t){return t.key!==e.c})),T.meshMetaData.clients.push({key:e.c,lastActivityTimestamp:e.t}),T.meshMetaData.clients.sort((function(e,t){return-(e.lastActivityTimestamp-t.lastActivityTimestamp)})),t.map((function(e){return e.key})).join(";")!==T.meshMetaData.clients.map((function(e){return e.key})).join(";")&&(T.meshState=m(T.meshState,T.meshMetaData.clients),O.onStateChange(T.meshState))}(e),"pong"===e.kind)return clearTimeout(null!==(t=F)&&void 0!==t?t:0),void(F=null);if("ping"===e.kind)return clearTimeout(null!==(n=F)&&void 0!==n?n:0),F=null,void(e.clientKeys.includes(p)&&setTimeout(U));if("drop"===e.kind)return clearTimeout(null!==(a=F)&&void 0!==a?a:0),F=null,T.meshMetaData.clients=T.meshMetaData.clients.filter((function(t){return!e.clientKeys.some((function(e){return e===t.key}))})),T.meshState=m(T.meshState,T.meshMetaData.clients),void O.onStateChange(T.meshState);if("join"!==e.kind){if("sync"===e.kind){if(e.c===p)return;if(T.meshMetaData.firstMessageTimestamp&&T.meshMetaData.firstMessageTimestamp<e.state.meshMetaData.firstMessageTimestamp)return void(D=setTimeout(M,1e4));clearTimeout(D),T.meshMetaData.firstMessageTimestamp=e.state.meshMetaData.firstMessageTimestamp,T.meshMetaData.lastMessageTimestamp=e.state.meshMetaData.lastMessageTimestamp,T.meshMetaData.clients=Object(l.b)([].concat(Object(r.a)(T.meshMetaData.clients),Object(r.a)(e.state.meshMetaData.clients)),(function(e){return e.key})),T.meshState=e.state.meshState;for(var o,i=f(P.filter((function(e){return e.t>T.meshMetaData.lastMessageTimestamp})));!(o=i()).done;){var c=o.value;if("message"!==c.kind)return;T.meshState=d(T.meshState,c.message),T.meshMetaData.lastMessageTimestamp=c.t}return T.meshState=m(T.meshState,T.meshMetaData.clients),void O.onStateChange(T.meshState)}"message"===e.kind&&(P.push(e),T.meshMetaData.firstMessageTimestamp||(T.meshMetaData.firstMessageTimestamp=e.t),T.meshMetaData.lastMessageTimestamp=e.t,T.meshState=d(T.meshState,e.message),O.onStateChange(T.meshState))}else{if(clearTimeout(D),e.c===p)return;var u=T.meshMetaData.clients.findIndex((function(e){return e.key===p}))-1;D=setTimeout(M,u>=0?2e3*u:1e4)}},y=[],g=[],b={send:null},w=[],x=Object(a.a)({websocketsApiUrl:h.websocketsApiUrl}).connect({channelKey:h.channelKey}),S=x.subscribeMessages((function(e){v(e),y.push(Object.assign({},e,{_r:Date.now()}))})),E=x.subscribeConnectionEvents((function(e){b.send=x.isConnected()?x.send:null,g.push(e)})),k=setInterval((function(){return j()}),250),j=function(){if(b.send)for(var e,t=o(w.splice(0,w.length));!(e=t()).done;){var n=e.value;b.send(n)}},{send:function(e){b.send?(j(),b.send(e)):w.push(e)},unsubscribe:function(){clearInterval(k),b.send=null,S.unsubscribe(),E.unsubscribe(),x.close()},history:{messages:y,events:g}}),_=function(e){C.send(Object.assign({},e,{c:p,t:Date.now()}))},M=function(){T.meshMetaData.clients=T.meshMetaData.clients.filter((function(e){return e.key!==p})),T.meshMetaData.clients.unshift({key:p,lastActivityTimestamp:Date.now()}),_({kind:"sync",state:T})},U=function(){_({kind:"pong"})},F=null,A=setInterval((function(){if(!F)if(T.meshMetaData.clients.filter((function(e){return Date.now()>45e3+e.lastActivityTimestamp})).length>0){var e=T.meshMetaData.clients.findIndex((function(e){return e.key===p}));F=setTimeout((function(){F=null;var e=T.meshMetaData.clients.filter((function(e){return Date.now()>45e3+e.lastActivityTimestamp}));e.length<=0||_({kind:"drop",clientKeys:e.map((function(e){return e.key}))})}),5e3*e)}else{if(!(T.meshMetaData.clients.filter((function(e){return Date.now()>3e4+e.lastActivityTimestamp})).length<=0)){var t=T.meshMetaData.clients.findIndex((function(e){return e.key===p}));F=setTimeout((function(){F=null;var e=T.meshMetaData.clients.filter((function(e){return Date.now()>3e4+e.lastActivityTimestamp}));e.length<=0||_({kind:"ping",clientKeys:e.map((function(e){return e.key}))})}),5e3*t)}}}),5e3),R=!1;return _({kind:"join"}),{_webSocket:{history:C.history},clientKey:p,sendMessage:function(e){if(R)throw new u.b("The connection is closed");_({kind:"message",message:e})},subscribe:O.subscribe,close:function(){R||(R=!0,_({kind:"close"}),C.unsubscribe(),clearInterval(A))}}}},"4cHy":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(e){var t=Math.floor(e*Math.random());return t>=e?e-1:t},a=function(e){return e[r(e.length)]}},"5UfP":function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.menu=0]="menu",e[e.back=1]="back",e[e.error=2]="error",e[e.expanded=3]="expanded",e[e.collapsed=4]="collapsed",e[e.copy=5]="copy",e[e.retry=6]="retry",e[e.dashboard=7]="dashboard",e[e.add=8]="add",e[e.remove=9]="remove",e[e.eye=10]="eye",e[e.eyeSlash=11]="eyeSlash",e[e.checkChecked=12]="checkChecked",e[e.checkUnchecked=13]="checkUnchecked",e[e.account=14]="account",e[e.message=15]="message",e[e.subscription=16]="subscription",e[e.calendar=17]="calendar",e[e.contacts=18]="contacts",e[e.keys=19]="keys",e[e.resources=20]="resources",e[e.admin=21]="admin"}(r||(r={}))},"6Ufa":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("t8gp"),a=n("a1TR"),o=n.n(a),i=(n("3yYM"),n("Ab9Y")),c=n("4cHy"),u=n("hsFx"),s=n("B8BD"),l=n("GJ35"),f=n("+tC1"),d=n("aEBB"),m=n("PyWT"),p=n("Yh9R"),h=function(){try{var e;return JSON.parse(null!==(e=localStorage.getItem("doodleStorage.v2"))&&void 0!==e?e:"NULL!{}")}catch(t){return null}},v=function(e){localStorage.setItem("doodleStorage.v2",JSON.stringify(e))},y=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,a,y,g,b,w,x,S,E,k;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=Object(l.a)({getUploadUrl:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(t=null===(n=h())||void 0===n?void 0:n.doodleUploadUrl)&&void 0!==t?t:null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setUploadUrl:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(Object.assign({},null!==(n=h())&&void 0!==n?n:{},{doodleUploadUrl:t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uploadApiUrl:s.a.uploadApiUrl,uploadUrlPrefix:p.a.doodleDrawingsPrefix}),b=Object(l.a)({getUploadUrl:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(t=null===(n=h())||void 0===n?void 0:n.scoresUploadUrl)&&void 0!==t?t:null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setUploadUrl:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(Object.assign({},null!==(n=h())&&void 0!==n?n:{},{scoresUploadUrl:t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uploadApiUrl:s.a.uploadApiUrl,uploadUrlPrefix:p.a.doodleVotesPrefix}),w=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,a,i,c,u,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=null===(t=h())||void 0===t?void 0:t.doodleUploadUrl){e.next=7;break}return a=Object(d.a)(s.a),e.next=6,a.createUploadUrl({});case 6:r=e.sent.uploadUrl;case 7:return i=null===(n=r)||void 0===n?void 0:n.getUrl.replace(r.relativePath,""),c=""+i+p.a.doodleSummary,console.log("getSummaryData",{uploadUrl:r,serverUrl:i,summaryUrl:c}),e.next=12,Object(l.c)(c);case 12:return u=e.sent,f={doodles:u.doodles.map((function(e){return{key:e.k,prompt:e.p,timestamp:e.t,drawing:Object(m.a)(e.d),score:e.s}}))},e.abrupt("return",f);case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",{doodles:[]});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),e.next=5,w();case 5:return x=e.sent,S={doodles:[],doodleScores:[],doodleVotes:[]},e.next=9,g.load();case 9:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=13;break}e.t1=void 0===n;case 13:if(!e.t1){e.next=17;break}e.t3=void 0,e.next=18;break;case 17:e.t3=n.doodles.map((function(e){return{key:e.k,prompt:e.p,timestamp:e.t,drawing:e.d?Object(m.a)(e.d):e.drawing}}));case 18:if(e.t4=t=e.t3,e.t0=null!==e.t4,!e.t0){e.next=22;break}e.t0=void 0!==t;case 22:if(!e.t0){e.next=26;break}e.t5=t,e.next=27;break;case 26:e.t5=[];case 27:return S.doodles=e.t5,e.next=30,b.load();case 30:if(e.t8=y=e.sent,e.t7=null===e.t8,e.t7){e.next=34;break}e.t7=void 0===y;case 34:if(!e.t7){e.next=38;break}e.t9=void 0,e.next=39;break;case 38:e.t9=y.doodleVotes;case 39:if(e.t10=a=e.t9,e.t6=null!==e.t10,!e.t6){e.next=43;break}e.t6=void 0!==a;case 43:if(!e.t6){e.next=47;break}e.t11=a,e.next=48;break;case 47:e.t11=[];case 48:return S.doodleVotes=e.t11,E={},x.doodles.forEach((function(e){var t;E[e.key]=(null!==(t=E[e.key])&&void 0!==t?t:0)+e.score})),S.doodleScores=Object(f.b)(E).map((function(e){return{doodleKey:e.key,score:e.value}})),k={saveDrawing:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={key:t.substr(0,8)+":"+Date.now()+":"+Math.floor(999999*Math.random()),drawing:n,prompt:t,timestamp:Date.now()},S.doodles.push(r),setTimeout(Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.save({doodles:S.doodles.map((function(e){return{k:e.key,p:e.prompt,t:e.timestamp,d:Object(m.d)(e.drawing)}}))});case 2:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),saveBestDrawingSelection:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.doodleVotes.push({k:t.key,t:Date.now()}),(r=S.doodleScores.find((function(e){return e.doodleKey===t.key})))||(r={doodleKey:t.key,score:0},S.doodleScores.push(r)),r.score=(null!==(n=r.score)&&void 0!==n?n:0)+1,setTimeout(Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.save({doodleVotes:S.doodleVotes});case 2:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getDrawings:function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,i,s,l,f,d,m,p,h,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(a=null!=n?n:{}).includeOtherPrompts,s=void 0!==i&&i,l=a.maxCount,f=void 0===l?4:l,d=Object(u.b)([].concat(Object(r.a)(x.doodles),Object(r.a)(S.doodles.map((function(e){var t,n;return Object.assign({},e,{score:null!==(t=null===(n=S.doodleScores.find((function(t){return t.doodleKey===e.key})))||void 0===n?void 0:n.score)&&void 0!==t?t:0})})))),(function(e){return e.key})),m=d.filter((function(e){return e.prompt===t})).sort((function(e,t){return-(e.score-t.score)})),console.log("getDrawings",{samePromptDrawings:m}),p=s?d.filter((function(e){return e.prompt!==t})):[],h=s?[Object(c.b)(m)].concat(Object(r.a)(Object(u.f)(p).slice(0,f-1))):m,v=Object(u.f)(h).slice(0,f),e.abrupt("return",{doodles:v});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getAllDrawings:function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(u.b)([].concat(Object(r.a)(x.doodles),Object(r.a)(S.doodles.map((function(e){var t,n;return Object.assign({},e,{score:null!==(t=null===(n=S.doodleScores.find((function(t){return t.doodleKey===e.key})))||void 0===n?void 0:n.score)&&void 0!==t?t:0})})))),(function(e){return e.key})),e.abrupt("return",{doodles:t});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e.abrupt("return",k);case 54:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},"7h3R":function(e,t,n){"use strict";n.r(t),n.d(t,"ProgressGameService",(function(){return G})),n.d(t,"createProgressGameProblemService",(function(){return H})),n.d(t,"ProgressGameView",(function(){return J}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=n("ERkP"),c=n.n(i),u=n("z7rP"),s=n("njmQ"),l=n("DTYs"),f=n("rrTw"),d={container:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around"},profileContainer:{flexDirection:"column",alignItems:"center"},profileCharacterView:{width:80,height:80,borderWidth:1,borderStyle:"solid",borderColor:"#888888"},profileCharacterText:{fontSize:48,textAlign:"center"},profileNameView:{},profileNameText:{}},m=function(e){var t=Object(s.a)(),n=(t.loading,t.error,t.doWork),r=Object(i.useState)(null),m=r[0],p=r[1],h=Object(i.useState)(!1),v=h[0],y=h[1],g=function(){return n(function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get().setup();case 2:return t(),e.next=5,u.a.get().getUserProfiles();case 5:n=e.sent,p(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return Object(i.useEffect)((function(){g()}),[]),m?v?c.a.createElement(f.UserProfileManagerView,{onClose:function(){y(!1),g()}}):c.a.createElement(l.h,{style:d.container},m.map((function(t){var r;return c.a.createElement(l.g,{key:t.key,onPress:function(){return r=t.key,n(function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get().setActiveUser(r);case 2:e.onUserSelected();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var r}},c.a.createElement(l.h,{style:d.profileContainer},c.a.createElement(l.h,{style:d.profileCharacterView},c.a.createElement(l.e,{style:d.profileCharacterText},null!==(r=t.emoji)&&void 0!==r?r:"ðŸ‘¤")),c.a.createElement(l.h,{style:d.profileNameView},c.a.createElement(l.e,{style:d.profileNameText},t.name))))})),c.a.createElement(l.g,{onPress:function(){y(!0)}},c.a.createElement(l.h,{style:d.profileContainer},c.a.createElement(l.h,{style:d.profileCharacterView},c.a.createElement(l.e,{style:d.profileCharacterText}," ðŸ‘¤ ")),c.a.createElement(l.h,{style:d.profileNameView},c.a.createElement(l.e,{style:d.profileNameText},"Edit"))))):c.a.createElement(c.a.Fragment,null)},p=n("hsFx"),h=n("t8gp"),v=n("EsTT"),y=n("+tC1"),g=function(){var e=j+"\n"+T+"\n"+D,t=O+"\n"+P+"\n\n"+S(D),n=w(e,"male"),r=w(t,"female"),a={emoji:k,name:"baby",gender:"baby",pay:0,requirementEmojis:[],startEmoji:null,parent:null,children:[]},o=[a].concat(Object(h.a)(n),Object(h.a)(r)),i=a;o.forEach((function(e){var t=o.find((function(t){return e.startEmoji===t.emoji}));t&&(t.children.push(e),e.parent=t)}));var c=b(C);return o.forEach((function(e){var t=e.requirementEmojis.map((function(e){var t;return null!==(t=c.find((function(t){return t.emoji===e})))&&void 0!==t?t:{emoji:e,cost:0}})),n=t.map((function(e){return e.emoji+" = "+e.cost})).join("\n"),r=t.reduce((function(e,t){return e+=t.cost}),0);e.debug_totalRequirementsCost=r+" =\n"+n})),{allNodes:o,root:i,allRequirements:c}},b=function(e){return e.split("\n").map((function(e){return e.trim()})).filter((function(e){return e})).map((function(e){var t=e.split("=").map((function(e){return e.trim()})).filter((function(e){return e}));return{emoji:t[0],cost:Number.parseInt(t[1],10)}}))},w=function(e,t){return e.split("\n").map((function(e){return e.trim()})).filter((function(e){return e})).map((function(e){return x(e,t)}))},x=function(e,t){var n=e.split(":").map((function(e){return e.trim()})),r=n[0],a=n[1],o=n[2],i=Number.parseInt(a,10),c=o.split("=").map((function(e){return e.trim()})),u=c[0],s=c[1].split("+").map((function(e){return e.trim()}));return{name:r,pay:i,emoji:u,startEmoji:s[0],requirementEmojis:s[1].split(" ").map((function(e){return e.trim()})).filter((function(e){return e})),children:[],parent:null,gender:t}},S=function(e){return e.replace(new RegExp(E.male,"g"),E.female).replace(new RegExp(E.man,"g"),E.woman)},E={man:String.fromCodePoint(128104),woman:String.fromCodePoint(128105),male:String.fromCodePoint(128105),female:String.fromCodePoint(128105)},k="ðŸ‘¶",j="boy               : 0 : ðŸ‘¦ = ðŸ‘¶ + ðŸ¼ ðŸ§¸ ðŸ‘• ðŸ‘– ðŸ§¦ ðŸ©² ðŸ‘Ÿ ðŸ“– ðŸª ðŸš² ðŸŽ®",O="girl            : 0 : ðŸ‘§ = ðŸ‘¶ + ðŸ¼ ðŸ§¸ ðŸ‘š ðŸ‘— ðŸ©° ðŸ©± ðŸ¥¿ ðŸ“– ðŸª ðŸš² ðŸŽ®",T="  student_boy   : 0 : ðŸ‘¨â€ðŸŽ“ = ðŸ‘¦ + ðŸ• âœï¸ ðŸ““ ðŸ“š â° ðŸ“± ðŸ’» ðŸš— ðŸ§³ ðŸŽ“",P="student_girl  : 0 : ðŸ‘©â€ðŸŽ“ = ðŸ‘§ + ðŸ• âœï¸ ðŸ““ ðŸ“š â° ðŸ“± ðŸ’» ðŸš— ðŸ§³ ðŸŽ“",D="\nfactory_worker      :   20000 : ðŸ‘¨â€ðŸ­ = ðŸ‘¨â€ðŸŽ“ + ðŸ§¤ ðŸ¥¾ ðŸ”§ â² ðŸ“‹ ðŸš—              \nmechanic            :   30000 : ðŸ‘¨â€ðŸ”§ = ðŸ‘¨â€ðŸŽ“ + ðŸ§¤ ðŸ¥¾ ðŸ§° ðŸ”§ ðŸ”© ðŸšš         \nconstruction_worker :   75000 : ðŸ‘·â€â™‚ï¸ = ðŸ‘¨â€ðŸŽ“ + ðŸ¦º ðŸ¥¾ ðŸ§° ðŸ”§ ðŸ”¨ âš’ ðŸ§± ðŸ§¨ ðŸš™                    \nartist              :   35000 : ðŸ‘¨â€ðŸŽ¨ = ðŸ‘¨â€ðŸŽ“ + ðŸŽ¨ ðŸ–Œ ðŸ–Š ðŸ–‹ ðŸ– âœï¸ ðŸ“’ ðŸ–¼ ðŸ’¡ ðŸ“· ðŸš—          \nsinger              :   40000 : ðŸ‘¨â€ðŸŽ¤ = ðŸ‘¨â€ðŸŽ“ + ðŸŽ¤ ðŸŽ§ ðŸŽ¼ ðŸŽ¹ ðŸ¥ ðŸŽ» ðŸŽ¥ ðŸš—       \nfarmer              :   50000 : ðŸ‘¨â€ðŸŒ¾ = ðŸ‘¨â€ðŸŽ“ + ðŸ§¢ ðŸ¥¾ ðŸ¥š ðŸ• ðŸˆ ðŸ“ ðŸ„ ðŸ– ðŸ‘ ðŸ ðŸšœ        \ncook                :   40000 : ðŸ‘¨â€ðŸ³ = ðŸ‘¨â€ðŸŽ“ + ðŸ“ ðŸ¥‘ ðŸ¥• ðŸ¥© ðŸ¤ ðŸ¥š ðŸ¥« ðŸ¥„ ðŸ´ ðŸ§‚ â° ðŸ”ª ðŸš—      \nfirefighter         :   55000 : ðŸ‘¨â€ðŸš’ = ðŸ‘¨â€ðŸŽ“ + â›‘ï¸ ðŸ§¯ ðŸ¥¾ ðŸª“ ðŸ”” ðŸš’    \npolice_officer      :   60000 : ðŸ‘®â€â™‚ï¸ = ðŸ‘¨â€ðŸŽ“ + ðŸ§¢ âš–ï¸ ðŸ”« ðŸ¥Š ðŸ¤¼ ðŸ“¢ ðŸš“             \ndetective           :   70000 : ðŸ•µï¸â€â™‚ï¸ = ðŸ‘¨â€ðŸŽ“ + ðŸ‘” âš–ï¸ ðŸ”¦ ðŸ”Ž ðŸ“‹ ðŸ’¼ ðŸš“          \nteacher             :   50000 : ðŸ‘¨â€ðŸ« = ðŸ‘¨â€ðŸŽ“ + ðŸ“ ðŸ“’ ðŸ“• ðŸ“— ðŸ“˜ ðŸ“™ ðŸš\noffice_worker       :   60000 : ðŸ‘¨â€ðŸ’¼ = ðŸ‘¨â€ðŸŽ“ + ðŸ‘” ðŸ’¼ ðŸ’» ðŸ—„ ðŸª‘ ðŸ“ ðŸ“Š ðŸš—             \ntechnologist        :   80000 : ðŸ‘¨â€ðŸ’» = ðŸ‘¨â€ðŸŽ“ + ðŸ’» âŒ¨ï¸ ðŸ–¥ ðŸ“± ðŸ–± ðŸŽ® ðŸ¤– ðŸš—              \nscientist           :   90000 : ðŸ‘¨â€ðŸ”¬ = ðŸ‘¨â€ðŸŽ“ + ðŸ¥¼ ðŸ¥½ ðŸ”¬ ðŸ’» ðŸ§« ðŸ§ª âš—ï¸ ðŸš—            \njudge               :  120000 : ðŸ‘¨â€âš–ï¸ = ðŸ‘¨â€ðŸŽ“ + ðŸ‘” âš–ï¸ ðŸ’¼ ðŸ“š ðŸ—ƒ ðŸ•° ðŸš—   \nhealth_worker       :  100000 : ðŸ‘¨â€âš•ï¸ = ðŸ‘¨â€ðŸŽ“ + ðŸ¥¼ â›‘ ðŸ”¬ ðŸ©¹ ðŸ©º ðŸ’Š ðŸ’‰ ðŸ§« â›‘ ðŸš‘\npilot               :  110000 : ðŸ‘¨â€âœˆï¸ = ðŸ‘¨â€ðŸŽ“ + ðŸ§¥ ðŸ§­ ðŸ’» ðŸ•¹ âœˆï¸       \nastronaut           :  130000 : ðŸ‘¨â€ðŸš€ = ðŸ‘¨â€ðŸŽ“ + ðŸ§¥ ðŸ”­ ðŸ’» ðŸ•¹ ðŸš€  \n",C="\nðŸ¼ = 10\nðŸ§¸ = 10\nðŸ‘• = 20\nðŸ‘– = 20\nðŸ§¦ = 10\nðŸ©² = 20\nðŸ‘Ÿ = 30\nðŸ“– = 50\nðŸª = 25\nðŸš² = 150\nðŸŽ® = 200\n\nðŸ‘š = 20\nðŸ‘— = 20\nðŸ©° = 10\nðŸ©± = 20\nðŸ¥¿ = 30\n\nðŸ• = 30\nâœï¸ = 10\nðŸ““ = 20\nðŸ“š = 500\nâ° = 15\nðŸ“± = 350\nðŸ’» = 1250\nðŸš— = 7000\nðŸ§³ = 800\nðŸŽ“ = 10000\n\nðŸ§¤ = 20\nðŸ¥¾ = 80\nðŸ”§ = 110\nâ² = 25\nðŸ“‹ = 15\nðŸ§° = 300\nðŸ”© = 700\nðŸšš = 35000\nðŸ¦º = 150\nðŸ”¨ = 75\nâš’ = 150\nðŸ§± = 3000\nðŸ§¨ = 16000\nðŸš™ = 32000\nðŸŽ¨ = 100\nðŸ–Œ = 70\nðŸ–Š = 50\nðŸ–‹ = 35\nðŸ– = 15\nðŸ“’ = 15\nðŸ–¼ = 80\nðŸ’¡ = 150\nðŸ“· = 400\nðŸŽ¤ = 150\nðŸŽ§ = 120\nðŸŽ¼ = 750\nðŸŽ¹ = 320\nðŸ¥ = 450\nðŸŽ» = 320\nðŸŽ¥ = 1450\nðŸ§¢ = 25\nðŸ¥š = 10\nðŸ• = 35\nðŸˆ = 25\nðŸ“ = 30\nðŸ„ = 350\nðŸ– = 150\nðŸ‘ = 120\nðŸ = 100\nðŸšœ = 15000\nðŸ“ = 25\nðŸ¥‘ = 30\nðŸ¥• = 20\nðŸ¥© = 75\nðŸ¤ = 100\nðŸ¥« = 50\nðŸ¥„ = 120\nðŸ´ = 350\nðŸ§‚ = 120\nðŸ”ª = 225\nâ›‘ï¸ = 150\nðŸ§¯ = 250\nðŸª“ = 50\nðŸ”” = 75\nðŸš’ = 135000\nâš–ï¸ = 15000\nðŸ”« = 750\nðŸ¥Š = 500\nðŸ¤¼ = 1250\nðŸ“¢ = 150\nðŸš“ = 55000\nðŸ‘” = 250\nðŸ”¦ = 55\nðŸ”Ž = 85\nðŸ’¼ = 125\nðŸ“ = 25\nðŸ“• = 75\nðŸ“— = 25\nðŸ“˜ = 60\nðŸ“™ = 30\nðŸš = 16000\nðŸ—„ = 250\nðŸª‘ = 150\nðŸ“ = 50\nðŸ“Š = 750\nâŒ¨ï¸ = 75\nðŸ–¥ = 150\nðŸ–± = 50\nðŸ¤– = 1500\nðŸ¥¼ = 150\nðŸ¥½ = 25\nðŸ”¬ = 3500\nðŸ§« = 150\nðŸ§ª = 300\nâš—ï¸ = 250\nðŸ—ƒ = 150\nðŸ•° = 650\nâ›‘ = 150\nðŸ©¹ = 100\nðŸ©º = 120\nðŸ’Š = 1200\nðŸ’‰ = 1500\nðŸš‘ = 75000\nðŸ§¥ = 550\nðŸ§­ = 50\nðŸ•¹ = 850\nâœˆï¸ = 1500000\nðŸ”­ = 350\nðŸš€ = 150000000\n",_=function(e){localStorage.setItem("EmojiIdleState",JSON.stringify(e))},M=function(){if(!localStorage.getItem("EmojiIdleState"))return null;try{var e;return JSON.parse(null!==(e=localStorage.getItem("EmojiIdleState"))&&void 0!==e?e:"")}catch(t){return null}},U=function(){var e,t=g(),n=Object(y.d)(t.allRequirements.map((function(e){return{key:e.emoji,value:e}}))),r={characterEmoji:t.root.emoji,emotion:"normal",lastEmotionTimestamp:Date.now(),money:0,multiplier:1,lastMultiplierChangeTimestamp:Date.now(),lastPurchaseTimestamp:Date.now(),townState:{characters:[]}},a=null!==(e=M())&&void 0!==e?e:r;a=Object.assign({},r,a);var o=Object(v.a)(a),i=function(e){a=Object.assign({},a,e),o.onStateChange(a),_(a)},c=function(e){i({money:a.money+a.multiplier,multiplier:Math.min(100,a.multiplier+e),lastMultiplierChangeTimestamp:Date.now()})};return setInterval((function(){if(!a.targetEmoji&&!a.targetOptions){var e=t.allNodes.find((function(e){return e.emoji===a.characterEmoji}));if(e){var r=e.children.map((function(e){return{emoji:e.emoji}})),o=r.filter((function(e){return!a.townState.characters.find((function(e){return e.characterEmoji}))}));o.length>0&&(r=o),0===r.length?i({targetOptions:[{emoji:t.root.emoji}]}):i({targetOptions:r})}}if(a.targetEmoji){var c,u=t.allNodes.find((function(e){return e.emoji===a.targetEmoji}));if(u){var s,l,f=u.requirementEmojis.map((function(e){return n.get(e)})).filter((function(e){return e})).map((function(e){return e})),d=f.filter((function(e){var t;return!(null===(t=a.requirementsPurchased)||void 0===t?void 0:t.includes(e.emoji))}));d.sort((function(e,t){return e.cost-t.cost}));var m=d.filter((function(e){return e.cost<=a.money}));m.length!==(null===(s=a.requirementsAvailable)||void 0===s?void 0:s.length)&&i({requirementsNeeded:f,requirementsAvailable:m}),d.length!==(null===(l=a.requirementsRemaining)||void 0===l?void 0:l.length)&&i({requirementsRemaining:d}),d.length<=0&&i({characterEmoji:a.targetEmoji,targetEmoji:void 0,targetOptions:void 0,requirementsAvailable:void 0,requirementsNeeded:void 0,requirementsPurchased:void 0})}if(Date.now()>(null!==(c=a.lastEmotionTimestamp)&&void 0!==c?c:0)+15e3){var p,h=Date.now()>(null!==(p=a.lastPurchaseTimestamp)&&void 0!==p?p:0)+3e5?"angry":"normal";a.emotion!==h&&i({emotion:h,lastEmotionTimestamp:Date.now()})}}}),1e3),{subscribePetStateChange:o.subscribe,reward:function(){return c(1)},reward_major:function(){return c(10)},reward_extreme:function(){return c(100)},punish:function(){i({multiplier:Math.max(1,a.multiplier-5),lastMultiplierChangeTimestamp:Date.now()})},selectOption:function(e){var n,r;(null===(n=a.targetOptions)||void 0===n?void 0:n.find((function(t){return t.emoji===e})))&&(e===t.root.emoji&&a.townState.characters.push({characterEmoji:a.characterEmoji,finishedTimestamp:Date.now()}),i({targetEmoji:e,targetOptions:void 0,emotion:"excited",lastEmotionTimestamp:Date.now(),lastPurchaseTimestamp:Date.now(),money:0}));var o,c=null===(r=a.requirementsAvailable)||void 0===r?void 0:r.find((function(t){return t.emoji===e}));c&&c.cost<=a.money&&i({requirementsPurchased:[].concat(Object(h.a)(null!==(o=a.requirementsPurchased)&&void 0!==o?o:[]),[c.emoji]),requirementsRemaining:void 0,money:a.money-c.cost,requirementsAvailable:void 0,emotion:"excited",lastEmotionTimestamp:Date.now(),lastPurchaseTimestamp:Date.now()})}}},F={instance:null},A=function(){var e;return null!==(e=F.instance)&&void 0!==e?e:F.instance=U()},R=function(){F.instance=U()},I={container:{height:40},fixed:{position:"fixed",top:0,right:0,left:0,zIndex:1e3},inner:{position:"relative",height:40},emotionEmoji:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24},characterEmoji:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24},characterEmoji_small:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16},costText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#00FF00"},costText_small:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:10,color:"#00FF00"},targetCharacterEmoji:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16},objectEmoji:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12},money:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:20,color:"#FFFF00",marginLeft:8},money_small:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#FFFF00"},multiplier:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FF00FF",marginLeft:8},foodText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#333300"}},L=function(e){var t,n,r,a,o=Object(i.useState)(null),u=o[0],s=o[1],f=Object(i.useState)(!1),d=f[0],m=f[1];return Object(i.useEffect)((function(){var e=A().subscribePetStateChange(s);return function(){return e.unsubscribe()}})),d&&u?c.a.createElement(N,{gameState:u,onClose:function(){return m(!1)}}):c.a.createElement(l.h,{style:I.container},c.a.createElement(l.h,{style:I.fixed},c.a.createElement(l.h,{style:I.inner},c.a.createElement($,{emoji:null!==(t=null==u?void 0:u.characterEmoji)&&void 0!==t?t:"",targetEmoji:null!==(n=null==u?void 0:u.targetEmoji)&&void 0!==n?n:"",emotion:null!==(r=null==u?void 0:u.emotion)&&void 0!==r?r:null,purchased:null!==(a=null==u?void 0:u.requirementsPurchased)&&void 0!==a?a:[],onPress:function(){return m((function(e){return!e}))}}),u&&c.a.createElement(V,{gameState:u}))))},W={container:{background:"#555555"},payText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FFFFFF"},payText_disabled:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#CCCCCC"},moneyText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#FFFF00"},townMoneyText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#00FF00"}},z=g(),N=function(e){var t,n,r,a,o=e.gameState,i=e.onClose,u=o.townState.characters.map((function(e){var t;return{character:e,skill:null!==(t=z.allNodes.find((function(t){return t.emoji===e.characterEmoji})))&&void 0!==t?t:z.root}})).filter((function(e){return e.skill.pay})).map((function(e){return Object.assign({},e,{years:(Date.now()-e.character.finishedTimestamp)/864e5,money:Math.floor((Date.now()-e.character.finishedTimestamp)/864e5*e.skill.pay)})})),s=z.allNodes.filter((function(e){return e.children.length<=0&&!o.townState.characters.find((function(t){return t.characterEmoji===e.emoji}))})),f=u.reduce((function(e,t){var n;return e+=null!==(n=t.money)&&void 0!==n?n:0}),0);return c.a.createElement(l.h,{style:W.container},c.a.createElement(l.h,null,c.a.createElement(l.h,{style:{background:"#333333",flexDirection:"row",alignItems:"center"}},c.a.createElement(l.h,{style:{position:"relative",width:100,height:40}},c.a.createElement(l.h,{style:{position:"absolute",left:0,top:0,flexDirection:"column",alignItems:"flex-end"}},c.a.createElement(l.g,{onPress:function(){return i()}},c.a.createElement(l.e,{style:I.characterEmoji}," ðŸ™ ")))),c.a.createElement(l.h,{style:{flex:1}}),c.a.createElement(l.h,{style:{padding:4}},c.a.createElement(l.e,{style:W.townMoneyText},"$"+f.toLocaleString())))),c.a.createElement(l.h,{style:{background:"#333333",flexDirection:"row",alignItems:"center"}},c.a.createElement(l.h,{style:{position:"relative",width:100,height:40}},c.a.createElement($,{emoji:null!==(t=null==o?void 0:o.characterEmoji)&&void 0!==t?t:"",targetEmoji:null!==(n=null==o?void 0:o.targetEmoji)&&void 0!==n?n:"",emotion:null!==(r=null==o?void 0:o.emotion)&&void 0!==r?r:null,purchased:null!==(a=null==o?void 0:o.requirementsPurchased)&&void 0!==a?a:[],onPress:function(){return i()}}))),u.map((function(e){var t,n,r,a;return c.a.createElement(l.h,{style:{background:"#333333",flexDirection:"row",alignItems:"center"}},c.a.createElement(l.h,{style:{position:"relative",width:100,height:40}},c.a.createElement($,{emoji:e.character.characterEmoji,targetEmoji:"",emotion:"happy",purchased:null!==(t=null===(n=e.skill)||void 0===n?void 0:n.requirementEmojis)&&void 0!==t?t:[]})),c.a.createElement(l.h,{style:{padding:4}},c.a.createElement(l.e,{style:W.payText},"$"+(null!==(r=null===(a=e.skill)||void 0===a?void 0:a.pay)&&void 0!==r?r:0).toLocaleString())),c.a.createElement(l.h,{style:{padding:4}},c.a.createElement(l.e,{style:W.payText},"x"+e.years.toFixed(1))),c.a.createElement(l.h,{style:{flex:1}}),c.a.createElement(l.h,{style:{padding:4}},c.a.createElement(l.e,{style:W.moneyText},"$"+e.money.toLocaleString())))})),s.map((function(e){return c.a.createElement(l.h,{style:{background:"#555555",flexDirection:"row",alignItems:"center"}},c.a.createElement(l.h,{style:{position:"relative",width:100,height:40,opacity:.5}},c.a.createElement($,{emoji:e.emoji,targetEmoji:"",emotion:null,purchased:[]})),c.a.createElement(l.h,{style:{padding:4}},c.a.createElement(l.e,{style:W.payText_disabled},"$"+e.pay.toLocaleString())))})))},V=function(e){var t,n=e.gameState,r=Object(i.useState)(0),a=r[0],o=r[1];if(Object(i.useEffect)((function(){o(0)}),[n.targetOptions,n.requirementsAvailable]),n.targetOptions&&n.targetOptions.length>0){var u=n.targetOptions.length;return c.a.createElement(l.h,{style:{position:"absolute",top:0,left:0,right:0}},c.a.createElement(l.h,{style:{flexDirection:"row",justifyContent:"center"}},n.targetOptions.slice(a,a+4).map((function(e){return c.a.createElement(l.g,{key:e.emoji,onPress:function(){return A().selectOption(e.emoji)}},c.a.createElement(l.h,null,c.a.createElement(l.e,{style:I.characterEmoji},e.emoji)))})),u>4&&c.a.createElement(l.g,{onPress:function(){return o((function(e){var t=e+5;return t>=u?0:t}))}},c.a.createElement(l.h,null,c.a.createElement(l.e,{style:I.characterEmoji},a+4<u?"â©":"â®")))))}var s=null!==(t=n.requirementsRemaining)&&void 0!==t?t:[];return c.a.createElement(l.h,null,c.a.createElement(Y,null!=n?n:{money:0,multiplier:1}),c.a.createElement(l.h,{style:{position:"absolute",left:90,top:0,flexDirection:"row",zIndex:10}},s.slice(0,3).map((function(e){var t=e.cost<=n.money;return c.a.createElement(l.g,{key:e.emoji,onPress:function(){return A().selectOption(e.emoji)}},c.a.createElement(l.h,{style:{flexDirection:"column",alignItems:"center",background:t?"#003300":"#553300",borderRadius:4,paddingLeft:2,paddingRight:2}},c.a.createElement(l.e,{style:I.characterEmoji_small},e.emoji),c.a.createElement(l.e,{style:Object.assign({},I.costText_small,t?{}:{color:"#FF0000"})},"$"+e.cost.toLocaleString())))}))))},Y=function(e){var t=e.money,n=e.multiplier,r=Object(i.useState)(0),a=r[0],o=r[1],u=Object(i.useState)(0),s=u[0],f=u[1],d=Object(i.useRef)(n),m=Object(i.useState)(0),p=m[0],h=m[1];return Object(i.useEffect)((function(){o(5);var e=function(){o((function(e){return e>0?e-1:(clearInterval(t),0)}))};e();var t=setInterval(e,25);return function(){return clearInterval(t)}}),[t]),Object(i.useEffect)((function(){f(10),h(n-d.current),d.current=n;var e=function(){f((function(e){return e>0?e-1:(clearInterval(t),0)}))};e();var t=setInterval(e,25);return function(){return clearInterval(t)}}),[n]),c.a.createElement(l.h,{style:{position:"absolute",top:0,right:4}},c.a.createElement(l.h,{style:{flexDirection:"row",justifyContent:"flex-end"}},c.a.createElement(l.h,{style:{transform:"translate(-"+a+"px,"+2*a+"px) scale("+(.1*a+1)+")"}},c.a.createElement(l.e,{style:I.money},"$"+(null!=t?t:0).toLocaleString())),c.a.createElement(l.h,{style:{transform:"translate(-"+s+"px,"+2*s+"px) scale("+(.1*s+1)+")"}},c.a.createElement(l.e,{style:Object.assign({},I.multiplier,p<-5?{color:"#FF0000"}:p<0?{color:"#FFFF00"}:{color:"#00FF00"})},("x"+(null!=n?n:1).toLocaleString()).padStart(4," ")))))},$=function(e){var t=e.emoji,n=e.targetEmoji,r=e.emotion,a=e.purchased,o=e.onPress;return c.a.createElement(c.a.Fragment,null,c.a.createElement(B,{purchased:a}),c.a.createElement(l.h,{style:{position:"absolute",left:20,top:0,flexDirection:"column",alignItems:"flex-end"}},c.a.createElement(l.g,{onPress:function(){return null==o?void 0:o()}},c.a.createElement(q,{emotion:null!=r?r:null,emoji:t}))),c.a.createElement(l.h,{style:{position:"absolute",left:66,top:0,flexDirection:"column",alignItems:"flex-end"}},c.a.createElement(l.e,{style:I.targetCharacterEmoji},""+n)))},B=function(e){var t=e.purchased,n=Object(i.useState)(0),r=n[0],a=n[1];return Object(i.useEffect)((function(){var e=function(){a((function(e){return e+1}))};e();var t=setInterval(e,200);return function(){return clearInterval(t)}}),[t.length]),c.a.createElement(c.a.Fragment,null,t.map((function(e,t){return c.a.createElement(l.h,{key:e,style:{position:"absolute",left:0,top:0,flexDirection:"column",alignItems:"flex-end"}},c.a.createElement(l.h,{style:{transform:"translate("+(17*t+r)%60+"px,"+(5*t+r)%24+"px)"}},c.a.createElement(l.e,{style:I.objectEmoji},""+e)))})))},q=function(e){var t=e.emotion,n=e.emoji,r=Object(i.useState)({text:n,isEmotion:!1}),a=r[0],o=r[1];return Object(i.useEffect)((function(){if(!t)return function(){};var e=!1,r=0,a=function(){(e=!e)?o({text:K(t,r++),isEmotion:!0}):o({text:n,isEmotion:!1})};a();var i=setInterval(a,3e3);return function(){return clearInterval(i)}}),[t,n]),c.a.createElement(l.e,{style:a.isEmotion?I.emotionEmoji:I.characterEmoji},a.text)},K=function(e,t){if(!e)return"ðŸ˜¶";if("excited"===e){var n=Object(p.f)(["ðŸ˜","ðŸ˜","ðŸ˜Ž","ðŸ¤©","ðŸ¤—","ðŸ¥³","ðŸ˜‚"]);return n[t%n.length]}if("happy"===e){var r=["ðŸ˜€","ðŸ™‚","ðŸ˜„","ðŸ˜ƒ","ðŸ˜Š"];return r[t%r.length]}if("normal"===e){var a=["ðŸ™‚","ðŸ˜‹","ðŸ˜®","ðŸ™„"];return a[t%a.length]}if("angry"===e){var o=["ðŸ˜³","ðŸ˜Ÿ","ðŸ˜¤","ðŸ˜£","ðŸ¥º","ðŸ˜«","ðŸ˜©"];return o[t%o.length]}if("sick"===e){var i=["ðŸ¤¢","ðŸ¤®","ðŸ˜µ","ðŸ¤§","ðŸ˜¬","ðŸ’©","ðŸ˜ž"];return i[t%i.length]}if("dead"===e){var c=["ðŸ’€","ðŸ‘»","ðŸ§Ÿâ€â™‚ï¸"];return c[t%c.length]}return"ðŸ‘¾"},G=(Object(p.f)(" \n        ðŸ• ðŸ” ðŸŸ ðŸŒ­ ðŸ¿ ðŸ¥“ ðŸ¥š ðŸ§‡ ðŸ¥ž ðŸ§ˆ ðŸ¥ ðŸž ðŸ¥¨ ðŸ¥– ðŸ¥¯ ðŸ§€ ðŸ¥— ðŸ¥™ ðŸ¥ª ðŸŒ¯ ðŸŒ® \n        ðŸ¥© ðŸ— ðŸ– ðŸ  ðŸ¥Ÿ ðŸ¥  ðŸ˜ ðŸ¥¡ ðŸ± ðŸš ðŸ™ ðŸ› ðŸœ ðŸ¦ª ðŸ£ ðŸ¥® ðŸ¥ ðŸ¤ ðŸ¢ ðŸ§† \n        ðŸ¥£ ðŸ ðŸ² ðŸ¥§ ðŸ¦ ðŸ§ ðŸª ðŸ© ðŸ¨ ðŸŽ‚ ðŸ° ðŸ§ ðŸ® ðŸ¯ ðŸµ ".replace("\n"," ").split(" ").map((function(e){return e.trim()})).filter((function(e){return e}))),{onCorrect:function(){A().reward()},onCompleteSection:function(){A().reward_major()},onCompleteSubject:function(){A().reward_extreme()},onWrong:function(){A().punish()}}),H=function(e,t){return Object.assign({},e,{recordAnswer:function(t,n){return n.isCorrect?(G.onCorrect(),!t.isReview&&t.isLastOfSubject?(G.onCompleteSubject(),setTimeout(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get().uploadUserData();case 2:case"end":return e.stop()}}),e)}))),1e3)):!t.isReview&&t.isLastOfSection&&(G.onCompleteSection(),setTimeout(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get().uploadUserData();case 2:case"end":return e.stop()}}),e)}))),1e3))):G.onWrong(),e.recordAnswer(t,n)}})},J=function(){var e,t,n=Object(s.a)(),r=n.loading,f=(n.error,n.doWork),d=Object(i.useState)(!1),p=d[0],h=d[1],v=Object(i.useState)(null),y=v[0],g=v[1];Object(i.useEffect)((function(){var e;g(null!==(e=u.a.get().getActiveUser())&&void 0!==e?e:null),R();var t,n=(t=Date.now(),A().subscribePetStateChange((function(e){console.log("ProgressGameView subscribePetStateChange",{lastPurchase:t,x:e}),t>=e.lastPurchaseTimestamp||(t=e.lastPurchaseTimestamp,setTimeout(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get().uploadUserData();case 2:case"end":return e.stop()}}),e)}))),1e3))})));return function(){n.unsubscribe()}}),[p]),Object(i.useEffect)((function(){f(Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get().setup();case 2:R();case 3:case"end":return e.stop()}}),e)}))))}),[]);return r?c.a.createElement(c.a.Fragment,null):p?c.a.createElement(c.a.Fragment,null,c.a.createElement(L,null),c.a.createElement(l.h,null,c.a.createElement(l.g,{onPress:function(){"web"===l.c.OS&&window.location.reload()}},c.a.createElement(l.h,{style:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",padding:4}},c.a.createElement(l.e,{style:{fontSize:32}},null!==(e=null==y?void 0:y.emoji)&&void 0!==e?e:"ðŸ‘¤"),c.a.createElement(l.e,{style:{fontSize:14}},null!==(t=null==y?void 0:y.name)&&void 0!==t?t:""))))):c.a.createElement(m,{onUserSelected:function(){return h(!0)}})}},"7vau":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.trim()}},"9DGK":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n("V6ES"),a=n("uFyH"),o=function(e){function t(t,n){var r;return(r=e.call(this)||this).message=t,r.data=n,r}return Object(r.a)(t,e),t}(Object(a.a)(Error)),i=function(e){function t(t,n){var r;return(r=e.call(this)||this).message=t,r.data=n,r}return Object(r.a)(t,e),t}(Object(a.a)(Error));Error,Error},"9u8u":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("hsFx"),a=function(e,t){var n=t.maxNewReviewCount,a=void 0===n?3:n,o=t.reviewSequencePreviousLength,i=void 0===o?1:o,c=t.reviewQuestionPrefix,u=void 0===c?"ðŸ”„ ":c,s=t.requiredCorrectInRow,l=void 0===s?3:s,f={problemSourceHistory:[],reviewProblems:[],lastReviewProblem:null,reviewSequence:null,repeatState:"new"},d=function(){console.log("createReviewProblemService startReview",f),f.repeatState="review"},m={load:e.load,save:e.save,getSections:e.getSections,gotoSection:e.gotoSection,getNextProblem:function(){if(console.log("createReviewProblemService getNextProblem",f),"review"===f.repeatState){var t=function(){console.log("createReviewProblemService getReviewProblem",f);var e=f.reviewSequence;if(e&&e.iNext>e.iEnd&&(console.log("createReviewProblemService getReviewProblem - End of Sequence",{rSeq:e,state:f}),f.reviewSequence=null),!f.reviewSequence){var t,n,a=f.reviewProblems.find((function(e){var t,n;return e.index>(null!==(t=null===(n=f.lastReviewProblem)||void 0===n?void 0:n.index)&&void 0!==t?t:-1)}));if(!a)return console.log("createReviewProblemService getReviewProblem - No Review Problem (with greater order than last)",{reviewProblems:f.reviewProblems,lastReviewProblem:f.lastReviewProblem,state:f}),f.lastReviewProblem=null,null;var o=null!==(t=null===(n=f.lastReviewProblem)||void 0===n?void 0:n.index)&&void 0!==t?t:-1;f.lastReviewProblem=a,console.log("createReviewProblemService getReviewProblem - Start Review Sequence",f);var c=Math.max(0,a.index-i,o+1);f.reviewSequence={iNext:c,iStart:c,iEnd:a.index}}var s=f.reviewSequence,l=f.problemSourceHistory[s.iNext];return s.iNext++,Object.assign({},l,{question:u+l.question,answers:Object(r.f)(l.answers)})}();if(t)return Object.assign({},t,{isReview:!0});console.log("createReviewProblemService getNextProblem - No Review Problem - Change Mode to NEW",f),f.repeatState="new"}if(f.reviewProblems.filter((function(e){return e.correctsInRow<=1})).length>=a)return d(),m.getNextProblem();var n=e.getNextProblem();return n.question?(f.problemSourceHistory.push(n),n):(d(),m.getNextProblem())},recordAnswer:function(t,n){console.log("createReviewProblemService recordAnswer",f);var r=f.problemSourceHistory.findIndex((function(e){return e.key===t.key}));if(r<0)e.recordAnswer(t,n);else{var a=f.reviewProblems.find((function(e){return e.index===r}));if(n.isCorrect)a&&(a.correctsInRow++,f.reviewProblems=f.reviewProblems.filter((function(e){return e.correctsInRow<=l})));else if(a)a.correctsInRow=0;else{var o={index:r,correctsInRow:0,_debug_problemKey:t.key};f.reviewProblems.push(o),f.reviewProblems.sort((function(e,t){return e.index-t.index}))}e.recordAnswer(t,n)}}};return m}},B8BD:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={uploadApiUrl:"https://s7mrgkmtk5.execute-api.us-east-1.amazonaws.com/prod/upload-api"}},BQ33:function(e,t,n){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",r="hour",a="day",o="week",i="month",c="quarter",u="year",s=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,l=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},d={s:f,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),a=n%60;return(t<=0?"+":"-")+f(r,2,"0")+":"+f(a,2,"0")},m:function(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,i),a=t-r<0,o=e.clone().add(n+(a?-1:1),i);return Number(-(n+(t-r)/(a?r-o:o-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(s){return{M:i,y:u,w:o,d:a,D:"date",h:r,m:n,s:t,ms:e,Q:c}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",h={};h[p]=m;var v=function(e){return e instanceof w},y=function(e,t,n){var r;if(!e)return p;if("string"==typeof e)h[e]&&(r=e),t&&(h[e]=t,r=e);else{var a=e.name;h[a]=e,r=a}return!n&&r&&(p=r),r||!n&&p},g=function(e,t){if(v(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new w(n)},b=d;b.l=y,b.i=v,b.w=function(e,t){return g(e,{locale:t.$L,utc:t.$u,$offset:t.$offset})};var w=function(){function f(e){this.$L=this.$L||y(e.locale,null,!0),this.parse(e)}var d=f.prototype;return d.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(s);if(r)return n?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(t)}(e),this.init()},d.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},d.$utils=function(){return b},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(e,t){var n=g(e);return this.startOf(t)<=n&&n<=this.endOf(t)},d.isAfter=function(e,t){return g(e)<this.startOf(t)},d.isBefore=function(e,t){return this.endOf(t)<g(e)},d.$g=function(e,t,n){return b.u(e)?this[t]:this.set(n,e)},d.year=function(e){return this.$g(e,"$y",u)},d.month=function(e){return this.$g(e,"$M",i)},d.day=function(e){return this.$g(e,"$W",a)},d.date=function(e){return this.$g(e,"$D","date")},d.hour=function(e){return this.$g(e,"$H",r)},d.minute=function(e){return this.$g(e,"$m",n)},d.second=function(e){return this.$g(e,"$s",t)},d.millisecond=function(t){return this.$g(t,"$ms",e)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(e,c){var s=this,l=!!b.u(c)||c,f=b.p(e),d=function(e,t){var n=b.w(s.$u?Date.UTC(s.$y,t,e):new Date(s.$y,t,e),s);return l?n:n.endOf(a)},m=function(e,t){return b.w(s.toDate()[e].apply(s.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),s)},p=this.$W,h=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case u:return l?d(1,0):d(31,11);case i:return l?d(1,h):d(0,h+1);case o:var g=this.$locale().weekStart||0,w=(p<g?p+7:p)-g;return d(l?v-w:v+(6-w),h);case a:case"date":return m(y+"Hours",0);case r:return m(y+"Minutes",1);case n:return m(y+"Seconds",2);case t:return m(y+"Milliseconds",3);default:return this.clone()}},d.endOf=function(e){return this.startOf(e,!1)},d.$set=function(o,c){var s,l=b.p(o),f="set"+(this.$u?"UTC":""),d=(s={},s.day=f+"Date",s.date=f+"Date",s[i]=f+"Month",s[u]=f+"FullYear",s[r]=f+"Hours",s[n]=f+"Minutes",s[t]=f+"Seconds",s[e]=f+"Milliseconds",s)[l],m=l===a?this.$D+(c-this.$W):c;if(l===i||l===u){var p=this.clone().set("date",1);p.$d[d](m),p.init(),this.$d=p.set("date",Math.min(this.$D,p.daysInMonth())).toDate()}else d&&this.$d[d](m);return this.init(),this},d.set=function(e,t){return this.clone().$set(e,t)},d.get=function(e){return this[b.p(e)]()},d.add=function(e,c){var s,l=this;e=Number(e);var f=b.p(c),d=function(t){var n=g(l);return b.w(n.date(n.date()+Math.round(t*e)),l)};if(f===i)return this.set(i,this.$M+e);if(f===u)return this.set(u,this.$y+e);if(f===a)return d(1);if(f===o)return d(7);var m=(s={},s[n]=6e4,s[r]=36e5,s[t]=1e3,s)[f]||1,p=this.$d.getTime()+e*m;return b.w(p,this)},d.subtract=function(e,t){return this.add(-1*e,t)},d.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=b.z(this),a=this.$locale(),o=this.$H,i=this.$m,c=this.$M,u=a.weekdays,s=a.months,f=function(e,r,a,o){return e&&(e[r]||e(t,n))||a[r].substr(0,o)},d=function(e){return b.s(o%12||12,e,"0")},m=a.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:b.s(c+1,2,"0"),MMM:f(a.monthsShort,c,s,3),MMMM:f(s,c),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:f(a.weekdaysMin,this.$W,u,2),ddd:f(a.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:b.s(o,2,"0"),h:d(1),hh:d(2),a:m(o,i,!0),A:m(o,i,!1),m:String(i),mm:b.s(i,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:r};return n.replace(l,(function(e,t){return t||p[e]||r.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(e,a,s){var l,f=b.p(a),d=g(e),m=6e4*(d.utcOffset()-this.utcOffset()),p=this-d,h=b.m(this,d);return h=(l={},l[u]=h/12,l[i]=h,l[c]=h/3,l[o]=(p-m)/6048e5,l.day=(p-m)/864e5,l[r]=p/36e5,l[n]=p/6e4,l[t]=p/1e3,l)[f]||p,s?h:b.a(h)},d.daysInMonth=function(){return this.endOf(i).$D},d.$locale=function(){return h[this.$L]},d.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=y(e,t,!0);return r&&(n.$L=r),n},d.clone=function(){return b.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},f}();return g.prototype=w.prototype,g.extend=function(e,t){return e(t,w,g),g},g.locale=y,g.isDayjs=v,g.unix=function(e){return g(1e3*e)},g.en=h[p],g.Ls=h,g}()},CN1R:function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){var r=t.prototype,a=r.format,o={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};n.en.formats=o,r.format=function(e){void 0===e&&(e="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,n=void 0===t?{}:t,r=e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,t,r){var a=r&&r.toUpperCase();return t||n[r]||o[r]||n[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}));return a.call(this,r)}}}()},DTYs:function(e,t,n){"use strict";n.d(t,"h",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return x}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=(n("S1bJ"),n("ERkP")),c=n.n(i);function u(e){if(Array.isArray(e)){var t,n;if(1===e.length)return null!==(n=u(e[0]))&&void 0!==n?n:{};var r=Object.assign({},u(e[0]));return e.forEach((function(e){r=Object.assign({},r,u(null!=e?e:{}))})),null!==(t=r)&&void 0!==t?t:{}}return e}var s,l={display:"flex",flexDirection:"column"},f={whiteSpace:"pre"},d=function(e){var t=e;return"none"===t.userSelect&&(t.MozUserSelect="none",t.WebkitUserSelect="none"),e},m=function(e){return c.a.createElement("div",{style:u([l,e.style])},e.children)},p=function(e){if(1===e.numberOfLines){var t=u([f,e.style,{overflow:"hidden",whiteSpace:"nowrap",wordWrap:"break-word",textOverflow:"ellipsis"}]);return c.a.createElement("span",{style:d(t)},e.children)}var n=u([f,e.style]);return c.a.createElement("span",{style:d(n)},e.children)},h=function(e){var t,n="numeric"===e.keyboardType?"number":e.secureTextEntry?"password":"text",r="username"===e.autoCompleteType?"username":"password"===e.autoCompleteType?"password":void 0,a=e.onSubmitEditing&&function(t){var n;"Enter"!==t.key||t.shiftKey||(t.preventDefault(),null===(n=e.onSubmitEditing)||void 0===n||n.call(e))}||void 0;return c.a.createElement("input",{type:n,name:r,id:r,style:u([f,e.style]),placeholder:e.placeholder,disabled:!(null===(t=e.editable)||void 0===t||t),value:e.value,onFocus:e.onFocus,onChange:function(t){return e.onChange(t.target.value)},onKeyPress:a,onBlur:e.onBlur})},v=function(e){var t=Object(i.useRef)(Date.now()),n=function(){Date.now()<t.current+250||(t.current=Date.now(),e.onPress())},r=Object(i.useRef)(!0);return c.a.createElement("div",{style:u([l,e.style]),onClick:n,onKeyPress:n,onTouchStart:function(){r.current=!0},onTouchMove:function(){r.current=!1},onTouchEnd:function(){r.current&&n()},role:"button",tabIndex:0},e.children)},y=function(e){var t=function(e){var t;return e.preventDefault(),null===(t=e.stopPropagation)||void 0===t||t.call(e),e.cancelBubble=!0,e.returnValue=!1,!1},n=function(n){return e.onPressIn(),t(n)},r=function(n){return e.onPressOut(),t(n)};return c.a.createElement("div",{style:u([l,e.style]),onMouseDown:n,onMouseUp:r,onTouchStart:n,onTouchEnd:r,onTouchCancel:r,onTouchMove:t,onMouseLeave:r,onTouchEndCapture:r,role:"button",tabIndex:0},e.children)},g=function(e){var t=e.size,n=e.color,r="small"===t?16:32;return c.a.createElement(b,{size:r,thickness:r/8,color:n})},b=function(e){var t=e.size,n=e.thickness,r=e.color,a=.6*(2*Math.PI*(t-n)*.5);return c.a.createElement("svg",{style:{maxWidth:t},viewBox:"0 0 "+t+" "+t,xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("circle",{style:{fill:"transparent",stroke:r,strokeWidth:n,opacity:.5},cx:.5*t,cy:.5*t,r:.5*t-n}),c.a.createElement("circle",{className:"activity-spinner",style:{strokeDasharray:a,fill:"transparent",stroke:r,strokeWidth:n,transformOrigin:.5*t+"px "+.5*t+"px"},cx:.5*t,cy:.5*t,r:.5*t-n}))},w={OS:"web"},x={setString:(s=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})}},"DZ/V":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("ERkP"),a=n.n(r),o=n("DTYs"),i=function(e){var t=e.languange,n=e.speechService,i=Object(r.useState)(!0),c=i[0],u=i[1],s=Object(r.useState)(0),l=(s[0],s[1]),f=function(){u(!0),setTimeout((function(){u(!1)}),1e3)};Object(r.useEffect)((function(){f()}),[]);return a.a.createElement(o.h,null,a.a.createElement(o.g,{onPress:f},a.a.createElement(o.e,{style:{fontSize:24}},"Voice for "+t)),c&&a.a.createElement(o.a,{size:"small",color:"red"}),!c&&a.a.createElement(a.a.Fragment,null,n.getVoicesForLanguange(t).map((function(e){return a.a.createElement(o.g,{key:e.voice.name,onPress:function(){var r;r=e.voice,n.setVoiceForLanguange(t,r),l((function(e){return e+1})),n.speak(r.name,t)}},a.a.createElement(o.h,null,a.a.createElement(o.e,{style:{margin:4,fontSize:14,whiteSpace:"normal"}},(e.isSelected?"âœ…":"ðŸ”²")+" "+e.voice.lang+" - "+e.voice.name+" - "+(e.voice.localService?"local":"web"))))}))))}},EsTT:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t=e,n=[];return{subscribe:function(e){var r=n.length;return n.push(e),setTimeout((function(){t&&e(t)})),{unsubscribe:function(){n[r]=null}}},onStateChange:function(e){t=e,n.forEach((function(t){return null==t?void 0:t(e)}))}}}},GJ35:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=n("uTf4"),c=n("9DGK"),u=n("aEBB"),s=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(t,{method:"GET",headers:{Accept:"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){return{uploadData:(n=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.stringify({data:n}),t.next=3,Object(i.a)(e.putUrl,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json","Content-Length":""+r.length},body:r});case 3:if(t.sent.ok){t.next=6;break}throw new c.b("Upload Failed");case 6:case"end":return t.stop()}}),t)}))),function(e){return n.apply(this,arguments)}),downloadData:(t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e.getUrl);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})};var t,n},f=function(e){var t,n,r=Object(u.a)(e),i=null,c=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}return t.abrupt("return",i);case 2:return t.next=4,e.getUploadUrl();case 4:if(!(i=t.sent)){t.next=7;break}return t.abrupt("return",i);case 7:return t.next=9,r.createUploadUrl({prefix:e.uploadUrlPrefix});case 9:return i=t.sent.uploadUrl,t.next=12,e.setUploadUrl(i);case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{load:(n=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return t=e.sent,e.prev=3,e.next=6,s(t.getUrl);case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(){return n.apply(this,arguments)}),save:(t=Object(o.a)(a.a.mark((function t(n){var o,u,s,f,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:return o=t.sent,t.prev=3,u=l(o),t.next=7,u.uploadData(n);case 7:t.next=20;break;case 9:return t.prev=9,t.t0=t.catch(3),t.next=13,r.renewUploadUrl({uploadUrl:o});case 13:return o=t.sent.uploadUrl,t.next=16,e.setUploadUrl(o);case 16:return i=o,s=l(o),t.next=20,s.uploadData(n);case 20:return t.next=22,r.createUploadUrl({prefix:"backup/"+o.relativePath});case 22:return f=t.sent.uploadUrl,d=l(f),t.next=26,d.uploadData(n);case 26:case"end":return t.stop()}}),t,null,[[3,9]])}))),function(e){return t.apply(this,arguments)})}}},H5jT:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var r=n("ERkP"),a=n.n(r),o=n("DTYs"),i=n("gptL"),c=function(e,t){var n=[];return JSON.stringify(e,(function(e,t){if(null!=t&&"object"==typeof t){if(n.includes(t))return"[OBJ-DUPLICATED]";n.push(t)}return t}),t?2:0)},u=n("gLDK"),s=n("5UfP"),l={view:i.c.view_error,text:i.c.text_error,text_errorMessage:i.c.text_errorMessage,icon:i.c.icon,icon_errorMessage:i.c.icon_errorMessage,button:{outlineColor:i.c.colors.outline}},f=function(e){var t=e.error;return t?a.a.createElement(d,{error:t}):a.a.createElement(a.a.Fragment,null)},d=function(e){var t,n,i=Object(r.useState)(!1),f=i[0],d=i[1],m="string"==typeof e.error?""+e.error:null,p=null!==(t=null!==(n=e.error.message)&&void 0!==n?n:m)&&void 0!==t?t:"Unknown Error",h=e.error.data&&c(e.error.data,!0)||void 0,v=e.error&&c(e.error,!0)||void 0,y=!!h||!!v;return a.a.createElement(o.h,{style:l.view},a.a.createElement(o.h,{style:{flexDirection:"row"}},a.a.createElement(o.g,{style:Object.assign({flex:1,flexDirection:"row",alignItems:"center"},l.button),onPress:function(){return d(!f)}},y&&(f?a.a.createElement(u.a,{style:l.icon,kind:s.a.expanded}):a.a.createElement(u.a,{style:l.icon,kind:s.a.collapsed})),a.a.createElement(o.h,{style:{paddingRight:8}},a.a.createElement(u.a,{style:l.icon,kind:s.a.error})),a.a.createElement(o.h,{style:{flex:1,overflow:"hidden"}},a.a.createElement(o.e,{style:l.text,numberOfLines:f?void 0:1},p))),a.a.createElement(o.g,{style:Object.assign({flexDirection:"row",alignItems:"center",paddingLeft:8},l.button),onPress:function(){return o.b.setString(c({errorMessage:p,errorDetails:h,errorObjText:v},!0))}},a.a.createElement(u.a,{style:l.icon,kind:s.a.copy})),e.error.retryCallback&&a.a.createElement(o.g,{style:Object.assign({flexDirection:"row",alignItems:"center",paddingLeft:8},l.button),onPress:e.error.retryCallback},a.a.createElement(u.a,{style:l.icon,kind:s.a.retry}))),y&&f&&!!h&&a.a.createElement(o.e,{style:Object.assign({},l.text)},h),y&&f&&!!v&&a.a.createElement(o.e,{style:Object.assign({},l.text)},v))},m=function(e){return a.a.createElement(o.h,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(o.h,{style:{paddingLeft:8,paddingRight:8}},a.a.createElement(u.a,{style:l.icon_errorMessage,kind:s.a.error})),a.a.createElement(o.h,{style:{overflow:"hidden"}},a.a.createElement(o.e,{style:l.text_errorMessage,numberOfLines:1},e.children)))}},"Ig+6":function(e,t,n){"use strict";n.r(t),n.d(t,"styles",(function(){return h})),n.d(t,"DoodleTestView",(function(){return v})),n.d(t,"DoodleDrawerView",(function(){return y})),n.d(t,"DoodleDisplayView",(function(){return g})),n.d(t,"DoodleBrowser",(function(){return w})),n.d(t,"DoodleBrowseView",(function(){return x}));n("xrQq"),n("kNg/");var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=n("t8gp"),c=n("ERkP"),u=n.n(c),s=n("DTYs"),l=n("hsFx"),f=n("+tC1"),d=n("njmQ"),m=n("PyWT"),p=n("6Ufa"),h={drawing:{width:312,height:312,color:"#FFFFFF",backgroundColor:"#000000"}},v=function(e){var t=Object(c.useState)(Object(m.b)()),n=t[0],r=t[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(y,{style:h.drawing,drawing:n,onChange:r}),u.a.createElement(g,{style:h.drawing,drawing:n}))},y=function(e){var t=e.style,n=e.drawing,r=e.onChange,a=t.width/n.width,o=Object(c.useState)(null),s=o[0],l=o[1],f=Object(c.useRef)(null),d=Object(c.useRef)(null),p=function(e){return e.preventDefault(),e.stopPropagation(),e.nativeEvent.cancelBubble=!0,e.nativeEvent.returnValue=!1,!1},h=function(e,t){var n,r,o,i,c=d.current;if(!c)return p(e);var u=c.getBoundingClientRect(),s={clientX:null!==(n=null!==(r=null==t?void 0:t.clientX)&&void 0!==r?r:e.clientX)&&void 0!==n?n:0,clientY:null!==(o=null!==(i=null==t?void 0:t.clientY)&&void 0!==i?i:e.clientY)&&void 0!==o?o:0};return f.current={clientX:s.clientX,clientY:s.clientY,x:Math.floor((s.clientX-u.x)/a),y:Math.floor((s.clientY-u.y)/a)},l({points:[{x:f.current.x,y:f.current.y}]}),p(e)},v=function(e){var t=s;return t?(r(Object.assign({},n,{segments:[].concat(Object(i.a)(n.segments),[t])})),l(null),f.current=null,p(e)):p(e)},y=function(e,t){var n,r,o,c;if(!f.current)return p(e);var u=null!==(n=null!==(r=null==t?void 0:t.clientX)&&void 0!==r?r:e.clientX)&&void 0!==n?n:0,s=null!==(o=null!==(c=null==t?void 0:t.clientY)&&void 0!==c?c:e.clientY)&&void 0!==o?o:0;return function(e){l((function(t){if(!t)return null;var n=t.points[t.points.length-1];return Math.abs(n.x-e.x)+Math.abs(n.y-e.y)<=2?t:{points:[].concat(Object(i.a)(t.points),[e])}}))}({x:Math.floor((u-f.current.clientX)/a)+f.current.x,y:Math.floor((s-f.current.clientY)/a)+f.current.y}),p(e)};return Object(c.useEffect)((function(){var e=function(e){return!f.current||(e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1)};return document.addEventListener("touchmove",e,{passive:!1}),function(){document.removeEventListener("touchmove",e)}}),[]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{position:"relative",width:t.width,height:t.height,backgroundColor:t.backgroundColor}},u.a.createElement("svg",{style:{width:t.width,height:t.height},viewBox:"0 0 "+n.width+" "+n.height,preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg"},n.segments.map((function(e,n){return u.a.createElement("path",{key:n,d:Object(m.c)(e),stroke:t.color,fill:"transparent"})})),s&&u.a.createElement("path",{d:Object(m.c)(s),stroke:t.color,fill:"transparent"})),u.a.createElement("div",{ref:d,style:{position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:10},onMouseDown:h,onMouseUp:v,onMouseMove:y,onMouseLeave:v,onTouchStart:function(e){return h(e,e.touches[0])},onTouchEnd:v,onTouchCancel:v,onTouchMove:function(e){return y(e,e.touches[0])},onTouchEndCapture:v})))},g=function(e){var t,n=Object(c.useState)(0),r=n[0],a=n[1];return e.enableRedraw?u.a.createElement(s.g,{onPress:function(){e.enableRedraw&&a((function(e){return e+1}))}},u.a.createElement(b,Object.assign({key:r},e,{shouldAnimate:r>0||(null===(t=e.shouldAnimate)||void 0===t||t)}))):u.a.createElement(b,e)},b=function(e){var t=e.style,n=e.drawing,r=e.shouldAnimate,a=void 0===r||r,o=e.animatePointsPerSecond,s=void 0===o?20:o,l=Object(c.useState)(0),f=l[0],d=l[1],p=n.segments.flatMap((function(e){return e.points})).length;Object(c.useEffect)((function(){if(!a)return function(){};var e=setInterval((function(){d((function(t){return t>p&&clearInterval(e),t+Math.ceil(s/10)}))}),10);return function(){clearInterval(e)}}),[n]);var h=a?f:Number.MAX_SAFE_INTEGER;return u.a.createElement("div",{style:{width:t.width,height:t.height,backgroundColor:t.backgroundColor}},u.a.createElement("svg",{style:{width:t.width,height:t.height},viewBox:"0 0 "+n.width+" "+n.height,preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg"},n.segments.map((function(e,n){var r=h;return h=Math.max(0,h-e.points.length),u.a.createElement("path",{key:n,d:Object(m.c)({points:Object(i.a)(e.points.slice(0,r))}),stroke:t.color,fill:"transparent"})}))))},w=function(){var e=Object(d.a)(),t=e.loading,n=(e.error,e.doWork),r=Object(c.useState)([]),i=r[0],l=r[1];return Object(c.useEffect)((function(){n(Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)();case 2:return t=e.sent,e.next=5,t.getAllDrawings();case 5:n=e.sent,l(n.doodles);case 7:case"end":return e.stop()}}),e)}))))}),[]),t?u.a.createElement(s.a,{size:"large",color:"#FFFF00"}):u.a.createElement(x,{doodles:i})},x=function(e){var t=e.doodles,n=Object(f.b)(Object(l.c)(t,(function(e){return e.prompt})));return u.a.createElement(u.a.Fragment,null,n.map((function(e){return u.a.createElement(s.h,{key:e.key,style:{padding:4}},u.a.createElement(s.e,{style:{fontSize:12}},e.key),u.a.createElement(s.h,{style:{padding:4,flexDirection:"row",flexWrap:"wrap"}},e.value.map((function(e){return u.a.createElement(s.h,{key:e.key,style:{padding:4,alignItems:"center"}},u.a.createElement(g,{style:{width:104,height:104,color:"#FFFFFF",backgroundColor:"#000000"},drawing:e.drawing,shouldAnimate:!1,enableRedraw:!0}),u.a.createElement(s.e,null,""+e.score))}))))})))}},LOFj:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("EsTT"),a=n("9DGK"),o=function(e){return{connect:function(t){var n=t.channelKey,o=Object(r.a)(),i=Object(r.a)(),c=function(){var t=new WebSocket(""+e.websocketsApiUrl);return t.addEventListener("open",(function(e){if(t===s){i.onStateChange({connectionStatus:"opened"});var r={message:null,key:n};t.send(JSON.stringify(r))}else t.close()})),t.addEventListener("close",(function(e){t===s?(i.onStateChange({connectionStatus:"closed"}),l()):t.close()})),t.addEventListener("error",(function(e){t===s?(i.onStateChange({connectionStatus:"error",error:{message:"Websocket Error",error:e}}),l()):t.close()})),t.addEventListener("message",(function(e){if(t===s){var r=JSON.parse(e.data);r.key===n&&r.message&&o.onStateChange(r.message)}else t.close()})),t},u=!1,s=c(),l=function(){u||setTimeout((function(){s=c()}),50)};return{send:function(e){if(!s||s.readyState!==WebSocket.OPEN)throw new a.b("Websocket is not open");var t={message:e,key:n};s.send(JSON.stringify(t))},isConnected:function(){var e;return(null===(e=s)||void 0===e?void 0:e.readyState)===WebSocket.OPEN},subscribeMessages:o.subscribe,subscribeConnectionEvents:i.subscribe,close:function(){var e;u=!0,null===(e=s)||void 0===e||e.close(),s=null}}}}}},NunO:function(e,t,n){!function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(){}function i(){}t=t&&t.hasOwnProperty("default")?t.default:t,i.resetWarningCache=o;var c=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){e.exports=function(){function e(e,t,n,r,a,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}()})),u=function(e){return null!==e&&"object"===n(e)},s=function e(t,n){if(!u(t)||!u(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var a="[object Object]"===Object.prototype.toString.call(t);if(a!==("[object Object]"===Object.prototype.toString.call(n)))return!1;if(!a&&!r)return!1;var o=Object.keys(t),i=Object.keys(n);if(o.length!==i.length)return!1;for(var c={},s=0;s<o.length;s+=1)c[o[s]]=!0;for(var l=0;l<i.length;l+=1)c[i[l]]=!0;var f=Object.keys(c);if(f.length!==o.length)return!1;var d=t,m=n;return f.every((function(t){return e(d[t],m[t])}))},l=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},f=function(e){if(null===e||u(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;var t;throw new Error("Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},d=function(e){if(function(e){return u(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(f)};var t=f(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},m=t.createContext(null);m.displayName="ElementsContext";var p=function(e){return function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e}(t.useContext(m),e)},h=function(e){return(0,e.children)(p("mounts <ElementsConsumer>"))};h.propTypes={children:c.func.isRequired};var v=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),function(){n.current&&n.current.apply(n,arguments)}},y=function(e){return u(e)?(e.paymentRequest,r(e,["paymentRequest"])):{}},g=function(){},b=function(e,n){var r,a="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),o=n?function(e){p("mounts <".concat(a,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r=n.id,o=n.className,i=n.options,c=void 0===i?{}:i,u=n.onBlur,l=void 0===u?g:u,f=n.onFocus,d=void 0===f?g:f,m=n.onReady,h=void 0===m?g:m,b=n.onChange,w=void 0===b?g:b,x=n.onEscape,S=void 0===x?g:x,E=n.onClick,k=void 0===E?g:E,j=p("mounts <".concat(a,">")).elements,O=t.useRef(null),T=t.useRef(null),P=v(h),D=v(l),C=v(d),_=v(k),M=v(w),U=v(S);t.useLayoutEffect((function(){if(null==O.current&&j&&null!=T.current){var t=j.create(e,c);O.current=t,t.mount(T.current),t.on("ready",(function(){return P(t)})),t.on("change",M),t.on("blur",D),t.on("focus",C),t.on("escape",U),t.on("click",_)}}));var F=t.useRef(c);return t.useEffect((function(){F.current&&F.current.paymentRequest!==c.paymentRequest&&console.warn("Unsupported prop change: options.paymentRequest is not a customizable property.");var e=y(c);0===Object.keys(e).length||s(e,y(F.current))||O.current&&(O.current.update(e),F.current=c)}),[c]),t.useEffect((function(){return function(){O.current&&O.current.destroy()}}),[]),t.createElement("div",{id:r,className:o,ref:T})};return o.propTypes={id:c.string,className:c.string,onChange:c.func,onBlur:c.func,onFocus:c.func,onReady:c.func,onClick:c.func,options:c.object},o.displayName=a,o.__elementType=e,o},w="undefined"==typeof window,x=b("auBankAccount",w),S=b("card",w),E=b("cardNumber",w),k=b("cardExpiry",w),j=b("cardCvc",w),O=b("fpxBank",w),T=b("iban",w),P=b("idealBank",w),D=b("paymentRequestButton",w);e.AuBankAccountElement=x,e.CardCvcElement=j,e.CardElement=S,e.CardExpiryElement=k,e.CardNumberElement=E,e.Elements=function(e){var n=e.stripe,r=e.options,o=e.children,i=t.useRef(!1),c=t.useRef(!0),u=t.useMemo((function(){return d(n)}),[n]),f=a(t.useState((function(){return{stripe:null,elements:null}})),2),p=f[0],h=f[1],v=l(n),y=l(r);return null!==v&&(v!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it."),s(r,y)||console.warn("Unsupported prop change on Elements: You cannot change the `options` prop after setting the `stripe` prop.")),i.current||("sync"===u.tag&&(i.current=!0,h({stripe:u.stripe,elements:u.stripe.elements(r)})),"async"===u.tag&&(i.current=!0,u.stripePromise.then((function(e){e&&c.current&&h({stripe:e,elements:e.elements(r)})})))),t.useEffect((function(){return function(){c.current=!1}}),[]),t.useEffect((function(){var e=p.stripe;e&&e._registerWrapper&&e._registerWrapper({name:"react-stripe-js",version:"1.1.2"})}),[p.stripe]),t.createElement(m.Provider,{value:p},o)},e.ElementsConsumer=h,e.FpxBankElement=O,e.IbanElement=T,e.IdealBankElement=P,e.PaymentRequestButtonElement=D,e.useElements=function(){return p("calls useElements()").elements},e.useStripe=function(){return p("calls useStripe()").stripe},Object.defineProperty(e,"__esModule",{value:!0})}(t,n("ERkP"))},O6JU:function(e,t,n){"use strict";function r(e){return o(e).corrected}function a(e){return"+1"+o(e).digitsNo1}function o(e){for(var t,n=null!==(t=null==e?void 0:e.replace(/^(\+1|1)/,"").replace(/\D/g,"").split(""))&&void 0!==t?t:[],r="(###) ###-####".split(""),a=0,o=-1,i=0;i<r.length;i++)"#"===r[i]&&a<n.length&&(r[i]=n[a],a++,o=i);var c=r.join("");return{corrected:r.slice(0,o+1).join(""),full:c,digitsNo1:n.join("")}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},PQcI:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=n("ERkP"),c=n.n(i),u=n("NunO");function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l="https://js.stripe.com/v3",f=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,d="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",m=null,p=function(e){return null!==m?m:m=new Promise((function(t,n){if("undefined"!=typeof window)if(window.Stripe&&e&&console.warn(d),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(l,'"]')),t=0;t<e.length;t++){var n=e[t];if(f.test(n.src))return n}return null}();r&&e?console.warn(d):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(l).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(a){return void n(a)}else t(null)}))},h=function(e,t){if(null===e)return null;var n=e.apply(void 0,s(t));return function(e){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.5.0"})}(n),n},v=Promise.resolve().then((function(){return p(null)})),y=!1;v.catch((function(e){y||console.warn(e)}));var g,b=n("V6ES"),w=n("uFyH"),x=function(e){function t(t,n){var r;return(r=e.call(this)||this).message=t,r.data=n,r}return Object(b.a)(t,e),t}(Object(w.a)(Error)),S=n("QZUc");!function(e){e[e._01_Client_BeginCreateSavedPaymentMethod=100]="_01_Client_BeginCreateSavedPaymentMethod",e[e._02_Server_SetupSavedPaymentMethod=200]="_02_Server_SetupSavedPaymentMethod",e[e._03_Client_CollectPaymentDetails=300]="_03_Client_CollectPaymentDetails",e[e._04_Server_ObtainPaymentMethod=400]="_04_Server_ObtainPaymentMethod",e[e._05_Server_SavePaymentMethod=500]="_05_Server_SavePaymentMethod"}(g||(g={}));var E,k;(k=E||(E={}))[k._02A_Server_GetOrCreateCustomer=g._02_Server_SetupSavedPaymentMethod+1]="_02A_Server_GetOrCreateCustomer",k[k._02B_Server_CreateSetupIntent=g._02_Server_SetupSavedPaymentMethod+2]="_02B_Server_CreateSetupIntent",k[k._03A_Client_CollectPaymentDetails=g._03_Client_CollectPaymentDetails+1]="_03A_Client_CollectPaymentDetails",k[k._04A_Server_ObtainPaymentMethod=g._04_Server_ObtainPaymentMethod+1]="_04A_Server_ObtainPaymentMethod",k[k._04B_Server_ObtainPaymentMethodDetails=g._04_Server_ObtainPaymentMethod+2]="_04B_Server_ObtainPaymentMethodDetails";var j=function(e,t,n){console.log("CreateSavedPaymentMethod_Stripe: "+E[e]+" "+t,n)},O=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(t,"BEGIN"),e.next=4,n();case 4:return r=e.sent,j(t,"END"),e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(0),j(t,"FAIL",{error:e.t0}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e){var t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y=!0,v.then((function(e){return h(e,t)}))}(e.stripePublicKey);return{AppWrapperComponent:function(e){var n=e.children;return c.a.createElement(u.Elements,{stripe:t},n)},PaymentMethodEntryComponent:function(e){var t,n=e.style,r=e.paymentMethodSetupToken,s=e.onPaymentMethodReady,l=Object(u.useStripe)(),f=Object(u.useElements)(),d=Object(i.useState)(null),m=d[0],p=d[1],h=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),l&&f){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,O(E._03A_Client_CollectPaymentDetails,Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(S.a)(r),e.next=3,l.confirmCardSetup(t.clientSecret,{payment_method:{card:f.getElement(u.CardElement),billing_details:t.customerBillingDetails}});case 3:if(!(n=e.sent).error&&n.setupIntent){e.next=6;break}throw new x("Stripe Payment Error",n.error);case 6:return e.abrupt("return",n.setupIntent);case 7:case"end":return e.stop()}}),e)}))));case 6:if(n=e.sent){e.next=9;break}return e.abrupt("return");case 9:s(Object(S.c)({setupIntent:n})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),p({message:"Stripe Payment Error",error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),v=n,y={base:{color:v.textColor,fontSize:v.fontSize?v.fontSize+"px":"",fontFamily:v.fontFamily,fontSmoothing:"antialiased","::placeholder":{color:v.textColor,opacity:.8}},invalid:{color:v.textColor_invalid,iconColor:v.textColor_invalid}},g={marginBottom:v.elementPadding,padding:v.textPadding,backgroundColor:v.backgroundColor,borderWidth:1,borderStyle:"solid",borderColor:v.borderColor,borderRadius:v.borderRadius},b={color:v.textColor,backgroundColor:v.backgroundColor,borderWidth:1,borderStyle:"solid",borderColor:v.borderColor,borderRadius:v.borderRadius,fontSize:v.fontSize?v.fontSize+"px":"",fontFamily:v.fontFamily,fontSmoothing:"antialiased",fontWeight:"bold",padding:v.textPadding,marginBottom:v.elementPadding},w="left"===v.buttonAlignment?"flex-start":"right"===v.buttonAlignment?"flex-end":"center",k={marginBottom:v.elementPadding,padding:v.textPadding,backgroundColor:v.backgroundColor,borderWidth:1,borderStyle:"solid",borderColor:v.borderColor,borderRadius:v.borderRadius},j={color:v.textColor_invalid,fontSize:v.fontSize?v.fontSize+"px":"",fontFamily:v.fontFamily,fontSmoothing:"antialiased",fontWeight:"bold",padding:v.textPadding,marginBottom:v.elementPadding};return c.a.createElement("form",{onSubmit:h},c.a.createElement("div",{style:g},c.a.createElement(u.CardElement,{options:{style:y}})),m&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:k},c.a.createElement("span",{style:j},m.message))),!m&&c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:w}},c.a.createElement("button",{type:"submit",disabled:!l||!f,style:b},null!==(t=v.buttonText)&&void 0!==t?t:"Subscribe")))}}}},PyWT:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n("t8gp"),a=function(){return{width:104,height:104,segments:[]}},o=function(e){if(e.length<=0)return"";var t=e[0],n="";return e.slice(1).forEach((function(e){n+=e.x-t.x+","+(e.y-t.y)+";",t=e})),n},i=function(e,t,n){if(!n)return[{x:e,y:t}];var a={x:e,y:t},o=n.split(";").filter((function(e){return e})).map((function(e){var t=e.split(","),n={x:a.x+Number.parseInt(t[0],10),y:a.y+Number.parseInt(t[1],10)};return a=n,n}));return Object(r.a)(o)},c=function(e){var t={w:e.width,h:e.height,s:e.segments.map((function(e){return{x:e.points[0].x,y:e.points[0].y,p:o(e.points)}}))};return{doodleText:JSON.stringify(t)}},u=function(e){var t=JSON.parse(e.doodleText);return{width:t.w,height:t.h,segments:t.s.map((function(e){return{points:[{x:e.x,y:e.y}].concat(Object(r.a)(i(e.x,e.y,e.p)))}}))}},s=function(e){if(e.points.length<=0)return"";if(1===e.points.length)return"M"+e.points[0].x+" "+e.points[0].y+" L"+e.points[0].x+" "+e.points[0].y;var t=e.points[0];return"M"+e.points[0].x+" "+e.points[0].y+" l"+e.points.slice(1).map((function(e){var n=e.x-t.x+" "+(e.y-t.y);return t=e,n})).join(" ")}},QZUc:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o}));var r=function(e){return e},a=function(e){return e},o=function(e){return e}},S1bJ:function(e,t,n){},Yh9R:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={doodleSummary:"doodle/summary",doodleDrawingsPrefix:"doodle/drawings",doodlePartyDrawingsPrefix:"doodle/party/drawings",doodleVotesPrefix:"doodle/votes"}},ZUB1:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("ERkP"),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=r.createContext&&r.createContext(a),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n};function u(e){return function(t){return r.createElement(s,i({attr:i({},e.attr)},t),function e(t){return t&&t.map((function(t,n){return r.createElement(t.tag,i({key:n},t.attr),e(t.child))}))}(e.child))}}function s(e){var t=function(t){var n,a=e.size||t.size||"1em";t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className);var o=e.attr,u=e.title,s=c(e,["attr","title"]);return r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,s,{className:n,style:i({color:e.color||t.color},t.style,e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),u&&r.createElement("title",null,u),e.children)};return void 0!==o?r.createElement(o.Consumer,null,(function(e){return t(e)})):t(a)}},aEBB:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=n("uTf4"),c=function(e){function t(e,t){return n.apply(this,arguments)}function n(){return(n=Object(o.a)(a.a.mark((function t(n,r){var o,c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.uploadApiUrl+"/"+n,c={endpoint:n,data:r},t.next=4,Object(i.b)(o,c);case 4:return u=t.sent,t.abrupt("return",u.data);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{createUploadUrl:function(e){return t("createUploadUrl",e)},renewUploadUrl:function(e){return t("renewUploadUrl",e)}}}},aLR2:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("DTYs"),a=function(){if("web"!==r.c.OS)return{speak:function(){},getVoicesForLanguange:function(){return[]},setVoiceForLanguange:function(){}};var e=window.speechSynthesis,t={};return{speak:function(n,r){var a,o=null!==(a=t[null!=r?r:"en"])&&void 0!==a?a:null;try{var i=new SpeechSynthesisUtterance(n);i.voice=o,e.speak(i)}catch(c){}},getVoicesForLanguange:function(n){var r=e.getVoices();return console.log("voices",{voices:r}),r.filter((function(e){return e.lang.startsWith(n)})).map((function(e){return{voice:e,isSelected:t[n]===e}}))},setVoiceForLanguange:function(e,n){t[e]=n}}}},bQih:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("ERkP"),a=n.n(r),o=n("DTYs"),i=n("gptL"),c=n("olhD"),u=n("H5jT"),s=n("O6JU"),l=n("7vau"),f=n("gLDK"),d=n("5UfP"),m=function(e){var t,n=null!==(t=e.style)&&void 0!==t?t:e.styleAlt?i.c.button_formAction_alt:i.c.button_formAction;return a.a.createElement(o.g,{style:Object(i.b)(n),onPress:e.onPress},a.a.createElement(o.e,{style:Object(i.a)(n)},e.children))},p={Loading:c.a,LoadingInline:c.b,ErrorBox:u.a,ErrorMessage:u.b,View_Panel:function(e){return a.a.createElement(o.h,Object.assign({style:i.c.view_panel},e))},View_Form:function(e){return a.a.createElement(o.h,Object.assign({style:i.c.view_form},e))},View_FormFields:function(e){return a.a.createElement(o.h,Object.assign({style:i.c.view_formFields},e))},View_FieldRow:function(e){return a.a.createElement(o.h,Object.assign({style:i.c.view_fieldRow},e))},View_FormActionRow:function(e){return a.a.createElement(o.h,Object.assign({style:i.c.view_formActionRow},e))},Text_FormTitle:function(e){return a.a.createElement(o.e,Object.assign({style:i.c.text_formTitle},e))},Text_FieldLabel:function(e){return a.a.createElement(o.e,Object.assign({style:i.c.text_fieldLabel,numberOfLines:1},e))},Button_FieldInline:function(e){return a.a.createElement(m,Object.assign({style:e.styleAlt?i.c.button_fieldInline_alt:i.c.button_fieldInline},e))},Button_FormAction:function(e){return a.a.createElement(m,Object.assign({style:e.styleAlt?i.c.button_formAction_alt:i.c.button_formAction},e))},Input_Text:function(e){var t;return a.a.createElement(o.f,{style:null!==(t=e.style)&&void 0!==t?t:i.c.input_fieldEntry,keyboardType:"default",autoCompleteType:"off",placeholder:e.placeholder,editable:e.editable,value:""+e.value,onChange:function(t){return e.onChange(t)},onSubmitEditing:e.onSubmit,onFocus:e.onFocus,onBlur:e.onBlur})},Input_Username:function(e){var t;return a.a.createElement(o.f,{style:null!==(t=e.style)&&void 0!==t?t:i.c.input_fieldEntry,keyboardType:"default",autoCompleteType:"username",placeholder:e.placeholder,editable:e.editable,value:""+e.value,onChange:function(t){return e.onChange(t)},onSubmitEditing:e.onSubmit})},Input_Password:function(e){var t,n=Object(r.useState)(!1),c=n[0],u=n[1],s=null!==(t=e.style)&&void 0!==t?t:i.c.input_fieldEntry,l=s.marginRight;return a.a.createElement(o.h,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(o.f,{style:Object.assign({},s,{marginRight:0}),keyboardType:"default",autoCompleteType:"password",secureTextEntry:!c,placeholder:e.placeholder,editable:e.editable,value:""+e.value,onChange:function(t){return e.onChange(t)},onSubmitEditing:e.onSubmit,onBlur:e.onBlur}),a.a.createElement(o.g,{onPress:function(){return u((function(e){return!e}))},style:{outlineColor:i.c.icon.outlineColor}},a.a.createElement(o.h,{style:{paddingLeft:4,paddingRight:4,marginRight:l}},a.a.createElement(f.a,{style:i.c.icon,kind:c?d.a.eye:d.a.eyeSlash}))))},Input_Phone:function(e){var t,n=Object(r.useState)(Object(s.a)(e.value)),c=n[0],u=n[1];return a.a.createElement(o.f,{style:null!==(t=e.style)&&void 0!==t?t:i.c.input_fieldEntry,keyboardType:"phone-pad",autoCompleteType:"tel",placeholder:e.placeholder,editable:e.editable,value:c,onChange:function(t){u(Object(s.a)(t)),e.onChange(Object(s.b)(t))},onSubmitEditing:e.onSubmit})},Input_Email:function(e){var t,n=Object(r.useState)(Object(l.a)(e.value)),c=n[0],u=n[1];return a.a.createElement(o.f,{style:null!==(t=e.style)&&void 0!==t?t:i.c.input_fieldEntry,keyboardType:"email-address",autoCompleteType:"email",placeholder:e.placeholder,editable:e.editable,value:c,onChange:function(t){u(Object(l.a)(t)),e.onChange(Object(l.a)(t))},onSubmitEditing:e.onSubmit})},Input_Currency:function(e){var t;return a.a.createElement(o.f,{style:null!==(t=e.style)&&void 0!==t?t:i.c.input_fieldEntry,keyboardType:"numeric",autoCompleteType:"off",placeholder:e.placeholder,editable:e.editable,value:""+e.value,onChange:function(t){return e.onChange(Number.parseFloat(t)||0)},onSubmitEditing:e.onSubmit})}}},bnqU:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var r=n("BQ33"),a=n.n(r),o=n("CN1R"),i=n.n(o),c=n("vm2h"),u=n.n(c);a.a.extend(i.a),a.a.extend(u.a);var s=function(e){return a()(e).format("L")},l=function(e){return a()(e).fromNow()}},eCSs:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y"));function i(e){return c.apply(this,arguments)}function c(){return(c=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},fRV1:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}e.exports=n},gLDK:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("ERkP"),a=n.n(r),o=n("gptL"),i=n("ilhn"),c=n("3pNR"),u=n("T8kG"),s=n("DTYs"),l=n("5UfP");var f=function(e){var t,n,r,f,d,m=function(e){switch(e){case l.a.menu:return{name:"menu",component:i.f};case l.a.back:return{name:"arrow-back",component:i.a};case l.a.error:return{name:"error-outline",component:i.e};case l.a.expanded:return{name:"chevron-down",component:c.a};case l.a.collapsed:return{name:"chevron-right",component:c.b};case l.a.copy:return{name:"content-copy",component:i.c};case l.a.retry:return{name:"reload",component:u.f};case l.a.dashboard:return{name:"dashboard",component:i.d};case l.a.add:return{name:"plus",component:u.e};case l.a.remove:return{name:"minus",component:u.d};case l.a.eye:return{name:"eye",component:u.b};case l.a.eyeSlash:return{name:"eye-slash",component:u.c};case l.a.checkChecked:return{name:"checked",component:u.a};case l.a.checkUnchecked:return{name:"unchecked",component:u.g};default:return{name:"unknown",component:i.b}}}(e.kind),p=m.component,h=null!==(t=null!==(n=null===(r=e.style)||void 0===r?void 0:r.size)&&void 0!==n?n:o.c.icon.size)&&void 0!==t?t:o.c.sizes.fontSize;return a.a.createElement(s.h,{style:{width:h,height:h}},a.a.createElement(p,{name:m.name,size:h,color:null!==(f=null===(d=e.style)||void 0===d?void 0:d.color)&&void 0!==f?f:o.c.icon.color}))}},gptL:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return l}));var r=function(e){var t,n,r,a,o,i,c,u;return{display:e.display,flexDirection:e.flexDirection,flex:e.flex,justifyContent:e.justifyContent,alignItems:e.alignItems,overflow:e.overflow,background:e.background,margin:e.margin,marginLeft:null!==(t=e.margin)&&void 0!==t?t:e.marginLeft,marginRight:null!==(n=e.margin)&&void 0!==n?n:e.marginRight,marginTop:null!==(r=e.margin)&&void 0!==r?r:e.marginTop,marginBottom:null!==(a=e.margin)&&void 0!==a?a:e.marginBottom,padding:e.padding,paddingRight:null!==(o=e.padding)&&void 0!==o?o:e.paddingRight,paddingLeft:null!==(i=e.padding)&&void 0!==i?i:e.paddingLeft,paddingTop:null!==(c=e.padding)&&void 0!==c?c:e.paddingTop,paddingBottom:null!==(u=e.padding)&&void 0!==u?u:e.paddingBottom,width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth,height:e.height,borderWidth:e.borderWidth,borderRadius:e.borderRadius,borderColor:e.borderColor,borderStyle:e.borderStyle,outlineColor:e.outlineColor}},a=function(e){return{color:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontWeight:e.fontWeight,lineHeight:e.lineHeight,outlineColor:e.outlineColor}},o={text:"#333333",text_header:"#333333",text_button:"#333333",text_error:"#333333",text_errorMessage:"#ff3333",border:"#cccccc",border_minor:"#cccccc",border_input:"#cccccc",outline:"#888888",background:"#ffffff",background_field:"#dddddd",background_button:"#eeeeee",background_error:"#ffcccc",loader:"#3333ff",icon:"#3333ff"},i=function(e){var t,n,r,a;return{borderWidth:e.all,borderLeftWidth:null!==(t=e.left)&&void 0!==t?t:e.all,borderRightWidth:null!==(n=e.right)&&void 0!==n?n:e.all,borderTopWidth:null!==(r=e.top)&&void 0!==r?r:e.all,borderBottomWidth:null!==(a=e.bottom)&&void 0!==a?a:e.all}},c={textPadding:4,borderWidth:{all:1},borderWidth_minor:{all:1},borderWidth_input:{all:1},borderRadius:4,sectionGap:16,elementGap:8,rowGap:4,rowPadding:4,fontSize:14,fontSize_input:16,fontSize_button:14,fontSize_header:16,lineHeight:"18px",minWidth_label:120,minWidth_input:120,minWidth_button:120,icon:14},u={fontFamily:'"Trebuchet MS", Helvetica, Roboto, sans-serif',fontWeight_normal:"normal",fontWeight_button:"bold",fontWeight_header:"bold"},s=function(e,t,n){var r=Object.assign({},i(t.borderWidth),{borderRadius:t.borderRadius,borderColor:e.border,borderStyle:"solid",outlineColor:e.outline}),a=Object.assign({},i(t.borderWidth_minor),{borderRadius:t.borderRadius,borderColor:e.border_minor,borderStyle:"solid",outlineColor:e.outline}),o=Object.assign({},i(t.borderWidth_input),{borderRadius:t.borderRadius,borderColor:e.border_input,borderStyle:"solid",outlineColor:e.outline}),c={};return{colors:e,sizes:t,font:n,view_panel:{background:e.background,padding:t.elementGap},view_form:Object.assign({},r,{marginBottom:t.sectionGap,padding:t.elementGap}),text_formTitle:{padding:t.textPadding,color:e.text_header,fontSize:t.fontSize_header,fontFamily:n.fontFamily,fontWeight:n.fontWeight_header},view_formFields:Object.assign({},a,{marginBottom:t.rowGap,background:e.background_field}),view_fieldRow:{marginLeft:t.rowPadding,display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap"},text_fieldLabel:{padding:t.textPadding,color:e.text,fontSize:t.fontSize,fontWeight:n.fontWeight_normal,minWidth:t.minWidth_label},input_fieldEntry:Object.assign({},o,{marginBottom:t.rowGap,marginRight:t.rowGap,padding:t.textPadding,color:e.text,fontSize:t.fontSize_input,fontWeight:n.fontWeight_normal,lineHeight:t.lineHeight,minWidth:t.minWidth_input}),button_fieldInline:c=Object.assign({},r,{marginBottom:t.rowGap,marginRight:t.rowGap,padding:t.textPadding,background:e.background_button,color:e.text_button,fontSize:t.fontSize_button,fontWeight:n.fontWeight_button,lineHeight:t.lineHeight,display:"flex",minWidth:t.minWidth_button}),button_fieldInline_alt:c=Object.assign({},c,{background:e.text_button,color:e.background_button,borderColor:e.background_button}),view_formActionRow:{display:"flex",flexDirection:"row",justifyContent:"flex-end",marginBottom:t.elementGap},button_formAction:c=Object.assign({},r,{marginLeft:t.elementGap,padding:t.textPadding,background:e.background_button,color:e.text_button,fontSize:t.fontSize_button,fontWeight:n.fontWeight_button,lineHeight:t.lineHeight,minWidth:t.minWidth_button}),button_formAction_alt:c=Object.assign({},c,{background:e.text_button,color:e.background_button,borderColor:e.background_button}),view_error:Object.assign({},r,{marginBottom:t.sectionGap,padding:t.rowPadding,background:e.background_error}),text_error:{padding:t.textPadding,color:e.text_error,fontSize:t.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight_button},text_errorMessage:{padding:t.textPadding,color:e.text_errorMessage,fontSize:t.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight_button},icon:{size:t.icon,color:e.icon,outlineColor:e.outline},icon_errorMessage:{size:t.icon,color:e.text_errorMessage,outlineColor:e.outline}}},l=(Object.assign({},o,{text:"#2b2b2b",text_header:"#863d8f",text_button:"#ffffff",border:"#863d8f",border_minor:"#863d8f",border_input:"#aaaaaa",background:"#ffffff",background_field:"#dddddd",background_button:"#863d8f",loader:"#863d8f",icon:"#863d8f"}),Object.assign({},c,{borderWidth:{all:1,bottom:4},borderWidth_minor:{all:0,bottom:1}}),s(o,c,u))},hsFx:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return d}));var r=n("t8gp"),a=n("+tC1");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e,t,n){var r=t.indexOf(e);if(r<0)throw new Error("moveItem Failed to find an item in the from array: "+JSON.stringify({obj:e,from:t,to:n}));t.splice(r,1),n.push(e)},u=function(e){var t=new Set(e);return Object(r.a)(t)},s=function(e){return e.map((function(e){return{x:e,value:Math.random()}})).sort((function(e,t){return e.value-t.value})).map((function(e){return e.x}))},l=function(e,t){var n={};return e.forEach((function(e){n[t(e)]=e})),Object(a.a)(n)},f=function(e,t){for(var n,r={},a=o(e);!(n=a()).done;){var i,c=n.value;(null!==(i=r[t(c)])&&void 0!==i?i:r[t(c)]=[]).push(c)}return r};function d(e,t){if(e===t)return!0;if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}},kDUE:function(e,t,n){"use strict";var r=n("gpmR"),a=n("JLWX"),o=n("mD7w"),i=function(e,t,n,c,u,s,l,f){for(var d,m=u,p=0,h=!!l&&o(l,f,3);p<c;){if(p in n){if(d=h?h(n[p],p,t):n[p],s>0&&r(d))m=i(e,t,d,a(d.length),m,s-1)-1;else{if(m>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[m]=d}m++}p++}return m};e.exports=i},"kNg/":function(e,t,n){n("M3SG")("flatMap")},njmQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=n("ERkP"),c=n("hsFx");function u(){var e=function(){var e=Object(i.useRef)(!0);return Object(i.useEffect)((function(){return function(){e.current=!1}}),[]),{mounted:e}}().mounted,t=Object(i.useState)({loading:!1,error:null}),n=t[0],r=t[1];return{loading:n.loading,error:n.error,doWork:function(t,n){var i=void 0,u=function(){if(!e.current)throw"unmounted";var t=null==n?void 0:n();if(!Object(c.e)(i,t))throw"changedContext"},s=function(){var c=Object(o.a)(a.a.mark((function o(){var c;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=null==n?void 0:n(),r({loading:!0,error:null}),!1,a.prev=3,a.prev=4,a.next=7,t(u);case 7:u(),r({loading:!1,error:null}),a.next=15;break;case 11:if(a.prev=11,a.t0=a.catch(4),"unmounted"===a.t0||"changedContext"===a.t0){a.next=15;break}throw a.t0;case 15:a.next=23;break;case 17:if(a.prev=17,a.t1=a.catch(3),!0,e.current){a.next=22;break}return a.abrupt("return");case 22:r({loading:!1,error:{message:null!==(c=a.t1.message)&&void 0!==c?c:"Unknown Error in doWork",error:a.t1,retryCallback:s}});case 23:case"end":return a.stop()}}),o,null,[[3,17],[4,11]])})));return function(){return c.apply(this,arguments)}}();Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}}}},olhD:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n("ERkP"),a=n.n(r),o=n("DTYs"),i=n("gptL"),c=function(e){return e.loading?a.a.createElement(o.h,null,a.a.createElement(o.a,{size:"large",color:i.c.colors.loader})):a.a.createElement(a.a.Fragment,null)},u=function(e){return e.loading?a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a,{size:"small",color:i.c.colors.loader})):a.a.createElement(a.a.Fragment,null)}},oo7O:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("t8gp"),a=n("a1TR"),o=n.n(a),i=(n("3yYM"),n("Ab9Y")),c=n("hsFx"),u=n("Ti7Q"),s=function(e){var t,n,a=e.speechService,s=e.maxAnswers,l=void 0===s?4:s,f=e.sectionSize,d=void 0===f?25:f,m=a,p=Object(u.a)(),h=Math.ceil(p.length/d),v={nextIndex:0,completedSectionKeys:[]},y=function(e){return""+e};return{load:(n=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:(n=e.sent)&&(v=n);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),save:(t=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.save(v);case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),getSections:function(){return Object(r.a)(new Array(h)).map((function(e,t){return{key:y(t),name:(n=t,"Spelling "+(n+1)),isComplete:v.completedSectionKeys.includes(y(t))};var n}))},gotoSection:function(e){var t=e.key,n=Number.parseInt(t,10);v.nextIndex=n*d,console.log("createSpellingProblemService gotoSection",{key:t,a:n,state:v})},getNextProblem:function(){v.nextIndex>=p.length&&(v.nextIndex=0);var e=v.nextIndex;v.nextIndex++;var t=p[e],n=t.word,a=l-1,o=Object(c.f)(Object(c.a)(t.mispellings)).slice(0,a),i=Object(c.f)([].concat(Object(r.a)(o.map((function(e){return{value:""+e,isCorrect:!1}}))),[{value:""+n,isCorrect:!0}])).map((function(e){return Object.assign({},e,{key:e.value})})),u=(e+1)%d==0,s=e===p.length-1;return{key:""+(e+1),question:"Word "+(e+1),onQuestion:function(){m.speak(n)},answers:i,sectionKey:y(Math.floor(e/d)),isLastOfSection:u,isLastOfSubject:s}},recordAnswer:function(e,t){t.isCorrect&&e.isLastOfSection&&v.completedSectionKeys.push(e.sectionKey)}}}},pzhj:function(e,t,n){"use strict";n.r(t),n.d(t,"EducationalGame_StarBlastSideways_Multiples",(function(){return b})),n.d(t,"EducationalGame_StarBlastSideways",(function(){return w}));var r=n("t8gp"),a=n("ERkP"),o=n.n(a),i=n("DTYs"),c=n("a1TR"),u=n.n(c),s=(n("3yYM"),n("Ab9Y")),l=n("hsFx"),f=function(e){var t=Object(a.useRef)({moveDirection:{x:0,y:0},buttons:e.buttons.map((function(n,r){return{isDown:!1,key:n.key,text:n.text,onPressIn:function(){t.current.buttons[r].isDown=!0,e.onPressStateChange(t.current)},onPressOut:function(){t.current.buttons[r].isDown=!1,e.onPressStateChange(t.current)}}}))});return o.a.createElement(m,Object.assign({},e,{onMovePressIn:function(n){var r=t.current;t.current.moveDirection={x:n.x?n.x:r.moveDirection.x,y:n.y?n.y:r.moveDirection.y},console.log("onMovePressIn",{dir:n,s:r,moveDirection:t.current.moveDirection}),e.onPressStateChange(t.current)},onMovePressOut:function(n){var r=t.current;t.current.moveDirection={x:n.x?0:r.moveDirection.x,y:n.y?0:r.moveDirection.y},e.onPressStateChange(t.current)},buttons:t.current.buttons}))},d={container:{flex:1,alignSelf:"stretch",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:4},section:{justifyContent:"center",alignItems:"center",padding:4},moveSectionWrapper:{overflow:"hidden"},moveSectionRotation:{transform:"rotate(0.125turn)",margin:0},row:{flexDirection:"row"},cellTouch:{outline:"none"},cellView:{pointerEvents:"none",position:"relative",margin:4,width:56,height:56,justifyContent:"center",alignItems:"center",borderWidth:0,borderStyle:"solid",outline:"none"},cellText:{userSelect:"none",pointerEvents:"none"},moveCellText:{userSelect:"none",pointerEvents:"none",transform:"rotate(-0.125turn)"},cellEmptyView:{margin:2,width:56,height:56},cellTextOcclusionView:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"red",opacity:0}},m=function(e){var t=e.onMovePressIn,n=e.onMovePressOut,r=Object.assign({},d.cellView,e.style);Object(a.useEffect)((function(){var r=function(e){var t;return e.preventDefault(),null===(t=e.stopPropagation)||void 0===t||t.call(e),!1};if("web"===i.c.OS){var a=function(n){return"ArrowUp"===n.key?(t({x:0,y:1}),r(n)):"ArrowDown"===n.key?(t({x:0,y:-1}),r(n)):"ArrowLeft"===n.key?(t({x:-1,y:0}),r(n)):"ArrowRight"===n.key?(t({x:1,y:0}),r(n)):" "!==n.key||(null===(a=e.buttons[0])||void 0===a||a.onPressIn(),r(n));var a},o=function(t){return"ArrowUp"===t.key?(n({x:0,y:1}),r(t)):"ArrowDown"===t.key?(n({x:0,y:-1}),r(t)):"ArrowLeft"===t.key?(n({x:-1,y:0}),r(t)):"ArrowRight"===t.key?(n({x:1,y:0}),r(t)):" "!==t.key||(null===(a=e.buttons[0])||void 0===a||a.onPressOut(),r(t));var a};return window.addEventListener("keydown",a),window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",o)}}return function(){}}));var c=function(e){var a=e.text,c=e.direction;return o.a.createElement(i.d,{style:d.cellTouch,onPressIn:function(){return t(c)},onPressOut:function(){return n(c)}},o.a.createElement(i.h,{style:r},o.a.createElement(i.e,{style:d.moveCellText},a),o.a.createElement(i.h,{style:d.cellTextOcclusionView})))},u=function(e){var t=e.text,n=e.onPressIn,a=e.onPressOut;return o.a.createElement(i.d,{style:d.cellTouch,onPressIn:n,onPressOut:a},o.a.createElement(i.h,{style:r},o.a.createElement(i.e,{style:d.cellText},t),o.a.createElement(i.h,{style:d.cellTextOcclusionView})))};return o.a.createElement(i.h,{style:d.container},o.a.createElement(i.h,{style:d.moveSectionWrapper},o.a.createElement(i.h,{style:d.moveSectionRotation},o.a.createElement(i.h,{style:d.section},o.a.createElement(i.h,{style:d.row},o.a.createElement(c,{direction:{x:0,y:1},text:"â¬†"}),o.a.createElement(c,{direction:{x:1,y:0},text:"âž¡"})),o.a.createElement(i.h,{style:d.row},o.a.createElement(c,{direction:{x:-1,y:0},text:"â¬…"}),o.a.createElement(c,{direction:{x:0,y:-1},text:"â¬‡"}))))),o.a.createElement(i.h,{style:d.section},o.a.createElement(i.h,{style:d.row},e.buttons.map((function(e){return o.a.createElement(o.a.Fragment,{key:""+e.text},o.a.createElement(i.h,{style:d.cellEmptyView}),o.a.createElement(u,e))})))))},p=function(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},h=n("9u8u"),v=n("7h3R"),y=n("yyXn"),g=n("yxiS"),b=function(e){return o.a.createElement(w,{problemService:Object(y.a)(Object(h.a)((t={min:1,max:12},i=t.min,c=void 0===i?1:i,f=t.max,d=void 0===f?12:f,m=t.maxAnswers,p=void 0===m?4:m,v={n:c-1,m:c,completedSectionKeys:[]},g=function(e){return""+e},{load:(a=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:(n=e.sent)&&(v=n);case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),save:(n=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.save(v);case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)}),getSections:function(){return Object(r.a)(new Array(d-c+1)).map((function(e,t){return{key:g(t+c),name:(n=t+c,"Multiples of "+n),isComplete:v.completedSectionKeys.includes(g(t+c))};var n}))},gotoSection:function(e){var t=e.key,n=Number.parseInt(t,10);v.m=n,v.n=c-1},getNextProblem:function(){v.n++,v.n>d&&(v.n=c,v.m++,v.m>d&&(v.n=c,v.m=c));var e=v,t=e.n,n=e.m,a=t*n,o=p-1,i=Object(l.a)(Object(r.a)(new Array(100)).map((function(){return Math.round(t+1-2*Math.random())*Math.round(n+1-2*Math.random())+Math.round(2-4*Math.random())})).filter((function(e){return e!==a})).filter((function(e){return e>0}))).slice(0,o),u=Object(l.f)([].concat(Object(r.a)(i.map((function(e){return{value:""+e,isCorrect:!1}}))),[{value:""+a,isCorrect:!0}])).map((function(e){return Object.assign({},e,{key:e.value})}));return{key:n+" x "+t,question:n+" x "+t,answers:u,sectionKey:g(n),isLastOfSection:t===d,isLastOfSubject:t===d&&n===d}},recordAnswer:function(e,t){t.isCorrect&&e.isLastOfSection&&v.completedSectionKeys.push(e.sectionKey)}}),{}),"ProblemsMultiples")});var t,n,a,i,c,f,d,m,p,v,g},w=function(e){return o.a.createElement(x,{problemService:Object(v.createProgressGameProblemService)(e.problemService)})},x=function(e){var t=Object(a.useState)({paused:!1}),n=t[0],r=t[1],c=Object(a.useState)({moveDirection:{x:0,y:0},buttons:[]}),u=c[0],s=c[1],l=Object(a.useState)(0),d=l[0],m=l[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.h,null,o.a.createElement(i.h,{style:{alignItems:"center",alignSelf:"stretch"}},o.a.createElement(i.h,{style:{overflow:"hidden",padding:10,paddingTop:4,paddingBottom:64}},o.a.createElement(i.h,{style:{position:"relative"}},o.a.createElement(k,{pressState:u,pauseState:n,problemService:e.problemService,problemSourceKey:""+d}),o.a.createElement(i.h,{style:{zIndex:10,flex:1,alignSelf:"stretch"}},o.a.createElement(f,{style:S.gamepad,onPressStateChange:function(e){s(e)},buttons:[{key:"A",text:"ðŸ”¥"}]}))))),o.a.createElement(g.a,{problemService:e.problemService,onOpen:function(){return r({paused:!0})},onClose:function(){return r({paused:!1})},onSubjectNavigation:function(){r({paused:!1}),m((function(e){return e+1}))}})))},S={gamepad:{backgroundColor:"#333333",borderColor:"#000033"},viewscreen:{borderColor:"#000033",backgroundColor:"#000000"}},E={directAnswerButtonContainer:{alignSelf:"flex-end",justifyContent:"space-around",height:250,padding:4},directAnswerButton:{width:40,height:40,backgroundColor:"#FFFFFF",opacity:.1},directAnswerButton_hidden:{width:40,height:40},viewscreenView:{height:300,width:300,backgroundColor:S.viewscreen.backgroundColor,borderColor:S.viewscreen.borderColor,borderWidth:1,borderStyle:"solid"},sprite:{viewSize:{width:32,height:32},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:32,textAlign:"center"}},answer:{text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,fontSize_small:14,textAlign:"center",whiteSpace:"pre-wrap"}},question:{view:{flex:1,justifyContent:"center",padding:4},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,fontSize_small:14,whiteSpace:"pre-wrap"}},gameOver:{view:{flex:1,justifyContent:"center",padding:4},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,textAlign:"center"}}},k=function(e){var t,n,c,u,s,l,f,d=Object(a.useRef)(e.pressState);d.current=e.pressState;var m=Object(a.useRef)(e.pauseState);m.current=e.pauseState;var p=function(){return{lastActualTimeMs:Date.now(),lastGameTime:0,gameSpeed:1,lives:3,score:0}},h=Object(a.useRef)(p()),v=function(){var e=Date.now(),t=(e-h.current.lastActualTimeMs)/1e3;if(h.current.lastActualTimeMs=e,0===t)return{gameTime:h.current.lastGameTime};t>.1&&(t=.1);var n=t*h.current.gameSpeed,r=h.current.lastGameTime+n;return h.current.lastGameTime=r,{gameTime:r}},y=Object(a.useRef)({y:.5*E.viewscreenView.height,x:.15*E.viewscreenView.width,rotation:0}),g=Object(a.useRef)({lastShotActualTime:0,shots:[],debris:[]}),b=Object(a.useRef)({enemies:[]}),w=Object(a.useRef)(null),x=Object(a.useState)(0),S=(x[0],x[1]),k=function(){b.current.enemies.forEach((function(e){e.pos.x+=.5*E.viewscreenView.width})),y.current.y=.5*E.viewscreenView.height,y.current.x=.15*E.viewscreenView.width,h.current=Object.assign({},p(),{lastGameTime:h.current.lastGameTime})};Object(a.useEffect)((function(){!function t(){var n=e.problemService.getNextProblem();if(console.log("gotoNextProblem",{p:n}),n.question){var r=E.viewscreenView.width/(n.answers.length+1),a={problemTime:v().gameTime,question:n.question,answers:n.answers.map((function(e,t){return Object.assign({},e,{key:n.question+" "+e.value,pos:{y:r*(.5+t),x:E.viewscreenView.width-.5*E.sprite.viewSize.width,rotation:0},isAnsweredWrong:!1})}))},o={enemies:a.answers.map((function(a,o){var i={key:n.question+" "+a.value,answer:a,pos:{y:r*(.5+o),x:E.viewscreenView.width-1.5*E.sprite.viewSize.width,rotation:0},vel:{x:-5,y:0},onHit:function(){setTimeout((function(){console.log("onHit",{ans:a}),e.problemService.recordAnswer(n,a),a.isCorrect?(g.current.shots.forEach((function(e){e.ignore=!0})),t(),h.current=Object.assign({},h.current,{score:h.current.score+=1e3*Math.floor(i.pos.x),gameSpeed:Math.min(5,1*h.current.gameSpeed+.1)})):(a.isAnsweredWrong=!0,h.current=Object.assign({},h.current,{score:h.current.score-=1500*Math.floor(i.pos.x),gameSpeed:Math.max(.5,1*h.current.gameSpeed-.2)}))}))},destroyed:!1};return i}))};w.current=a,b.current=o,S((function(e){return e+1})),setTimeout((function(){var e;null===(e=n.onQuestion)||void 0===e||e.call(n)}),250)}}()}),[e.problemSourceKey]),Object(a.useEffect)((function(){var e=v().gameTime;requestAnimationFrame((function t(){var n,r=v().gameTime,a=r-e;if(e=r,m.current.paused||a<=0)requestAnimationFrame(t);else{var o=function(){return{gameTime:r,gameDeltaTime:a,gameState:h.current,pressState:d.current,playerPosition:y.current,projectilesState:g.current,enemiesState:b.current,onLoseLife:function(){h.current.deadTime||h.current.gameOverTime||(g.current.debris.push({key:"player"+r,kind:"player-character",pos:Object.assign({},y.current),vel:{x:0,y:0}}),h.current.lives<=1?h.current=Object.assign({},h.current,{lives:0,gameOverTime:v().gameTime}):h.current=Object.assign({},h.current,{lives:h.current.lives-1,deadTime:r}))}}},i=j(o());if(h.current=i,h.current.gameOverTime)v().gameTime>1+h.current.gameOverTime&&(null===(n=d.current.buttons[0])||void 0===n?void 0:n.isDown)&&setTimeout((function(){k()}),250);else{var c=O(o());y.current=c.playerPosition}var u=T(o());g.current=u;var s=P(o());b.current=s,requestAnimationFrame(t),S((function(e){return e+1}))}}))}),[]);var _=v().gameTime-(null!==(t=null===(n=w.current)||void 0===n?void 0:n.problemTime)&&void 0!==t?t:0);return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.h,{style:E.viewscreenView},Object(r.a)(new Array(h.current.lives)).map((function(e,t){return o.a.createElement(D,{key:"life"+t,kind:"life",position:{x:E.viewscreenView.width-E.sprite.viewSize.width*(1+t),y:E.viewscreenView.height-.5*E.sprite.viewSize.height,rotation:0}})})),g.current.debris.map((function(e){return o.a.createElement(D,{key:e.key,kind:e.hasHitGround?e.kind+"-splat":e.kind,position:e.pos})})),null===(c=b.current)||void 0===c?void 0:c.enemies.filter((function(e){return!e.destroyed})).map((function(e){return o.a.createElement(o.a.Fragment,{key:e.key},!e.answer.isAnsweredWrong&&o.a.createElement(C,{position:{y:e.pos.y,x:e.pos.x+E.sprite.viewSize.width,rotation:0},text:e.answer.value}),e.answer.isAnsweredWrong&&o.a.createElement(D,{kind:"answer-wrong",position:{y:e.pos.y,x:e.pos.x+E.sprite.viewSize.width,rotation:0}}))})),null===(u=b.current)||void 0===u?void 0:u.enemies.filter((function(e){return!e.destroyed})).map((function(e){var t;return o.a.createElement(o.a.Fragment,{key:e.key},o.a.createElement(D,{kind:e.explodeTime?"enemy-explode":"enemy",position:e.pos}),e===(null===(t=h.current.weaponsLock)||void 0===t?void 0:t.lockedEnemy)&&o.a.createElement(D,{kind:"lock",position:e.pos}))})),!h.current.gameOverTime&&!h.current.deadTime&&o.a.createElement(D,{kind:"player",position:y.current}),g.current.shots.map((function(e){return o.a.createElement(D,{key:e.key,kind:e.explodeTime?"shot-explode":"shot",position:e.pos})})),h.current.gameOverTime&&o.a.createElement(i.h,null,o.a.createElement(i.h,{style:{position:"absolute",top:.5*E.viewscreenView.height,width:E.viewscreenView.width}},o.a.createElement(i.e,{style:E.gameOver.text},"Game Over"),v().gameTime>1+h.current.gameOverTime&&o.a.createElement(i.e,{style:E.gameOver.text},"Continue?"))),o.a.createElement(i.h,{style:E.directAnswerButtonContainer},null===(s=b.current)||void 0===s?void 0:s.enemies.map((function(e){return o.a.createElement(i.g,{key:e.key,onPress:function(){return function(e){if(h.current.gameOverTime)k();else if(!h.current.deadTime&&!e.destroyed&&!e.explodeTime){h.current.weaponsLock={lockedEnemy:e,lockedAtPlayerPosition:y.current};var t=g.current.shots;t.push({key:""+v()+t.length,pos:Object.assign({},y.current),lockedEnemy:e}),h.current.playerTargetPosition={x:y.current.x,y:e.pos.y}}}(e)}},o.a.createElement(i.h,{style:e.destroyed||e.explodeTime?E.directAnswerButton_hidden:E.directAnswerButton}))})))),o.a.createElement(i.h,{style:{position:"relative",height:3*E.question.text.fontSize,alignSelf:"stretch"}},o.a.createElement(C,{text:null!==(l=null===(f=w.current)||void 0===f?void 0:f.question)&&void 0!==l?l:"",position:{x:.25*E.viewscreenView.width,y:1*E.question.text.fontSize-Math.max(0,.5*E.viewscreenView.height-125*_),rotation:0}})))},j=function(e){var t=e.gameTime,n=(e.gameDeltaTime,e.pressState,e.playerPosition),r=e.gameState,a=e.enemiesState;return r.deadTime&&t>3+r.deadTime?(n.y=.5*E.viewscreenView.height,n.x=.15*E.viewscreenView.width,a.enemies.forEach((function(e){e.pos.x+=.5*E.viewscreenView.width})),Object.assign({},r,{deadTime:void 0})):r},O=function(e){e.gameTime;var t=e.gameDeltaTime,n=e.pressState,r=e.playerPosition,a=e.gameState;if(a.deadTime)return{playerPosition:r};var o=n.moveDirection,i=a.playerTargetPosition,c=o.x||o.y?{x:o.x,y:-o.y}:i?{x:i.x-r.x,y:i.y-r.y}:{x:0,y:0};c.x=0===c.x?0:Math.sign(c.x),c.y=0===c.y?0:Math.sign(c.y),a.playerTargetPosition&&console.log("updatePlayer",{dirPress:o,dir:c,targetPos:i,playerPosition:r}),(o.x||o.y)&&(a.playerTargetPosition=void 0),a.playerTargetPosition&&p(r,a.playerTargetPosition)<25&&(a.playerTargetPosition=void 0);var u=.05*c.y,s={x:r.x+c.x*t*250,y:r.y+c.y*t*250,rotation:.9*r.rotation+.1*u},l=E.viewscreenView.width,f=.5*E.sprite.viewSize.width,d=E.viewscreenView.height,m=.5*E.sprite.viewSize.height;return s.x=s.x<f?f:s.x>l-f?l-f:s.x,s.y=s.y<m?m:s.y>d-m?d-m:s.y,{playerPosition:s}},T=function(e){var t,n=e.gameTime,r=e.gameDeltaTime,a=e.pressState,o=e.playerPosition,i=(e.enemiesState,e.projectilesState),c=e.gameState,u=e.onLoseLife,s=i.shots,l=i.debris,f=i.lastShotActualTime,d=!c.deadTime&&!c.gameOverTime&&Date.now()/1e3>.25+f&&(null===(t=a.buttons.find((function(e){return"A"===e.key})))||void 0===t?void 0:t.isDown);if(d){var m,p=null===(m=c.weaponsLock)||void 0===m?void 0:m.lockedEnemy;s.push({key:""+n+s.length,pos:Object.assign({},o),lockedEnemy:p})}s.forEach((function(e){e.explodeTime||(!e.lockedEnemy||e.lockedEnemy.explodeTime||e.lockedEnemy.destoyed?e.pos.x+=250*r:(e.pos.y+=.25*(e.lockedEnemy.pos.y-e.pos.y),e.pos.x+=Math.min(250*r,.5*(e.lockedEnemy.pos.x-e.pos.x))))})),l.forEach((function(e){if(!e.hasHitGround){e.vel.y+=100*r,e.pos.y+=e.vel.y*r,e.pos.x+=e.vel.x*r;var t=.5*E.sprite.viewSize.width,n=E.viewscreenView.width;e.pos.x<t&&(e.pos.x=t,e.vel.x=-e.vel.x),e.pos.x>n-t&&(e.pos.x=n-t,e.vel.x=-e.vel.x);var a=.8*E.sprite.viewSize.width,o=E.viewscreenView.height;e.pos.y>o-a+10*Math.random()&&(e.hasHitGround=!0,"kitten"===e.kind&&u())}})),l.length>25&&l.shift();var h=s.filter((function(e){return e.pos.x<E.viewscreenView.width})).filter((function(e){return!e.explodeTime||n<1+e.explodeTime}));return Object.assign({},i,{lastShotActualTime:d?Date.now()/1e3:f,shots:h})},P=function(e){var t=e.gameTime,n=e.gameDeltaTime,r=e.projectilesState,a=e.enemiesState,o=e.gameState,i=e.playerPosition,c=e.onLoseLife,u=a.enemies,s=r.shots,l=.75*E.sprite.viewSize.width,f=l*l;u.forEach((function(e){return s.forEach((function(n){e.explodeTime||n.explodeTime||n.ignore||n.lockedEnemy&&n.lockedEnemy!==e||p(e.pos,n.pos)<f&&(console.log("Exploded!",{e:e,s:n}),e.explodeTime=t,n.explodeTime=t,e.onHit(),e.answer.isCorrect?r.debris.push({key:e.key+" "+t,kind:"alien",pos:Object.assign({},e.pos),vel:Object.assign({},e.vel)}):r.debris.push({key:e.key+" "+t,kind:"kitten",pos:Object.assign({},e.pos),vel:Object.assign({},e.vel)}))}))}));var d=l*l*1.5*1.5;u.forEach((function(e,t){return u.forEach((function(r,a){if(!(t>=a)&&!e.explodeTime&&!r.explodeTime&&p(e.pos,r.pos)<d){var o=e.vel.y;e.vel.y=.95*r.vel.y,r.vel.y=.95*o;var i=e.pos.y<r.pos.y?e:r,c=e.pos.y<r.pos.y?r:e;i.pos.y-=10*n,c.pos.y+=10*n,i.vel.y-=10*n,c.vel.y+=10*n}}))}));var m=l*l*.8*.8;u.forEach((function(e,t){e.explodeTime||o.deadTime||o.gameOverTime||p(e.pos,i)<m&&c()})),u.forEach((function(e){if(!e.explodeTime){e.vel.y+=250*(2*Math.random()-1)*n,o.deadTime||o.gameOverTime?e.vel.x=0:e.vel.x=-25,e.pos.y>.7*E.viewscreenView.height&&(e.vel.y=-5),e.pos.x>E.viewscreenView.width-2*E.sprite.viewSize.width&&(e.pos.x=E.viewscreenView.width-2*E.sprite.viewSize.width),e.pos.x+=e.vel.x*n,e.pos.y+=e.vel.y*n;var t=.5*E.sprite.viewSize.height,r=E.viewscreenView.height;e.pos.y<t&&(e.pos.y=t,e.vel.y=5),e.pos.y>r-t&&(e.pos.y=r-t,e.vel.y=-e.vel.y);var a=.5*E.sprite.viewSize.width;e.pos.x<a&&(e.pos.x=a)}}));var h,v,y=a.enemies.filter((function(e){return!e.explodeTime&&!e.destroyed})).sort((function(e,t){return Math.abs(e.pos.y-i.y)<Math.abs(t.pos.y-i.y)?-1:1}))[0];(null==y?void 0:y.pos.x)<i.x+.5*E.sprite.viewSize.width?y.pos.y=i.y:(h=y,(null===(v=o.weaponsLock)||void 0===v?void 0:v.lockedAtPlayerPosition.y)!==i.y&&(o.weaponsLock={lockedAtPlayerPosition:i,lockedEnemy:h}));var g=u;return g.filter((function(e){return e.explodeTime&&t>1+e.explodeTime})).forEach((function(e){e.destroyed=!0})),{enemies:g}},D=function(e){var t,n,r,a,c,u=e.kind,s=e.position,l=e.text,f=function(e){switch(e){case"player":return{text:"ðŸš€",rotation:.125,offsetX:0,offsetY:-.25};case"player-character":return{text:"ðŸ˜­"};case"player-character-splat":return{text:"ðŸ˜«",rotation:.15};case"shot":return{text:"ðŸ”¥",rotation:-.25};case"shot-explode":return{text:"âœ¨",rotation:0,scale:.5};case"lock":return{text:"ðŸ’¢",offsetX:-.25,offsetY:-.125,scale:1.5};case"enemy":return{text:"ðŸ›¸",offsetX:-.125,offsetY:-.125};case"enemy-explode":return{text:"ðŸ’¥",offsetX:-.125,offsetY:-.125};case"answer-wrong":return{text:"âŒ",offsetX:-.125,offsetY:-.125};case"alien":return{text:"ðŸ‘½",offsetX:0,offsetY:0};case"kitten":return{text:"ðŸ™€",offsetX:0,offsetY:0};case"alien-splat":return{text:"ðŸ’€",offsetX:0,offsetY:0};case"kitten-splat":return{text:"ðŸ¥©",offsetX:0,offsetY:0};case"super-kitten":return{text:"ðŸ±â€ðŸ",offsetX:0,offsetY:0};case"life":return{text:"ðŸš€",scale:.5};case"text":return{text:"",offsetX:0,offsetY:-.125};default:return{text:"ðŸ˜€"}}}(u),d=E.sprite.viewSize,m=E.sprite.text.fontSize,p=Object.assign({position:"absolute"},d,{transform:"translate("+s.x+"px, "+s.y+"px) rotate("+(null!==(t=s.rotation)&&void 0!==t?t:0)+"turn)",pointerEvents:"none"}),h=Object.assign({},d,{transform:"translate( "+(-.5*d.width+Math.floor((null!==(n=f.offsetX)&&void 0!==n?n:0)*m))+"px, "+(-.5*d.height+Math.floor((null!==(r=f.offsetY)&&void 0!==r?r:0)*m))+"px) rotate("+(null!==(a=f.rotation)&&void 0!==a?a:0)+"turn) scale("+(null!==(c=f.scale)&&void 0!==c?c:1)+")"});return o.a.createElement(i.h,{style:p},o.a.createElement(i.h,{style:h},o.a.createElement(i.e,{style:E.sprite.text},null!=l?l:f.text)))},C=function(e){var t,n=e.text,r=e.position,a=E.answer.text,c=n.length>10?a.fontSize_small:a.fontSize,u=.5*-c-4,s={position:"absolute",transform:"translate("+r.x+"px, "+(r.y+u)+"px) rotate("+(null!==(t=r.rotation)&&void 0!==t?t:0)+"turn)",pointerEvents:"none",maxWidth:.5*E.viewscreenView.width};return o.a.createElement(i.h,{style:s},o.a.createElement(i.e,{style:Object.assign({},E.answer.text,{fontSize:c})},n))}},qVe0:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return y}));var r=n("ERkP"),a=n.n(r),o=n("DTYs"),i=n("PyWT"),c=n("Ig+6"),u=(n("xrQq"),n("kNg/"),n("t8gp")),s=n("hsFx"),l={rows:[{keys:"qwertyuiop".split("")},{keys:" asdfghjkl".split("")},{keys:"  zxcvbnm ".split("")}]},f={container:{},rowView:{flex:1,flexDirection:"row"},keyView:{margin:2,padding:2,flex:1,height:20,backgroundColor:"#111111",justifyContent:"center",alignItems:"center"},keyView_disabled:{opacity:.5},keyText:{fontSize:16},keyText_wrong:{fontSize:16,color:"#FF0000"}},d=function(e){var t=e.expectedCharacter,n=e.showHints,i=e.onExpectedKeyPress,c=l,d=Object(r.useState)(null),m=d[0],p=d[1],h=Object(r.useState)([]),v=h[0],y=h[1];Object(r.useEffect)((function(){n||p(null);var e=[t].concat(Object(u.a)(Object(s.f)(c.rows.flatMap((function(e){return e.keys})).map((function(e){return e.trim()})).filter((function(e){return e}))).slice(0,3)));p(e),y([])}),[t,n]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.h,{style:f.container},c.rows.map((function(e,r){return a.a.createElement(o.h,{style:f.rowView,key:""+r},e.keys.map((function(e,r){return a.a.createElement(o.g,{key:""+e+r,style:{outline:"none"},onPress:function(){var r;(r=e)!==t?n&&(p((function(e){return(null!=e?e:[]).filter((function(e){return e!==r}))})),y((function(e){return[].concat(Object(u.a)(e),[r])}))):i()}},a.a.createElement(o.h,{style:!m||m.includes(e)?{}:f.keyView_disabled},a.a.createElement(o.h,{style:f.keyView},a.a.createElement(o.e,{style:v.includes(e)?f.keyText_wrong:f.keyText},e))))})))}))))},m={container:{alignItems:"center"},drawing:{width:312,height:312,color:"#FFFFFF",backgroundColor:"#000000"},drawingChoicesView:{maxWidth:332,flexDirection:"row",flexWrap:"wrap"},drawingChoiceWrapper:{padding:4},drawingChoice:{width:78,height:78,color:"#FFFFFF",backgroundColor:"#000000"},titleView:{justifyContent:"center",alignItems:"center"},titleText:{fontSize:20,color:"#FFFFFF"},promptView:{justifyContent:"center",alignItems:"center"},promptText:{fontSize:20,color:"#FFFF00"},hintText:{fontSize:14,color:"#FFFF00"},buttonRowView:{flexDirection:"row"},buttonView:{margin:4,padding:8,backgroundColor:"#111111"},buttonText:{fontSize:20,color:"#FFFF00"}},p=function(e){var t=Object(r.useState)(Object(i.b)()),n=t[0],u=t[1];return Object(r.useEffect)((function(){u(Object(i.b)())}),[e.prompt]),a.a.createElement(o.h,{style:m.container},a.a.createElement(o.h,{style:m.titleView},a.a.createElement(o.e,{style:m.titleText},"Draw")),a.a.createElement(c.DoodleDrawerView,{style:m.drawing,drawing:n,onChange:function(e){u(e)}}),a.a.createElement(o.h,{style:m.promptView},a.a.createElement(o.e,{style:m.promptText},e.prompt),!!e.hint&&a.a.createElement(o.e,{style:m.hintText},e.hint)),a.a.createElement(o.h,{style:m.buttonRowView},!!e.onSkip&&a.a.createElement(o.g,{onPress:function(){var t;null===(t=e.onSkip)||void 0===t||t.call(e)}},a.a.createElement(o.h,{style:m.buttonView},a.a.createElement(o.e,{style:m.buttonText},"Skip"))),a.a.createElement(o.g,{onPress:function(){e.onDone(n)}},a.a.createElement(o.h,{style:m.buttonView},a.a.createElement(o.e,{style:m.buttonText},"Done")))))},h=function(e){return a.a.createElement(o.h,{style:m.container},a.a.createElement(o.h,{style:m.titleView},a.a.createElement(o.e,{style:m.titleText},"Choose Best")),a.a.createElement(o.h,{style:m.promptView},a.a.createElement(o.e,{style:m.promptText},e.prompt)),a.a.createElement(o.h,{style:m.drawingChoicesView},e.drawings.map((function(t){return a.a.createElement(o.g,{key:t.key,onPress:function(){return e.onChooseBest(t)}},a.a.createElement(o.h,{style:m.drawingChoiceWrapper},a.a.createElement(c.DoodleDisplayView,{style:m.drawingChoice,drawing:t.drawing})))}))))},v={completedText:{fontSize:16,color:"#FFFF00"}},y=function(e){var t,n=Object(r.useState)({completed:"",remaining:e.prompt}),i=n[0],u=n[1];Object(r.useEffect)((function(){u({completed:"",remaining:e.prompt})}),[e.prompt,e.drawings]);return a.a.createElement(o.h,{style:m.container},a.a.createElement(o.h,{style:m.titleView},a.a.createElement(o.e,{style:m.titleText},"Type Word")),a.a.createElement(o.h,{style:m.drawingChoicesView},e.drawings.map((function(e){return a.a.createElement(o.h,{key:e.key,style:m.drawingChoiceWrapper},a.a.createElement(c.DoodleDisplayView,{style:m.drawingChoice,drawing:e.drawing}))}))),a.a.createElement(o.g,{onPress:e.sayAgain},a.a.createElement(o.h,{style:m.buttonView},a.a.createElement(o.e,{style:m.buttonText},"Say Again"))),a.a.createElement(o.h,null,a.a.createElement(o.e,{style:v.completedText},i.completed+(i.remaining.length>0?"_":""))),a.a.createElement(d,{expectedCharacter:null!==(t=i.remaining[0])&&void 0!==t?t:" ",showHints:!0,onExpectedKeyPress:function(){u((function(t){t.remaining.length<=1&&e.onDone();var n=t.remaining[0];return{completed:t.completed+n,remaining:t.remaining.substr(1)}}))}}))}},rTbz:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("ERkP"),a=n.n(r),o=n("DTYs"),i=function(e){var t={saveScore:function(n,r){var a=t.loadScore();a.push({name:n,score:r}),a.sort((function(t,n){return e.sortKey(t.score)<e.sortKey(n.score)?-1:1})),localStorage.setItem(e.storageKey,JSON.stringify(a))},loadScore:function(){var t=localStorage.getItem(e.storageKey);if(!t)return[];var n=JSON.parse(t);return n.sort((function(t,n){return(e.sortKey(t.score)>e.sortKey(n.score)?-1:1)*(e.sortDescending?-1:1)})),n}},n={container:{flex:1,alignItems:"center",margin:16},textInput:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#0000FF"},buttonView:{margin:4,padding:4,borderColor:"#FFFF00",borderStyle:"solid",borderWidth:1,borderRadius:4},buttonText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:16,color:"#FFFF00"}},i=function(e){var t=Object(r.useState)(""),i=t[0],c=t[1];return a.a.createElement(o.h,{style:n.container},a.a.createElement(o.f,{style:n.textInput,value:i,onChange:c,placeholder:"Name",keyboardType:"default",autoCompleteType:"off"}),a.a.createElement(o.g,{onPress:function(){return!!i&&e.onSubmit(i)},style:i?{}:{opacity:.5}},a.a.createElement(o.h,{style:n.buttonView},a.a.createElement(o.e,{style:n.buttonText},"Save Score"))))},c={container:{marginTop:16,borderColor:"#FFFFFF",borderStyle:"solid",borderWidth:1,borderRadius:0},scoreView:{flexDirection:"row",justifyContent:"space-around",padding:4,borderColor:"#FFFFFF",borderStyle:"solid",borderWidth:1,borderRadius:0},nameText:{flex:2,fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#FFFFFF",overflow:"hidden"},scoreText:{flex:1,textAlign:"right",fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#FFFF00"}},u=function(t){return a.a.createElement(o.h,{style:c.container},a.a.createElement(o.h,{style:c.scoreView},a.a.createElement(o.e,{style:c.nameText},"Leaderboard"),e.scoreColumns.map((function(e){return a.a.createElement(o.e,{key:e.name,style:c.scoreText})}))),a.a.createElement(o.h,{style:c.scoreView},a.a.createElement(o.e,{style:c.nameText},"Name"),e.scoreColumns.map((function(e){return a.a.createElement(o.e,{key:e.name,style:c.scoreText},e.name)}))),t.scores.map((function(t){return a.a.createElement(o.h,{style:c.scoreView},a.a.createElement(o.e,{style:c.nameText},t.name),e.scoreColumns.map((function(e){return a.a.createElement(o.e,{key:t.name,style:c.scoreText},e.getValue(t.score))})))})))};return{useLeaderboard:function(e){var n=e.getScore,o=Object(r.useState)({scores:t.loadScore()}),c=o[0],s=o[1];return{LeaderboardArea:function(e){return a.a.createElement(a.a.Fragment,null,!!e.gameOver&&a.a.createElement(i,{onSubmit:function(r){t.saveScore(r,n()),s({scores:t.loadScore()}),e.onScoreSaved()}}),a.a.createElement(u,{scores:c.scores}))}}}}}},rrTw:function(e,t,n){"use strict";n.r(t),n.d(t,"UserProfileManagerView",(function(){return h})),n.d(t,"UserProfileName",(function(){return g}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=n("ERkP"),c=n.n(i),u=n("DTYs"),s=n("njmQ"),l=n("bQih"),f=n("gLDK"),d=n("5UfP"),m=n("z7rP"),p="\nðŸµ ðŸ¶ ðŸº ðŸ± ðŸ¦ ðŸ¯ ðŸ¦’ ðŸ¦Š ðŸ¦ ðŸ® ðŸ· ðŸ— ðŸ­ ðŸ¹ ðŸ° ðŸ» ðŸ¨ ðŸ¼ ðŸ¸ ðŸ¦“ ðŸ´ ðŸ¦„ ðŸ” ðŸ²\n".split(" ").map((function(e){return e.trim()})).filter((function(e){return e})),h=function(e){var t=Object(s.a)(),n=t.loading,r=t.error,u=t.doWork,f=Object(i.useState)(null),d=f[0],p=f[1],h=function(){return u(function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get().setup();case 2:return t(),e.next=5,m.a.get().getUserProfiles();case 5:n=e.sent,p(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return Object(i.useEffect)((function(){h()}),[]),c.a.createElement(l.a.View_Panel,null,c.a.createElement(l.a.Text_FormTitle,null,"Users"),c.a.createElement(l.a.LoadingInline,{loading:n}),c.a.createElement(l.a.ErrorBox,{error:r}),null==d?void 0:d.map((function(e){return c.a.createElement(y,{key:e.key,userProfile:e,onActiveUserChange:h,onUserProfileChange:h})})),c.a.createElement(l.a.Text_FormTitle,null,"Add User"),c.a.createElement(v,{onUserAdded:h}),!!e.onClose&&c.a.createElement(l.a.View_FormActionRow,null,c.a.createElement(l.a.Button_FormAction,{onPress:function(){var t;return null===(t=e.onClose)||void 0===t?void 0:t.call(e)}},"Done")))},v=function(e){var t=Object(s.a)(),n=t.loading,r=t.error,u=t.doWork,f=Object(i.useState)(null),d=f[0],p=f[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a.View_Form,null,c.a.createElement(l.a.View_FieldRow,null,c.a.createElement(l.a.LoadingInline,{loading:n}),c.a.createElement(l.a.Input_Text,{value:null!=d?d:"",onChange:p,placeholder:"Enter Share Code"}),c.a.createElement(l.a.Button_FieldInline,{onPress:function(){d&&u(function(){var t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get().addUserFromShareCode(d);case 2:n(),e.onUserAdded(),p(null);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},"Add User")),c.a.createElement(l.a.ErrorBox,{error:r})))},y=function(e){var t=e.userProfile,n=e.onActiveUserChange,r=e.onUserProfileChange,h=Object(s.a)(),v=h.loading,y=h.error,b=h.doWork,w=Object(i.useState)(null),x=w[0],S=w[1],E=Object(i.useState)(null),k=E[0],j=E[1];return k?c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a.View_Form,null,c.a.createElement(u.h,{style:{flexDirection:"row",flexWrap:"wrap"}},k.map((function(e){return c.a.createElement(u.g,{key:e,onPress:function(){return n=e,b(function(){var e=Object(o.a)(a.a.mark((function e(o){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get().setUserProfileInfo(t.key,{emoji:n});case 2:j(null),r();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var n}},c.a.createElement(u.h,null,c.a.createElement(u.e,{style:{fontSize:32}},e)))}))))):c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a.View_Form,null,c.a.createElement(l.a.View_FieldRow,null,c.a.createElement(l.a.LoadingInline,{loading:v}),c.a.createElement(u.g,{onPress:function(){return b(function(){var e=Object(o.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get().setActiveUser(t.key);case 2:r(),n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},c.a.createElement(f.a,{style:{size:32},kind:t.isActive?d.a.checkChecked:d.a.checkUnchecked})),c.a.createElement(u.g,{onPress:function(){j(p)}},c.a.createElement(u.h,null,c.a.createElement(u.e,{style:{fontSize:32}},t.emoji))),c.a.createElement(g,{userProfile:t,onNameChange:r}),!!x&&c.a.createElement(l.a.Text_FieldLabel,null,x),!x&&c.a.createElement(l.a.Button_FieldInline,{onPress:function(){return b(function(){var e=Object(o.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get().createShareCode(t.key);case 2:r=e.sent,n(),S(r.shareCode);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"Create Share Code")),c.a.createElement(l.a.ErrorBox,{error:y})))},g=function(e){var t=e.userProfile,n=e.onNameChange,r=Object(s.a)(),f=(r.loading,r.error,r.doWork),d=Object(i.useState)(t.name),p=d[0],h=d[1],v=Object(i.useState)(!1),y=v[0],g=v[1],b=function(){return f(function(){var e=Object(o.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("UserProfileName changeName",{name:p}),e.next=3,m.a.get().setUserProfileInfo(t.key,{name:p});case 3:g(!1),n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return c.a.createElement(c.a.Fragment,null,!y&&c.a.createElement(u.g,{onPress:function(){return g(!0)}},c.a.createElement(l.a.Text_FieldLabel,null,t.name)),y&&c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a.Input_Text,{value:p,onChange:h,onSubmit:b}),c.a.createElement(l.a.Button_FieldInline,{onPress:b},"Change")))}},uFyH:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(e,t,n){return(i=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&a(o,n.prototype),o}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return i(e,arguments,r(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),a(o,e)})(e)}n.d(t,"a",(function(){return c}))},uTf4:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=n("9DGK");function c(e,t,n){return void 0===n&&(n=1e4),Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new i.a("Fetch Timeout"))}),n)}))])}function u(e,t,n){return s.apply(this,arguments)}function s(){return(s=Object(o.a)(a.a.mark((function e(t,n,r){var o,u,s,l,f,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=JSON.stringify(n),s={method:null!==(o=null==r?void 0:r.method)&&void 0!==o?o:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Content-Length":""+u.length},body:u},e.next=4,c(t,s).catch((function(e){throw new i.a("Request Failure",{url:t,data:n,error:e})}));case 4:if((l=e.sent).ok){e.next=23;break}return e.t0=i.a,e.next=9,l.json().catch((function(e){}));case 9:if(e.t2=f=e.sent,e.t1=null!==e.t2,!e.t1){e.next=13;break}e.t1=void 0!==f;case 13:if(!e.t1){e.next=17;break}e.t3=f,e.next=18;break;case 17:e.t3={};case 18:throw e.t4=e.t3,e.t5=l.status,e.t6={url:t,data:n},e.t7={data:e.t4,responseStatus:e.t5,request:e.t6},new e.t0("Api Error",e.t7);case 23:return e.next=25,l.json().catch((function(e){throw new i.a("Request Parse Failure",{url:t,data:n,error:e})}));case 25:return d=e.sent,e.abrupt("return",d);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},vm2h:function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var r=t.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};n.en.relativeTime=a;var o=function(t,r,o,i){for(var c,u,s,l=o.$locale().relativeTime||a,f=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],d=f.length,m=0;m<d;m+=1){var p=f[m];p.d&&(c=i?n(t).diff(o,p.d,!0):o.diff(t,p.d,!0));var h=(e.rounding||Math.round)(Math.abs(c));if(s=c>0,h<=p.r||!p.r){h<=1&&m>0&&(p=f[m-1]);var v=l[p.l];u="string"==typeof v?v.replace("%d",h):v(h,r,p.l,s);break}}return r?u:(s?l.future:l.past).replace("%s",u)};r.to=function(e,t){return o(e,t,this,!0)},r.from=function(e,t){return o(e,t,this)};var i=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(i(this),e)},r.fromNow=function(e){return this.from(i(this),e)}}}()},xWie:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={websocketsApiUrl:"wss://p4w1a7ysk8.execute-api.us-east-1.amazonaws.com/prod"}},xrQq:function(e,t,n){"use strict";var r=n("nGXB"),a=n("kDUE"),o=n("16cg"),i=n("JLWX"),c=n("3zCA"),u=n("9p6f");r({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),r=i(n.length);return c(e),(t=u(n,0)).length=a(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},yxiS:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("ERkP"),a=n.n(r),o=n("DTYs"),i={container:{margin:16},header:{view:{margin:4},text:{fontSize:16}},section:{view:{margin:4,flexDirection:"row"},text:{fontSize:16}}},c=function(e){var t=Object(r.useState)(!1),n=t[0],c=t[1];return a.a.createElement(o.h,{style:i.container},a.a.createElement(o.g,{onPress:function(){n||e.onOpen(),n&&e.onClose(),c((function(e){return!e}))}},a.a.createElement(o.h,{style:i.header.view},a.a.createElement(o.e,{style:i.header.text},"Sections"))),n&&a.a.createElement(o.h,null,e.problemService.getSections().map((function(t){return a.a.createElement(o.g,{key:t.key,onPress:function(){console.log("SubjectNavigator onSection",{s:t}),e.problemService.gotoSection(t),e.onSubjectNavigation(),e.onClose(),c(!1),"web"===o.c.OS&&window.scrollTo(0,0)}},a.a.createElement(o.h,{style:i.section.view},a.a.createElement(o.e,{style:i.section.text},t.isComplete?"âœ…":"â¬œ"),a.a.createElement(o.e,{style:i.section.text},t.name)))}))))}},yyXn:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=function(e,t){var n=function(e){var t,n;return{load:(n=Object(o.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",JSON.parse(null!==(n=localStorage.getItem(e))&&void 0!==n?n:"error - NOT FOUND"));case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,null,[[0,4]])}))),function(){return n.apply(this,arguments)}),save:(t=Object(o.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.setItem(e,JSON.stringify(n));case 1:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}}(t);return Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))(),Object.assign({},e,{recordAnswer:function(t,r){e.recordAnswer(t,r),t.isLastOfSection&&Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.save(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}})}},z7rP:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),i=n("aEBB"),c=n("B8BD"),u=n("GJ35"),s=n("9DGK"),l=n("eCSs");function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m={instance:null},p={get:function(){var e,t,n,r,d,p,h,v,y,g,b,w,x,S,E,k,j,O,T;return m.instance||(m.instance=(y=Object(i.a)(c.a),g={getUserDataServiceState:function(){try{var e;return JSON.parse(null!==(e=localStorage.getItem("_USER_DATA_SERVICE_STATE"))&&void 0!==e?e:"NULL !{}")}catch(t){return null}},setUserDataServiceState:function(e){localStorage.setItem("_USER_DATA_SERVICE_STATE",JSON.stringify(e))},getUserData:function(){for(var e,t=g.getUserDataServiceState(),n=t&&t.userProfiles.find((function(e){return e.key===t.activeUserProfileKey})),r={data:{},metadata:{name:null==n?void 0:n.name,emoji:null==n?void 0:n.emoji},timestamp:Date.now()},a=f(Object.keys(localStorage).filter((function(e){return!e.startsWith("_")})));!(e=a()).done;){var o=e.value;r.data[o]=localStorage.getItem(o)}return r},clearUserData:function(){for(var e,t=f(Object.keys(localStorage).filter((function(e){return!e.startsWith("_")})));!(e=t()).done;){var n=e.value;localStorage.removeItem(n)}var r=g.getUserDataServiceState();r&&(r.userProfiles.forEach((function(e){e.lastUploadTimestamp=void 0})),g.setUserDataServiceState(r))},setUserData:function(e){var t,n,r,a;g.clearUserData();for(var o=0,i=Object.keys(e.data);o<i.length;o++){var c=i[o],u=e.data[c];if(!u)return void localStorage.removeItem(c);localStorage.setItem(c,u)}var s=g.getUserDataServiceState(),l=s&&s.userProfiles.find((function(e){return e.key===s.activeUserProfileKey}));s&&l&&(l.emoji=null!==(t=null===(n=e.metadata)||void 0===n?void 0:n.emoji)&&void 0!==t?t:l.emoji,l.name=null!==(r=null===(a=e.metadata)||void 0===a?void 0:a.name)&&void 0!==r?r:l.name,l.lastUploadTimestamp=e.timestamp,g.setUserDataServiceState(s))}},b=function(e){var t=g.getUserDataServiceState();return t?t.userProfiles.find((function(t){return t.key===e})):null},w=function(){var e=g.getUserDataServiceState();return(null==e?void 0:e.activeUserProfileKey)?e.userProfiles.find((function(t){return t.key===e.activeUserProfileKey})):null},x=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.createUploadUrl({prefix:"backup/users/"+t.name+"/"+t.uploadUrl.relativePath+"/"+Date.now()});case 2:return r=e.sent,o=Object(u.b)(r.uploadUrl),e.next=6,o.uploadData(n);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,i,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.getUserDataServiceState(),i=r&&r.userProfiles.find((function(e){return e.key===t})),r&&i){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,x(i,n);case 6:return c=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(u.b)(i.uploadUrl),e.next=3,t.uploadData(n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=7,console.log("uploadWithAutoRenew - Attempt 1"),e.next=11,c();case 11:console.log("uploadWithAutoRenew - UPLOADED"),e.next=25;break;case 14:return e.prev=14,e.t0=e.catch(7),console.log("uploadWithAutoRenew - Attempt 2"),e.next=19,y.renewUploadUrl({uploadUrl:i.uploadUrl});case 19:return s=e.sent,i.uploadUrl=s.uploadUrl,g.setUserDataServiceState(r),e.next=24,c();case 24:console.log("uploadWithAutoRenew - UPLOADED AFTER RENEW");case 25:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,c,s,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("updateUserProfile",{userProfileKey:t}),s=g.getUserDataServiceState(),l=s&&s.userProfiles.find((function(e){return e.key===t})),s&&l){e.next=6;break}return console.log("updateUserProfile - NO USER STATE",{userProfileKey:t}),e.abrupt("return");case 6:return e.next=8,Object(u.c)(l.uploadUrl.getUrl);case 8:if((f=e.sent).timestamp&&!(f.timestamp<=(null!==(n=l.lastUploadTimestamp)&&void 0!==n?n:0))){e.next=12;break}return console.log("updateUserProfile - NOT NEW",{name:l.name}),e.abrupt("return");case 12:console.log("updateUserProfile - UPDATED USER PROFILE",{name:l.name}),l.emoji=null!==(r=null===(o=f.metadata)||void 0===o?void 0:o.emoji)&&void 0!==r?r:l.emoji,l.name=null!==(i=null===(c=f.metadata)||void 0===c?void 0:c.name)&&void 0!==i?i:l.name,l.lastUploadTimestamp=f.timestamp,g.setUserDataServiceState(s),l.key===s.activeUserProfileKey&&(console.log("updateUserProfile - UPDATED ACTIVE USER DATA",{name:l.name}),g.setUserData(f));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.getUserDataServiceState()){e.next=3;break}return e.abrupt("return");case 3:n=f(t.userProfiles);case 4:if((r=n()).done){e.next=16;break}return o=r.value,e.prev=6,e.next=9,E(o.key);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.log("updateAllProfiles - ERROR Updating user profile",{error:e.t0});case 14:e.next=4;break;case 16:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(){return e.apply(this,arguments)}}(),j=!1,O=!1,T={setup:(v=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=7;break}case 1:if(O){e.next=6;break}return e.next=4,Object(l.a)(10);case 4:e.next=1;break;case 6:return e.abrupt("return");case 7:return j=!0,t=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("UserDataService:setup"),!w()){e.next=6;break}return e.next=5,k();case 5:return e.abrupt("return");case 6:if(!((t=g.getUserDataServiceState())&&t.userProfiles.length>0)){e.next=13;break}return t.activeUserProfileKey=t.userProfiles[0].key,g.setUserDataServiceState(t),e.next=12,k();case 12:return e.abrupt("return");case 13:return e.next=15,y.createUploadUrl({prefix:"users"});case 15:return n=e.sent,r=null!=t?t:{userProfiles:[{key:n.uploadUrl.relativePath,name:"Player 1",uploadUrl:n.uploadUrl}],activeUserProfileKey:n.uploadUrl.relativePath,changeTimestamp:0},g.setUserDataServiceState(r),e.next=20,T.uploadUserData();case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=9,e.next=12,t();case 12:O=!0,e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(9),O=!0,e.t0;case 19:case"end":return e.stop()}}),e,null,[[9,15]])}))),function(){return v.apply(this,arguments)}),getActiveUser:function(){var e,t=w();return t?{key:t.key,name:t.name,emoji:null!==(e=t.emoji)&&void 0!==e?e:"ðŸ‘¤",isActive:!0}:null},setActiveUser:(h=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("setActiveUser",{userProfileKey:t}),n=g.getUserDataServiceState()){e.next=4;break}return e.abrupt("return");case 4:if(n.userProfiles.find((function(e){return e.key===t}))){e.next=7;break}throw console.log("setActiveUser - User Profile Not Found",{userProfileKey:t}),new s.b("User Profile not found");case 7:return n.activeUserProfileKey!==t&&(console.log("setActiveUser - user changed - clearing state"),n.activeUserProfileKey=t,n.changeTimestamp=0,g.setUserDataServiceState(n),g.clearUserData()),console.log("setActiveUser - before download",{stateJson:JSON.stringify(g.getUserDataServiceState())}),e.next=11,T.downloadUserDataIfNewer();case 11:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)}),getUserProfiles:(p=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=g.getUserDataServiceState())?void 0:t.activeUserProfileKey){e.next=3;break}return e.abrupt("return",[]);case 3:return e.abrupt("return",t.userProfiles.map((function(e){var n;return{key:e.key,name:e.name,emoji:null!==(n=e.emoji)&&void 0!==n?n:"ðŸ‘¤",isActive:t.activeUserProfileKey===e.key}})));case 4:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)}),setUserProfileInfo:(d=Object(o.a)(a.a.mark((function e(t,n){var r,o,i,c,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=g.getUserDataServiceState()){e.next=4;break}return console.log("uploadUserData - NO STATE"),e.abrupt("return");case 4:if(c=i.userProfiles.find((function(e){return e.key===t}))){e.next=8;break}return console.log("uploadUserData - NO USER STATE"),e.abrupt("return");case 8:return c.emoji=null!==(r=n.emoji)&&void 0!==r?r:c.emoji,c.name=null!==(o=n.name)&&void 0!==o?o:c.name,g.setUserDataServiceState(i),s=Object(u.b)(c.uploadUrl),e.next=14,s.downloadData();case 14:if(l=e.sent){e.next=17;break}return e.abrupt("return");case 17:return l.metadata={name:c.name,emoji:c.emoji},l.timestamp=Date.now(),e.next=21,S(t,l);case 21:case"end":return e.stop()}}),e)}))),function(e,t){return d.apply(this,arguments)}),uploadUserData:(r=Object(o.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("uploadUserData"),t=g.getUserDataServiceState()){e.next=5;break}return console.log("uploadUserData - NO STATE"),e.abrupt("return");case 5:if(n=t.userProfiles.find((function(e){return e.key===t.activeUserProfileKey}))){e.next=9;break}return console.log("uploadUserData - NO user State",{state:t}),e.abrupt("return");case 9:return n.lastUploadTimestamp=Date.now(),g.setUserDataServiceState(t),r=g.getUserData(),e.next=14,S(n.key,r);case 14:console.log("uploadUserData - UPLOADED",{userData:r});case 15:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),downloadUserDataIfNewer:(n=Object(o.a)(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.getUserDataServiceState()){e.next=3;break}return e.abrupt("return");case 3:if(r=n.userProfiles.find((function(e){return e.key===n.activeUserProfileKey}))){e.next=6;break}return e.abrupt("return");case 6:return console.log("downloadUserDataIfNewer"),o=Object(u.b)(r.uploadUrl),e.next=10,o.downloadData();case 10:if((i=e.sent).timestamp&&!(i.timestamp<=(null!==(t=r.lastUploadTimestamp)&&void 0!==t?t:0))){e.next=14;break}return console.log("downloadUserDataIfNewer - Local data is up to date",{state:n,userData:i}),e.abrupt("return");case 14:console.log("downloadUserDataIfNewer - UPDATING",{state:n,userData:i}),g.clearUserData(),g.setUserData(i);case 17:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),createShareCode:(t=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.setup();case 2:if(n=b(t)){e.next=5;break}throw new s.b("user should not be null");case 5:return e.next=7,y.createUploadUrl({shareablePath:!0});case 7:return r=e.sent,o=Object(u.b)(r.uploadUrl),e.next=11,o.uploadData(n.uploadUrl);case 11:return e.abrupt("return",{shareCode:r.uploadUrl.relativePath});case 12:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),addUserFromShareCode:(e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addUserFromShareCode",{shareCode:t}),e.next=3,y.createUploadUrl({shareablePath:!0});case 3:return n=e.sent,r=n.uploadUrl.getUrl.replace(n.uploadUrl.relativePath,t.toUpperCase()),e.next=7,Object(u.c)(r);case 7:if((o=e.sent).putUrl){e.next=11;break}throw console.log("addUserFromShareCode - FAILED TO GET PROFILE"),new s.b("Failed to get user profile");case 11:if(i=g.getUserDataServiceState()){e.next=15;break}throw console.log("addUserFromShareCode - NO STATE"),new s.b("UserDataService is not setup");case 15:if(!i.userProfiles.find((function(e){return e.key===o.relativePath}))){e.next=18;break}return console.log("addUserFromShareCode - ALREADY HAS USER",{userKey:o.relativePath}),e.abrupt("return");case 18:return i.userProfiles.push({key:o.relativePath,name:"Player "+(i.userProfiles.length+1),uploadUrl:o}),g.setUserDataServiceState(i),console.log("addUserFromShareCode - ADDED",{userKey:o.relativePath}),e.next=23,E(o.relativePath);case 23:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})),m.instance}}},zkcw:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n("t8gp"),a=n("eCSs");n.d(t,"a",(function(){return a.a}));n("4cHy"),n("+tC1"),n("hsFx");var o=function(e){return String.fromCharCode.apply(String,Object(r.a)(Object(r.a)(new Array(e)).map((function(e){return 94*Math.random()+32}))))}}}]);
//# sourceMappingURL=commons-84f50b84b30da4367107.js.map