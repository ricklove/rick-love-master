(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[19],{BXPQ:function(e,t,n){"use strict";n.r(t),n.d(t,"LessonModulesClientEditor",(function(){return P}));var r,a,o,u,c,i,s,l,d=n("a1TR"),f=n.n(d),p=(n("3yYM"),n("Ab9Y")),m=n("ERkP"),b=n.n(m),v=n("DTYs"),g=n("njmQ"),x=n("H5jT"),k=n("olhD"),y=(n("xrQq"),n("kNg/"),n("TFfC")),w={container:{background:"#111111"},containerPanel:{background:"#292a2d"},editorModeTabRowView:{flexDirection:"row",paddingLeft:16},editorModeTabView:{background:"#1e1e1e",alignSelf:"flex-start",padding:8,marginRight:1},editorModeTabView_selected:{background:"#292a2d",alignSelf:"flex-start",padding:8,marginRight:1},editorModeTabText:{fontSize:14,color:"#FFFFFFF"},editorModeTabText_selected:{fontSize:14,color:"#FFFF88"},buttonView:{background:"#1e1e1e",alignSelf:"flex-start",padding:8,margin:1},buttonText:{fontSize:14,color:"#FFFFFFF"},sectionHeaderText:{margin:8,fontSize:18,color:"#FFFF88"},infoView:{},infoText:{margin:8,fontSize:12,wrap:"wrap"},lessonFieldView:{flexDirection:"row"},lessonFieldLabelText:{minWidth:80,padding:4,fontSize:12},lessonFieldText:{flex:1,padding:4,fontSize:12,wrap:"wrap"},jsonText:{padding:4,fontSize:12,color:"#FFFFFF",background:"#000000"}},h=function(e){return e.lessons.flatMap((function(e){return[{kind:"lesson",lesson:e,label:e.title},{kind:"construct",lesson:e,label:"  üìù Construct the Code"},{kind:"understand",lesson:e,label:"  üîé Understand the Code"},{kind:"experiment",lesson:e,label:"  üî¨ Experiment with the Code"}]})).map((function(e){return Object.assign({},e,{key:e.lesson.key+e.kind})}))},F=function(e){var t=Object(m.useState)(h(e.module)),n=t[0],r=t[1],a=Object(m.useState)(null),o=a[0],u=a[1];Object(m.useEffect)((function(){var t=h(e.module);r(t),c()}),[e.module]),Object(m.useEffect)((function(){"lesson"===(null==o?void 0:o.kind)&&c()}),[o]);var c=function(){var e,t;if(console.log("LessonModulePlayer nextStep",{activeItem:o}),n){var r=n.filter((function(e){return"lesson"!==e.kind})),a=r.findIndex((function(e){return e.key===(null==o?void 0:o.key)})),c=n.findIndex((function(e){return e.key===(null==o?void 0:o.key)})),i=null!==(e=null!==(t=a>=0?r[a+1]:null)&&void 0!==t?t:c>=0?n[c+1]:null)&&void 0!==e?e:n[0];setTimeout((function(){u(i)}),1e3)}};return b.a.createElement(b.a.Fragment,null,b.a.createElement(v.h,{style:w.container},b.a.createElement(j,{items:n,activeItem:null!=o?o:void 0,onChange:function(e){return u(e)}}),b.a.createElement(v.h,{key:null==o?void 0:o.key},"construct"===(null==o?void 0:o.kind)&&b.a.createElement(y.a,{data:o.lesson,onDone:c}),"understand"===(null==o?void 0:o.kind)&&b.a.createElement(y.c,{data:o.lesson,onDone:c}),"experiment"===(null==o?void 0:o.kind)&&b.a.createElement(y.b,{data:o.lesson,setProjectState:e.setProjectState,onDone:c}))))},E={container:{flexDirection:"column"},itemView:{flexDirection:"row",alignItems:"center",background:"#1e1e1e",padding:4,marginRight:1},itemView_selected:{flexDirection:"row",alignItems:"center",background:"#292a2d",padding:4,marginRight:1},itemText:{fontSize:14},itemText_selected:{fontSize:14,color:"#FFFF88"}},j=function(e){var t=e.items,n=e.activeItem;return b.a.createElement(b.a.Fragment,null,b.a.createElement(v.h,{style:E.container},t.map((function(t){return b.a.createElement(v.g,{key:t.key,onPress:function(){return n=t,void e.onChange(n);var n}},b.a.createElement(v.h,{style:t.key===(null==n?void 0:n.key)?E.itemView_selected:E.itemView},b.a.createElement(v.e,{style:t.key===(null==n?void 0:n.key)?E.itemText_selected:E.itemText},t.label)))}))))},S=n("uTf4"),T=n("pVhY"),O=n("P5Mp"),M=n("PJlR"),L={container:{background:"#111111"},containerPanel:{background:"#292a2d"},buttonView:{background:"#1e1e1e",alignSelf:"flex-start",padding:8,margin:1},buttonText:{fontSize:14,color:"#FFFFFFF"}},D=(i={}.serverUrl,s=void 0===i?"http://localhost:3042/api/":i,l=function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.b)(s,{endpoint:t,data:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{getLessonModules:(c=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("getLessonModules",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)}),getLessonModule:(u=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("getLessonModule",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)}),setLessonModule:(o=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("setLessonModule",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}),deleteLessonModule:(a=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("deleteLessonModule",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),setProjectState:(r=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("setProjectState",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})}),P=function(e){var t=Object(m.useState)("edit"),n=t[0],r=t[1],a=[{value:"edit",label:"Edit"},{value:"play",label:"Play"}],o=Object(m.useState)(null),u=o[0],c=o[1],i=Object(m.useState)(null),s=i[0],l=i[1],d=Object(g.a)(),y=d.loading,w=d.error,h=d.doWork,E=function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getLessonModules({});case 2:n=e.sent,t(),c(n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(m.useEffect)((function(){h(function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var j=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.setProjectState({projectState:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b.a.createElement(b.a.Fragment,null,b.a.createElement(k.a,{loading:y}),b.a.createElement(x.a,{error:w}),b.a.createElement(v.h,{style:L.container},b.a.createElement(T.a,{style:{selectedTabText:{color:"#8888FF"}},header:"Mode",items:a,getKey:function(e){return e.value},getLabel:function(e){return e.label},selected:a.find((function(e){return e.value===n})),onSelect:function(e){return r(e.value)}}),u&&b.a.createElement(T.a,{style:{selectedTabText:{color:"#88FF88"}},header:"Modules",items:u,getKey:function(e){return e.key},getLabel:function(e){return e.title},selected:null==u?void 0:u.find((function(e){return e.key===(null==s?void 0:s.key)})),onSelect:function(e){return t=e.key,void h(function(){var e=Object(p.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getLessonModule({key:t});case 2:r=e.sent,n(),l(r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var t},onAdd:"edit"===n?function(){var e=Object(O.c)();l(e),h(function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.setLessonModule({value:e});case 2:return t.sent,n(),t.next=6,E(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}:void 0}),s&&"edit"===n&&b.a.createElement(b.a.Fragment,null,b.a.createElement(v.h,{style:{flexDirection:"row",justifyContent:"flex-end"}},b.a.createElement(v.g,{onPress:function(){s&&h(function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.setLessonModule({value:s});case 2:e.sent,t();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},b.a.createElement(v.h,{style:L.buttonView},b.a.createElement(v.e,{style:L.buttonText},"üíæ Save Module"))),b.a.createElement(v.g,{onPress:function(){var e=null==s?void 0:s.key;e&&(l(null),h(function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.deleteLessonModule({key:e});case 2:return t.sent,n(),t.next=6,E(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}},b.a.createElement(v.h,{style:L.buttonView},b.a.createElement(v.e,{style:L.buttonText},"‚ùå Delete Module")))),b.a.createElement(M.LessonModuleEditor,{key:s.key,value:s,onChange:function(e){l(e)},setProjectState:j})),s&&"play"===n&&b.a.createElement(b.a.Fragment,null,b.a.createElement(F,{key:s.key,module:s,setProjectState:j}))))}}}]);
//# sourceMappingURL=19-a4d4480bc936ccdf1ee6.js.map