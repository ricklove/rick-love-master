(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[23],{lqNZ:function(e,o,t){"use strict";t.r(o),t.d(o,"EducationalGame_MultiplesSnake",(function(){return d}));t("yIC7"),t("p+GS"),t("dtAy"),t("4oWw"),t("nruA"),t("LnO1"),t("XjK0"),t("SCO9"),t("PN9k");var n=t("ERkP"),r=t.n(n),i=t("DTYs"),l=t("hsFx"),a=t("4cHy"),c=t("rTbz");function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,o){if(!e)return;if("string"==typeof e)return u(e,o);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,o)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,n=new Array(o);t<o;t++)n[t]=e[t];return n}var m=Object(c.a)({storageKey:"MultiplesSnakeLeaderboard",sortKey:function(e){return e.score},scoreColumns:[{name:"Time",getValue:function(e){return""+(e.timeMs/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}},{name:"Score",getValue:function(e){return""+e.score}}]}),d=function(e){var o,t=Object(n.useState)({key:0,startTime:Date.now(),gameOverTime:void 0,score:0}),l=t[0],a=t[1],c=Object(n.useState)(p()),s=c[0],u=c[1],d=Object(n.useState)(null),v=d[0],w=d[1],g=Object(n.useRef)(s),O=m.useLeaderboard({getScore:function(){var e;return{score:l.score,timeMs:(null!==(e=l.gameOverTime)&&void 0!==e?e:Date.now())-l.startTime}}}),S=function(){a((function(e){return Object.assign(Object.assign({},e),{},{gameOverTime:Date.now(),key:e.key+1})}))},j=function(e){var o=Object.assign({},g.current);o.body.push({position:o.player.position});var t=o.columns[o.player.position.col].cells[o.player.position.row];a((function(e){return Object.assign(Object.assign({},e),{},{score:e.score+t.value})})),o.player.position=e;var n=o.columns[o.player.position.col].cells[o.player.position.row];return"body"===n.state?(o.isGameOver=!0,b(o),u(o),void S()):(y(o),o.body.length+1===f*f?(o.isGameWon=!0,a((function(e){return Object.assign(Object.assign({},e),{},{score:e.score+n.value})})),b(o),u(o),void S()):(u(o),void setTimeout((function(){x(o)}),100)))},x=function(e){var o=C(e,j);w(o)};return Object(n.useEffect)((function(){x(s)}),[]),g.current=s,r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{style:{marginTop:50,marginBottom:150,padding:2,alignItems:"center"}},r.a.createElement(i.h,{style:{width:292}},r.a.createElement(F,{gameScore:l}),r.a.createElement(h,{gameBoard:s,focus:null!==(o=s.player.position)&&void 0!==o?o:{col:0,row:0}}),v&&!l.gameOverTime&&r.a.createElement(E,{gameInput:v}),r.a.createElement(O.LeaderboardArea,{gameOver:!!l.gameOverTime,onScoreSaved:function(){var e=p();a({key:0,startTime:Date.now(),gameOverTime:void 0,score:0}),u(e),x(e)}}))))},f=12,p=function(){var e={key:0,isGameOver:!1,isGameWon:!1,maxTimes:f,columns:s(new Array(f)).map((function(e,o){return{col:o,cells:s(new Array(f)).map((function(e,t){return{col:o,row:t,value:(o+1)*(t+1),state:"blank",bodyIndex:0,connected:{t:!1,b:!1,l:!1,r:!1}}}))}})),player:{position:{col:Object(a.a)(f),row:Object(a.a)(f)}},body:[]};return b(e),e},y=function(e){b(e),b(e)},b=function(e){var o=e;o.key+=1,o.columns.forEach((function(e){return e.cells.forEach((function(e){var o=e;"body"===o.state&&(o.state="blank"),"player"===o.state&&(o.state="body"),o.connected={t:!1,b:!1,l:!1,r:!1}}))}));var t=function(e,o,t){return{t:e.position.col===(null==o?void 0:o.position.col)&&e.position.row<(null==o?void 0:o.position.row)||e.position.col===(null==t?void 0:t.position.col)&&e.position.row<(null==t?void 0:t.position.row),b:e.position.col===(null==o?void 0:o.position.col)&&e.position.row>(null==o?void 0:o.position.row)||e.position.col===(null==t?void 0:t.position.col)&&e.position.row>(null==t?void 0:t.position.row),l:e.position.row===(null==o?void 0:o.position.row)&&e.position.col>(null==o?void 0:o.position.col)||e.position.row===(null==t?void 0:t.position.row)&&e.position.col>(null==t?void 0:t.position.col),r:e.position.row===(null==o?void 0:o.position.row)&&e.position.col<(null==o?void 0:o.position.col)||e.position.row===(null==t?void 0:t.position.row)&&e.position.col<(null==t?void 0:t.position.col)}};o.body.forEach((function(e,n){var r;v(o,e.position,"body",o.body.length-n,t(e,o.body[n-1],null!==(r=o.body[n+1])&&void 0!==r?r:o.player))})),v(o,o.player.position,"player",0,t(o.player,o.body[o.body.length-1],void 0))},v=function(e,o,t,n,r){var i=e;i.columns[o.col].cells[o.row].state=t,i.columns[o.col].cells[o.row].bodyIndex=n,i.columns[o.col].cells[o.row].connected=r,i.key+=1},w={cellView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.75)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},focusCellView:{width:24,height:24,borderWidth:1,borderColor:"#66FF66",borderStyle:"solid",justifyContent:"center",alignItems:"center"},cellHeaderView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.5)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},focusCellHeaderView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.5)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},cellText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12},cellHeaderText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#333300"},focusCellHeaderText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#FFFF00"}},g=function(e,o,t){return{borderTopColor:o.connected.t?"transparent":w.focusCellView.borderColor,borderBottomColor:o.connected.b?"transparent":w.focusCellView.borderColor,borderLeftColor:o.connected.l?"transparent":w.focusCellView.borderColor,borderRightColor:o.connected.r?"transparent":w.focusCellView.borderColor,borderWidth:5*(.4+(e-o.bodyIndex)%10/10*.6)}},h=function(e){var o=e.gameBoard,t=e.focus,l=Object(n.useState)(0),a=l[0],c=l[1];return Object(n.useEffect)((function(){var e=setInterval((function(){c((function(e){return e+1}))}),500);return function(){return clearInterval(e)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{style:{flexDirection:"row"}},r.a.createElement(i.h,{style:{flexDirection:"column-reverse"}},r.a.createElement(i.h,{style:w.focusCellHeaderView},r.a.createElement(i.e,{style:w.focusCellHeaderText},"x")),o.columns[0].cells.map((function(e){return r.a.createElement(i.h,{key:e.row,style:t.row===e.row?w.focusCellHeaderView:w.cellHeaderView},r.a.createElement(i.e,{style:t.row===e.row?w.focusCellHeaderText:w.cellHeaderText},""+(e.row+1)))}))),o.columns.map((function(e){return r.a.createElement(i.h,{key:e.col,style:{flexDirection:"column-reverse"}},r.a.createElement(i.h,{style:t.col===e.col?w.focusCellHeaderView:w.cellHeaderView},r.a.createElement(i.e,{style:t.col===e.col?w.focusCellHeaderText:w.cellHeaderText},""+(e.col+1))),e.cells.map((function(e){return r.a.createElement(i.h,{key:e.row,style:"blank"!==e.state?[w.focusCellView,g(a,e,o.body.length)]:w.cellView},r.a.createElement(i.e,{style:w.cellText},function(e,o,t){return"body"===e.state?""+e.value:"player"===e.state&&t?"ðŸ˜Ž":"player"===e.state&&o?"ðŸ’€":"player"===e.state?"ðŸ˜€":""}(e,o.isGameOver,o.isGameWon)))})))}))))},C=function(e,o){var t,n,r,i,a=e.player,c=[null===(t=e.columns[a.position.col+0])||void 0===t?void 0:t.cells[a.position.row+1],null===(n=e.columns[a.position.col+0])||void 0===n?void 0:n.cells[a.position.row-1],null===(r=e.columns[a.position.col+1])||void 0===r?void 0:r.cells[a.position.row+0],null===(i=e.columns[a.position.col-1])||void 0===i?void 0:i.cells[a.position.row+0]].filter((function(e){return e})),s=a.position.col===a.position.row,u=c.map((function(e){return{key:e.row+" "+e.col,text:e.value+(s&&a.position.col===e.col?"â†•":s&&a.position.row===e.row?"â†”":""),onPress:function(){return o(e)}}}));return{key:""+e.key,buttons:Object(l.e)(u)}},O={outerContainer:{height:150},container:{flexDirection:"row",justifyContent:"space-around",margin:16},buttonView:{width:48,height:48,borderWidth:2,borderColor:"#6666FF",borderStyle:"solid",justifyContent:"center",alignItems:"center"},buttonText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,color:"#FFFFFF"}},E=function(e){var o=e.gameInput,t=Object(n.useState)(0),l=t[0],a=t[1];return Object(n.useEffect)((function(){a(100);var e=setInterval((function(){a((function(e){return Math.max(0,e-1)}))}),50);return function(){return clearInterval(e)}}),[o.key]),console.log("GameInput",{gameInput:o}),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{style:O.outerContainer},r.a.createElement(i.h,{style:[O.container,{transform:"translate(0px,"+l+"px)"}]},o.buttons.map((function(e){return r.a.createElement(i.g,{key:e.key,onPress:e.onPress},r.a.createElement(i.h,{style:O.buttonView},r.a.createElement(i.e,{style:O.buttonText},e.text)))})))))},S={container:{flex:1,alignItems:"center",margin:16},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FFFF00"},mistakesText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FF6666"}},F=function(e){var o=e.gameScore,t=Object(n.useState)(""),l=(t[0],t[1]),a=Object(n.useState)(""),c=a[0],s=a[1];return Object(n.useEffect)((function(){var e=setInterval((function(){if(s(""+o.score),o.gameOverTime){var e=o.gameOverTime-o.startTime;l((function(o){return(e/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})+" seconds"}))}else{var t=Date.now()-o.startTime;l((function(e){return(t/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})+" seconds"}))}}),100);return function(){return clearInterval(e)}}),[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{style:S.container},r.a.createElement(i.h,null,r.a.createElement(i.e,{style:S.text},c))))}}}]);
//# sourceMappingURL=23-ffdc978dd5a7018893dc.js.map