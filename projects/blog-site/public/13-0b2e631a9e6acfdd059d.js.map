{"version":3,"sources":["webpack:///D:/Projects/rick-love-master/node_modules/core-js/modules/_string-pad.js","webpack:///D:/Projects/rick-love-master/node_modules/core-js/modules/es7.string.pad-start.js","webpack:///D:/Projects/rick-love-master/node_modules/dayjs/dayjs.min.js","webpack:///D:/Projects/rick-love-master/node_modules/dayjs/plugin/localizedFormat.js","webpack:///D:/Projects/rick-love-master/node_modules/core-js/modules/es6.date.to-json.js","webpack:///D:/Projects/rick-love-master/node_modules/core-js/modules/_date-to-iso-string.js","webpack:///D:/Projects/rick-love-master/node_modules/core-js/modules/es6.date.to-iso-string.js","webpack:///D:/Projects/rick-love-master/code/json-rpc/types.ts","webpack:///D:/Projects/rick-love-master/code/json-rpc/json-body.ts","webpack:///D:/Projects/rick-love-master/code/json-rpc/web/fetch-request.ts","webpack:///D:/Projects/rick-love-master/code/json-rpc/json-rpc-client-stack.ts","webpack:///D:/Projects/rick-love-master/code/utils/dates.ts","webpack:///D:/Projects/rick-love-master/code/payments/client/payment-react.tsx","webpack:///D:/Projects/rick-love-master/code/payments/test/full-stack-test-config.ts","webpack:///D:/Projects/rick-love-master/code/payments/test/full-stack-test-client.tsx","webpack:///D:/Projects/rick-love-master/node_modules/core-js/modules/_string-repeat.js"],"names":["toLength","repeat","defined","module","exports","that","maxLength","fillString","left","S","String","stringLength","length","fillStr","undefined","intMaxLength","fillLen","stringFiller","call","Math","ceil","slice","$export","$pad","userAgent","WEBKIT_BUG","test","P","F","padStart","this","arguments","t","e","n","r","i","s","u","o","a","h","f","c","Array","join","d","z","utcOffset","abs","floor","m","year","month","clone","add","Number","p","M","y","w","D","ms","Q","toLowerCase","replace","$","name","weekdays","split","months","l","v","g","date","args","locale","$L","utc","$u","$offset","parse","prototype","$d","Date","NaN","match","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","day","hour","minute","second","millisecond","unix","valueOf","getTime","toDate","apply","$locale","weekStart","$set","min","daysInMonth","get","round","subtract","format","substr","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","extend","isDayjs","en","Ls","LTS","LT","L","LL","LLL","LLLL","formats","toUpperCase","toObject","toPrimitive","key","O","pv","isFinite","fails","$toISOString","lz","num","RangeError","getUTCFullYear","getUTCMilliseconds","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","JsonRpcError","message","data","innerError","Error","_nextId","encodeJsonRpcRequestBody","method","params","jsonrpc","id","FetchError","fetchWithTimeout","url","options","timeout","timeoutId","pTimeout","Promise","resolve","reject","setTimeout","errorInfo","isTimeout","error","details","pMain","fetch","catch","result","clearTimeout","race","fetchJsonPost","body","JSON","stringify","reqData","headers","credentials","cache","ok","json","status","responseStatus","request","resultObj","createJsonRpcClient","config","webClient","webRequest","serverUrl","reqBody","response","responseBodyObj","methodRequests","Object","keys","apiMethodNames","map","k","execute","inner","toKeyValueObject","x","value","createJsonRpcApiCoreClient","newRequests","promiseState","_resolve","_reject","prom","push","delay","batchRequests","batchRequest","batchResponses","forEach","req","res","find","createJsonRpcCoreBatchClient","batchData","sessionTokenStorage","getSessionToken","sessionToken","sessionRequest","newSessionToken","resetSessionToken","setSessionToken","createJsonRpcBatchSessionClient","sessionData","createJsonRpcSessionWebClient","dayjs","localizedFormat","createPaymentClientComponents_extra","comp","compStripe","createPaymentClientComponents_stripe","AppWrapperComponent","children","PaymentMethodEntryComponent","props","createPaymentClientComponents","compExtra","PaymentMethodView","serverAccess","title","PaymentHistoryView","useState","textPadding","elementPadding","buttonAlignment","borderRadius","borderColor","theme","colors","border","backgroundColor","background_field","textColor","text","buttonText","style","useAutoLoadingError","loading","doWork","paymentMethods","setPaymentMethods","populatePaymentMethods","getPaymentMethods","setupToken","setSetupToken","useEffect","View_Form","Text_FormTitle","Loading","ErrorBox","View_FormFields","View_FieldRow","Text_FieldLabel","expiration","Button_FieldInline","onPress","deletePaymentMethod","View_FormActionRow","Button_FormAction","stopIfObsolete","onSetupPayment","console","log","paymentMethodSetupToken","onPaymentMethodReady","paymentMethodToken","payments","setPayments","getPayments","created","amount","usdCents","PaymentDebugView","purchaseAmount","setPurchaseAmount","Input_Currency","onChange","onMakePurchase","onPurchase","getFullStackTestConfig","fullStackTestConfig","PaymentFullStackTesterHost","setServerAccess","setConfig","server","setupSavedPaymentMethod","saveSavedPaymentMethod","getSavedPaymentMethods","deleteSavedPaymentMethod","debug_triggerPayment","access","providerName","token","paymentMethodClientToken","currency","PaymentFullStackTester","compDebug","stripePublicKey","setRefreshId","View_Panel","toInteger","count","str","Infinity"],"mappings":"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","file":"13-0b2e631a9e6acfdd059d.js","sourcesContent":["// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('./_to-length');\nvar repeat = require('./_string-repeat');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, maxLength, fillString, left) {\n  var S = String(defined(that));\n  var stringLength = S.length;\n  var fillStr = fillString === undefined ? ' ' : String(fillString);\n  var intMaxLength = toLength(maxLength);\n  if (intMaxLength <= stringLength || fillStr == '') return S;\n  var fillLen = intMaxLength - stringLength;\n  var stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));\n  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);\n  return left ? stringFiller + S : S + stringFiller;\n};\n","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export');\nvar $pad = require('./_string-pad');\nvar userAgent = require('./_user-agent');\n\n// https://github.com/zloirock/core-js/issues/280\nvar WEBKIT_BUG = /Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(userAgent);\n\n$export($export.P + $export.F * WEBKIT_BUG, 'String', {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);\n  }\n});\n","require(\"core-js/modules/es6.date.to-iso-string\");\n\nrequire(\"core-js/modules/es6.date.to-json\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\n!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define(e) : t.dayjs = e();\n}(this, function () {\n  \"use strict\";\n\n  var t = \"millisecond\",\n      e = \"second\",\n      n = \"minute\",\n      r = \"hour\",\n      i = \"day\",\n      s = \"week\",\n      u = \"month\",\n      o = \"quarter\",\n      a = \"year\",\n      h = /^(\\d{4})-?(\\d{1,2})-?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d{1,3})?$/,\n      f = /\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,\n      c = function c(t, e, n) {\n    var r = String(t);\n    return !r || r.length >= e ? t : \"\" + Array(e + 1 - r.length).join(n) + t;\n  },\n      d = {\n    s: c,\n    z: function z(t) {\n      var e = -t.utcOffset(),\n          n = Math.abs(e),\n          r = Math.floor(n / 60),\n          i = n % 60;\n      return (e <= 0 ? \"+\" : \"-\") + c(r, 2, \"0\") + \":\" + c(i, 2, \"0\");\n    },\n    m: function m(t, e) {\n      var n = 12 * (e.year() - t.year()) + (e.month() - t.month()),\n          r = t.clone().add(n, u),\n          i = e - r < 0,\n          s = t.clone().add(n + (i ? -1 : 1), u);\n      return Number(-(n + (e - r) / (i ? r - s : s - r)) || 0);\n    },\n    a: function a(t) {\n      return t < 0 ? Math.ceil(t) || 0 : Math.floor(t);\n    },\n    p: function p(h) {\n      return {\n        M: u,\n        y: a,\n        w: s,\n        d: i,\n        D: \"date\",\n        h: r,\n        m: n,\n        s: e,\n        ms: t,\n        Q: o\n      }[h] || String(h || \"\").toLowerCase().replace(/s$/, \"\");\n    },\n    u: function u(t) {\n      return void 0 === t;\n    }\n  },\n      $ = {\n    name: \"en\",\n    weekdays: \"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),\n    months: \"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")\n  },\n      l = \"en\",\n      m = {};\n\n  m[l] = $;\n\n  var y = function y(t) {\n    return t instanceof v;\n  },\n      M = function M(t, e, n) {\n    var r;\n    if (!t) return l;\n    if (\"string\" == typeof t) m[t] && (r = t), e && (m[t] = e, r = t);else {\n      var i = t.name;\n      m[i] = t, r = i;\n    }\n    return !n && r && (l = r), r || !n && l;\n  },\n      g = function g(t, e) {\n    if (y(t)) return t.clone();\n    var n = \"object\" == typeof e ? e : {};\n    return n.date = t, n.args = arguments, new v(n);\n  },\n      D = d;\n\n  D.l = M, D.i = y, D.w = function (t, e) {\n    return g(t, {\n      locale: e.$L,\n      utc: e.$u,\n      $offset: e.$offset\n    });\n  };\n\n  var v = function () {\n    function c(t) {\n      this.$L = this.$L || M(t.locale, null, !0), this.parse(t);\n    }\n\n    var d = c.prototype;\n    return d.parse = function (t) {\n      this.$d = function (t) {\n        var e = t.date,\n            n = t.utc;\n        if (null === e) return new Date(NaN);\n        if (D.u(e)) return new Date();\n        if (e instanceof Date) return new Date(e);\n\n        if (\"string\" == typeof e && !/Z$/i.test(e)) {\n          var r = e.match(h);\n          if (r) return n ? new Date(Date.UTC(r[1], r[2] - 1, r[3] || 1, r[4] || 0, r[5] || 0, r[6] || 0, r[7] || 0)) : new Date(r[1], r[2] - 1, r[3] || 1, r[4] || 0, r[5] || 0, r[6] || 0, r[7] || 0);\n        }\n\n        return new Date(e);\n      }(t), this.init();\n    }, d.init = function () {\n      var t = this.$d;\n      this.$y = t.getFullYear(), this.$M = t.getMonth(), this.$D = t.getDate(), this.$W = t.getDay(), this.$H = t.getHours(), this.$m = t.getMinutes(), this.$s = t.getSeconds(), this.$ms = t.getMilliseconds();\n    }, d.$utils = function () {\n      return D;\n    }, d.isValid = function () {\n      return !(\"Invalid Date\" === this.$d.toString());\n    }, d.isSame = function (t, e) {\n      var n = g(t);\n      return this.startOf(e) <= n && n <= this.endOf(e);\n    }, d.isAfter = function (t, e) {\n      return g(t) < this.startOf(e);\n    }, d.isBefore = function (t, e) {\n      return this.endOf(e) < g(t);\n    }, d.$g = function (t, e, n) {\n      return D.u(t) ? this[e] : this.set(n, t);\n    }, d.year = function (t) {\n      return this.$g(t, \"$y\", a);\n    }, d.month = function (t) {\n      return this.$g(t, \"$M\", u);\n    }, d.day = function (t) {\n      return this.$g(t, \"$W\", i);\n    }, d.date = function (t) {\n      return this.$g(t, \"$D\", \"date\");\n    }, d.hour = function (t) {\n      return this.$g(t, \"$H\", r);\n    }, d.minute = function (t) {\n      return this.$g(t, \"$m\", n);\n    }, d.second = function (t) {\n      return this.$g(t, \"$s\", e);\n    }, d.millisecond = function (e) {\n      return this.$g(e, \"$ms\", t);\n    }, d.unix = function () {\n      return Math.floor(this.valueOf() / 1e3);\n    }, d.valueOf = function () {\n      return this.$d.getTime();\n    }, d.startOf = function (t, o) {\n      var h = this,\n          f = !!D.u(o) || o,\n          c = D.p(t),\n          d = function d(t, e) {\n        var n = D.w(h.$u ? Date.UTC(h.$y, e, t) : new Date(h.$y, e, t), h);\n        return f ? n : n.endOf(i);\n      },\n          $ = function $(t, e) {\n        return D.w(h.toDate()[t].apply(h.toDate(\"s\"), (f ? [0, 0, 0, 0] : [23, 59, 59, 999]).slice(e)), h);\n      },\n          l = this.$W,\n          m = this.$M,\n          y = this.$D,\n          M = \"set\" + (this.$u ? \"UTC\" : \"\");\n\n      switch (c) {\n        case a:\n          return f ? d(1, 0) : d(31, 11);\n\n        case u:\n          return f ? d(1, m) : d(0, m + 1);\n\n        case s:\n          var g = this.$locale().weekStart || 0,\n              v = (l < g ? l + 7 : l) - g;\n          return d(f ? y - v : y + (6 - v), m);\n\n        case i:\n        case \"date\":\n          return $(M + \"Hours\", 0);\n\n        case r:\n          return $(M + \"Minutes\", 1);\n\n        case n:\n          return $(M + \"Seconds\", 2);\n\n        case e:\n          return $(M + \"Milliseconds\", 3);\n\n        default:\n          return this.clone();\n      }\n    }, d.endOf = function (t) {\n      return this.startOf(t, !1);\n    }, d.$set = function (s, o) {\n      var h,\n          f = D.p(s),\n          c = \"set\" + (this.$u ? \"UTC\" : \"\"),\n          d = (h = {}, h[i] = c + \"Date\", h.date = c + \"Date\", h[u] = c + \"Month\", h[a] = c + \"FullYear\", h[r] = c + \"Hours\", h[n] = c + \"Minutes\", h[e] = c + \"Seconds\", h[t] = c + \"Milliseconds\", h)[f],\n          $ = f === i ? this.$D + (o - this.$W) : o;\n\n      if (f === u || f === a) {\n        var l = this.clone().set(\"date\", 1);\n        l.$d[d]($), l.init(), this.$d = l.set(\"date\", Math.min(this.$D, l.daysInMonth())).toDate();\n      } else d && this.$d[d]($);\n\n      return this.init(), this;\n    }, d.set = function (t, e) {\n      return this.clone().$set(t, e);\n    }, d.get = function (t) {\n      return this[D.p(t)]();\n    }, d.add = function (t, o) {\n      var h,\n          f = this;\n      t = Number(t);\n\n      var c = D.p(o),\n          d = function d(e) {\n        var n = g(f);\n        return D.w(n.date(n.date() + Math.round(e * t)), f);\n      };\n\n      if (c === u) return this.set(u, this.$M + t);\n      if (c === a) return this.set(a, this.$y + t);\n      if (c === i) return d(1);\n      if (c === s) return d(7);\n      var $ = (h = {}, h[n] = 6e4, h[r] = 36e5, h[e] = 1e3, h)[c] || 1,\n          l = this.$d.getTime() + t * $;\n      return D.w(l, this);\n    }, d.subtract = function (t, e) {\n      return this.add(-1 * t, e);\n    }, d.format = function (t) {\n      var e = this;\n      if (!this.isValid()) return \"Invalid Date\";\n\n      var n = t || \"YYYY-MM-DDTHH:mm:ssZ\",\n          r = D.z(this),\n          i = this.$locale(),\n          s = this.$H,\n          u = this.$m,\n          o = this.$M,\n          a = i.weekdays,\n          h = i.months,\n          c = function c(t, r, i, s) {\n        return t && (t[r] || t(e, n)) || i[r].substr(0, s);\n      },\n          d = function d(t) {\n        return D.s(s % 12 || 12, t, \"0\");\n      },\n          $ = i.meridiem || function (t, e, n) {\n        var r = t < 12 ? \"AM\" : \"PM\";\n        return n ? r.toLowerCase() : r;\n      },\n          l = {\n        YY: String(this.$y).slice(-2),\n        YYYY: this.$y,\n        M: o + 1,\n        MM: D.s(o + 1, 2, \"0\"),\n        MMM: c(i.monthsShort, o, h, 3),\n        MMMM: c(h, o),\n        D: this.$D,\n        DD: D.s(this.$D, 2, \"0\"),\n        d: String(this.$W),\n        dd: c(i.weekdaysMin, this.$W, a, 2),\n        ddd: c(i.weekdaysShort, this.$W, a, 3),\n        dddd: a[this.$W],\n        H: String(s),\n        HH: D.s(s, 2, \"0\"),\n        h: d(1),\n        hh: d(2),\n        a: $(s, u, !0),\n        A: $(s, u, !1),\n        m: String(u),\n        mm: D.s(u, 2, \"0\"),\n        s: String(this.$s),\n        ss: D.s(this.$s, 2, \"0\"),\n        SSS: D.s(this.$ms, 3, \"0\"),\n        Z: r\n      };\n\n      return n.replace(f, function (t, e) {\n        return e || l[t] || r.replace(\":\", \"\");\n      });\n    }, d.utcOffset = function () {\n      return 15 * -Math.round(this.$d.getTimezoneOffset() / 15);\n    }, d.diff = function (t, h, f) {\n      var c,\n          d = D.p(h),\n          $ = g(t),\n          l = 6e4 * ($.utcOffset() - this.utcOffset()),\n          m = this - $,\n          y = D.m(this, $);\n      return y = (c = {}, c[a] = y / 12, c[u] = y, c[o] = y / 3, c[s] = (m - l) / 6048e5, c[i] = (m - l) / 864e5, c[r] = m / 36e5, c[n] = m / 6e4, c[e] = m / 1e3, c)[d] || m, f ? y : D.a(y);\n    }, d.daysInMonth = function () {\n      return this.endOf(u).$D;\n    }, d.$locale = function () {\n      return m[this.$L];\n    }, d.locale = function (t, e) {\n      if (!t) return this.$L;\n      var n = this.clone(),\n          r = M(t, e, !0);\n      return r && (n.$L = r), n;\n    }, d.clone = function () {\n      return D.w(this.$d, this);\n    }, d.toDate = function () {\n      return new Date(this.valueOf());\n    }, d.toJSON = function () {\n      return this.isValid() ? this.toISOString() : null;\n    }, d.toISOString = function () {\n      return this.$d.toISOString();\n    }, d.toString = function () {\n      return this.$d.toUTCString();\n    }, c;\n  }();\n\n  return g.prototype = v.prototype, g.extend = function (t, e) {\n    return t(e, v, g), g;\n  }, g.locale = M, g.isDayjs = y, g.unix = function (t) {\n    return g(1e3 * t);\n  }, g.en = m[l], g.Ls = m, g;\n});","require(\"core-js/modules/es6.regexp.replace\");\n\n!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : e.dayjs_plugin_localizedFormat = t();\n}(this, function () {\n  \"use strict\";\n\n  return function (e, t, o) {\n    var n = t.prototype,\n        r = n.format,\n        M = {\n      LTS: \"h:mm:ss A\",\n      LT: \"h:mm A\",\n      L: \"MM/DD/YYYY\",\n      LL: \"MMMM D, YYYY\",\n      LLL: \"MMMM D, YYYY h:mm A\",\n      LLLL: \"dddd, MMMM D, YYYY h:mm A\"\n    };\n    o.en.formats = M;\n\n    n.format = function (e) {\n      void 0 === e && (e = \"YYYY-MM-DDTHH:mm:ssZ\");\n      var t = this.$locale().formats,\n          o = void 0 === t ? {} : t,\n          n = e.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g, function (e, t, n) {\n        var r = n && n.toUpperCase();\n        return t || o[n] || M[n] || o[r].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g, function (e, t, o) {\n          return t || o.slice(1);\n        });\n      });\n      return r.call(this, n);\n    };\n  };\n});","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n}), 'Date', {\n  // eslint-disable-next-line no-unused-vars\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n","'use strict';\n// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar fails = require('./_fails');\nvar getTime = Date.prototype.getTime;\nvar $toISOString = Date.prototype.toISOString;\n\nvar lz = function (num) {\n  return num > 9 ? num : '0' + num;\n};\n\n// PhantomJS / old WebKit has a broken implementations\nmodule.exports = (fails(function () {\n  return $toISOString.call(new Date(-5e13 - 1)) != '0385-07-25T07:06:39.999Z';\n}) || !fails(function () {\n  $toISOString.call(new Date(NaN));\n})) ? function toISOString() {\n  if (!isFinite(getTime.call(this))) throw RangeError('Invalid time value');\n  var d = this;\n  var y = d.getUTCFullYear();\n  var m = d.getUTCMilliseconds();\n  var s = y < 0 ? '-' : y > 9999 ? '+' : '';\n  return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +\n    '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +\n    'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +\n    ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';\n} : $toISOString;\n","// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar $export = require('./_export');\nvar toISOString = require('./_date-to-iso-string');\n\n// PhantomJS / old WebKit has a broken implementations\n$export($export.P + $export.F * (Date.prototype.toISOString !== toISOString), 'Date', {\n  toISOString: toISOString\n});\n","import { JsonTyped } from 'utils/json';\r\n\r\nexport type JsonRpcRequestBody = {\r\n    jsonrpc: `2.0`;\r\n    id: string;\r\n    method: string;\r\n    params: unknown;\r\n};\r\n\r\nexport type JsonRpcResponseBody = {\r\n    jsonrpc: `2.0`;\r\n    id: string;\r\n    result?: unknown;\r\n    error?: unknown;\r\n};\r\n\r\nexport class JsonRpcError extends Error {\r\n    constructor(public message: string, public data?: unknown, public innerError?: Error) { super(); }\r\n}\r\n\r\n\r\n// Api Endpoints (used in app)\r\nexport type JsonRpcApiMethodNames<T> = { [K in keyof T]: T[K] extends (...args: infer PARAMS) => Promise<infer R> ? K : never };\r\nexport type JsonRpcApiMethods<T> = { [K in keyof T]: T[K] extends (...args: infer PARAMS) => Promise<infer R> ? (...args: PARAMS) => Promise<R> : never };\r\n\r\n// JsonRpc 2.0 Spec\r\nexport type JsonRpcCoreClient = {\r\n    request: (data: JsonRpcRequestBody) => Promise<JsonRpcResponseBody>;\r\n};\r\n\r\n// JsonRpc 2.0 Batching\r\nexport type JsonRpcBatchClient = {\r\n    batchRequest: (batchData: JsonRpcRequestBody[]) => Promise<JsonRpcResponseBody[]>;\r\n};\r\n\r\n// With Session (Credentials)\r\nexport type JsonRpcSessionClient = {\r\n    sessionRequest: (sessionData: JsonRpcSessionRequestBody) => Promise<JsonRpcSessionResponseBody>;\r\n}\r\n\r\nexport type JsonRpcSessionToken = unknown & { __type: 'JsonRpcSessionToken' };\r\nexport type JsonRpcSessionToken_New = undefined | null | JsonRpcSessionToken | 'reset';\r\n\r\nexport type JsonRpcSessionRequestBody = {\r\n    batchRequests: JsonRpcRequestBody[];\r\n    sessionToken?: JsonRpcSessionToken;\r\n};\r\n\r\nexport type JsonRpcSessionResponseBody = {\r\n    batchResponses: JsonRpcResponseBody[];\r\n    newSessionToken?: JsonRpcSessionToken_New;\r\n};\r\n\r\n// Web: Client => Server\r\nexport type JsonRpcWebClient = {\r\n    webRequest: (serverUrl: string, bodyObj: JsonRpcSessionRequestBody)\r\n        => Promise<{ responseBodyObj: JsonRpcSessionResponseBody }>;\r\n}\r\n\r\n// The cookies are an alternative storage for the sessionToken (HttpOnly, Secure)\r\nexport type JsonRpcWebJsonServer = {\r\n    respond: (requestBodyJson: JsonTyped<JsonRpcSessionRequestBody>, requestCookieJson?: JsonTyped<JsonRpcSessionToken>)\r\n        => Promise<{ responseBodyJson: JsonTyped<JsonRpcSessionResponseBody>, responseCookieJson?: JsonTyped<JsonRpcSessionToken>, responseCookieReset?: boolean }>;\r\n}\r\n\r\nexport type JsonRpcWebServer = {\r\n    respond: (requestBodyObj: JsonRpcSessionRequestBody, requestCookieObj?: JsonRpcSessionToken)\r\n        => Promise<{ responseBodyObj: JsonRpcSessionResponseBody, responseCookieObj?: JsonRpcSessionToken_New }>;\r\n}\r\n\r\nexport type JsonRpcSessionServer = {\r\n    respond: (sessionData: JsonRpcSessionRequestBody)\r\n        => Promise<JsonRpcSessionResponseBody>;\r\n}\r\n\r\nexport type JsonRpcBatchServer<TContext> = {\r\n    respond: (batchData: JsonRpcRequestBody[], context: TContext)\r\n        => Promise<{ responses: JsonRpcResponseBody[], newSessionToken?: JsonRpcSessionToken_New }>;\r\n}\r\n\r\nexport type JsonRpcCoreServer<TContext> = {\r\n    respond: (data: JsonRpcRequestBody, context: TContext)\r\n        => Promise<{ response: JsonRpcResponseBody, newSessionToken?: JsonRpcSessionToken_New }>;\r\n}\r\n\r\nexport type JsonRpcApiServer<TContext> = {\r\n    respond: (method: string, params: unknown, context: TContext)\r\n        => Promise<{ responseData: unknown, newSessionToken?: JsonRpcSessionToken_New }>;\r\n}\r\n","import { JsonRpcRequestBody, JsonRpcResponseBody } from './types';\r\n\r\nlet _nextId = 1000;\r\n\r\nexport const encodeJsonRpcRequestBody = (method: string, params: unknown): JsonRpcRequestBody => {\r\n    const id = `${_nextId++}`;\r\n    const data = {\r\n        jsonrpc: `2.0`,\r\n        method,\r\n        params,\r\n        id,\r\n    } as const;\r\n    return data;\r\n};\r\n\r\nexport const decodeJsonRpcRequestBody = <T>(body: {} & unknown): JsonRpcRequestBody => {\r\n    const data = body as {\r\n        jsonrpc: `2.0`;\r\n        method: string;\r\n        params: T;\r\n        id: string;\r\n    };\r\n    return data;\r\n};\r\n\r\nexport const encodeJsonRpcResponseData = (id: string, result: unknown): JsonRpcResponseBody => {\r\n    return {\r\n        jsonrpc: `2.0`,\r\n        id,\r\n        result: result ?? {},\r\n    };\r\n};\r\n\r\nexport const encodeJsonRpcResponseData_error = (id: string, error: unknown): JsonRpcResponseBody => {\r\n    return {\r\n        jsonrpc: `2.0`,\r\n        id,\r\n        error: error ?? {},\r\n    };\r\n};\r\n\r\nexport const decodeJsonRpcResponseBody = <T>(body: {} & unknown): JsonRpcResponseBody => {\r\n    const data = body as {\r\n        jsonrpc: `2.0`;\r\n        id: string;\r\n        result?: T;\r\n        error?: unknown;\r\n    };\r\n    return data;\r\n};\r\n","export class FetchError extends Error {\r\n    constructor(public message: string, public data?: unknown, public innerError?: Error) { super(); }\r\n}\r\n\r\nconst fetchWithTimeout = (url: string, options: RequestInit, timeout = 15000): Promise<Response> => {\r\n    let timeoutId = 0 as unknown as ReturnType<typeof setTimeout>;\r\n\r\n    const pTimeout: Promise<Response> = new Promise((resolve, reject) => {\r\n        timeoutId = setTimeout(() => {\r\n            const errorInfo = { isTimeout: true, message: `Web Api Timeout`, error: new FetchError(`Web Api Timeout`), details: { url, options } };\r\n            reject(errorInfo);\r\n        }, timeout);\r\n    });\r\n\r\n    const pMain = (async () => {\r\n        const result = await fetch(url, options)\r\n            .catch(error => {\r\n                throw new FetchError(`Fetch Error`, { url }, error);\r\n            });\r\n\r\n        clearTimeout(timeoutId);\r\n        return result;\r\n    })();\r\n\r\n    return Promise.race([pTimeout, pMain]);\r\n};\r\n\r\nexport const fetchJsonPost = async <TResponse extends {}>(url: string, data: unknown): Promise<TResponse> => {\r\n\r\n    const body = JSON.stringify(data);\r\n    const reqData: RequestInit = {\r\n        method: `POST`,\r\n        headers: {\r\n            'Accept': `application/json`,\r\n            'Content-Type': `application/json`,\r\n            'Content-Length': `${body.length}`,\r\n        },\r\n        body,\r\n        // Include Cookies\r\n        credentials: `include`,\r\n        // POST is always no-cache\r\n        cache: `no-cache`,\r\n    };\r\n\r\n    const result = await fetchWithTimeout(url, reqData)\r\n        .catch((error) => {\r\n            throw new FetchError(`Request Failure`, { url, data }, error);\r\n        });\r\n\r\n    if (!result.ok) {\r\n        throw new FetchError(`Api Error`, {\r\n            data: (await result.json().catch((error) => {/* Ignore */ })) ?? {},\r\n            responseStatus: result.status,\r\n            request: { url, data },\r\n        });\r\n    }\r\n    const resultObj = await result.json()\r\n        .catch((error) => {\r\n            throw new FetchError(`Request Parse Failure`, { url, data }, error);\r\n        });\r\n\r\n    return resultObj as TResponse;\r\n};\r\n","import { toKeyValueObject } from 'utils/objects';\r\nimport { delay } from 'utils/delay';\r\nimport { JsonRpcCoreClient, JsonRpcApiMethodNames, JsonRpcApiMethods, JsonRpcError, JsonRpcBatchClient, JsonRpcRequestBody, JsonRpcResponseBody, JsonRpcSessionClient, JsonRpcSessionToken, JsonRpcWebClient, JsonRpcSessionResponseBody } from './types';\r\nimport { encodeJsonRpcRequestBody, decodeJsonRpcResponseBody } from './json-body';\r\nimport { fetchJsonPost } from './web/fetch-request';\r\n\r\nconst createJsonRpcApiCoreClient = <T>(config: { inner: JsonRpcCoreClient, apiMethodNames: JsonRpcApiMethodNames<T> }): JsonRpcApiMethods<T> => {\r\n    const methodRequests = Object.keys(config.apiMethodNames).map(k => ({\r\n        method: k,\r\n        execute: async (params: unknown) => {\r\n            const data = encodeJsonRpcRequestBody(k, params);\r\n            const response = await config.inner.request(data);\r\n            const result = decodeJsonRpcResponseBody(response);\r\n\r\n            if (result.error) {\r\n                throw new JsonRpcError(`JsonRpcClient Request Failed`, { error: result.error });\r\n            }\r\n\r\n            return result.result;\r\n        },\r\n    }));\r\n\r\n    const methods = toKeyValueObject(methodRequests.map(x => ({ key: x.method, value: x.execute })));\r\n    return methods as JsonRpcApiMethods<T>;\r\n};\r\n\r\nconst createJsonRpcCoreBatchClient = (config: { inner: JsonRpcBatchClient }): JsonRpcCoreClient => {\r\n    const batchTimeMs = 50;\r\n    let newRequests = [] as {\r\n        data: JsonRpcRequestBody;\r\n        promiseState: {\r\n            _resolve: (value: JsonRpcResponseBody) => void;\r\n            _reject: (value: unknown) => void;\r\n        };\r\n    }[];\r\n\r\n    const coreClient: JsonRpcCoreClient = {\r\n        request: async (data) => {\r\n            const promiseState = {\r\n                _resolve: null as null | ((value: JsonRpcResponseBody) => void),\r\n                _reject: null as null | ((value: unknown) => void),\r\n            };\r\n            const prom = new Promise<JsonRpcResponseBody>((resolve, reject) => {\r\n                promiseState._resolve = resolve;\r\n                promiseState._reject = reject;\r\n            });\r\n\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            newRequests.push({ data, promiseState: { _resolve: promiseState._resolve!, _reject: promiseState._reject! } });\r\n            await delay(batchTimeMs);\r\n            if (newRequests.length <= 0) { return prom; }\r\n\r\n            const batchRequests = newRequests;\r\n            newRequests = [];\r\n\r\n            const result = await (async () => {\r\n                try {\r\n                    return {\r\n                        batchResponses: await config.inner.batchRequest(batchRequests.map(x => x.data)),\r\n                    };\r\n                } catch (error) {\r\n                    return {\r\n                        error,\r\n                    };\r\n                }\r\n            })();\r\n\r\n            if (result.error) {\r\n                batchRequests.forEach(req => {\r\n                    req.promiseState._reject(new JsonRpcError(`Request Failed`, { request: req.data, batchRequests }));\r\n                });\r\n                return prom;\r\n            }\r\n            for (const req of batchRequests) {\r\n                const { batchResponses } = result;\r\n                const res = batchResponses?.find(x => x.id === req.data.id);\r\n                if (!res) {\r\n                    req.promiseState._reject(new JsonRpcError(`Batch Response is Missing`, { request: req.data, batchRequests, batchResponses }));\r\n                    // throw new JsonRpcError(`Batch Response is Missing`, { request: req.data, batchRequests, batchResponses });\r\n                    continue;\r\n                }\r\n                req.promiseState._resolve(res);\r\n            }\r\n\r\n            return prom;\r\n        },\r\n    };\r\n    return coreClient;\r\n};\r\n\r\nexport type JsonRpcSessionStorage = {\r\n    getSessionToken: () => Promise<JsonRpcSessionToken>;\r\n    setSessionToken: (sessionToken: JsonRpcSessionToken) => Promise<void>;\r\n    resetSessionToken: () => Promise<void>;\r\n};\r\nconst createJsonRpcBatchSessionClient = (config: { inner: JsonRpcSessionClient, sessionTokenStorage?: JsonRpcSessionStorage }): JsonRpcBatchClient => {\r\n    const batchClient: JsonRpcBatchClient = {\r\n        batchRequest: async (batchData) => {\r\n            const sessionToken = await config.sessionTokenStorage?.getSessionToken();\r\n            const response = await config.inner.sessionRequest({ batchRequests: batchData, sessionToken });\r\n            if (config.sessionTokenStorage) {\r\n                if (response.newSessionToken === `reset`) {\r\n                    await config.sessionTokenStorage.resetSessionToken();\r\n                }\r\n                else if (response.newSessionToken) {\r\n                    await config.sessionTokenStorage.setSessionToken(response.newSessionToken);\r\n                }\r\n            }\r\n            return response.batchResponses;\r\n        },\r\n    };\r\n    return batchClient;\r\n};\r\n\r\nconst createJsonRpcSessionWebClient = (config: { inner: JsonRpcWebClient, serverUrl: string }): JsonRpcSessionClient => {\r\n    const sessionClient: JsonRpcSessionClient = {\r\n        sessionRequest: async (sessionData) => {\r\n            const response = await config.inner.webRequest(config.serverUrl, sessionData);\r\n            return response.responseBodyObj;\r\n        },\r\n    };\r\n    return sessionClient;\r\n};\r\n\r\nexport const createJsonRpcClient = <T>(config: { serverUrl: string, sessionTokenStorage?: JsonRpcSessionStorage, apiMethodNames: JsonRpcApiMethodNames<T> }) => {\r\n    const webClient: JsonRpcWebClient = {\r\n        webRequest: async (serverUrl: string, reqBody: unknown) => {\r\n            const response = await fetchJsonPost<JsonRpcSessionResponseBody>(serverUrl, reqBody);\r\n            return { responseBodyObj: response };\r\n        },\r\n    };\r\n    const sessionClient = createJsonRpcSessionWebClient({ serverUrl: config.serverUrl, inner: webClient });\r\n    const batchClient = createJsonRpcBatchSessionClient({ inner: sessionClient, sessionTokenStorage: config.sessionTokenStorage });\r\n    const coreClient = createJsonRpcCoreBatchClient({ inner: batchClient });\r\n    const apiClient = createJsonRpcApiCoreClient<T>({ inner: coreClient, apiMethodNames: config.apiMethodNames });\r\n    return apiClient;\r\n};\r\n","import dayjs from 'dayjs';\r\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\r\n\r\ndayjs.extend(localizedFormat);\r\n\r\nexport const formatDate = (date: Date | number | string) => {\r\n    return dayjs(date).format(`L`);\r\n};\r\n","/* eslint-disable no-use-before-define */\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { theme } from 'themes/theme';\r\nimport { useAutoLoadingError } from 'utils-react/hooks';\r\nimport { C } from 'controls-react';\r\nimport { formatDate } from 'utils/dates';\r\nimport { PaymentMethodClientInfo, PaymentMethodStorageKey, PaymentProviderSavedPaymentMethodClientSetupToken, PaymentProviderSavedPaymentMethodClientToken, PaymentTransaction } from '../common/types';\r\nimport { createPaymentClientComponents_stripe } from '../providers/stripe/client/stripe-payment-react';\r\nimport { PaymentClientComponents, PaymentComponentStyle } from '../common/types-react';\r\n\r\nexport const createPaymentClientComponents = (params: { stripePublicKey: string }): PaymentClientComponents => {\r\n\r\n    const compStripe = createPaymentClientComponents_stripe(params);\r\n\r\n    const components: PaymentClientComponents = {\r\n        AppWrapperComponent: ({ children }) => {\r\n            if (!compStripe.AppWrapperComponent) { return (<>{children}</>); }\r\n            return (<compStripe.AppWrapperComponent>{children}</compStripe.AppWrapperComponent>);\r\n        },\r\n        PaymentMethodEntryComponent: (props) => {\r\n            return (\r\n                <compStripe.PaymentMethodEntryComponent {...props} />\r\n            );\r\n        },\r\n    };\r\n\r\n    return components;\r\n};\r\n\r\nexport type PaymentViewServerAccess = PaymentMethodViewServerAccess & PaymentHistoryViewServerAccess;\r\nexport const createPaymentClientComponents_extra = (params: { stripePublicKey: string, serverAccess: PaymentViewServerAccess }) => {\r\n    const comp = createPaymentClientComponents(params);\r\n    const compExtra = {\r\n        PaymentMethodView: (props: {}) => (<PaymentMethodView comp={comp} serverAccess={params.serverAccess} title='Payment Methods' />),\r\n        PaymentHistoryView: (props: {}) => (<PaymentHistoryView comp={comp} serverAccess={params.serverAccess} title='Payment History' />),\r\n    };\r\n\r\n    return {\r\n        ...comp,\r\n        ...compExtra,\r\n    };\r\n};\r\n\r\nexport type PaymentViewServerAccess_WithDebug = PaymentMethodViewServerAccess & PaymentHistoryViewServerAccess & PaymentDebugViewServerAccess;\r\nexport const createPaymentClientComponents_withDebug = (params: { stripePublicKey: string, serverAccess: PaymentViewServerAccess_WithDebug }) => {\r\n    const compExtra = createPaymentClientComponents_extra(params);\r\n    const compDebug = {\r\n        PaymentDebugView: (props: { onPurchase?: () => void }) => (<PaymentDebugView comp={compExtra} serverAccess={params.serverAccess} title='Payment Debug' onPurchase={props.onPurchase} />),\r\n    };\r\n\r\n    return {\r\n        ...compExtra,\r\n        ...compDebug,\r\n    };\r\n};\r\n\r\ntype PaymentMethodViewServerAccess = {\r\n    getPaymentMethods: () => Promise<PaymentMethodClientInfo[]>;\r\n    deletePaymentMethod: (key: PaymentMethodStorageKey) => Promise<void>;\r\n    onSetupPayment: () => Promise<PaymentProviderSavedPaymentMethodClientSetupToken>;\r\n    onPaymentMethodReady: (paymentMethodToken: PaymentProviderSavedPaymentMethodClientToken) => Promise<void>;\r\n};\r\nconst PaymentMethodView = (props: {\r\n    comp: PaymentClientComponents;\r\n    serverAccess: PaymentMethodViewServerAccess;\r\n    title: string;\r\n}) => {\r\n    const [style, setStyle] = useState({\r\n        textPadding: 4,\r\n        elementPadding: 4,\r\n        buttonAlignment: `right`,\r\n        borderRadius: 4,\r\n        borderColor: theme.colors.border,\r\n        backgroundColor: theme.colors.background_field,\r\n        textColor: theme.colors.text,\r\n        buttonText: `Save`,\r\n    } as PaymentComponentStyle);\r\n\r\n    const { loading, error, doWork } = useAutoLoadingError();\r\n\r\n    const [paymentMethods, setPaymentMethods] = useState(null as null | PaymentMethodClientInfo[]);\r\n    const populatePaymentMethods = () => doWork(async () => {\r\n        const result = await props.serverAccess.getPaymentMethods();\r\n        setPaymentMethods(result);\r\n    });\r\n\r\n    const deletePaymentMethod = (key: PaymentMethodStorageKey) => doWork(async () => {\r\n        await props.serverAccess.deletePaymentMethod(key);\r\n        populatePaymentMethods();\r\n    });\r\n\r\n    const [setupToken, setSetupToken] = useState(null as null | PaymentProviderSavedPaymentMethodClientSetupToken);\r\n    const setupPayment = () => doWork(async (stopIfObsolete) => {\r\n        const result = await props.serverAccess.onSetupPayment();\r\n        stopIfObsolete();\r\n        console.log(`setupPayment`, { result });\r\n        setSetupToken(result);\r\n    });\r\n\r\n    const onPaymentMethodReady = (paymentMethodToken: PaymentProviderSavedPaymentMethodClientToken) => doWork(async () => {\r\n        await props.serverAccess.onPaymentMethodReady(paymentMethodToken);\r\n        setSetupToken(null);\r\n        populatePaymentMethods();\r\n    });\r\n\r\n\r\n    useEffect(() => {\r\n        populatePaymentMethods();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <C.View_Form>\r\n                <C.Text_FormTitle>{props.title}</C.Text_FormTitle>\r\n                <C.Loading loading={loading} />\r\n                <C.ErrorBox error={error} />\r\n\r\n                {paymentMethods && paymentMethods.length > 0 && (\r\n                    <C.View_FormFields>\r\n                        {paymentMethods.map(x => (\r\n                            <C.View_FieldRow key={x.key}>\r\n                                <C.Text_FieldLabel>{x.title}</C.Text_FieldLabel>\r\n                                <C.Text_FieldLabel>{`Expires: ${(`${x.expiration.month}`).padStart(2, `0`)}/${x.expiration.year}`}</C.Text_FieldLabel>\r\n                                <C.Button_FieldInline onPress={() => deletePaymentMethod(x.key)}>Remove</C.Button_FieldInline>\r\n                            </C.View_FieldRow>\r\n                        ))}\r\n                    </C.View_FormFields>\r\n                )}\r\n                {!setupToken && <C.View_FormActionRow><C.Button_FormAction onPress={setupPayment}>Add Payment Method</C.Button_FormAction></C.View_FormActionRow>}\r\n                {setupToken && <props.comp.PaymentMethodEntryComponent style={style} paymentMethodSetupToken={setupToken} onPaymentMethodReady={onPaymentMethodReady} />}\r\n            </C.View_Form>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\ntype PaymentHistoryViewServerAccess = {\r\n    getPayments: () => Promise<PaymentTransaction[]>;\r\n};\r\nconst PaymentHistoryView = (props: {\r\n    comp: PaymentClientComponents;\r\n    serverAccess: PaymentHistoryViewServerAccess;\r\n    title: string;\r\n}) => {\r\n    const { loading, error, doWork } = useAutoLoadingError();\r\n\r\n    const [payments, setPayments] = useState(null as null | PaymentTransaction[]);\r\n    const populatePayments = () => doWork(async (stopIfObsolete) => {\r\n        const result = await props.serverAccess.getPayments();\r\n        stopIfObsolete();\r\n        setPayments(result);\r\n    });\r\n\r\n    useEffect(() => {\r\n        populatePayments();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <C.View_Form>\r\n                <C.Text_FormTitle>{props.title}</C.Text_FormTitle>\r\n                <C.Loading loading={loading} />\r\n                <C.ErrorBox error={error} />\r\n                {payments && payments.length > 0 && (\r\n                    <C.View_FormFields>\r\n                        {payments.map(x => (\r\n                            <C.View_FieldRow key={`${x.created}`}>\r\n                                <C.Text_FieldLabel>{`Created: ${formatDate(x.created)}`}</C.Text_FieldLabel>\r\n                                <C.Text_FieldLabel>{`$${x.amount.usdCents / 100}`}</C.Text_FieldLabel>\r\n                            </C.View_FieldRow>\r\n                        ))}\r\n                    </C.View_FormFields>\r\n                )}\r\n            </C.View_Form>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\ntype PaymentDebugViewServerAccess = {\r\n    onMakePurchase: (amount: number) => Promise<void>;\r\n};\r\nconst PaymentDebugView = (props: {\r\n    comp: PaymentClientComponents;\r\n    serverAccess: PaymentDebugViewServerAccess;\r\n    title: string;\r\n    onPurchase?: () => void;\r\n}) => {\r\n    const { loading, error, doWork } = useAutoLoadingError();\r\n\r\n    const [purchaseAmount, setPurchaseAmount] = useState(100);\r\n    const makePurchase = () => doWork(async () => {\r\n        await props.serverAccess.onMakePurchase(purchaseAmount);\r\n        props.onPurchase?.();\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <C.View_Form>\r\n                <C.Text_FormTitle>Make Purchase</C.Text_FormTitle>\r\n                <C.Text_FormTitle>{props.title}</C.Text_FormTitle>\r\n                <C.Loading loading={loading} />\r\n                <C.ErrorBox error={error} />\r\n                <C.View_FormFields>\r\n                    <C.View_FieldRow>\r\n                        <C.Text_FieldLabel>Amount $</C.Text_FieldLabel>\r\n                        <C.Input_Currency value={purchaseAmount} onChange={(value) => setPurchaseAmount(value)} />\r\n                        <C.Button_FieldInline onPress={() => makePurchase()} >Purchase</C.Button_FieldInline>\r\n                    </C.View_FieldRow>\r\n                </C.View_FormFields>\r\n            </C.View_Form>\r\n        </>\r\n    );\r\n};\r\n","import { FullStackTestConfig } from './full-stack-test-config-types';\r\n\r\nexport const getFullStackTestConfig = async (): Promise<FullStackTestConfig> => {\r\n    const config = (await import(`./full-stack-test-config.secret`))?.fullStackTestConfig as FullStackTestConfig;\r\n    if (!config) {\r\n        throw new Error(`Create config file`);\r\n    }\r\n    return config;\r\n};\r\n","/* eslint-disable no-console */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { C } from 'controls-react';\r\nimport { createJsonRpcClient } from 'json-rpc/json-rpc-client-stack';\r\nimport { PaymentViewServerAccess_WithDebug, createPaymentClientComponents_withDebug } from '../client/payment-react';\r\nimport { PaymentProviderName, PaymentClientApi, PaymentMethodStorageKey } from '../common/types';\r\nimport { FullStackTestConfig } from './full-stack-test-config-types';\r\nimport { getFullStackTestConfig } from './full-stack-test-config';\r\n\r\nexport const PaymentFullStackTesterHost = (props: {}) => {\r\n\r\n    const [serverAccess, setServerAccess] = useState(null as null | PaymentViewServerAccess_WithDebug);\r\n    const [config, setConfig] = useState(null as null | FullStackTestConfig);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            const c = await getFullStackTestConfig();\r\n            setConfig(c);\r\n            const server = createJsonRpcClient<PaymentClientApi>({\r\n                serverUrl: c.serverUrl,\r\n                // Use Cookies\r\n                // sessionTokenStorage: {\r\n                //     getSessionToken: async () => { try { return JSON.parse(localStorage.PaymentFullStackTesterHost_Credentials); } catch{ return null; } },\r\n                //     setSessionToken: async (value) => { localStorage.PaymentFullStackTesterHost_Credentials = JSON.stringify(value); },\r\n                //     resetSessionToken: async () => { localStorage.PaymentFullStackTesterHost_Credentials = undefined; },\r\n                // },\r\n                apiMethodNames: {\r\n                    setupSavedPaymentMethod: `setupSavedPaymentMethod`,\r\n                    saveSavedPaymentMethod: `saveSavedPaymentMethod`,\r\n                    getSavedPaymentMethods: `getSavedPaymentMethods`,\r\n                    deleteSavedPaymentMethod: `deleteSavedPaymentMethod`,\r\n                    debug_triggerPayment: `debug_triggerPayment`,\r\n                    getPayments: `getPayments`,\r\n                },\r\n            });\r\n\r\n            const providerName = `stripe` as PaymentProviderName;\r\n            const access: PaymentViewServerAccess_WithDebug = {\r\n                onSetupPayment: async () => {\r\n                    console.log(`onSetupPayment START`);\r\n                    const result = await server.setupSavedPaymentMethod({ providerName });\r\n                    console.log(`onSetupPayment END`, { result });\r\n                    return result;\r\n                },\r\n                onPaymentMethodReady: async (token) => {\r\n                    console.log(`onPaymentMethodReady START`);\r\n                    const result = await server.saveSavedPaymentMethod({ providerName, paymentMethodClientToken: token });\r\n                    console.log(`onPaymentMethodReady END`, { result });\r\n                    return result;\r\n                },\r\n                getPaymentMethods: async () => {\r\n                    console.log(`getPaymentMethods START`);\r\n                    const result = await server.getSavedPaymentMethods();\r\n                    console.log(`getPaymentMethods END`, { result });\r\n                    return result;\r\n                },\r\n                deletePaymentMethod: async (key: PaymentMethodStorageKey) => {\r\n                    console.log(`deletePaymentMethod`);\r\n                    await server.deleteSavedPaymentMethod({ key });\r\n                },\r\n                getPayments: async () => {\r\n                    console.log(`getPayments START`);\r\n                    const result = await server.getPayments();\r\n                    console.log(`getPayments END`, { result });\r\n                    return result;\r\n                },\r\n\r\n                // Debug\r\n                onMakePurchase: async (amount: number) => {\r\n                    console.log(`onMakePurchase`);\r\n                    await server.debug_triggerPayment({ amount: { currency: `usd`, usdCents: Math.floor(amount * 100) } });\r\n                },\r\n            };\r\n\r\n            setServerAccess(access);\r\n        })();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            {(!config || !serverAccess) && (<div>Loading...</div>)}\r\n            {config && serverAccess && <PaymentFullStackTester config={config} serverAccess={serverAccess} />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const PaymentFullStackTester = (props: { config: FullStackTestConfig, serverAccess: PaymentViewServerAccess_WithDebug }) => {\r\n\r\n    const comp = createPaymentClientComponents_withDebug({ stripePublicKey: props.config.stripePublicKey, serverAccess: props.serverAccess });\r\n    const AppWrapperComponent = comp.AppWrapperComponent ?? (({ children }) => (<>{children}</>));\r\n\r\n    const [refreshId, setRefreshId] = useState(0);\r\n    const refresh = () => { setRefreshId(s => s + 1); };\r\n\r\n    return (\r\n        <AppWrapperComponent>\r\n            <C.View_Panel>\r\n                <C.View_Form>\r\n                    <C.Text_FormTitle>Page and Stuff...</C.Text_FormTitle>\r\n                </C.View_Form>\r\n                <comp.PaymentMethodView />\r\n                <comp.PaymentHistoryView />\r\n                <comp.PaymentDebugView onPurchase={refresh} />\r\n            </C.View_Panel>\r\n            {/* <TestControls /> */}\r\n        </AppWrapperComponent>\r\n    );\r\n};\r\n","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n"],"sourceRoot":""}