<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" data-react-helmet="true"/><style data-href="/styles.b2cbefb609ace0d9372f.css">div.post-item{margin:16px;box-shadow:1px 2px 4px 2px #b27aef}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}ul{list-style-type:disc}ol,ul{list-style-position:inside}ol{list-style-type:decimal}ol ul,ul ul{list-style-type:circle}ol ol,ol ul,ul ol,ul ul{list-style-position:inside;margin-left:15px}ol ol,ul ol{list-style-type:lower-latin}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}body{font-family:Inter UI,Roboto,Segoe UI,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;line-height:1.54;background-color:#292a2d;color:#a9a9b3;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;font-feature-settings:"liga","tnum","case","calt","zero","ss01","locl";-webkit-overflow-scrolling:touch;-webkit-text-size-adjust:100%}body,code,div,html,p,pre,span{margin:0;padding:0}h1,h2,h3,h4,h5,h6,ol,p,ul{padding-left:8px;padding-right:8px}a{text-decoration:none}a,a:visited{color:#01ff70}a:active,a:focus,a:hover{color:#2ecc40}code,pre{font-family:Menlo,Monaco,Courier New,monospace}p{margin-bottom:1.3rem}h1,h2,h3,h4,h5,h6{color:#3ca4ff;margin-top:1.3rem;margin-bottom:.6rem}h1{font-size:2rem}h2{font-size:1.8rem}h3{font-size:1.6rem}h4{font-size:1.4rem}h5{font-size:1.2rem}h6{font-size:1.1rem}small{font-size:1.1em}canvas,iframe,img,select,svg,textarea,video{max-width:100%}blockquote{border-left:3px solid #01ff70}code{color:#01ff70}.hljs-comment,.hljs-quote{color:#969896}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d54e53}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e78c45}.hljs-attribute{color:#e7c547}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#b9ca4a}.hljs-section,.hljs-title{color:#7aa6da}.hljs-keyword,.hljs-selector-tag{color:#c397d8}.hljs{display:inline-block;min-width:100%;background:#000;color:#eaeaea;padding:1em}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.code-wrapper{background:#000}header{background-color:#333}header h1{margin:0;padding:0;font-size:1rem}header a,header a:visited{display:inline-block}header :active,header :focus,header :hover{transform:none}div.console-simulator{padding-left:8px;background-color:#000;color:#fff;font-family:monospace;font-size:14px;white-space:pre}.console-simulator span{font-family:monospace;white-space:pre-wrap}.console-simulator-cursor{display:inline-block;background-color:#777;border:1px solid #777;animation:blink 1s step-end infinite}@keyframes blink{0%{opacity:1}50%{opacity:0}to{opacity:1}}@keyframes colorChange{0%{color:#000}25%{color:red}50%{color:#0f0}to{color:#00f}}@keyframes fadeInOut{0%{opacity:0}10%{opacity:1}90%{opacity:1}to{opacity:0}}div.achievement{opacity:0;animation-name:fadeInOut;animation-duration:10s;animation-delay:0;animation-iteration-count:1}div.achievement-label{color:#000;animation-name:colorChange;animation-duration:4s;animation-delay:2s;animation-iteration-count:infinite}body,div,html,p,span{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.activity-spinner{animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}.activity-spinner-2{animation:spin-2 .7s linear infinite}@keyframes spin-2{0%{transform:rotate(1turn)}50%{transform:rotate(180deg)}to{transform:rotate(0deg)}}code[class*=language-],pre[class*=language-]{color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e}:not(pre)>code[class*=language-]{padding:.1em .3em;border-radius:.3em;color:#db4c69;background:#f9f2f4}.namespace{opacity:.7}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#6a9955}.token.punctuation{color:#d4d4d4}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#b5cea8}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#ce9178}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#d4d4d4;background:#1e1e1e}.token.atrule,.token.attr-value,.token.keyword{color:#c586c0}.token.function{color:#dcdcaa}.token.important,.token.regex,.token.variable{color:#d16969}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.constant{color:#9cdcfe}.token.class-name{color:#4ec9b0}.token.interpolation,.token.parameter{color:#9cdcfe}.token.boolean,.token.punctuation.interpolation-punctuation{color:#569cd6}.token.property{color:#9cdcfe}.token.selector{color:#d7ba7d}.token.tag{color:#569cd6}.token.attr-name{color:#9cdcfe}.token.attr-value{color:#ce9178}.token.entity{color:#4ec9b0;cursor:unset}.token.namespace,code[class*=language-javascript],pre[class*=language-javascript]{color:#4ec9b0}code[class*=language-css],pre[class*=language-css]{color:#ce9178}code[class*=language-html],pre[class*=language-html]{color:#d4d4d4}.language-html .token.punctuation{color:grey}pre[data-line]{position:relative}pre[class*=language-]>code[class*=language-]{position:relative;z-index:1}.line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:#f7ebc6;box-shadow:inset 5px 0 0 #f7d87c;z-index:0;pointer-events:none;line-height:inherit;white-space:pre}</style><meta name="generator" content="Gatsby 2.24.87"/><title data-react-helmet="true">Typescript Type System Adventure | blog_rick_love</title><meta data-react-helmet="true" name="description" content="Text Adventure implemented in the Typescript Type System and Vscode JsDoc Viewer"/><meta data-react-helmet="true" property="og:title" content="Typescript Type System Adventure"/><meta data-react-helmet="true" property="og:description" content="Text Adventure implemented in the Typescript Type System and Vscode JsDoc Viewer"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Rick Love"/><meta data-react-helmet="true" name="twitter:title" content="Typescript Type System Adventure"/><meta data-react-helmet="true" name="twitter:description" content="Text Adventure implemented in the Typescript Type System and Vscode JsDoc Viewer"/><meta data-react-helmet="true" property="og:image" content="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-06-large.png.png"/><meta data-react-helmet="true" property="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" property="twitter:image" content="https://ricklove.me/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-06-large.png.png"/><link as="script" rel="preload" href="/webpack-runtime-f00c9a0d7d30b1a0c219.js"/><link as="script" rel="preload" href="/framework-3ba5eaf0e75e5dbb78dc.js"/><link as="script" rel="preload" href="/commons-d82b062be0ffd57a8b6f.js"/><link as="script" rel="preload" href="/app-f0a933ed75e1b4a5c225.js"/><link as="script" rel="preload" href="/styles-136dffcde22e5b1103b3.js"/><link as="script" rel="preload" href="/component---gatsby-lite-template-ts-2b1e8d4b368f98e1b102.js"/><link as="fetch" rel="preload" href="/page-data\typescript-type-system-adventure\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="zoom-wrapper"><div><div style="transform:scale(1);transform-origin:top left;width:calc(100%/1)"><div style="min-height:100vh"><header><div><h1><a href="/"> &gt; </a><div class="console-simulator" style="display:inline-block"><div style="display:inline-block"><span>blog_rick_love&gt; <!-- --> </span><span class="console-simulator-cursor" style="background-color:#000000"> </span><div style="display:inline-block;width:100px"></div></div></div></h1></div></header><div><main><div style="display:block;min-width:100%"><div class="post-item"><p>Typescript Type System Adventure</p><p><span style="display:flex;flex-direction:row"><span style="min-width:100px">title</span><span>Typescript Type System Adventure</span></span><span style="display:flex;flex-direction:row"><span style="min-width:100px">date</span><span>2020-10-24</span></span><span style="display:flex;flex-direction:row"><span style="min-width:100px">path</span><span>/typescript-type-system-adventure</span></span><span style="display:flex;flex-direction:row"><span style="min-width:100px">author</span><span>Rick Love</span></span><span style="display:flex;flex-direction:row"><span style="min-width:100px">excerpt</span><span>Text Adventure implemented in the Typescript Type System and Vscode JsDoc Viewer</span></span><span style="display:flex;flex-direction:row"><span style="min-width:100px">image</span><span>game-screenshot-06-large.png.png</span></span></p><div><div class="markdown-body" style="padding:0"><div><p>tl;dr: Play a text adventure in vscode with the typescript type system.</p><h3>Summary</h3><p>I&#x27;ve always been a fan of text adventures since I first played Space Quest 1 when I was about 6 (though it was a graphical text adventure technically).</p><p>I&#x27;ve also always been a huge fan of typescript since it came out in 2012.</p><p>Now, since Typescript 4.1 is adding the powerful template-literal-types, I figured I could do something fun with them.</p><p>(I got the idea from here: <a href="https://github.com/codemix/ts-sql">https://github.com/codemix/ts-sql</a>)</p><p>It occured to me, &quot;Hey! Why not a text adventure!&quot;</p><p>Now, it turns out that the way I implemented this game, I don&#x27;t need the 4.1 features. I&#x27;ll probably add that in the future to support more dynamic command parsing.</p><p>If you have <code>vscode</code>, you can play now with a quick <code>npm install</code> into any node project. (See below for full installation instructions.)</p><h3>So What?</h3><p>This is a level 99 typescript wizardry demo. </p><p>If you aren&#x27;t a typescript nerd, you might miss the significance of this, but here is the basic idea:</p><p>First of all, everything you see here is running in the vscode code editor (without any program running). In fact, you can&#x27;t even run my code. If you compile it to javascript, this is what you will get:</p><div class="code-wrapper" style="position:relative"><div style="height:16px"></div><div style="overflow-x:scroll"><div style="transform:scale(1);transform-origin:top left"><div><pre class="lowlight"><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> gameStart = <span class="hljs-literal">null</span>;</code></pre></div></div></div><div style="position:absolute;top:4px;right:64px;height:16px;width:16px"><span>➖</span></div><div style="position:absolute;top:4px;right:32px;height:16px;width:16px"><span>➕</span></div></div><p>(There might be a little more debris then that, but you get the idea.)</p><p>This screenshot should make it clear that the typescript type system is doing all the work:</p><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-04-type-only.png"/></p><p>However, it&#x27;s not very convenient to declare all those StepNN types, so I made a fluent mode that reduces the need for those:</p><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-01.png"/></p><p>There is also an easy mode that uses only an object tree. It was very easy to make, but autocomplete ruins the fun by giving all the answers away. </p><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-05-easy.png"/></p><p>In the process of making the game, I discoved that vscode supports jsdoc markdown. So I decided to use that for the game output since it is so rich. It even supports images:</p><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-03.png"/></p><h3>Features</h3><ul><li>Play in vscode using autocomplete and tooltips</li><li>Game output displayed in tooltips using jsdoc3 with markdown (including gifs)</li><li>Implemented using conditional types, string literals, and a minimal state machine</li></ul><h3>How to play</h3><ul><li><code>npm i @ricklove/typescript-type-system-adventure</code></li><li>Create a new <code>play.ts</code> file and add the below code</li><li>Hover over <code>execute</code> to see game output (see screenshots for examples)</li></ul><div class="code-wrapper" style="position:relative"><div style="height:16px"></div><div style="overflow-x:scroll"><div style="transform:scale(1);transform-origin:top left"><div><pre class="lowlight"><code class="hljs ts"><span class="hljs-keyword">import</span> { gameStart } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@ricklove/typescript-type-system-adventure&#x27;</span>;

<span class="hljs-keyword">const</span> play = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {

    <span class="hljs-keyword">return</span> gameStart
        .command(<span class="hljs-string">&#x27;look&#x27;</span>).execute
};</code></pre></div></div></div><div style="position:absolute;top:4px;right:64px;height:16px;width:16px"><span>➖</span></div><div style="position:absolute;top:4px;right:32px;height:16px;width:16px"><span>➕</span></div></div><h3>Tips:</h3><ul><li><code>.command(&#x27;look&#x27;).execute</code> will give you an idea of what to do next</li><li><code>.command(&#x27;help&#x27;).execute</code> if you get stuck</li><li>If you really get stuck, just hit F12 and read the source code</li><li>You can also play the easy mode with this starter:</li></ul><div class="code-wrapper" style="position:relative"><div style="height:16px"></div><div style="overflow-x:scroll"><div style="transform:scale(1);transform-origin:top left"><div><pre class="lowlight"><code class="hljs ts"><span class="hljs-keyword">import</span> { gameStartEasy } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@ricklove/typescript-type-system-adventure&#x27;</span>;

<span class="hljs-keyword">const</span> playEasyMode = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    gameStartEasy
        .begin()
        .look()
};</code></pre></div></div></div><div style="position:absolute;top:4px;right:64px;height:16px;width:16px"><span>➖</span></div><div style="position:absolute;top:4px;right:32px;height:16px;width:16px"><span>➕</span></div></div><h3>Screenshots</h3><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-01.png"/></p><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-02.png"/></p><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-03.png"/></p><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-04-type-only.png"/></p><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-05-easy.png"/></p><p><img src="/blog-content/posts/2020-10-24-typescript-type-system-adventure/game-screenshot-06-large.png"/></p><h3>Source Code</h3><p><a href="https://github.com/ricklove/rick-love-master/tree/master/code/typescript-type-system-adventure">https://github.com/ricklove/rick-love-master/tree/master/code/typescript-type-system-adventure</a></p></div></div></div></div></div><a href="/"><div><p>Root</p></div></a></main><footer>© 2020 Rick Love</footer></div></div></div></div><div style="position:absolute;display:flex;height:32px;width:32px;top:-4px;right:64px;font-family:monospace;color:#000000;padding:0;margin:0;justify-content:center;align-items:center"><span style="display:block;font-weight:bold;font-size:16px">➖</span></div><div style="position:absolute;display:flex;height:32px;width:32px;top:-4px;right:32px;font-family:monospace;color:#000000;padding:0;margin:0;justify-content:center;align-items:center"><span style="display:block;font-weight:bold;font-size:16px">➕</span></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/typescript-type-system-adventure";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-fa80c5981881acae4ca8.js"],"app":["/app-f0a933ed75e1b4a5c225.js"],"component---gatsby-lite-template-ts":["/component---gatsby-lite-template-ts-2b1e8d4b368f98e1b102.js"]};/*]]>*/</script><script src="/polyfill-fa80c5981881acae4ca8.js" nomodule=""></script><script src="/component---gatsby-lite-template-ts-2b1e8d4b368f98e1b102.js" async=""></script><script src="/styles-136dffcde22e5b1103b3.js" async=""></script><script src="/app-f0a933ed75e1b4a5c225.js" async=""></script><script src="/commons-d82b062be0ffd57a8b6f.js" async=""></script><script src="/framework-3ba5eaf0e75e5dbb78dc.js" async=""></script><script src="/webpack-runtime-f00c9a0d7d30b1a0c219.js" async=""></script></body></html>