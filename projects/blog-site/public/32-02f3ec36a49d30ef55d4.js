(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[32],{Ajgr:function(e,t,a){"use strict";a.r(t),a.d(t,"WebMeshClientTestView",(function(){return o}));var n=a("t8gp"),r=a("ERkP"),i=a.n(r),s=a("DTYs"),l=a("2wDJ"),c=""+Date.now()+Math.random(),o=function(e){var t=Object(r.useState)(null),a=t[0],o=t[1],p=Object(r.useState)(null),u=p[0],m=p[1],y=Object(r.useState)(null),d=y[0],S=y[1],h=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=Object(l.a)({channelKey:"test",initialState:{history:[],clients:[]},reduceState:function(e,t){return Object.assign({},e,{history:[].concat(Object(n.a)(e.history),[Object.assign({},t,{receivedTimestamp:Date.now()})])})},reduceClientsState:function(e,t){return Object.assign({},e,{clients:t})}});S(e.clientKey);var t=e.subscribe((function(e){m(e)}));h.current=e.sendMessage;var a=setInterval((function(){o({history:{messages:Object(n.a)(e._webSocket.history.messages),events:Object(n.a)(e._webSocket.history.events)}})}),1e3);return function(){t.unsubscribe(),e.close(),clearInterval(a)}}),[]);var f=Object(r.useState)(""),w=f[0],E=f[1],g=function(){var e;h.current&&(null===(e=h.current)||void 0===e||e.call(h,{text:w,timestamp:Date.now(),senderKey:c}),E(""))};return i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{style:{whiteSpace:"pre-wrap",fontSize:18}},"Messages"),null==u?void 0:u.history.map((function(e,t){var a,n;return i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{key:t,style:{whiteSpace:"pre-wrap",fontSize:14}},e.timestamp+" "+((null!==(a=null==e?void 0:e.receivedTimestamp)&&void 0!==a?a:e.timestamp)-e.timestamp)+": "+(null!==(n=e.text)&&void 0!==n?n:JSON.stringify(e))))}))),i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{style:{whiteSpace:"pre-wrap",fontSize:18}},"Send Message"),i.a.createElement(s.h,{style:{flexDirection:"row",alignItems:"center"}},i.a.createElement(s.h,{style:{flex:1,paddingRight:4}},i.a.createElement(s.f,{style:{fontSize:16},value:w,onChange:E,keyboardType:"default",autoCompleteType:"off",onSubmitEditing:g})),i.a.createElement(s.g,{onPress:g},i.a.createElement(s.e,{style:{whiteSpace:"pre-wrap",fontSize:18}},"Send")))),i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{style:{whiteSpace:"pre-wrap",fontSize:18}},"Client Key"),i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{style:{whiteSpace:"pre-wrap",fontSize:14}},""+d)),i.a.createElement(s.e,{style:{whiteSpace:"pre-wrap",fontSize:18}},"Clients"),null==u?void 0:u.clients.map((function(e,t){return i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{key:t,style:{whiteSpace:"pre-wrap",fontSize:14}},e.key+" @ "+e.lastActivityTimestamp))}))),i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{style:{whiteSpace:"pre-wrap",fontSize:18}},"WebSocket Events"),null==a?void 0:a.history.events.map((function(e,t){return i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{key:t,style:{whiteSpace:"pre-wrap",fontSize:14}},""+JSON.stringify(e)))}))),i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{style:{whiteSpace:"pre-wrap",fontSize:18}},"WebSocket Messages"),null==a?void 0:a.history.messages.map((function(e,t){return i.a.createElement(s.h,{style:{padding:4}},i.a.createElement(s.e,{key:t,style:{whiteSpace:"pre-wrap",fontSize:14}},""+JSON.stringify(e)))}))))}}}]);
//# sourceMappingURL=32-02f3ec36a49d30ef55d4.js.map