(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[21],{"9GY0":function(e,t,n){"use strict";n.r(t),n.d(t,"EducationalGame_Doodle_Spelling",(function(){return V}));var r=n("a1TR"),a=n.n(r),o=(n("3yYM"),n("Ab9Y")),c=n("ERkP"),i=n.n(c),l=n("DTYs"),u=n("2weA"),s=n("njmQ"),m=n("pAyS"),p=n("MWkW"),f=n("yxiS"),g=(n("xrQq"),n("kNg/"),n("t8gp")),d=n("hsFx"),w={rows:[{keys:"qwertyuiop".split("")},{keys:" asdfghjkl".split("")},{keys:"  zxcvbnm ".split("")}]},y={container:{},rowView:{flex:1,flexDirection:"row"},keyView:{margin:2,padding:2,width:20,height:20,backgroundColor:"#111111",justifyContent:"center",alignItems:"center"},keyView_disabled:{opacity:.5},keyText:{fontSize:16},keyText_wrong:{fontSize:16,color:"#FF0000"}},h=function(e){var t=e.expectedCharacter,n=e.showHints,r=e.onExpectedKeyPress,a=w,o=Object(c.useState)(null),u=o[0],s=o[1],m=Object(c.useState)([]),p=m[0],f=m[1];Object(c.useEffect)((function(){n||s(null);var e=[t].concat(Object(g.a)(Object(d.f)(a.rows.flatMap((function(e){return e.keys})).map((function(e){return e.trim()})).filter((function(e){return e}))).slice(0,3)));s(e),f([])}),[t,n]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.h,{style:y.container},a.rows.map((function(e,a){return i.a.createElement(l.h,{style:y.rowView,key:""+a},e.keys.map((function(e,a){return i.a.createElement(l.g,{key:""+e+a,style:{outline:"none"},onPress:function(){var a;(a=e)!==t?n&&(s((function(e){return(null!=e?e:[]).filter((function(e){return e!==a}))})),f((function(e){return[].concat(Object(g.a)(e),[a])}))):r()}},i.a.createElement(l.h,{style:!u||u.includes(e)?{}:y.keyView_disabled},i.a.createElement(l.h,{style:y.keyView},i.a.createElement(l.e,{style:p.includes(e)?y.keyText_wrong:y.keyText},e))))})))}))))},b={container:{alignItems:"center"},drawing:{width:312,height:312,color:"#FFFFFF",backgroundColor:"#000000"},drawingChoicesView:{maxWidth:332,flexDirection:"row",flexWrap:"wrap"},drawingChoiceWrapper:{padding:4},drawingChoice:{width:78,height:78,color:"#FFFFFF",backgroundColor:"#000000"},titleView:{justifyContent:"center",alignItems:"center"},titleText:{fontSize:20,color:"#FFFFFF"},promptView:{justifyContent:"center",alignItems:"center"},promptText:{fontSize:20,color:"#FFFF00"},hintText:{fontSize:14,color:"#FFFF00"},buttonRowView:{flexDirection:"row"},buttonView:{margin:4,padding:8,backgroundColor:"#111111"},buttonText:{fontSize:20,color:"#FFFF00"}},E=function(e){var t=Object(c.useState)(0),n=t[0],r=t[1],a=Object(c.useState)(!1),o=a[0],l=a[1];return i.a.createElement(i.a.Fragment,null,!o&&i.a.createElement(v,Object.assign({},e,{problemSourceKey:n})),i.a.createElement(f.a,{problemService:e.problemService,onOpen:function(){return l(!0)},onClose:function(){return l(!1)},onSubjectNavigation:function(){return r((function(e){return e+1}))}}))},v=function(e){var t,n,r=Object(c.useState)(null),l=r[0],u=r[1],m=Object(c.useState)("type"),p=m[0],f=m[1],g=Object(c.useState)(null),d=g[0],w=g[1],y=Object(c.useRef)(null!==(t=null==l?void 0:l.prompt)&&void 0!==t?t:"");y.current=null!==(n=null==l?void 0:l.prompt)&&void 0!==n?n:"";var h=function(){var t,n=e.problemService.getNextProblem();n&&(u(n),setTimeout(v),null===(t=n.speakPrompt)||void 0===t||t.call(n))};Object(c.useEffect)((function(){h()}),[e.problemSourceKey]);var b=Object(s.a)(),E=(b.loading,b.error,b.doWork),v=function(){E(function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.drawingStorage.getDrawings(y.current,{maxCount:1,includeOtherPrompts:!1});case 2:r=t.sent,w(r.doodles),f("type");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},F=function(){f("drawPrompt")},j=function(){E(function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.drawingStorage.getDrawings(y.current);case 2:if(r=t.sent,n(),!(r.doodles.length<=1)){t.next=7;break}return h(),t.abrupt("return");case 7:w(r.doodles),f("chooseBest");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};return l?"type"===p?i.a.createElement(i.a.Fragment,null,i.a.createElement(O,{prompt:y.current,drawings:null!=d?d:[],onDone:function(){E(function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(F);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},sayAgain:function(){var e;null==l||null===(e=l.speakPrompt)||void 0===e||e.call(l)}})):"chooseBest"===p&&d?i.a.createElement(i.a.Fragment,null,i.a.createElement(x,{prompt:y.current,drawings:d,onChooseBest:function(t){E(function(){var n=Object(o.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.drawingStorage.saveBestDrawingSelection(t);case 2:r(),h();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}})):i.a.createElement(i.a.Fragment,null,i.a.createElement(S,{prompt:y.current,hint:l.hint,onDone:function(t){E(function(){var n=Object(o.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.segments.length>0)){n.next=3;break}return n.next=3,e.drawingStorage.saveDrawing(y.current,t);case 3:r(),setTimeout(j);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},onSkip:function(){setTimeout(j)}})):i.a.createElement(i.a.Fragment,null)},S=function(e){var t=Object(c.useState)(Object(p.b)()),n=t[0],r=t[1];return Object(c.useEffect)((function(){r(Object(p.b)())}),[e.prompt]),i.a.createElement(l.h,{style:b.container},i.a.createElement(l.h,{style:b.titleView},i.a.createElement(l.e,{style:b.titleText},"Draw")),i.a.createElement(m.DoodleDrawerView,{style:b.drawing,drawing:n,onChange:function(e){r(e)}}),i.a.createElement(l.h,{style:b.promptView},i.a.createElement(l.e,{style:b.promptText},e.prompt),!!e.hint&&i.a.createElement(l.e,{style:b.hintText},e.hint)),i.a.createElement(l.h,{style:b.buttonRowView},i.a.createElement(l.g,{onPress:function(){e.onSkip()}},i.a.createElement(l.h,{style:b.buttonView},i.a.createElement(l.e,{style:b.buttonText},"Skip"))),i.a.createElement(l.g,{onPress:function(){e.onDone(n)}},i.a.createElement(l.h,{style:b.buttonView},i.a.createElement(l.e,{style:b.buttonText},"Done")))))},x=function(e){return i.a.createElement(l.h,{style:b.container},i.a.createElement(l.h,{style:b.titleView},i.a.createElement(l.e,{style:b.titleText},"Choose Best")),i.a.createElement(l.h,{style:b.promptView},i.a.createElement(l.e,{style:b.promptText},e.prompt)),i.a.createElement(l.h,{style:b.drawingChoicesView},e.drawings.map((function(t){return i.a.createElement(l.g,{key:t.key,onPress:function(){return e.onChooseBest(t)}},i.a.createElement(l.h,{style:b.drawingChoiceWrapper},i.a.createElement(m.DoodleDisplayView,{style:b.drawingChoice,drawing:t.drawing})))}))))},F={completedText:{fontSize:16,color:"#FFFF00"}},O=function(e){var t,n=Object(c.useState)({completed:"",remaining:e.prompt}),r=n[0],a=n[1];Object(c.useEffect)((function(){a({completed:"",remaining:e.prompt})}),[e.prompt,e.drawings]);return i.a.createElement(l.h,{style:b.container},i.a.createElement(l.h,{style:b.titleView},i.a.createElement(l.e,{style:b.titleText},"Type Word")),i.a.createElement(l.h,{style:b.drawingChoicesView},e.drawings.map((function(e){return i.a.createElement(l.h,{key:e.key,style:b.drawingChoiceWrapper},i.a.createElement(m.DoodleDisplayView,{style:b.drawingChoice,drawing:e.drawing}))}))),i.a.createElement(l.g,{onPress:e.sayAgain},i.a.createElement(l.h,{style:b.buttonView},i.a.createElement(l.e,{style:b.buttonText},"Say Again"))),i.a.createElement(l.h,null,i.a.createElement(l.e,{style:F.completedText},r.completed+(r.remaining.length>0?"_":""))),i.a.createElement(h,{expectedCharacter:null!==(t=r.remaining[0])&&void 0!==t?t:" ",showHints:!0,onExpectedKeyPress:function(){a((function(t){t.remaining.length<=1&&e.onDone();var n=t.remaining[0];return{completed:t.completed+n,remaining:t.remaining.substr(1)}}))}}))},j=n("aLR2"),k=n("oo7O"),C=n("DZ/V"),D=n("yyXn"),T=n("7h3R"),V=function(e){var t=Object(c.useRef)(Object(j.a)()),n=Object(c.useState)("web"!==l.c.OS),r=n[0],m=n[1],p=Object(s.a)(),f=p.loading,g=(p.error,p.doWork),d=Object(c.useRef)(null),w=Object(c.useRef)(null);if(Object(c.useEffect)((function(){g(function(){var e=Object(o.a)(a.a.mark((function e(n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)();case 2:d.current=e.sent,n(),r=Object(T.createProgressGameProblemService)(Object(D.a)(Object(k.a)({speechService:t.current,sectionSize:8}),"ProblemsSpellingDoodle")),o=null,w.current={getSections:r.getSections,gotoSection:r.gotoSection,getNextProblem:function(){var e,t;o&&r.recordAnswer(o,o.answers.find((function(e){return e.isCorrect})));var n=r.getNextProblem();return n.question?(o=n,{prompt:null!==(e=null===(t=n.answers.find((function(e){return e.isCorrect})))||void 0===t?void 0:t.value)&&void 0!==e?e:"",speakPrompt:n.onQuestion}):null}};case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),!r){return i.a.createElement(l.h,null,i.a.createElement(C.a,{languange:"en",speechService:t.current}),i.a.createElement("div",{onClick:function(){return t.current.speak("Start"),void m(!0)}},i.a.createElement(l.h,{style:{height:300,alignSelf:"center",alignItems:"center",justifyContent:"center"}},i.a.createElement(l.e,{style:{fontSize:36}},"Start"))))}return!f&&d.current&&w.current?i.a.createElement(E,{problemService:w.current,drawingStorage:d.current}):i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{size:"large",color:"#FFFF00"}))}}}]);
//# sourceMappingURL=21-e732b9584ea37d3eb0a2.js.map