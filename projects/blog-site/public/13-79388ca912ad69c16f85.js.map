{"version":3,"sources":["webpack:///D:/Projects/rick-love-master/node_modules/dayjs/dayjs.min.js","webpack:///D:/Projects/rick-love-master/node_modules/dayjs/plugin/localizedFormat.js","webpack:///D:/Projects/rick-love-master/code/json-rpc/types.ts","webpack:///D:/Projects/rick-love-master/code/json-rpc/json-body.ts","webpack:///D:/Projects/rick-love-master/code/json-rpc/web/fetch-request.ts","webpack:///D:/Projects/rick-love-master/code/json-rpc/json-rpc-client-stack.ts","webpack:///D:/Projects/rick-love-master/code/utils/dates.ts","webpack:///D:/Projects/rick-love-master/code/payments/client/payment-react.tsx","webpack:///D:/Projects/rick-love-master/code/payments/test/full-stack-test-config.ts","webpack:///D:/Projects/rick-love-master/code/payments/test/full-stack-test-client.tsx"],"names":["module","exports","t","e","n","r","i","s","u","o","a","h","f","c","String","length","Array","join","d","z","utcOffset","Math","abs","floor","m","year","month","clone","add","Number","ceil","p","M","y","w","D","ms","Q","toLowerCase","replace","$","name","weekdays","split","months","l","v","g","date","args","arguments","locale","$L","utc","$u","$offset","this","parse","prototype","$d","Date","NaN","test","match","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","day","hour","minute","second","millisecond","unix","valueOf","getTime","toDate","apply","slice","$locale","weekStart","$set","min","daysInMonth","get","round","subtract","format","substr","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","extend","isDayjs","en","Ls","LTS","LT","L","LL","LLL","LLLL","formats","toUpperCase","call","JsonRpcError","message","data","innerError","Error","_nextId","encodeJsonRpcRequestBody","method","params","jsonrpc","id","FetchError","fetchWithTimeout","url","options","timeout","timeoutId","pTimeout","Promise","resolve","reject","setTimeout","errorInfo","isTimeout","error","details","pMain","fetch","catch","result","clearTimeout","race","fetchJsonPost","body","JSON","stringify","reqData","headers","credentials","cache","ok","json","status","responseStatus","request","resultObj","createJsonRpcClient","config","webClient","webRequest","serverUrl","reqBody","response","responseBodyObj","methodRequests","Object","keys","apiMethodNames","map","k","execute","inner","toKeyValueObject","x","key","value","createJsonRpcApiCoreClient","newRequests","promiseState","_resolve","_reject","prom","push","delay","batchRequests","batchRequest","batchResponses","forEach","req","res","find","createJsonRpcCoreBatchClient","batchData","sessionTokenStorage","getSessionToken","sessionToken","sessionRequest","newSessionToken","resetSessionToken","setSessionToken","createJsonRpcBatchSessionClient","sessionData","createJsonRpcSessionWebClient","dayjs","localizedFormat","createPaymentClientComponents_extra","comp","compStripe","createPaymentClientComponents_stripe","AppWrapperComponent","children","PaymentMethodEntryComponent","props","createPaymentClientComponents","compExtra","PaymentMethodView","serverAccess","title","PaymentHistoryView","useState","textPadding","elementPadding","buttonAlignment","borderRadius","borderColor","theme","colors","border","backgroundColor","background_field","textColor","text","buttonText","style","useAutoLoadingError","loading","doWork","paymentMethods","setPaymentMethods","populatePaymentMethods","getPaymentMethods","setupToken","setSetupToken","useEffect","View_Form","Text_FormTitle","Loading","ErrorBox","View_FormFields","View_FieldRow","Text_FieldLabel","expiration","padStart","Button_FieldInline","onPress","deletePaymentMethod","View_FormActionRow","Button_FormAction","stopIfObsolete","onSetupPayment","console","log","paymentMethodSetupToken","onPaymentMethodReady","paymentMethodToken","payments","setPayments","getPayments","created","amount","usdCents","PaymentDebugView","purchaseAmount","setPurchaseAmount","Input_Currency","onChange","onMakePurchase","onPurchase","getFullStackTestConfig","fullStackTestConfig","PaymentFullStackTesterHost","setServerAccess","setConfig","server","setupSavedPaymentMethod","saveSavedPaymentMethod","getSavedPaymentMethods","deleteSavedPaymentMethod","debug_triggerPayment","access","providerName","token","paymentMethodClientToken","currency","PaymentFullStackTester","compDebug","stripePublicKey","setRefreshId","View_Panel"],"mappings":"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","file":"13-79388ca912ad69c16f85.js","sourcesContent":["!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define(e) : t.dayjs = e();\n}(this, function () {\n  \"use strict\";\n\n  var t = \"millisecond\",\n      e = \"second\",\n      n = \"minute\",\n      r = \"hour\",\n      i = \"day\",\n      s = \"week\",\n      u = \"month\",\n      o = \"quarter\",\n      a = \"year\",\n      h = /^(\\d{4})-?(\\d{1,2})-?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d{1,3})?$/,\n      f = /\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,\n      c = function c(t, e, n) {\n    var r = String(t);\n    return !r || r.length >= e ? t : \"\" + Array(e + 1 - r.length).join(n) + t;\n  },\n      d = {\n    s: c,\n    z: function z(t) {\n      var e = -t.utcOffset(),\n          n = Math.abs(e),\n          r = Math.floor(n / 60),\n          i = n % 60;\n      return (e <= 0 ? \"+\" : \"-\") + c(r, 2, \"0\") + \":\" + c(i, 2, \"0\");\n    },\n    m: function m(t, e) {\n      var n = 12 * (e.year() - t.year()) + (e.month() - t.month()),\n          r = t.clone().add(n, u),\n          i = e - r < 0,\n          s = t.clone().add(n + (i ? -1 : 1), u);\n      return Number(-(n + (e - r) / (i ? r - s : s - r)) || 0);\n    },\n    a: function a(t) {\n      return t < 0 ? Math.ceil(t) || 0 : Math.floor(t);\n    },\n    p: function p(h) {\n      return {\n        M: u,\n        y: a,\n        w: s,\n        d: i,\n        D: \"date\",\n        h: r,\n        m: n,\n        s: e,\n        ms: t,\n        Q: o\n      }[h] || String(h || \"\").toLowerCase().replace(/s$/, \"\");\n    },\n    u: function u(t) {\n      return void 0 === t;\n    }\n  },\n      $ = {\n    name: \"en\",\n    weekdays: \"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),\n    months: \"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")\n  },\n      l = \"en\",\n      m = {};\n\n  m[l] = $;\n\n  var y = function y(t) {\n    return t instanceof v;\n  },\n      M = function M(t, e, n) {\n    var r;\n    if (!t) return l;\n    if (\"string\" == typeof t) m[t] && (r = t), e && (m[t] = e, r = t);else {\n      var i = t.name;\n      m[i] = t, r = i;\n    }\n    return !n && r && (l = r), r || !n && l;\n  },\n      g = function g(t, e) {\n    if (y(t)) return t.clone();\n    var n = \"object\" == typeof e ? e : {};\n    return n.date = t, n.args = arguments, new v(n);\n  },\n      D = d;\n\n  D.l = M, D.i = y, D.w = function (t, e) {\n    return g(t, {\n      locale: e.$L,\n      utc: e.$u,\n      $offset: e.$offset\n    });\n  };\n\n  var v = function () {\n    function c(t) {\n      this.$L = this.$L || M(t.locale, null, !0), this.parse(t);\n    }\n\n    var d = c.prototype;\n    return d.parse = function (t) {\n      this.$d = function (t) {\n        var e = t.date,\n            n = t.utc;\n        if (null === e) return new Date(NaN);\n        if (D.u(e)) return new Date();\n        if (e instanceof Date) return new Date(e);\n\n        if (\"string\" == typeof e && !/Z$/i.test(e)) {\n          var r = e.match(h);\n          if (r) return n ? new Date(Date.UTC(r[1], r[2] - 1, r[3] || 1, r[4] || 0, r[5] || 0, r[6] || 0, r[7] || 0)) : new Date(r[1], r[2] - 1, r[3] || 1, r[4] || 0, r[5] || 0, r[6] || 0, r[7] || 0);\n        }\n\n        return new Date(e);\n      }(t), this.init();\n    }, d.init = function () {\n      var t = this.$d;\n      this.$y = t.getFullYear(), this.$M = t.getMonth(), this.$D = t.getDate(), this.$W = t.getDay(), this.$H = t.getHours(), this.$m = t.getMinutes(), this.$s = t.getSeconds(), this.$ms = t.getMilliseconds();\n    }, d.$utils = function () {\n      return D;\n    }, d.isValid = function () {\n      return !(\"Invalid Date\" === this.$d.toString());\n    }, d.isSame = function (t, e) {\n      var n = g(t);\n      return this.startOf(e) <= n && n <= this.endOf(e);\n    }, d.isAfter = function (t, e) {\n      return g(t) < this.startOf(e);\n    }, d.isBefore = function (t, e) {\n      return this.endOf(e) < g(t);\n    }, d.$g = function (t, e, n) {\n      return D.u(t) ? this[e] : this.set(n, t);\n    }, d.year = function (t) {\n      return this.$g(t, \"$y\", a);\n    }, d.month = function (t) {\n      return this.$g(t, \"$M\", u);\n    }, d.day = function (t) {\n      return this.$g(t, \"$W\", i);\n    }, d.date = function (t) {\n      return this.$g(t, \"$D\", \"date\");\n    }, d.hour = function (t) {\n      return this.$g(t, \"$H\", r);\n    }, d.minute = function (t) {\n      return this.$g(t, \"$m\", n);\n    }, d.second = function (t) {\n      return this.$g(t, \"$s\", e);\n    }, d.millisecond = function (e) {\n      return this.$g(e, \"$ms\", t);\n    }, d.unix = function () {\n      return Math.floor(this.valueOf() / 1e3);\n    }, d.valueOf = function () {\n      return this.$d.getTime();\n    }, d.startOf = function (t, o) {\n      var h = this,\n          f = !!D.u(o) || o,\n          c = D.p(t),\n          d = function d(t, e) {\n        var n = D.w(h.$u ? Date.UTC(h.$y, e, t) : new Date(h.$y, e, t), h);\n        return f ? n : n.endOf(i);\n      },\n          $ = function $(t, e) {\n        return D.w(h.toDate()[t].apply(h.toDate(\"s\"), (f ? [0, 0, 0, 0] : [23, 59, 59, 999]).slice(e)), h);\n      },\n          l = this.$W,\n          m = this.$M,\n          y = this.$D,\n          M = \"set\" + (this.$u ? \"UTC\" : \"\");\n\n      switch (c) {\n        case a:\n          return f ? d(1, 0) : d(31, 11);\n\n        case u:\n          return f ? d(1, m) : d(0, m + 1);\n\n        case s:\n          var g = this.$locale().weekStart || 0,\n              v = (l < g ? l + 7 : l) - g;\n          return d(f ? y - v : y + (6 - v), m);\n\n        case i:\n        case \"date\":\n          return $(M + \"Hours\", 0);\n\n        case r:\n          return $(M + \"Minutes\", 1);\n\n        case n:\n          return $(M + \"Seconds\", 2);\n\n        case e:\n          return $(M + \"Milliseconds\", 3);\n\n        default:\n          return this.clone();\n      }\n    }, d.endOf = function (t) {\n      return this.startOf(t, !1);\n    }, d.$set = function (s, o) {\n      var h,\n          f = D.p(s),\n          c = \"set\" + (this.$u ? \"UTC\" : \"\"),\n          d = (h = {}, h[i] = c + \"Date\", h.date = c + \"Date\", h[u] = c + \"Month\", h[a] = c + \"FullYear\", h[r] = c + \"Hours\", h[n] = c + \"Minutes\", h[e] = c + \"Seconds\", h[t] = c + \"Milliseconds\", h)[f],\n          $ = f === i ? this.$D + (o - this.$W) : o;\n\n      if (f === u || f === a) {\n        var l = this.clone().set(\"date\", 1);\n        l.$d[d]($), l.init(), this.$d = l.set(\"date\", Math.min(this.$D, l.daysInMonth())).toDate();\n      } else d && this.$d[d]($);\n\n      return this.init(), this;\n    }, d.set = function (t, e) {\n      return this.clone().$set(t, e);\n    }, d.get = function (t) {\n      return this[D.p(t)]();\n    }, d.add = function (t, o) {\n      var h,\n          f = this;\n      t = Number(t);\n\n      var c = D.p(o),\n          d = function d(e) {\n        var n = g(f);\n        return D.w(n.date(n.date() + Math.round(e * t)), f);\n      };\n\n      if (c === u) return this.set(u, this.$M + t);\n      if (c === a) return this.set(a, this.$y + t);\n      if (c === i) return d(1);\n      if (c === s) return d(7);\n      var $ = (h = {}, h[n] = 6e4, h[r] = 36e5, h[e] = 1e3, h)[c] || 1,\n          l = this.$d.getTime() + t * $;\n      return D.w(l, this);\n    }, d.subtract = function (t, e) {\n      return this.add(-1 * t, e);\n    }, d.format = function (t) {\n      var e = this;\n      if (!this.isValid()) return \"Invalid Date\";\n\n      var n = t || \"YYYY-MM-DDTHH:mm:ssZ\",\n          r = D.z(this),\n          i = this.$locale(),\n          s = this.$H,\n          u = this.$m,\n          o = this.$M,\n          a = i.weekdays,\n          h = i.months,\n          c = function c(t, r, i, s) {\n        return t && (t[r] || t(e, n)) || i[r].substr(0, s);\n      },\n          d = function d(t) {\n        return D.s(s % 12 || 12, t, \"0\");\n      },\n          $ = i.meridiem || function (t, e, n) {\n        var r = t < 12 ? \"AM\" : \"PM\";\n        return n ? r.toLowerCase() : r;\n      },\n          l = {\n        YY: String(this.$y).slice(-2),\n        YYYY: this.$y,\n        M: o + 1,\n        MM: D.s(o + 1, 2, \"0\"),\n        MMM: c(i.monthsShort, o, h, 3),\n        MMMM: c(h, o),\n        D: this.$D,\n        DD: D.s(this.$D, 2, \"0\"),\n        d: String(this.$W),\n        dd: c(i.weekdaysMin, this.$W, a, 2),\n        ddd: c(i.weekdaysShort, this.$W, a, 3),\n        dddd: a[this.$W],\n        H: String(s),\n        HH: D.s(s, 2, \"0\"),\n        h: d(1),\n        hh: d(2),\n        a: $(s, u, !0),\n        A: $(s, u, !1),\n        m: String(u),\n        mm: D.s(u, 2, \"0\"),\n        s: String(this.$s),\n        ss: D.s(this.$s, 2, \"0\"),\n        SSS: D.s(this.$ms, 3, \"0\"),\n        Z: r\n      };\n\n      return n.replace(f, function (t, e) {\n        return e || l[t] || r.replace(\":\", \"\");\n      });\n    }, d.utcOffset = function () {\n      return 15 * -Math.round(this.$d.getTimezoneOffset() / 15);\n    }, d.diff = function (t, h, f) {\n      var c,\n          d = D.p(h),\n          $ = g(t),\n          l = 6e4 * ($.utcOffset() - this.utcOffset()),\n          m = this - $,\n          y = D.m(this, $);\n      return y = (c = {}, c[a] = y / 12, c[u] = y, c[o] = y / 3, c[s] = (m - l) / 6048e5, c[i] = (m - l) / 864e5, c[r] = m / 36e5, c[n] = m / 6e4, c[e] = m / 1e3, c)[d] || m, f ? y : D.a(y);\n    }, d.daysInMonth = function () {\n      return this.endOf(u).$D;\n    }, d.$locale = function () {\n      return m[this.$L];\n    }, d.locale = function (t, e) {\n      if (!t) return this.$L;\n      var n = this.clone(),\n          r = M(t, e, !0);\n      return r && (n.$L = r), n;\n    }, d.clone = function () {\n      return D.w(this.$d, this);\n    }, d.toDate = function () {\n      return new Date(this.valueOf());\n    }, d.toJSON = function () {\n      return this.isValid() ? this.toISOString() : null;\n    }, d.toISOString = function () {\n      return this.$d.toISOString();\n    }, d.toString = function () {\n      return this.$d.toUTCString();\n    }, c;\n  }();\n\n  return g.prototype = v.prototype, g.extend = function (t, e) {\n    return t(e, v, g), g;\n  }, g.locale = M, g.isDayjs = y, g.unix = function (t) {\n    return g(1e3 * t);\n  }, g.en = m[l], g.Ls = m, g;\n});","!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : e.dayjs_plugin_localizedFormat = t();\n}(this, function () {\n  \"use strict\";\n\n  return function (e, t, o) {\n    var n = t.prototype,\n        r = n.format,\n        M = {\n      LTS: \"h:mm:ss A\",\n      LT: \"h:mm A\",\n      L: \"MM/DD/YYYY\",\n      LL: \"MMMM D, YYYY\",\n      LLL: \"MMMM D, YYYY h:mm A\",\n      LLLL: \"dddd, MMMM D, YYYY h:mm A\"\n    };\n    o.en.formats = M;\n\n    n.format = function (e) {\n      void 0 === e && (e = \"YYYY-MM-DDTHH:mm:ssZ\");\n      var t = this.$locale().formats,\n          o = void 0 === t ? {} : t,\n          n = e.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g, function (e, t, n) {\n        var r = n && n.toUpperCase();\n        return t || o[n] || M[n] || o[r].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g, function (e, t, o) {\n          return t || o.slice(1);\n        });\n      });\n      return r.call(this, n);\n    };\n  };\n});","import { JsonTyped } from 'utils/json';\r\n\r\nexport type JsonRpcRequestBody = {\r\n    jsonrpc: `2.0`;\r\n    id: string;\r\n    method: string;\r\n    params: unknown;\r\n};\r\n\r\nexport type JsonRpcResponseBody = {\r\n    jsonrpc: `2.0`;\r\n    id: string;\r\n    result?: unknown;\r\n    error?: unknown;\r\n};\r\n\r\nexport class JsonRpcError extends Error {\r\n    constructor(public message: string, public data?: unknown, public innerError?: Error) { super(); }\r\n}\r\n\r\n\r\n// Api Endpoints (used in app)\r\nexport type JsonRpcApiMethodNames<T> = { [K in keyof T]: T[K] extends (...args: infer PARAMS) => Promise<infer R> ? K : never };\r\nexport type JsonRpcApiMethods<T> = { [K in keyof T]: T[K] extends (...args: infer PARAMS) => Promise<infer R> ? (...args: PARAMS) => Promise<R> : never };\r\n\r\n// JsonRpc 2.0 Spec\r\nexport type JsonRpcCoreClient = {\r\n    request: (data: JsonRpcRequestBody) => Promise<JsonRpcResponseBody>;\r\n};\r\n\r\n// JsonRpc 2.0 Batching\r\nexport type JsonRpcBatchClient = {\r\n    batchRequest: (batchData: JsonRpcRequestBody[]) => Promise<JsonRpcResponseBody[]>;\r\n};\r\n\r\n// With Session (Credentials)\r\nexport type JsonRpcSessionClient = {\r\n    sessionRequest: (sessionData: JsonRpcSessionRequestBody) => Promise<JsonRpcSessionResponseBody>;\r\n}\r\n\r\nexport type JsonRpcSessionToken = unknown & { __type: 'JsonRpcSessionToken' };\r\nexport type JsonRpcSessionToken_New = undefined | null | JsonRpcSessionToken | 'reset';\r\n\r\nexport type JsonRpcSessionRequestBody = {\r\n    batchRequests: JsonRpcRequestBody[];\r\n    sessionToken?: JsonRpcSessionToken;\r\n};\r\n\r\nexport type JsonRpcSessionResponseBody = {\r\n    batchResponses: JsonRpcResponseBody[];\r\n    newSessionToken?: JsonRpcSessionToken_New;\r\n};\r\n\r\n// Web: Client => Server\r\nexport type JsonRpcWebClient = {\r\n    webRequest: (serverUrl: string, bodyObj: JsonRpcSessionRequestBody)\r\n        => Promise<{ responseBodyObj: JsonRpcSessionResponseBody }>;\r\n}\r\n\r\n// The cookies are an alternative storage for the sessionToken (HttpOnly, Secure)\r\nexport type JsonRpcWebJsonServer = {\r\n    respond: (requestBodyJson: JsonTyped<JsonRpcSessionRequestBody>, requestCookieJson?: JsonTyped<JsonRpcSessionToken>)\r\n        => Promise<{ responseBodyJson: JsonTyped<JsonRpcSessionResponseBody>, responseCookieJson?: JsonTyped<JsonRpcSessionToken>, responseCookieReset?: boolean }>;\r\n}\r\n\r\nexport type JsonRpcWebServer = {\r\n    respond: (requestBodyObj: JsonRpcSessionRequestBody, requestCookieObj?: JsonRpcSessionToken)\r\n        => Promise<{ responseBodyObj: JsonRpcSessionResponseBody, responseCookieObj?: JsonRpcSessionToken_New }>;\r\n}\r\n\r\nexport type JsonRpcSessionServer = {\r\n    respond: (sessionData: JsonRpcSessionRequestBody)\r\n        => Promise<JsonRpcSessionResponseBody>;\r\n}\r\n\r\nexport type JsonRpcBatchServer<TContext> = {\r\n    respond: (batchData: JsonRpcRequestBody[], context: TContext)\r\n        => Promise<{ responses: JsonRpcResponseBody[], newSessionToken?: JsonRpcSessionToken_New }>;\r\n}\r\n\r\nexport type JsonRpcCoreServer<TContext> = {\r\n    respond: (data: JsonRpcRequestBody, context: TContext)\r\n        => Promise<{ response: JsonRpcResponseBody, newSessionToken?: JsonRpcSessionToken_New }>;\r\n}\r\n\r\nexport type JsonRpcApiServer<TContext> = {\r\n    respond: (method: string, params: unknown, context: TContext)\r\n        => Promise<{ responseData: unknown, newSessionToken?: JsonRpcSessionToken_New }>;\r\n}\r\n","import { JsonRpcRequestBody, JsonRpcResponseBody } from './types';\r\n\r\nlet _nextId = 1000;\r\n\r\nexport const encodeJsonRpcRequestBody = (method: string, params: unknown): JsonRpcRequestBody => {\r\n    const id = `${_nextId++}`;\r\n    const data = {\r\n        jsonrpc: `2.0`,\r\n        method,\r\n        params,\r\n        id,\r\n    } as const;\r\n    return data;\r\n};\r\n\r\nexport const decodeJsonRpcRequestBody = <T>(body: {} & unknown): JsonRpcRequestBody => {\r\n    const data = body as {\r\n        jsonrpc: `2.0`;\r\n        method: string;\r\n        params: T;\r\n        id: string;\r\n    };\r\n    return data;\r\n};\r\n\r\nexport const encodeJsonRpcResponseData = (id: string, result: unknown): JsonRpcResponseBody => {\r\n    return {\r\n        jsonrpc: `2.0`,\r\n        id,\r\n        result: result ?? {},\r\n    };\r\n};\r\n\r\nexport const encodeJsonRpcResponseData_error = (id: string, error: unknown): JsonRpcResponseBody => {\r\n    return {\r\n        jsonrpc: `2.0`,\r\n        id,\r\n        error: error ?? {},\r\n    };\r\n};\r\n\r\nexport const decodeJsonRpcResponseBody = <T>(body: {} & unknown): JsonRpcResponseBody => {\r\n    const data = body as {\r\n        jsonrpc: `2.0`;\r\n        id: string;\r\n        result?: T;\r\n        error?: unknown;\r\n    };\r\n    return data;\r\n};\r\n","export class FetchError extends Error {\r\n    constructor(public message: string, public data?: unknown, public innerError?: Error) { super(); }\r\n}\r\n\r\nconst fetchWithTimeout = (url: string, options: RequestInit, timeout = 15000): Promise<Response> => {\r\n    let timeoutId = 0 as unknown as ReturnType<typeof setTimeout>;\r\n\r\n    const pTimeout: Promise<Response> = new Promise((resolve, reject) => {\r\n        timeoutId = setTimeout(() => {\r\n            const errorInfo = { isTimeout: true, message: `Web Api Timeout`, error: new FetchError(`Web Api Timeout`), details: { url, options } };\r\n            reject(errorInfo);\r\n        }, timeout);\r\n    });\r\n\r\n    const pMain = (async () => {\r\n        const result = await fetch(url, options)\r\n            .catch(error => {\r\n                throw new FetchError(`Fetch Error`, { url }, error);\r\n            });\r\n\r\n        clearTimeout(timeoutId);\r\n        return result;\r\n    })();\r\n\r\n    return Promise.race([pTimeout, pMain]);\r\n};\r\n\r\nexport const fetchJsonPost = async <TResponse extends {}>(url: string, data: unknown): Promise<TResponse> => {\r\n\r\n    const body = JSON.stringify(data);\r\n    const reqData: RequestInit = {\r\n        method: `POST`,\r\n        headers: {\r\n            'Accept': `application/json`,\r\n            'Content-Type': `application/json`,\r\n            'Content-Length': `${body.length}`,\r\n        },\r\n        body,\r\n        // Include Cookies\r\n        credentials: `include`,\r\n        // POST is always no-cache\r\n        cache: `no-cache`,\r\n    };\r\n\r\n    const result = await fetchWithTimeout(url, reqData)\r\n        .catch((error) => {\r\n            throw new FetchError(`Request Failure`, { url, data }, error);\r\n        });\r\n\r\n    if (!result.ok) {\r\n        throw new FetchError(`Api Error`, {\r\n            data: (await result.json().catch((error) => {/* Ignore */ })) ?? {},\r\n            responseStatus: result.status,\r\n            request: { url, data },\r\n        });\r\n    }\r\n    const resultObj = await result.json()\r\n        .catch((error) => {\r\n            throw new FetchError(`Request Parse Failure`, { url, data }, error);\r\n        });\r\n\r\n    return resultObj as TResponse;\r\n};\r\n","import { toKeyValueObject } from 'utils/objects';\r\nimport { delay } from 'utils/delay';\r\nimport { JsonRpcCoreClient, JsonRpcApiMethodNames, JsonRpcApiMethods, JsonRpcError, JsonRpcBatchClient, JsonRpcRequestBody, JsonRpcResponseBody, JsonRpcSessionClient, JsonRpcSessionToken, JsonRpcWebClient, JsonRpcSessionResponseBody } from './types';\r\nimport { encodeJsonRpcRequestBody, decodeJsonRpcResponseBody } from './json-body';\r\nimport { fetchJsonPost } from './web/fetch-request';\r\n\r\nconst createJsonRpcApiCoreClient = <T>(config: { inner: JsonRpcCoreClient, apiMethodNames: JsonRpcApiMethodNames<T> }): JsonRpcApiMethods<T> => {\r\n    const methodRequests = Object.keys(config.apiMethodNames).map(k => ({\r\n        method: k,\r\n        execute: async (params: unknown) => {\r\n            const data = encodeJsonRpcRequestBody(k, params);\r\n            const response = await config.inner.request(data);\r\n            const result = decodeJsonRpcResponseBody(response);\r\n\r\n            if (result.error) {\r\n                throw new JsonRpcError(`JsonRpcClient Request Failed`, { error: result.error });\r\n            }\r\n\r\n            return result.result;\r\n        },\r\n    }));\r\n\r\n    const methods = toKeyValueObject(methodRequests.map(x => ({ key: x.method, value: x.execute })));\r\n    return methods as JsonRpcApiMethods<T>;\r\n};\r\n\r\nconst createJsonRpcCoreBatchClient = (config: { inner: JsonRpcBatchClient }): JsonRpcCoreClient => {\r\n    const batchTimeMs = 50;\r\n    let newRequests = [] as {\r\n        data: JsonRpcRequestBody;\r\n        promiseState: {\r\n            _resolve: (value: JsonRpcResponseBody) => void;\r\n            _reject: (value: unknown) => void;\r\n        };\r\n    }[];\r\n\r\n    const coreClient: JsonRpcCoreClient = {\r\n        request: async (data) => {\r\n            const promiseState = {\r\n                _resolve: null as null | ((value: JsonRpcResponseBody) => void),\r\n                _reject: null as null | ((value: unknown) => void),\r\n            };\r\n            const prom = new Promise<JsonRpcResponseBody>((resolve, reject) => {\r\n                promiseState._resolve = resolve;\r\n                promiseState._reject = reject;\r\n            });\r\n\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            newRequests.push({ data, promiseState: { _resolve: promiseState._resolve!, _reject: promiseState._reject! } });\r\n            await delay(batchTimeMs);\r\n            if (newRequests.length <= 0) { return prom; }\r\n\r\n            const batchRequests = newRequests;\r\n            newRequests = [];\r\n\r\n            const result = await (async () => {\r\n                try {\r\n                    return {\r\n                        batchResponses: await config.inner.batchRequest(batchRequests.map(x => x.data)),\r\n                    };\r\n                } catch (error) {\r\n                    return {\r\n                        error,\r\n                    };\r\n                }\r\n            })();\r\n\r\n            if (result.error) {\r\n                batchRequests.forEach(req => {\r\n                    req.promiseState._reject(new JsonRpcError(`Request Failed`, { request: req.data, batchRequests }));\r\n                });\r\n                return prom;\r\n            }\r\n            for (const req of batchRequests) {\r\n                const { batchResponses } = result;\r\n                const res = batchResponses?.find(x => x.id === req.data.id);\r\n                if (!res) {\r\n                    req.promiseState._reject(new JsonRpcError(`Batch Response is Missing`, { request: req.data, batchRequests, batchResponses }));\r\n                    // throw new JsonRpcError(`Batch Response is Missing`, { request: req.data, batchRequests, batchResponses });\r\n                    continue;\r\n                }\r\n                req.promiseState._resolve(res);\r\n            }\r\n\r\n            return prom;\r\n        },\r\n    };\r\n    return coreClient;\r\n};\r\n\r\nexport type JsonRpcSessionStorage = {\r\n    getSessionToken: () => Promise<JsonRpcSessionToken>;\r\n    setSessionToken: (sessionToken: JsonRpcSessionToken) => Promise<void>;\r\n    resetSessionToken: () => Promise<void>;\r\n};\r\nconst createJsonRpcBatchSessionClient = (config: { inner: JsonRpcSessionClient, sessionTokenStorage?: JsonRpcSessionStorage }): JsonRpcBatchClient => {\r\n    const batchClient: JsonRpcBatchClient = {\r\n        batchRequest: async (batchData) => {\r\n            const sessionToken = await config.sessionTokenStorage?.getSessionToken();\r\n            const response = await config.inner.sessionRequest({ batchRequests: batchData, sessionToken });\r\n            if (config.sessionTokenStorage) {\r\n                if (response.newSessionToken === `reset`) {\r\n                    await config.sessionTokenStorage.resetSessionToken();\r\n                }\r\n                else if (response.newSessionToken) {\r\n                    await config.sessionTokenStorage.setSessionToken(response.newSessionToken);\r\n                }\r\n            }\r\n            return response.batchResponses;\r\n        },\r\n    };\r\n    return batchClient;\r\n};\r\n\r\nconst createJsonRpcSessionWebClient = (config: { inner: JsonRpcWebClient, serverUrl: string }): JsonRpcSessionClient => {\r\n    const sessionClient: JsonRpcSessionClient = {\r\n        sessionRequest: async (sessionData) => {\r\n            const response = await config.inner.webRequest(config.serverUrl, sessionData);\r\n            return response.responseBodyObj;\r\n        },\r\n    };\r\n    return sessionClient;\r\n};\r\n\r\nexport const createJsonRpcClient = <T>(config: { serverUrl: string, sessionTokenStorage?: JsonRpcSessionStorage, apiMethodNames: JsonRpcApiMethodNames<T> }) => {\r\n    const webClient: JsonRpcWebClient = {\r\n        webRequest: async (serverUrl: string, reqBody: unknown) => {\r\n            const response = await fetchJsonPost<JsonRpcSessionResponseBody>(serverUrl, reqBody);\r\n            return { responseBodyObj: response };\r\n        },\r\n    };\r\n    const sessionClient = createJsonRpcSessionWebClient({ serverUrl: config.serverUrl, inner: webClient });\r\n    const batchClient = createJsonRpcBatchSessionClient({ inner: sessionClient, sessionTokenStorage: config.sessionTokenStorage });\r\n    const coreClient = createJsonRpcCoreBatchClient({ inner: batchClient });\r\n    const apiClient = createJsonRpcApiCoreClient<T>({ inner: coreClient, apiMethodNames: config.apiMethodNames });\r\n    return apiClient;\r\n};\r\n","import dayjs from 'dayjs';\r\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\r\n\r\ndayjs.extend(localizedFormat);\r\n\r\nexport const formatDate = (date: Date | number | string) => {\r\n    return dayjs(date).format(`L`);\r\n};\r\n","/* eslint-disable no-use-before-define */\r\n/* eslint-disable @typescript-eslint/no-use-before-define */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { theme } from 'themes/theme';\r\nimport { useAutoLoadingError } from 'utils-react/hooks';\r\nimport { C } from 'controls-react';\r\nimport { formatDate } from 'utils/dates';\r\nimport { PaymentMethodClientInfo, PaymentMethodStorageKey, PaymentProviderSavedPaymentMethodClientSetupToken, PaymentProviderSavedPaymentMethodClientToken, PaymentTransaction } from '../common/types';\r\nimport { createPaymentClientComponents_stripe } from '../providers/stripe/client/stripe-payment-react';\r\nimport { PaymentClientComponents, PaymentComponentStyle } from '../common/types-react';\r\n\r\nexport const createPaymentClientComponents = (params: { stripePublicKey: string }): PaymentClientComponents => {\r\n\r\n    const compStripe = createPaymentClientComponents_stripe(params);\r\n\r\n    const components: PaymentClientComponents = {\r\n        AppWrapperComponent: ({ children }) => {\r\n            if (!compStripe.AppWrapperComponent) { return (<>{children}</>); }\r\n            return (<compStripe.AppWrapperComponent>{children}</compStripe.AppWrapperComponent>);\r\n        },\r\n        PaymentMethodEntryComponent: (props) => {\r\n            return (\r\n                <compStripe.PaymentMethodEntryComponent {...props} />\r\n            );\r\n        },\r\n    };\r\n\r\n    return components;\r\n};\r\n\r\nexport type PaymentViewServerAccess = PaymentMethodViewServerAccess & PaymentHistoryViewServerAccess;\r\nexport const createPaymentClientComponents_extra = (params: { stripePublicKey: string, serverAccess: PaymentViewServerAccess }) => {\r\n    const comp = createPaymentClientComponents(params);\r\n    const compExtra = {\r\n        PaymentMethodView: (props: {}) => (<PaymentMethodView comp={comp} serverAccess={params.serverAccess} title='Payment Methods' />),\r\n        PaymentHistoryView: (props: {}) => (<PaymentHistoryView comp={comp} serverAccess={params.serverAccess} title='Payment History' />),\r\n    };\r\n\r\n    return {\r\n        ...comp,\r\n        ...compExtra,\r\n    };\r\n};\r\n\r\nexport type PaymentViewServerAccess_WithDebug = PaymentMethodViewServerAccess & PaymentHistoryViewServerAccess & PaymentDebugViewServerAccess;\r\nexport const createPaymentClientComponents_withDebug = (params: { stripePublicKey: string, serverAccess: PaymentViewServerAccess_WithDebug }) => {\r\n    const compExtra = createPaymentClientComponents_extra(params);\r\n    const compDebug = {\r\n        PaymentDebugView: (props: { onPurchase?: () => void }) => (<PaymentDebugView comp={compExtra} serverAccess={params.serverAccess} title='Payment Debug' onPurchase={props.onPurchase} />),\r\n    };\r\n\r\n    return {\r\n        ...compExtra,\r\n        ...compDebug,\r\n    };\r\n};\r\n\r\ntype PaymentMethodViewServerAccess = {\r\n    getPaymentMethods: () => Promise<PaymentMethodClientInfo[]>;\r\n    deletePaymentMethod: (key: PaymentMethodStorageKey) => Promise<void>;\r\n    onSetupPayment: () => Promise<PaymentProviderSavedPaymentMethodClientSetupToken>;\r\n    onPaymentMethodReady: (paymentMethodToken: PaymentProviderSavedPaymentMethodClientToken) => Promise<void>;\r\n};\r\nconst PaymentMethodView = (props: {\r\n    comp: PaymentClientComponents;\r\n    serverAccess: PaymentMethodViewServerAccess;\r\n    title: string;\r\n}) => {\r\n    const [style, setStyle] = useState({\r\n        textPadding: 4,\r\n        elementPadding: 4,\r\n        buttonAlignment: `right`,\r\n        borderRadius: 4,\r\n        borderColor: theme.colors.border,\r\n        backgroundColor: theme.colors.background_field,\r\n        textColor: theme.colors.text,\r\n        buttonText: `Save`,\r\n    } as PaymentComponentStyle);\r\n\r\n    const { loading, error, doWork } = useAutoLoadingError();\r\n\r\n    const [paymentMethods, setPaymentMethods] = useState(null as null | PaymentMethodClientInfo[]);\r\n    const populatePaymentMethods = () => doWork(async () => {\r\n        const result = await props.serverAccess.getPaymentMethods();\r\n        setPaymentMethods(result);\r\n    });\r\n\r\n    const deletePaymentMethod = (key: PaymentMethodStorageKey) => doWork(async () => {\r\n        await props.serverAccess.deletePaymentMethod(key);\r\n        populatePaymentMethods();\r\n    });\r\n\r\n    const [setupToken, setSetupToken] = useState(null as null | PaymentProviderSavedPaymentMethodClientSetupToken);\r\n    const setupPayment = () => doWork(async (stopIfObsolete) => {\r\n        const result = await props.serverAccess.onSetupPayment();\r\n        stopIfObsolete();\r\n        console.log(`setupPayment`, { result });\r\n        setSetupToken(result);\r\n    });\r\n\r\n    const onPaymentMethodReady = (paymentMethodToken: PaymentProviderSavedPaymentMethodClientToken) => doWork(async () => {\r\n        await props.serverAccess.onPaymentMethodReady(paymentMethodToken);\r\n        setSetupToken(null);\r\n        populatePaymentMethods();\r\n    });\r\n\r\n\r\n    useEffect(() => {\r\n        populatePaymentMethods();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <C.View_Form>\r\n                <C.Text_FormTitle>{props.title}</C.Text_FormTitle>\r\n                <C.Loading loading={loading} />\r\n                <C.ErrorBox error={error} />\r\n\r\n                {paymentMethods && paymentMethods.length > 0 && (\r\n                    <C.View_FormFields>\r\n                        {paymentMethods.map(x => (\r\n                            <C.View_FieldRow key={x.key}>\r\n                                <C.Text_FieldLabel>{x.title}</C.Text_FieldLabel>\r\n                                <C.Text_FieldLabel>{`Expires: ${(`${x.expiration.month}`).padStart(2, `0`)}/${x.expiration.year}`}</C.Text_FieldLabel>\r\n                                <C.Button_FieldInline onPress={() => deletePaymentMethod(x.key)}>Remove</C.Button_FieldInline>\r\n                            </C.View_FieldRow>\r\n                        ))}\r\n                    </C.View_FormFields>\r\n                )}\r\n                {!setupToken && <C.View_FormActionRow><C.Button_FormAction onPress={setupPayment}>Add Payment Method</C.Button_FormAction></C.View_FormActionRow>}\r\n                {setupToken && <props.comp.PaymentMethodEntryComponent style={style} paymentMethodSetupToken={setupToken} onPaymentMethodReady={onPaymentMethodReady} />}\r\n            </C.View_Form>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\ntype PaymentHistoryViewServerAccess = {\r\n    getPayments: () => Promise<PaymentTransaction[]>;\r\n};\r\nconst PaymentHistoryView = (props: {\r\n    comp: PaymentClientComponents;\r\n    serverAccess: PaymentHistoryViewServerAccess;\r\n    title: string;\r\n}) => {\r\n    const { loading, error, doWork } = useAutoLoadingError();\r\n\r\n    const [payments, setPayments] = useState(null as null | PaymentTransaction[]);\r\n    const populatePayments = () => doWork(async (stopIfObsolete) => {\r\n        const result = await props.serverAccess.getPayments();\r\n        stopIfObsolete();\r\n        setPayments(result);\r\n    });\r\n\r\n    useEffect(() => {\r\n        populatePayments();\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <C.View_Form>\r\n                <C.Text_FormTitle>{props.title}</C.Text_FormTitle>\r\n                <C.Loading loading={loading} />\r\n                <C.ErrorBox error={error} />\r\n                {payments && payments.length > 0 && (\r\n                    <C.View_FormFields>\r\n                        {payments.map(x => (\r\n                            <C.View_FieldRow key={`${x.created}`}>\r\n                                <C.Text_FieldLabel>{`Created: ${formatDate(x.created)}`}</C.Text_FieldLabel>\r\n                                <C.Text_FieldLabel>{`$${x.amount.usdCents / 100}`}</C.Text_FieldLabel>\r\n                            </C.View_FieldRow>\r\n                        ))}\r\n                    </C.View_FormFields>\r\n                )}\r\n            </C.View_Form>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\ntype PaymentDebugViewServerAccess = {\r\n    onMakePurchase: (amount: number) => Promise<void>;\r\n};\r\nconst PaymentDebugView = (props: {\r\n    comp: PaymentClientComponents;\r\n    serverAccess: PaymentDebugViewServerAccess;\r\n    title: string;\r\n    onPurchase?: () => void;\r\n}) => {\r\n    const { loading, error, doWork } = useAutoLoadingError();\r\n\r\n    const [purchaseAmount, setPurchaseAmount] = useState(100);\r\n    const makePurchase = () => doWork(async () => {\r\n        await props.serverAccess.onMakePurchase(purchaseAmount);\r\n        props.onPurchase?.();\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <C.View_Form>\r\n                <C.Text_FormTitle>Make Purchase</C.Text_FormTitle>\r\n                <C.Text_FormTitle>{props.title}</C.Text_FormTitle>\r\n                <C.Loading loading={loading} />\r\n                <C.ErrorBox error={error} />\r\n                <C.View_FormFields>\r\n                    <C.View_FieldRow>\r\n                        <C.Text_FieldLabel>Amount $</C.Text_FieldLabel>\r\n                        <C.Input_Currency value={purchaseAmount} onChange={(value) => setPurchaseAmount(value)} />\r\n                        <C.Button_FieldInline onPress={() => makePurchase()} >Purchase</C.Button_FieldInline>\r\n                    </C.View_FieldRow>\r\n                </C.View_FormFields>\r\n            </C.View_Form>\r\n        </>\r\n    );\r\n};\r\n","import { FullStackTestConfig } from './full-stack-test-config-types';\r\n\r\nexport const getFullStackTestConfig = async (): Promise<FullStackTestConfig> => {\r\n    const config = (await import(`./full-stack-test-config.secret`))?.fullStackTestConfig as FullStackTestConfig;\r\n    if (!config) {\r\n        throw new Error(`Create config file`);\r\n    }\r\n    return config;\r\n};\r\n","/* eslint-disable no-console */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { C } from 'controls-react';\r\nimport { createJsonRpcClient } from 'json-rpc/json-rpc-client-stack';\r\nimport { PaymentViewServerAccess_WithDebug, createPaymentClientComponents_withDebug } from '../client/payment-react';\r\nimport { PaymentProviderName, PaymentClientApi, PaymentMethodStorageKey } from '../common/types';\r\nimport { FullStackTestConfig } from './full-stack-test-config-types';\r\nimport { getFullStackTestConfig } from './full-stack-test-config';\r\n\r\nexport const PaymentFullStackTesterHost = (props: {}) => {\r\n\r\n    const [serverAccess, setServerAccess] = useState(null as null | PaymentViewServerAccess_WithDebug);\r\n    const [config, setConfig] = useState(null as null | FullStackTestConfig);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            const c = await getFullStackTestConfig();\r\n            setConfig(c);\r\n            const server = createJsonRpcClient<PaymentClientApi>({\r\n                serverUrl: c.serverUrl,\r\n                // Use Cookies\r\n                // sessionTokenStorage: {\r\n                //     getSessionToken: async () => { try { return JSON.parse(localStorage.PaymentFullStackTesterHost_Credentials); } catch{ return null; } },\r\n                //     setSessionToken: async (value) => { localStorage.PaymentFullStackTesterHost_Credentials = JSON.stringify(value); },\r\n                //     resetSessionToken: async () => { localStorage.PaymentFullStackTesterHost_Credentials = undefined; },\r\n                // },\r\n                apiMethodNames: {\r\n                    setupSavedPaymentMethod: `setupSavedPaymentMethod`,\r\n                    saveSavedPaymentMethod: `saveSavedPaymentMethod`,\r\n                    getSavedPaymentMethods: `getSavedPaymentMethods`,\r\n                    deleteSavedPaymentMethod: `deleteSavedPaymentMethod`,\r\n                    debug_triggerPayment: `debug_triggerPayment`,\r\n                    getPayments: `getPayments`,\r\n                },\r\n            });\r\n\r\n            const providerName = `stripe` as PaymentProviderName;\r\n            const access: PaymentViewServerAccess_WithDebug = {\r\n                onSetupPayment: async () => {\r\n                    console.log(`onSetupPayment START`);\r\n                    const result = await server.setupSavedPaymentMethod({ providerName });\r\n                    console.log(`onSetupPayment END`, { result });\r\n                    return result;\r\n                },\r\n                onPaymentMethodReady: async (token) => {\r\n                    console.log(`onPaymentMethodReady START`);\r\n                    const result = await server.saveSavedPaymentMethod({ providerName, paymentMethodClientToken: token });\r\n                    console.log(`onPaymentMethodReady END`, { result });\r\n                    return result;\r\n                },\r\n                getPaymentMethods: async () => {\r\n                    console.log(`getPaymentMethods START`);\r\n                    const result = await server.getSavedPaymentMethods();\r\n                    console.log(`getPaymentMethods END`, { result });\r\n                    return result;\r\n                },\r\n                deletePaymentMethod: async (key: PaymentMethodStorageKey) => {\r\n                    console.log(`deletePaymentMethod`);\r\n                    await server.deleteSavedPaymentMethod({ key });\r\n                },\r\n                getPayments: async () => {\r\n                    console.log(`getPayments START`);\r\n                    const result = await server.getPayments();\r\n                    console.log(`getPayments END`, { result });\r\n                    return result;\r\n                },\r\n\r\n                // Debug\r\n                onMakePurchase: async (amount: number) => {\r\n                    console.log(`onMakePurchase`);\r\n                    await server.debug_triggerPayment({ amount: { currency: `usd`, usdCents: Math.floor(amount * 100) } });\r\n                },\r\n            };\r\n\r\n            setServerAccess(access);\r\n        })();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            {(!config || !serverAccess) && (<div>Loading...</div>)}\r\n            {config && serverAccess && <PaymentFullStackTester config={config} serverAccess={serverAccess} />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const PaymentFullStackTester = (props: { config: FullStackTestConfig, serverAccess: PaymentViewServerAccess_WithDebug }) => {\r\n\r\n    const comp = createPaymentClientComponents_withDebug({ stripePublicKey: props.config.stripePublicKey, serverAccess: props.serverAccess });\r\n    const AppWrapperComponent = comp.AppWrapperComponent ?? (({ children }) => (<>{children}</>));\r\n\r\n    const [refreshId, setRefreshId] = useState(0);\r\n    const refresh = () => { setRefreshId(s => s + 1); };\r\n\r\n    return (\r\n        <AppWrapperComponent>\r\n            <C.View_Panel>\r\n                <C.View_Form>\r\n                    <C.Text_FormTitle>Page and Stuff...</C.Text_FormTitle>\r\n                </C.View_Form>\r\n                <comp.PaymentMethodView />\r\n                <comp.PaymentHistoryView />\r\n                <comp.PaymentDebugView onPurchase={refresh} />\r\n            </C.View_Panel>\r\n            {/* <TestControls /> */}\r\n        </AppWrapperComponent>\r\n    );\r\n};\r\n"],"sourceRoot":""}