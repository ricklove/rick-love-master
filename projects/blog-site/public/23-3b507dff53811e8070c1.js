(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[23],{lqNZ:function(e,o,t){"use strict";t.r(o),t.d(o,"EducationalGame_MultiplesSnake",(function(){return f}));t("yIC7"),t("p+GS"),t("dtAy"),t("4oWw"),t("nruA"),t("LnO1"),t("XjK0"),t("SCO9"),t("PN9k");var n=t("ERkP"),r=t.n(n),i=t("DTYs"),l=t("hsFx"),a=t("4cHy"),c=t("rTbz"),s=t("kktX");function u(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,o){if(!e)return;if("string"==typeof e)return m(e,o);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,o)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,n=new Array(o);t<o;t++)n[t]=e[t];return n}var d=Object(c.a)({storageKey:"MultiplesSnakeLeaderboard",sortKey:function(e){return e.score},scoreColumns:[{name:"Time",getValue:function(e){return""+(e.timeMs/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})}},{name:"Score",getValue:function(e){return""+e.score}}]}),f=function(e){var o,t=Object(n.useState)({key:0,startTime:Date.now(),gameOverTime:void 0,score:0}),l=t[0],a=t[1],c=Object(n.useState)(y()),u=c[0],m=c[1],f=Object(n.useState)(null),w=f[0],g=f[1],h=Object(n.useRef)(u),E=d.useLeaderboard({getScore:function(){var e;return{score:l.score,timeMs:(null!==(e=l.gameOverTime)&&void 0!==e?e:Date.now())-l.startTime}}}),F=function(){a((function(e){return Object.assign(Object.assign({},e),{},{gameOverTime:Date.now(),key:e.key+1})}))},x=function(e){var o=Object.assign({},h.current);o.body.push({position:o.player.position});var t=o.columns[o.player.position.col].cells[o.player.position.row];a((function(e){return Object.assign(Object.assign({},e),{},{score:e.score+t.value})})),o.player.position=e;var n=o.columns[o.player.position.col].cells[o.player.position.row];return"body"===n.state?(o.isGameOver=!0,v(o),m(o),void F()):(s.a.get().feed(),b(o),o.body.length+1===p*p?(o.isGameWon=!0,a((function(e){return Object.assign(Object.assign({},e),{},{score:e.score+n.value})})),v(o),m(o),void F()):(m(o),void setTimeout((function(){T(o)}),100)))},T=function(e){var o=O(e,x);g(o)};return Object(n.useEffect)((function(){T(u)}),[]),h.current=u,r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{style:{marginTop:50,marginBottom:150,padding:2,alignItems:"center"}},r.a.createElement(i.h,{style:{width:292}},r.a.createElement(j,{gameScore:l}),r.a.createElement(C,{gameBoard:u,focus:null!==(o=u.player.position)&&void 0!==o?o:{col:0,row:0}}),w&&!l.gameOverTime&&r.a.createElement(S,{gameInput:w}),r.a.createElement(E.LeaderboardArea,{gameOver:!!l.gameOverTime,onScoreSaved:function(){var e=y();a({key:0,startTime:Date.now(),gameOverTime:void 0,score:0}),m(e),T(e)}}))))},p=12,y=function(){var e={key:0,isGameOver:!1,isGameWon:!1,maxTimes:p,columns:u(new Array(p)).map((function(e,o){return{col:o,cells:u(new Array(p)).map((function(e,t){return{col:o,row:t,value:(o+1)*(t+1),state:"blank",bodyIndex:0,connected:{t:!1,b:!1,l:!1,r:!1}}}))}})),player:{position:{col:Object(a.a)(p),row:Object(a.a)(p)}},body:[]};return v(e),e},b=function(e){v(e),v(e)},v=function(e){var o=e;o.key+=1,o.columns.forEach((function(e){return e.cells.forEach((function(e){var o=e;"body"===o.state&&(o.state="blank"),"player"===o.state&&(o.state="body"),o.connected={t:!1,b:!1,l:!1,r:!1}}))}));var t=function(e,o,t){return{t:e.position.col===(null==o?void 0:o.position.col)&&e.position.row<(null==o?void 0:o.position.row)||e.position.col===(null==t?void 0:t.position.col)&&e.position.row<(null==t?void 0:t.position.row),b:e.position.col===(null==o?void 0:o.position.col)&&e.position.row>(null==o?void 0:o.position.row)||e.position.col===(null==t?void 0:t.position.col)&&e.position.row>(null==t?void 0:t.position.row),l:e.position.row===(null==o?void 0:o.position.row)&&e.position.col>(null==o?void 0:o.position.col)||e.position.row===(null==t?void 0:t.position.row)&&e.position.col>(null==t?void 0:t.position.col),r:e.position.row===(null==o?void 0:o.position.row)&&e.position.col<(null==o?void 0:o.position.col)||e.position.row===(null==t?void 0:t.position.row)&&e.position.col<(null==t?void 0:t.position.col)}};o.body.forEach((function(e,n){var r;w(o,e.position,"body",o.body.length-n,t(e,o.body[n-1],null!==(r=o.body[n+1])&&void 0!==r?r:o.player))})),w(o,o.player.position,"player",0,t(o.player,o.body[o.body.length-1],void 0))},w=function(e,o,t,n,r){var i=e;i.columns[o.col].cells[o.row].state=t,i.columns[o.col].cells[o.row].bodyIndex=n,i.columns[o.col].cells[o.row].connected=r,i.key+=1},g={cellView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.75)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},focusCellView:{width:24,height:24,borderWidth:1,borderColor:"#66FF66",borderStyle:"solid",justifyContent:"center",alignItems:"center"},cellHeaderView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.5)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},focusCellHeaderView:{width:24,height:24,backgroundColor:"rgba(0,0,0,0.5)",borderWidth:1,borderColor:"#111133",borderStyle:"solid",justifyContent:"center",alignItems:"center"},cellText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12},cellHeaderText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#333300"},focusCellHeaderText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:12,color:"#FFFF00"}},h=function(e,o,t){return{borderTopColor:o.connected.t?"transparent":g.focusCellView.borderColor,borderBottomColor:o.connected.b?"transparent":g.focusCellView.borderColor,borderLeftColor:o.connected.l?"transparent":g.focusCellView.borderColor,borderRightColor:o.connected.r?"transparent":g.focusCellView.borderColor,borderWidth:5*(.4+(e-o.bodyIndex)%10/10*.6)}},C=function(e){var o=e.gameBoard,t=e.focus,l=Object(n.useState)(0),a=l[0],c=l[1];return Object(n.useEffect)((function(){var e=setInterval((function(){c((function(e){return e+1}))}),500);return function(){return clearInterval(e)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{style:{flexDirection:"row"}},r.a.createElement(i.h,{style:{flexDirection:"column-reverse"}},r.a.createElement(i.h,{style:g.focusCellHeaderView},r.a.createElement(i.e,{style:g.focusCellHeaderText},"x")),o.columns[0].cells.map((function(e){return r.a.createElement(i.h,{key:e.row,style:t.row===e.row?g.focusCellHeaderView:g.cellHeaderView},r.a.createElement(i.e,{style:t.row===e.row?g.focusCellHeaderText:g.cellHeaderText},""+(e.row+1)))}))),o.columns.map((function(e){return r.a.createElement(i.h,{key:e.col,style:{flexDirection:"column-reverse"}},r.a.createElement(i.h,{style:t.col===e.col?g.focusCellHeaderView:g.cellHeaderView},r.a.createElement(i.e,{style:t.col===e.col?g.focusCellHeaderText:g.cellHeaderText},""+(e.col+1))),e.cells.map((function(e){return r.a.createElement(i.h,{key:e.row,style:"blank"!==e.state?[g.focusCellView,h(a,e,o.body.length)]:g.cellView},r.a.createElement(i.e,{style:g.cellText},function(e,o,t){return"body"===e.state?""+e.value:"player"===e.state&&t?"ðŸ˜Ž":"player"===e.state&&o?"ðŸ’€":"player"===e.state?"ðŸ˜€":""}(e,o.isGameOver,o.isGameWon)))})))}))))},O=function(e,o){var t,n,r,i,a=e.player,c=[null===(t=e.columns[a.position.col+0])||void 0===t?void 0:t.cells[a.position.row+1],null===(n=e.columns[a.position.col+0])||void 0===n?void 0:n.cells[a.position.row-1],null===(r=e.columns[a.position.col+1])||void 0===r?void 0:r.cells[a.position.row+0],null===(i=e.columns[a.position.col-1])||void 0===i?void 0:i.cells[a.position.row+0]].filter((function(e){return e})),s=a.position.col===a.position.row,u=c.map((function(e){return{key:e.row+" "+e.col,text:e.value+(s&&a.position.col===e.col?"â†•":s&&a.position.row===e.row?"â†”":""),onPress:function(){return o(e)}}}));return{key:""+e.key,buttons:Object(l.e)(u)}},E={outerContainer:{height:150},container:{flexDirection:"row",justifyContent:"space-around",margin:16},buttonView:{width:48,height:48,borderWidth:2,borderColor:"#6666FF",borderStyle:"solid",justifyContent:"center",alignItems:"center"},buttonText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:24,color:"#FFFFFF"}},S=function(e){var o=e.gameInput,t=Object(n.useState)(0),l=t[0],a=t[1];return Object(n.useEffect)((function(){a(100);var e=setInterval((function(){a((function(e){return Math.max(0,e-1)}))}),50);return function(){return clearInterval(e)}}),[o.key]),console.log("GameInput",{gameInput:o}),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{style:E.outerContainer},r.a.createElement(i.h,{style:[E.container,{transform:"translate(0px,"+l+"px)"}]},o.buttons.map((function(e){return r.a.createElement(i.g,{key:e.key,onPress:e.onPress},r.a.createElement(i.h,{style:E.buttonView},r.a.createElement(i.e,{style:E.buttonText},e.text)))})))))},F={container:{flex:1,alignItems:"center",margin:16},text:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FFFF00"},mistakesText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:14,color:"#FF6666"}},j=function(e){var o=e.gameScore,t=Object(n.useState)(""),l=(t[0],t[1]),a=Object(n.useState)(""),c=a[0],s=a[1];return Object(n.useEffect)((function(){var e=setInterval((function(){if(s(""+o.score),o.gameOverTime){var e=o.gameOverTime-o.startTime;l((function(o){return(e/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})+" seconds"}))}else{var t=Date.now()-o.startTime;l((function(e){return(t/1e3).toLocaleString(void 0,{minimumFractionDigits:1,maximumFractionDigits:1})+" seconds"}))}}),100);return function(){return clearInterval(e)}}),[o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{style:F.container},r.a.createElement(i.h,null,r.a.createElement(i.e,{style:F.text},c))))}}}]);
//# sourceMappingURL=23-3b507dff53811e8070c1.js.map