{"version":3,"sources":["../src/vr-test-03-bare.tsx","../src/bare/00-bare-three.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/naming-convention */\r\nimport React, { useEffect } from 'react';\r\nimport { createBareThreeScene } from './bare/00-bare-three';\r\n\r\nexport const VrTestGame = () => {\r\n  useEffect(() => {\r\n    const scene = createBareThreeScene();\r\n    return () => scene.dispose();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div style={{ position: `relative` }}>\r\n        <div style={{ position: `absolute`, bottom: 0, top: 0, left: 0, right: 0, background: `#000000` }} />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import * as THREE from 'three';\r\nimport { Mesh, Object3D } from 'three';\r\n\r\nexport const createBareThreeScene = () => {\r\n  let camera: THREE.PerspectiveCamera;\r\n  let scene: THREE.Scene;\r\n  let renderer: THREE.WebGLRenderer;\r\n\r\n  function init() {\r\n    camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 2000);\r\n    camera.position.y = 400;\r\n\r\n    scene = new THREE.Scene();\r\n\r\n    let object;\r\n\r\n    const ambientLight = new THREE.AmbientLight(0xcccccc, 0.4);\r\n    scene.add(ambientLight);\r\n\r\n    const pointLight = new THREE.PointLight(0xffffff, 0.8);\r\n    camera.add(pointLight);\r\n    scene.add(camera);\r\n\r\n    const map = new THREE.TextureLoader().load(`textures/uv_grid_opengl.jpg`);\r\n    map.wrapS = map.wrapT = THREE.RepeatWrapping;\r\n    map.anisotropy = 16;\r\n\r\n    const material = new THREE.MeshPhongMaterial({ map: map, side: THREE.DoubleSide });\r\n\r\n    //\r\n\r\n    object = new THREE.Mesh(new THREE.SphereGeometry(75, 20, 10), material);\r\n    object.position.set(-300, 0, 200);\r\n    scene.add(object);\r\n\r\n    object = new THREE.Mesh(new THREE.IcosahedronGeometry(75, 1), material);\r\n    object.position.set(-100, 0, 200);\r\n    scene.add(object);\r\n\r\n    object = new THREE.Mesh(new THREE.OctahedronGeometry(75, 2), material);\r\n    object.position.set(100, 0, 200);\r\n    scene.add(object);\r\n\r\n    object = new THREE.Mesh(new THREE.TetrahedronGeometry(75, 0), material);\r\n    object.position.set(300, 0, 200);\r\n    scene.add(object);\r\n\r\n    //\r\n\r\n    object = new THREE.Mesh(new THREE.PlaneGeometry(100, 100, 4, 4), material);\r\n    object.position.set(-300, 0, 0);\r\n    scene.add(object);\r\n\r\n    object = new THREE.Mesh(new THREE.BoxGeometry(100, 100, 100, 4, 4, 4), material);\r\n    object.position.set(-100, 0, 0);\r\n    scene.add(object);\r\n\r\n    object = new THREE.Mesh(new THREE.CircleGeometry(50, 20, 0, Math.PI * 2), material);\r\n    object.position.set(100, 0, 0);\r\n    scene.add(object);\r\n\r\n    object = new THREE.Mesh(new THREE.RingGeometry(10, 50, 20, 5, 0, Math.PI * 2), material);\r\n    object.position.set(300, 0, 0);\r\n    scene.add(object);\r\n\r\n    //\r\n\r\n    object = new THREE.Mesh(new THREE.CylinderGeometry(25, 75, 100, 40, 5), material);\r\n    object.position.set(-300, 0, -200);\r\n    scene.add(object);\r\n\r\n    const points = [];\r\n\r\n    for (let i = 0; i < 50; i++) {\r\n      points.push(new THREE.Vector2(Math.sin(i * 0.2) * Math.sin(i * 0.1) * 15 + 50, (i - 5) * 2));\r\n    }\r\n\r\n    object = new THREE.Mesh(new THREE.LatheGeometry(points, 20), material);\r\n    object.position.set(-100, 0, -200);\r\n    scene.add(object);\r\n\r\n    object = new THREE.Mesh(new THREE.TorusGeometry(50, 20, 20, 20), material);\r\n    object.position.set(100, 0, -200);\r\n    scene.add(object);\r\n\r\n    object = new THREE.Mesh(new THREE.TorusKnotGeometry(50, 10, 50, 20), material);\r\n    object.position.set(300, 0, -200);\r\n    scene.add(object);\r\n\r\n    //\r\n\r\n    renderer = new THREE.WebGLRenderer({ antialias: true });\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    document.body.appendChild(renderer.domElement);\r\n\r\n    //   stats = new Stats();\r\n    //   document.body.appendChild(stats.dom);\r\n\r\n    //\r\n\r\n    window.addEventListener(`resize`, onWindowResize);\r\n  }\r\n\r\n  function onWindowResize() {\r\n    camera.aspect = window.innerWidth / window.innerHeight;\r\n    camera.updateProjectionMatrix();\r\n\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n  }\r\n\r\n  //\r\n\r\n  let stop = false;\r\n  function animate() {\r\n    if (stop) {\r\n      return;\r\n    }\r\n    requestAnimationFrame(animate);\r\n\r\n    render();\r\n    //   stats.update();\r\n  }\r\n\r\n  let time = Date.now() * 0.0001;\r\n\r\n  const traverse = (objectRaw: Object3D) => {\r\n    const object = objectRaw as Mesh;\r\n    if (object.isMesh === true) {\r\n      object.rotation.x = time * 5;\r\n      object.rotation.y = time * 2.5;\r\n    }\r\n  };\r\n\r\n  function render() {\r\n    time = Date.now() * 0.0001;\r\n\r\n    camera.position.x = Math.cos(time) * 800;\r\n    camera.position.z = Math.sin(time) * 800;\r\n    camera.lookAt(scene.position);\r\n\r\n    scene.traverse(traverse);\r\n    renderer.render(scene, camera);\r\n  }\r\n\r\n  init();\r\n  animate();\r\n\r\n  return {\r\n    dispose: () => {\r\n      stop = true;\r\n      window.removeEventListener(`resize`, onWindowResize);\r\n      document.body.removeChild(renderer.domElement);\r\n      renderer.dispose();\r\n      scene.clear();\r\n    },\r\n  };\r\n};\r\n"],"mappings":"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","names":[]}