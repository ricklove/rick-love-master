{"version":3,"sources":["project/219193129202414/service.ts","project/219193129202414/todo.tsx","project/219193129202414/hooks.ts","project/219193129202414/app.tsx","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"names":["delay","timeMs","Promise","resolve","setTimeout","simulateNetwork","a","apiService","loadData","json","localStorage","getItem","JSON","parse","saveData","data","setItem","stringify","styles","container","padding","backgroundColor","color","itemContainer","margin","row","display","flex","flexDirection","alignItems","flex1","button","createNewTodoItem","key","Date","now","Math","random","text","isDone","TodoList","props","useState","items","setItems","isMounted","useRef","useEffect","current","loading","error","setLoadingError","doWork","work","options","message","messageIfError","innerError","useAsyncWorker","checkMounted","result","changeItem","value","s","map","x","deleteItem","filter","style","onClick","item","onChange","onDelete","TodoItem","isEditing","setIsEditing","itemText","setItemText","changeText","e","preventDefault","type","autoFocus","target","onBlur","onKeyDown","App","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","_defineProperty","obj","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties"],"mappings":"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","file":"static/js/3.71ff1db9.chunk.js","sourcesContent":["import { TodoData } from './types';\n\nconst delay = (timeMs = 0) => {\n    return new Promise<void>((resolve) => {\n        setTimeout(resolve, timeMs);\n    });\n};\n\nconst simulateNetwork = async () => {\n    await delay(250);\n};\n\n/** Create a mock api service that uses localStorage and simulates a network delay */\nconst createApiService = () => {\n\n    const DATA_KEY = `todo`;\n\n    const service = {\n        loadData: async () => {\n            await simulateNetwork();\n            try {\n                const json = localStorage.getItem(DATA_KEY);\n                if (!json) { return null; }\n                return JSON.parse(json) as TodoData;\n            } catch {\n                return null;\n            }\n        },\n        saveData: async (data: TodoData) => {\n            await simulateNetwork();\n            localStorage.setItem(DATA_KEY, JSON.stringify(data));\n        },\n    };\n    return service;\n};\n\nexport const apiService = createApiService();\n","import React, { useEffect, useState } from 'react';\nimport { useAsyncWorker } from './hooks';\nimport { apiService } from './service';\nimport { TodoItemData } from './types';\n\nconst styles = {\n    container: {\n        padding: 4,\n        backgroundColor: `#000000`,\n        color: `#FFFFFF`,\n    },\n    itemContainer: {\n        margin: 4,\n        padding: 4,\n        backgroundColor: `#333333`,\n        color: `#FFFFFF`,\n    },\n    row: {\n        display: `flex`,\n        flex: 1,\n        flexDirection: `row`,\n        alignItems: `center`,\n    },\n    flex1: {\n        display: `flex`,\n        flex: 1,\n    },\n    button: {\n        margin: 4,\n        padding: 8,\n        backgroundColor: `#111111`,\n    },\n} as const;\n\nconst getUniqueKey = () => {\n    return `${Date.now()}:${Math.random()}`;\n};\nconst createNewTodoItem = () => {\n    return { key: getUniqueKey(), text: `New Task`, isDone: false };\n};\n\nexport const TodoList = (props: {}) => {\n\n    const [items, setItems] = useState([] as TodoItemData[]);\n    const { loading, error, doWork } = useAsyncWorker();\n\n    useEffect(() => {\n        loadData();\n    }, []);\n\n    const loadData = () => {\n        doWork(async (checkMounted) => {\n            const result = await apiService.loadData();\n            if (!checkMounted()) { return; }\n\n            setItems(result?.items ?? [createNewTodoItem()]);\n        }, { messageIfError: `Failed to Load Data` });\n    };\n\n    const saveData = () => {\n        doWork(async () => {\n            await apiService.saveData({ items });\n        }, { messageIfError: `Failed to Save Data` });\n    };\n\n    const changeItem = (value: TodoItemData) => {\n        setItems(s => s.map(x => x.key === value.key ? value : x));\n    };\n    const addItem = () => {\n        setItems(s => [...s, createNewTodoItem()]);\n    };\n    const deleteItem = (value: TodoItemData) => {\n        setItems(s => s.filter(x => x.key !== value.key));\n    };\n\n    if (error) {\n        return (\n            <div style={styles.container}>\n                <div style={styles.row}>\n                    <span>{`❗ ${error.message}`}</span>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div style={styles.container}>\n            {loading && (\n                <div style={styles.row}>\n                    <span>{`🕒 Loading`}</span>\n                </div>\n            )}\n            <div style={styles.row}>\n                <div style={styles.flex1} />\n                <div style={styles.button} onClick={loadData} >\n                    <span>{`💽 Reload`}</span>\n                </div>\n                <div style={styles.button} onClick={saveData} >\n                    <span>{`💾 Save`}</span>\n                </div>\n            </div>\n            {items.map(x => (\n                <TodoItem key={x.key} item={x} onChange={changeItem} onDelete={deleteItem} />\n            ))}\n            <div style={styles.row}>\n                <div style={styles.button} onClick={addItem} >\n                    <span>{`➕ Add`}</span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\nconst TodoItem = (props: { item: TodoItemData, onChange: (value: TodoItemData) => void, onDelete: (value: TodoItemData) => void }) => {\n\n    const [isEditing, setIsEditing] = useState(false);\n    const [itemText, setItemText] = useState(props.item.text);\n    const changeText = () => {\n        setIsEditing(false);\n        props.onChange({ ...props.item, text: itemText });\n    };\n    const toggleDone = () => {\n        props.onChange({ ...props.item, isDone: !props.item.isDone });\n    };\n\n    return (\n        <div style={styles.itemContainer}>\n            {!isEditing && (\n                <div style={styles.row} onClick={toggleDone}>\n                    <div>\n                        <span>{props.item.isDone ? `✔ 🐱‍🏍 ` : `◻ 😾 `}</span>\n                    </div>\n                    <div style={styles.flex1}>\n                        <span>{itemText}</span>\n                    </div>\n                    <div style={styles.button}\n                        onClick={(e) => { e.preventDefault(); setIsEditing(true); }}\n                    >\n                        <span>{`✏ Edit`}</span>\n                    </div>\n                    <div style={styles.button}\n                        onClick={(e) => { e.preventDefault(); props.onDelete(props.item); }}\n                    >\n                        <span>{`❌ Delete`}</span>\n                    </div>\n                </div>\n            )}\n            {isEditing && (\n                <div style={styles.row}>\n                    <input style={styles.flex1} type='text' value={itemText}\n                        autoFocus\n                        onChange={e => setItemText(e.target.value)}\n                        onBlur={e => { e.preventDefault(); changeText(); }}\n                        onKeyDown={e => { if (e.key === `Enter`) { e.preventDefault(); changeText(); } }}\n                    />\n                    <div style={styles.button} onClick={changeText}>\n                        <span>{`✔ Done`}</span>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n","import { useEffect, useRef, useState } from 'react';\n\nexport const useAsyncWorker = () => {\n    const isMounted = useRef(true);\n\n    useEffect(() => {\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n\n    const [{ loading, error }, setLoadingError] = useState({ loading: false, error: null as null | { message: string, innerError: unknown } });\n\n    const doWork = (work: (checkMounted: () => boolean) => Promise<void>, options?: { messageIfError?: string }) => {\n        (async () => {\n            if (!isMounted.current) { return; }\n            setLoadingError({ loading: true, error: null });\n\n            try {\n                await work(() => isMounted.current);\n                if (!isMounted.current) { return; }\n                setLoadingError({ loading: false, error: null });\n            } catch (err) {\n                setLoadingError({ loading: false, error: { message: options?.messageIfError ?? `Error`, innerError: err } });\n            }\n        })();\n    };\n\n    return {\n        loading,\n        error,\n        doWork,\n    };\n};\n","import React from 'react';\nimport { TodoList } from './todo';\n\nexport const App = (props: {}) => {\n    return (\n        <TodoList />\n    );\n};","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}"],"sourceRoot":""}